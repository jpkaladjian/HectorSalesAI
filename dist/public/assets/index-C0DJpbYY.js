var pQ=Object.defineProperty;var QE=e=>{throw TypeError(e)};var gQ=(e,t,n)=>t in e?pQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ae=(e,t,n)=>gQ(e,typeof t!="symbol"?t+"":t,n),s_=(e,t,n)=>t.has(e)||QE("Cannot "+n);var te=(e,t,n)=>(s_(e,t,"read from private field"),n?n.call(e):t.get(e)),Nt=(e,t,n)=>t.has(e)?QE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),tt=(e,t,n,s)=>(s_(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Ut=(e,t,n)=>(s_(e,t,"access private method"),n);var fx=(e,t,n,s)=>({set _(i){tt(e,t,i,n)},get _(){return te(e,t,s)}});function xQ(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function on(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var G3={exports:{}},qb={},Z3={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hg=Symbol.for("react.element"),vQ=Symbol.for("react.portal"),yQ=Symbol.for("react.fragment"),bQ=Symbol.for("react.strict_mode"),jQ=Symbol.for("react.profiler"),_Q=Symbol.for("react.provider"),wQ=Symbol.for("react.context"),NQ=Symbol.for("react.forward_ref"),SQ=Symbol.for("react.suspense"),CQ=Symbol.for("react.memo"),PQ=Symbol.for("react.lazy"),YE=Symbol.iterator;function AQ(e){return e===null||typeof e!="object"?null:(e=YE&&e[YE]||e["@@iterator"],typeof e=="function"?e:null)}var Q3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y3=Object.assign,X3={};function eh(e,t,n){this.props=e,this.context=t,this.refs=X3,this.updater=n||Q3}eh.prototype.isReactComponent={};eh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};eh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function J3(){}J3.prototype=eh.prototype;function KS(e,t,n){this.props=e,this.context=t,this.refs=X3,this.updater=n||Q3}var GS=KS.prototype=new J3;GS.constructor=KS;Y3(GS,eh.prototype);GS.isPureReactComponent=!0;var XE=Array.isArray,e5=Object.prototype.hasOwnProperty,ZS={current:null},t5={key:!0,ref:!0,__self:!0,__source:!0};function n5(e,t,n){var s,i={},a=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)e5.call(t,s)&&!t5.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:hg,type:e,key:a,ref:o,props:i,_owner:ZS.current}}function EQ(e,t){return{$$typeof:hg,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function QS(e){return typeof e=="object"&&e!==null&&e.$$typeof===hg}function TQ(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var JE=/\/+/g;function i_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?TQ(""+e.key):t.toString(36)}function ov(e,t,n,s,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case hg:case vQ:o=!0}}if(o)return o=e,i=i(o),e=s===""?"."+i_(o,0):s,XE(i)?(n="",e!=null&&(n=e.replace(JE,"$&/")+"/"),ov(i,t,n,"",function(d){return d})):i!=null&&(QS(i)&&(i=EQ(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(JE,"$&/")+"/")+e)),t.push(i)),1;if(o=0,s=s===""?".":s+":",XE(e))for(var l=0;l<e.length;l++){a=e[l];var c=s+i_(a,l);o+=ov(a,t,n,c,i)}else if(c=AQ(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=s+i_(a,l++),o+=ov(a,t,n,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function hx(e,t,n){if(e==null)return e;var s=[],i=0;return ov(e,s,"","",function(a){return t.call(n,a,i++)}),s}function kQ(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Cs={current:null},lv={transition:null},OQ={ReactCurrentDispatcher:Cs,ReactCurrentBatchConfig:lv,ReactCurrentOwner:ZS};function r5(){throw Error("act(...) is not supported in production builds of React.")}Qt.Children={map:hx,forEach:function(e,t,n){hx(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return hx(e,function(){t++}),t},toArray:function(e){return hx(e,function(t){return t})||[]},only:function(e){if(!QS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qt.Component=eh;Qt.Fragment=yQ;Qt.Profiler=jQ;Qt.PureComponent=KS;Qt.StrictMode=bQ;Qt.Suspense=SQ;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OQ;Qt.act=r5;Qt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Y3({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=ZS.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)e5.call(t,c)&&!t5.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:hg,type:e.type,key:i,ref:a,props:s,_owner:o}};Qt.createContext=function(e){return e={$$typeof:wQ,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_Q,_context:e},e.Consumer=e};Qt.createElement=n5;Qt.createFactory=function(e){var t=n5.bind(null,e);return t.type=e,t};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(e){return{$$typeof:NQ,render:e}};Qt.isValidElement=QS;Qt.lazy=function(e){return{$$typeof:PQ,_payload:{_status:-1,_result:e},_init:kQ}};Qt.memo=function(e,t){return{$$typeof:CQ,type:e,compare:t===void 0?null:t}};Qt.startTransition=function(e){var t=lv.transition;lv.transition={};try{e()}finally{lv.transition=t}};Qt.unstable_act=r5;Qt.useCallback=function(e,t){return Cs.current.useCallback(e,t)};Qt.useContext=function(e){return Cs.current.useContext(e)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(e){return Cs.current.useDeferredValue(e)};Qt.useEffect=function(e,t){return Cs.current.useEffect(e,t)};Qt.useId=function(){return Cs.current.useId()};Qt.useImperativeHandle=function(e,t,n){return Cs.current.useImperativeHandle(e,t,n)};Qt.useInsertionEffect=function(e,t){return Cs.current.useInsertionEffect(e,t)};Qt.useLayoutEffect=function(e,t){return Cs.current.useLayoutEffect(e,t)};Qt.useMemo=function(e,t){return Cs.current.useMemo(e,t)};Qt.useReducer=function(e,t,n){return Cs.current.useReducer(e,t,n)};Qt.useRef=function(e){return Cs.current.useRef(e)};Qt.useState=function(e){return Cs.current.useState(e)};Qt.useSyncExternalStore=function(e,t,n){return Cs.current.useSyncExternalStore(e,t,n)};Qt.useTransition=function(){return Cs.current.useTransition()};Qt.version="18.3.1";Z3.exports=Qt;var _=Z3.exports;const q=on(_),s5=xQ({__proto__:null,default:q},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MQ=_,IQ=Symbol.for("react.element"),RQ=Symbol.for("react.fragment"),LQ=Object.prototype.hasOwnProperty,DQ=MQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$Q={key:!0,ref:!0,__self:!0,__source:!0};function i5(e,t,n){var s,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)LQ.call(t,s)&&!$Q.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:IQ,type:e,key:a,ref:o,props:i,_owner:DQ.current}}qb.Fragment=RQ;qb.jsx=i5;qb.jsxs=i5;G3.exports=qb;var r=G3.exports,a5={exports:{}},ui={},o5={exports:{}},l5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,$){var G=B.length;B.push($);e:for(;0<G;){var ee=G-1>>>1,oe=B[ee];if(0<i(oe,$))B[ee]=$,B[G]=oe,G=ee;else break e}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var $=B[0],G=B.pop();if(G!==$){B[0]=G;e:for(var ee=0,oe=B.length,fe=oe>>>1;ee<fe;){var Ee=2*(ee+1)-1,J=B[Ee],Pe=Ee+1,ze=B[Pe];if(0>i(J,G))Pe<oe&&0>i(ze,J)?(B[ee]=ze,B[Pe]=G,ee=Pe):(B[ee]=J,B[Ee]=G,ee=Ee);else if(Pe<oe&&0>i(ze,G))B[ee]=ze,B[Pe]=G,ee=Pe;else break e}}return $}function i(B,$){var G=B.sortIndex-$.sortIndex;return G!==0?G:B.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,h=null,p=3,v=!1,j=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(B){for(var $=n(d);$!==null;){if($.callback===null)s(d);else if($.startTime<=B)s(d),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(d)}}function A(B){if(g=!1,y(B),!j)if(n(c)!==null)j=!0,H(P);else{var $=n(d);$!==null&&W(A,$.startTime-B)}}function P(B,$){j=!1,g&&(g=!1,w(S),S=-1),v=!0;var G=p;try{for(y($),h=n(c);h!==null&&(!(h.expirationTime>$)||B&&!R());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,p=h.priorityLevel;var oe=ee(h.expirationTime<=$);$=e.unstable_now(),typeof oe=="function"?h.callback=oe:h===n(c)&&s(c),y($)}else s(c);h=n(c)}if(h!==null)var fe=!0;else{var Ee=n(d);Ee!==null&&W(A,Ee.startTime-$),fe=!1}return fe}finally{h=null,p=G,v=!1}}var E=!1,C=null,S=-1,k=5,I=-1;function R(){return!(e.unstable_now()-I<k)}function D(){if(C!==null){var B=e.unstable_now();I=B;var $=!0;try{$=C(!0,B)}finally{$?z():(E=!1,C=null)}}else E=!1}var z;if(typeof N=="function")z=function(){N(D)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,K=V.port2;V.port1.onmessage=D,z=function(){K.postMessage(null)}}else z=function(){x(D,0)};function H(B){C=B,E||(E=!0,z())}function W(B,$){S=x(function(){B(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){j||v||(j=!0,H(P))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(B){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var G=p;p=$;try{return B()}finally{p=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,$){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var G=p;p=B;try{return $()}finally{p=G}},e.unstable_scheduleCallback=function(B,$,G){var ee=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ee+G:ee):G=ee,B){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=G+oe,B={id:f++,callback:$,priorityLevel:B,startTime:G,expirationTime:oe,sortIndex:-1},G>ee?(B.sortIndex=G,t(d,B),n(c)===null&&B===n(d)&&(g?(w(S),S=-1):g=!0,W(A,G-ee))):(B.sortIndex=oe,t(c,B),j||v||(j=!0,H(P))),B},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(B){var $=p;return function(){var G=p;p=$;try{return B.apply(this,arguments)}finally{p=G}}}})(l5);o5.exports=l5;var FQ=o5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zQ=_,ci=FQ;function Be(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c5=new Set,Vm={};function Cu(e,t){df(e,t),df(e+"Capture",t)}function df(e,t){for(Vm[e]=t,e=0;e<t.length;e++)c5.add(t[e])}var zo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mw=Object.prototype.hasOwnProperty,BQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eT={},tT={};function VQ(e){return Mw.call(tT,e)?!0:Mw.call(eT,e)?!1:BQ.test(e)?tT[e]=!0:(eT[e]=!0,!1)}function qQ(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function UQ(e,t,n,s){if(t===null||typeof t>"u"||qQ(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ps(e,t,n,s,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Xr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xr[e]=new Ps(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xr[t]=new Ps(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xr[e]=new Ps(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xr[e]=new Ps(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xr[e]=new Ps(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xr[e]=new Ps(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xr[e]=new Ps(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xr[e]=new Ps(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xr[e]=new Ps(e,5,!1,e.toLowerCase(),null,!1,!1)});var YS=/[\-:]([a-z])/g;function XS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(YS,XS);Xr[t]=new Ps(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(YS,XS);Xr[t]=new Ps(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(YS,XS);Xr[t]=new Ps(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xr[e]=new Ps(e,1,!1,e.toLowerCase(),null,!1,!1)});Xr.xlinkHref=new Ps("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xr[e]=new Ps(e,1,!1,e.toLowerCase(),null,!0,!0)});function JS(e,t,n,s){var i=Xr.hasOwnProperty(t)?Xr[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(UQ(t,n,i,s)&&(n=null),s||i===null?VQ(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,s=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Jo=zQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mx=Symbol.for("react.element"),hd=Symbol.for("react.portal"),md=Symbol.for("react.fragment"),eC=Symbol.for("react.strict_mode"),Iw=Symbol.for("react.profiler"),u5=Symbol.for("react.provider"),d5=Symbol.for("react.context"),tC=Symbol.for("react.forward_ref"),Rw=Symbol.for("react.suspense"),Lw=Symbol.for("react.suspense_list"),nC=Symbol.for("react.memo"),pl=Symbol.for("react.lazy"),f5=Symbol.for("react.offscreen"),nT=Symbol.iterator;function Bh(e){return e===null||typeof e!="object"?null:(e=nT&&e[nT]||e["@@iterator"],typeof e=="function"?e:null)}var Jn=Object.assign,a_;function mm(e){if(a_===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);a_=t&&t[1]||""}return`
`+a_+e}var o_=!1;function l_(e,t){if(!e||o_)return"";o_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=s.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{o_=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?mm(e):""}function HQ(e){switch(e.tag){case 5:return mm(e.type);case 16:return mm("Lazy");case 13:return mm("Suspense");case 19:return mm("SuspenseList");case 0:case 2:case 15:return e=l_(e.type,!1),e;case 11:return e=l_(e.type.render,!1),e;case 1:return e=l_(e.type,!0),e;default:return""}}function Dw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case md:return"Fragment";case hd:return"Portal";case Iw:return"Profiler";case eC:return"StrictMode";case Rw:return"Suspense";case Lw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case d5:return(e.displayName||"Context")+".Consumer";case u5:return(e._context.displayName||"Context")+".Provider";case tC:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nC:return t=e.displayName||null,t!==null?t:Dw(e.type)||"Memo";case pl:t=e._payload,e=e._init;try{return Dw(e(t))}catch{}}return null}function WQ(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dw(t);case 8:return t===eC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function h5(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function KQ(e){var t=h5(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function px(e){e._valueTracker||(e._valueTracker=KQ(e))}function m5(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=h5(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Mv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $w(e,t){var n=t.checked;return Jn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rT(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Kl(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function p5(e,t){t=t.checked,t!=null&&JS(e,"checked",t,!1)}function Fw(e,t){p5(e,t);var n=Kl(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?zw(e,t.type,n):t.hasOwnProperty("defaultValue")&&zw(e,t.type,Kl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function sT(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function zw(e,t,n){(t!=="number"||Mv(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pm=Array.isArray;function kd(e,t,n,s){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Kl(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Bw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Be(91));return Jn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function iT(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Be(92));if(pm(n)){if(1<n.length)throw Error(Be(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Kl(n)}}function g5(e,t){var n=Kl(t.value),s=Kl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function aT(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function x5(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?x5(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gx,v5=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gx=gx||document.createElement("div"),gx.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gx.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qm(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var _m={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GQ=["Webkit","ms","Moz","O"];Object.keys(_m).forEach(function(e){GQ.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_m[t]=_m[e]})});function y5(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||_m.hasOwnProperty(e)&&_m[e]?(""+t).trim():t+"px"}function b5(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=y5(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,i):e[n]=i}}var ZQ=Jn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qw(e,t){if(t){if(ZQ[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Be(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Be(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Be(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Be(62))}}function Uw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hw=null;function rC(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ww=null,Od=null,Md=null;function oT(e){if(e=gg(e)){if(typeof Ww!="function")throw Error(Be(280));var t=e.stateNode;t&&(t=Gb(t),Ww(e.stateNode,e.type,t))}}function j5(e){Od?Md?Md.push(e):Md=[e]:Od=e}function _5(){if(Od){var e=Od,t=Md;if(Md=Od=null,oT(e),t)for(e=0;e<t.length;e++)oT(t[e])}}function w5(e,t){return e(t)}function N5(){}var c_=!1;function S5(e,t,n){if(c_)return e(t,n);c_=!0;try{return w5(e,t,n)}finally{c_=!1,(Od!==null||Md!==null)&&(N5(),_5())}}function Um(e,t){var n=e.stateNode;if(n===null)return null;var s=Gb(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Be(231,t,typeof n));return n}var Kw=!1;if(zo)try{var Vh={};Object.defineProperty(Vh,"passive",{get:function(){Kw=!0}}),window.addEventListener("test",Vh,Vh),window.removeEventListener("test",Vh,Vh)}catch{Kw=!1}function QQ(e,t,n,s,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var wm=!1,Iv=null,Rv=!1,Gw=null,YQ={onError:function(e){wm=!0,Iv=e}};function XQ(e,t,n,s,i,a,o,l,c){wm=!1,Iv=null,QQ.apply(YQ,arguments)}function JQ(e,t,n,s,i,a,o,l,c){if(XQ.apply(this,arguments),wm){if(wm){var d=Iv;wm=!1,Iv=null}else throw Error(Be(198));Rv||(Rv=!0,Gw=d)}}function Pu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function C5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lT(e){if(Pu(e)!==e)throw Error(Be(188))}function eY(e){var t=e.alternate;if(!t){if(t=Pu(e),t===null)throw Error(Be(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return lT(i),e;if(a===s)return lT(i),t;a=a.sibling}throw Error(Be(188))}if(n.return!==s.return)n=i,s=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o)throw Error(Be(189))}}if(n.alternate!==s)throw Error(Be(190))}if(n.tag!==3)throw Error(Be(188));return n.stateNode.current===n?e:t}function P5(e){return e=eY(e),e!==null?A5(e):null}function A5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=A5(e);if(t!==null)return t;e=e.sibling}return null}var E5=ci.unstable_scheduleCallback,cT=ci.unstable_cancelCallback,tY=ci.unstable_shouldYield,nY=ci.unstable_requestPaint,ur=ci.unstable_now,rY=ci.unstable_getCurrentPriorityLevel,sC=ci.unstable_ImmediatePriority,T5=ci.unstable_UserBlockingPriority,Lv=ci.unstable_NormalPriority,sY=ci.unstable_LowPriority,k5=ci.unstable_IdlePriority,Ub=null,za=null;function iY(e){if(za&&typeof za.onCommitFiberRoot=="function")try{za.onCommitFiberRoot(Ub,e,void 0,(e.current.flags&128)===128)}catch{}}var sa=Math.clz32?Math.clz32:lY,aY=Math.log,oY=Math.LN2;function lY(e){return e>>>=0,e===0?32:31-(aY(e)/oY|0)|0}var xx=64,vx=4194304;function gm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Dv(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?s=gm(l):(a&=o,a!==0&&(s=gm(a)))}else o=n&~i,o!==0?s=gm(o):a!==0&&(s=gm(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-sa(t),i=1<<n,s|=e[n],t&=~i;return s}function cY(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uY(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-sa(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&s)&&(i[o]=cY(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Zw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function O5(){var e=xx;return xx<<=1,!(xx&4194240)&&(xx=64),e}function u_(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mg(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-sa(t),e[t]=n}function dY(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-sa(n),a=1<<i;t[i]=0,s[i]=-1,e[i]=-1,n&=~a}}function iC(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-sa(n),i=1<<s;i&t|e[s]&t&&(e[s]|=t),n&=~i}}var gn=0;function M5(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var I5,aC,R5,L5,D5,Qw=!1,yx=[],Ll=null,Dl=null,$l=null,Hm=new Map,Wm=new Map,yl=[],fY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uT(e,t){switch(e){case"focusin":case"focusout":Ll=null;break;case"dragenter":case"dragleave":Dl=null;break;case"mouseover":case"mouseout":$l=null;break;case"pointerover":case"pointerout":Hm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wm.delete(t.pointerId)}}function qh(e,t,n,s,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},t!==null&&(t=gg(t),t!==null&&aC(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function hY(e,t,n,s,i){switch(t){case"focusin":return Ll=qh(Ll,e,t,n,s,i),!0;case"dragenter":return Dl=qh(Dl,e,t,n,s,i),!0;case"mouseover":return $l=qh($l,e,t,n,s,i),!0;case"pointerover":var a=i.pointerId;return Hm.set(a,qh(Hm.get(a)||null,e,t,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,Wm.set(a,qh(Wm.get(a)||null,e,t,n,s,i)),!0}return!1}function $5(e){var t=Dc(e.target);if(t!==null){var n=Pu(t);if(n!==null){if(t=n.tag,t===13){if(t=C5(n),t!==null){e.blockedOn=t,D5(e.priority,function(){R5(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Hw=s,n.target.dispatchEvent(s),Hw=null}else return t=gg(n),t!==null&&aC(t),e.blockedOn=n,!1;t.shift()}return!0}function dT(e,t,n){cv(e)&&n.delete(t)}function mY(){Qw=!1,Ll!==null&&cv(Ll)&&(Ll=null),Dl!==null&&cv(Dl)&&(Dl=null),$l!==null&&cv($l)&&($l=null),Hm.forEach(dT),Wm.forEach(dT)}function Uh(e,t){e.blockedOn===t&&(e.blockedOn=null,Qw||(Qw=!0,ci.unstable_scheduleCallback(ci.unstable_NormalPriority,mY)))}function Km(e){function t(i){return Uh(i,e)}if(0<yx.length){Uh(yx[0],e);for(var n=1;n<yx.length;n++){var s=yx[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Ll!==null&&Uh(Ll,e),Dl!==null&&Uh(Dl,e),$l!==null&&Uh($l,e),Hm.forEach(t),Wm.forEach(t),n=0;n<yl.length;n++)s=yl[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<yl.length&&(n=yl[0],n.blockedOn===null);)$5(n),n.blockedOn===null&&yl.shift()}var Id=Jo.ReactCurrentBatchConfig,$v=!0;function pY(e,t,n,s){var i=gn,a=Id.transition;Id.transition=null;try{gn=1,oC(e,t,n,s)}finally{gn=i,Id.transition=a}}function gY(e,t,n,s){var i=gn,a=Id.transition;Id.transition=null;try{gn=4,oC(e,t,n,s)}finally{gn=i,Id.transition=a}}function oC(e,t,n,s){if($v){var i=Yw(e,t,n,s);if(i===null)b_(e,t,s,Fv,n),uT(e,s);else if(hY(i,e,t,n,s))s.stopPropagation();else if(uT(e,s),t&4&&-1<fY.indexOf(e)){for(;i!==null;){var a=gg(i);if(a!==null&&I5(a),a=Yw(e,t,n,s),a===null&&b_(e,t,s,Fv,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else b_(e,t,s,null,n)}}var Fv=null;function Yw(e,t,n,s){if(Fv=null,e=rC(s),e=Dc(e),e!==null)if(t=Pu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=C5(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fv=e,null}function F5(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rY()){case sC:return 1;case T5:return 4;case Lv:case sY:return 16;case k5:return 536870912;default:return 16}default:return 16}}var Ol=null,lC=null,uv=null;function z5(){if(uv)return uv;var e,t=lC,n=t.length,s,i="value"in Ol?Ol.value:Ol.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===i[a-s];s++);return uv=i.slice(e,1<s?1-s:void 0)}function dv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bx(){return!0}function fT(){return!1}function di(e){function t(n,s,i,a,o){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?bx:fT,this.isPropagationStopped=fT,this}return Jn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bx)},persist:function(){},isPersistent:bx}),t}var th={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cC=di(th),pg=Jn({},th,{view:0,detail:0}),xY=di(pg),d_,f_,Hh,Hb=Jn({},pg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uC,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hh&&(Hh&&e.type==="mousemove"?(d_=e.screenX-Hh.screenX,f_=e.screenY-Hh.screenY):f_=d_=0,Hh=e),d_)},movementY:function(e){return"movementY"in e?e.movementY:f_}}),hT=di(Hb),vY=Jn({},Hb,{dataTransfer:0}),yY=di(vY),bY=Jn({},pg,{relatedTarget:0}),h_=di(bY),jY=Jn({},th,{animationName:0,elapsedTime:0,pseudoElement:0}),_Y=di(jY),wY=Jn({},th,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),NY=di(wY),SY=Jn({},th,{data:0}),mT=di(SY),CY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EY(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=AY[e])?!!t[e]:!1}function uC(){return EY}var TY=Jn({},pg,{key:function(e){if(e.key){var t=CY[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=dv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?PY[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uC,charCode:function(e){return e.type==="keypress"?dv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kY=di(TY),OY=Jn({},Hb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pT=di(OY),MY=Jn({},pg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uC}),IY=di(MY),RY=Jn({},th,{propertyName:0,elapsedTime:0,pseudoElement:0}),LY=di(RY),DY=Jn({},Hb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$Y=di(DY),FY=[9,13,27,32],dC=zo&&"CompositionEvent"in window,Nm=null;zo&&"documentMode"in document&&(Nm=document.documentMode);var zY=zo&&"TextEvent"in window&&!Nm,B5=zo&&(!dC||Nm&&8<Nm&&11>=Nm),gT=" ",xT=!1;function V5(e,t){switch(e){case"keyup":return FY.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q5(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pd=!1;function BY(e,t){switch(e){case"compositionend":return q5(t);case"keypress":return t.which!==32?null:(xT=!0,gT);case"textInput":return e=t.data,e===gT&&xT?null:e;default:return null}}function VY(e,t){if(pd)return e==="compositionend"||!dC&&V5(e,t)?(e=z5(),uv=lC=Ol=null,pd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return B5&&t.locale!=="ko"?null:t.data;default:return null}}var qY={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qY[e.type]:t==="textarea"}function U5(e,t,n,s){j5(s),t=zv(t,"onChange"),0<t.length&&(n=new cC("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Sm=null,Gm=null;function UY(e){tF(e,0)}function Wb(e){var t=vd(e);if(m5(t))return e}function HY(e,t){if(e==="change")return t}var H5=!1;if(zo){var m_;if(zo){var p_="oninput"in document;if(!p_){var yT=document.createElement("div");yT.setAttribute("oninput","return;"),p_=typeof yT.oninput=="function"}m_=p_}else m_=!1;H5=m_&&(!document.documentMode||9<document.documentMode)}function bT(){Sm&&(Sm.detachEvent("onpropertychange",W5),Gm=Sm=null)}function W5(e){if(e.propertyName==="value"&&Wb(Gm)){var t=[];U5(t,Gm,e,rC(e)),S5(UY,t)}}function WY(e,t,n){e==="focusin"?(bT(),Sm=t,Gm=n,Sm.attachEvent("onpropertychange",W5)):e==="focusout"&&bT()}function KY(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wb(Gm)}function GY(e,t){if(e==="click")return Wb(t)}function ZY(e,t){if(e==="input"||e==="change")return Wb(t)}function QY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ca=typeof Object.is=="function"?Object.is:QY;function Zm(e,t){if(ca(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!Mw.call(t,i)||!ca(e[i],t[i]))return!1}return!0}function jT(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _T(e,t){var n=jT(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jT(n)}}function K5(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?K5(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function G5(){for(var e=window,t=Mv();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Mv(e.document)}return t}function fC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function YY(e){var t=G5(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&K5(n.ownerDocument.documentElement,n)){if(s!==null&&fC(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!e.extend&&a>s&&(i=s,s=a,a=i),i=_T(n,a);var o=_T(n,s);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var XY=zo&&"documentMode"in document&&11>=document.documentMode,gd=null,Xw=null,Cm=null,Jw=!1;function wT(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jw||gd==null||gd!==Mv(s)||(s=gd,"selectionStart"in s&&fC(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Cm&&Zm(Cm,s)||(Cm=s,s=zv(Xw,"onSelect"),0<s.length&&(t=new cC("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=gd)))}function jx(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xd={animationend:jx("Animation","AnimationEnd"),animationiteration:jx("Animation","AnimationIteration"),animationstart:jx("Animation","AnimationStart"),transitionend:jx("Transition","TransitionEnd")},g_={},Z5={};zo&&(Z5=document.createElement("div").style,"AnimationEvent"in window||(delete xd.animationend.animation,delete xd.animationiteration.animation,delete xd.animationstart.animation),"TransitionEvent"in window||delete xd.transitionend.transition);function Kb(e){if(g_[e])return g_[e];if(!xd[e])return e;var t=xd[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Z5)return g_[e]=t[n];return e}var Q5=Kb("animationend"),Y5=Kb("animationiteration"),X5=Kb("animationstart"),J5=Kb("transitionend"),eF=new Map,NT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oc(e,t){eF.set(e,t),Cu(t,[e])}for(var x_=0;x_<NT.length;x_++){var v_=NT[x_],JY=v_.toLowerCase(),eX=v_[0].toUpperCase()+v_.slice(1);oc(JY,"on"+eX)}oc(Q5,"onAnimationEnd");oc(Y5,"onAnimationIteration");oc(X5,"onAnimationStart");oc("dblclick","onDoubleClick");oc("focusin","onFocus");oc("focusout","onBlur");oc(J5,"onTransitionEnd");df("onMouseEnter",["mouseout","mouseover"]);df("onMouseLeave",["mouseout","mouseover"]);df("onPointerEnter",["pointerout","pointerover"]);df("onPointerLeave",["pointerout","pointerover"]);Cu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tX=new Set("cancel close invalid load scroll toggle".split(" ").concat(xm));function ST(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,JQ(s,t,void 0,e),e.currentTarget=null}function tF(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],i=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;ST(i,l,d),a=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;ST(i,l,d),a=c}}}if(Rv)throw e=Gw,Rv=!1,Gw=null,e}function In(e,t){var n=t[sN];n===void 0&&(n=t[sN]=new Set);var s=e+"__bubble";n.has(s)||(nF(t,e,2,!1),n.add(s))}function y_(e,t,n){var s=0;t&&(s|=4),nF(n,e,s,t)}var _x="_reactListening"+Math.random().toString(36).slice(2);function Qm(e){if(!e[_x]){e[_x]=!0,c5.forEach(function(n){n!=="selectionchange"&&(tX.has(n)||y_(n,!1,e),y_(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_x]||(t[_x]=!0,y_("selectionchange",!1,t))}}function nF(e,t,n,s){switch(F5(t)){case 1:var i=pY;break;case 4:i=gY;break;default:i=oC}n=i.bind(null,t,n,e),i=void 0,!Kw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function b_(e,t,n,s,i){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Dc(l),o===null)return;if(c=o.tag,c===5||c===6){s=a=o;continue e}l=l.parentNode}}s=s.return}S5(function(){var d=a,f=rC(n),h=[];e:{var p=eF.get(e);if(p!==void 0){var v=cC,j=e;switch(e){case"keypress":if(dv(n)===0)break e;case"keydown":case"keyup":v=kY;break;case"focusin":j="focus",v=h_;break;case"focusout":j="blur",v=h_;break;case"beforeblur":case"afterblur":v=h_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=hT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=yY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=IY;break;case Q5:case Y5:case X5:v=_Y;break;case J5:v=LY;break;case"scroll":v=xY;break;case"wheel":v=$Y;break;case"copy":case"cut":case"paste":v=NY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=pT}var g=(t&4)!==0,x=!g&&e==="scroll",w=g?p!==null?p+"Capture":null:p;g=[];for(var N=d,y;N!==null;){y=N;var A=y.stateNode;if(y.tag===5&&A!==null&&(y=A,w!==null&&(A=Um(N,w),A!=null&&g.push(Ym(N,A,y)))),x)break;N=N.return}0<g.length&&(p=new v(p,j,null,n,f),h.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",p&&n!==Hw&&(j=n.relatedTarget||n.fromElement)&&(Dc(j)||j[Bo]))break e;if((v||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,v?(j=n.relatedTarget||n.toElement,v=d,j=j?Dc(j):null,j!==null&&(x=Pu(j),j!==x||j.tag!==5&&j.tag!==6)&&(j=null)):(v=null,j=d),v!==j)){if(g=hT,A="onMouseLeave",w="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(g=pT,A="onPointerLeave",w="onPointerEnter",N="pointer"),x=v==null?p:vd(v),y=j==null?p:vd(j),p=new g(A,N+"leave",v,n,f),p.target=x,p.relatedTarget=y,A=null,Dc(f)===d&&(g=new g(w,N+"enter",j,n,f),g.target=y,g.relatedTarget=x,A=g),x=A,v&&j)t:{for(g=v,w=j,N=0,y=g;y;y=Zu(y))N++;for(y=0,A=w;A;A=Zu(A))y++;for(;0<N-y;)g=Zu(g),N--;for(;0<y-N;)w=Zu(w),y--;for(;N--;){if(g===w||w!==null&&g===w.alternate)break t;g=Zu(g),w=Zu(w)}g=null}else g=null;v!==null&&CT(h,p,v,g,!1),j!==null&&x!==null&&CT(h,x,j,g,!0)}}e:{if(p=d?vd(d):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var P=HY;else if(vT(p))if(H5)P=ZY;else{P=KY;var E=WY}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=GY);if(P&&(P=P(e,d))){U5(h,P,n,f);break e}E&&E(e,p,d),e==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&zw(p,"number",p.value)}switch(E=d?vd(d):window,e){case"focusin":(vT(E)||E.contentEditable==="true")&&(gd=E,Xw=d,Cm=null);break;case"focusout":Cm=Xw=gd=null;break;case"mousedown":Jw=!0;break;case"contextmenu":case"mouseup":case"dragend":Jw=!1,wT(h,n,f);break;case"selectionchange":if(XY)break;case"keydown":case"keyup":wT(h,n,f)}var C;if(dC)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else pd?V5(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(B5&&n.locale!=="ko"&&(pd||S!=="onCompositionStart"?S==="onCompositionEnd"&&pd&&(C=z5()):(Ol=f,lC="value"in Ol?Ol.value:Ol.textContent,pd=!0)),E=zv(d,S),0<E.length&&(S=new mT(S,e,null,n,f),h.push({event:S,listeners:E}),C?S.data=C:(C=q5(n),C!==null&&(S.data=C)))),(C=zY?BY(e,n):VY(e,n))&&(d=zv(d,"onBeforeInput"),0<d.length&&(f=new mT("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:d}),f.data=C))}tF(h,t)})}function Ym(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zv(e,t){for(var n=t+"Capture",s=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Um(e,n),a!=null&&s.unshift(Ym(e,a,i)),a=Um(e,t),a!=null&&s.push(Ym(e,a,i))),e=e.return}return s}function Zu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function CT(e,t,n,s,i){for(var a=t._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,i?(c=Um(n,a),c!=null&&o.unshift(Ym(n,c,l))):i||(c=Um(n,a),c!=null&&o.push(Ym(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var nX=/\r\n?/g,rX=/\u0000|\uFFFD/g;function PT(e){return(typeof e=="string"?e:""+e).replace(nX,`
`).replace(rX,"")}function wx(e,t,n){if(t=PT(t),PT(e)!==t&&n)throw Error(Be(425))}function Bv(){}var eN=null,tN=null;function nN(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rN=typeof setTimeout=="function"?setTimeout:void 0,sX=typeof clearTimeout=="function"?clearTimeout:void 0,AT=typeof Promise=="function"?Promise:void 0,iX=typeof queueMicrotask=="function"?queueMicrotask:typeof AT<"u"?function(e){return AT.resolve(null).then(e).catch(aX)}:rN;function aX(e){setTimeout(function(){throw e})}function j_(e,t){var n=t,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){e.removeChild(i),Km(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);Km(t)}function Fl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ET(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var nh=Math.random().toString(36).slice(2),Ma="__reactFiber$"+nh,Xm="__reactProps$"+nh,Bo="__reactContainer$"+nh,sN="__reactEvents$"+nh,oX="__reactListeners$"+nh,lX="__reactHandles$"+nh;function Dc(e){var t=e[Ma];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Bo]||n[Ma]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ET(e);e!==null;){if(n=e[Ma])return n;e=ET(e)}return t}e=n,n=e.parentNode}return null}function gg(e){return e=e[Ma]||e[Bo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Be(33))}function Gb(e){return e[Xm]||null}var iN=[],yd=-1;function lc(e){return{current:e}}function $n(e){0>yd||(e.current=iN[yd],iN[yd]=null,yd--)}function Tn(e,t){yd++,iN[yd]=e.current,e.current=t}var Gl={},cs=lc(Gl),$s=lc(!1),ru=Gl;function ff(e,t){var n=e.type.contextTypes;if(!n)return Gl;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Fs(e){return e=e.childContextTypes,e!=null}function Vv(){$n($s),$n(cs)}function TT(e,t,n){if(cs.current!==Gl)throw Error(Be(168));Tn(cs,t),Tn($s,n)}function rF(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(Be(108,WQ(e)||"Unknown",i));return Jn({},n,s)}function qv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gl,ru=cs.current,Tn(cs,e),Tn($s,$s.current),!0}function kT(e,t,n){var s=e.stateNode;if(!s)throw Error(Be(169));n?(e=rF(e,t,ru),s.__reactInternalMemoizedMergedChildContext=e,$n($s),$n(cs),Tn(cs,e)):$n($s),Tn($s,n)}var jo=null,Zb=!1,__=!1;function sF(e){jo===null?jo=[e]:jo.push(e)}function cX(e){Zb=!0,sF(e)}function cc(){if(!__&&jo!==null){__=!0;var e=0,t=gn;try{var n=jo;for(gn=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}jo=null,Zb=!1}catch(i){throw jo!==null&&(jo=jo.slice(e+1)),E5(sC,cc),i}finally{gn=t,__=!1}}return null}var bd=[],jd=0,Uv=null,Hv=0,Si=[],Ci=0,su=null,No=1,So="";function Ec(e,t){bd[jd++]=Hv,bd[jd++]=Uv,Uv=e,Hv=t}function iF(e,t,n){Si[Ci++]=No,Si[Ci++]=So,Si[Ci++]=su,su=e;var s=No;e=So;var i=32-sa(s)-1;s&=~(1<<i),n+=1;var a=32-sa(t)+i;if(30<a){var o=i-i%5;a=(s&(1<<o)-1).toString(32),s>>=o,i-=o,No=1<<32-sa(t)+i|n<<i|s,So=a+e}else No=1<<a|n<<i|s,So=e}function hC(e){e.return!==null&&(Ec(e,1),iF(e,1,0))}function mC(e){for(;e===Uv;)Uv=bd[--jd],bd[jd]=null,Hv=bd[--jd],bd[jd]=null;for(;e===su;)su=Si[--Ci],Si[Ci]=null,So=Si[--Ci],Si[Ci]=null,No=Si[--Ci],Si[Ci]=null}var ni=null,ei=null,qn=!1,Yi=null;function aF(e,t){var n=Ai(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function OT(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ni=e,ei=Fl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ni=e,ei=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=su!==null?{id:No,overflow:So}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ai(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ni=e,ei=null,!0):!1;default:return!1}}function aN(e){return(e.mode&1)!==0&&(e.flags&128)===0}function oN(e){if(qn){var t=ei;if(t){var n=t;if(!OT(e,t)){if(aN(e))throw Error(Be(418));t=Fl(n.nextSibling);var s=ni;t&&OT(e,t)?aF(s,n):(e.flags=e.flags&-4097|2,qn=!1,ni=e)}}else{if(aN(e))throw Error(Be(418));e.flags=e.flags&-4097|2,qn=!1,ni=e}}}function MT(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ni=e}function Nx(e){if(e!==ni)return!1;if(!qn)return MT(e),qn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nN(e.type,e.memoizedProps)),t&&(t=ei)){if(aN(e))throw oF(),Error(Be(418));for(;t;)aF(e,t),t=Fl(t.nextSibling)}if(MT(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Be(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ei=Fl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ei=null}}else ei=ni?Fl(e.stateNode.nextSibling):null;return!0}function oF(){for(var e=ei;e;)e=Fl(e.nextSibling)}function hf(){ei=ni=null,qn=!1}function pC(e){Yi===null?Yi=[e]:Yi.push(e)}var uX=Jo.ReactCurrentBatchConfig;function Wh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Be(309));var s=n.stateNode}if(!s)throw Error(Be(147,e));var i=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(Be(284));if(!n._owner)throw Error(Be(290,e))}return e}function Sx(e,t){throw e=Object.prototype.toString.call(t),Error(Be(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function IT(e){var t=e._init;return t(e._payload)}function lF(e){function t(w,N){if(e){var y=w.deletions;y===null?(w.deletions=[N],w.flags|=16):y.push(N)}}function n(w,N){if(!e)return null;for(;N!==null;)t(w,N),N=N.sibling;return null}function s(w,N){for(w=new Map;N!==null;)N.key!==null?w.set(N.key,N):w.set(N.index,N),N=N.sibling;return w}function i(w,N){return w=ql(w,N),w.index=0,w.sibling=null,w}function a(w,N,y){return w.index=y,e?(y=w.alternate,y!==null?(y=y.index,y<N?(w.flags|=2,N):y):(w.flags|=2,N)):(w.flags|=1048576,N)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,N,y,A){return N===null||N.tag!==6?(N=E_(y,w.mode,A),N.return=w,N):(N=i(N,y),N.return=w,N)}function c(w,N,y,A){var P=y.type;return P===md?f(w,N,y.props.children,A,y.key):N!==null&&(N.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===pl&&IT(P)===N.type)?(A=i(N,y.props),A.ref=Wh(w,N,y),A.return=w,A):(A=vv(y.type,y.key,y.props,null,w.mode,A),A.ref=Wh(w,N,y),A.return=w,A)}function d(w,N,y,A){return N===null||N.tag!==4||N.stateNode.containerInfo!==y.containerInfo||N.stateNode.implementation!==y.implementation?(N=T_(y,w.mode,A),N.return=w,N):(N=i(N,y.children||[]),N.return=w,N)}function f(w,N,y,A,P){return N===null||N.tag!==7?(N=Jc(y,w.mode,A,P),N.return=w,N):(N=i(N,y),N.return=w,N)}function h(w,N,y){if(typeof N=="string"&&N!==""||typeof N=="number")return N=E_(""+N,w.mode,y),N.return=w,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case mx:return y=vv(N.type,N.key,N.props,null,w.mode,y),y.ref=Wh(w,null,N),y.return=w,y;case hd:return N=T_(N,w.mode,y),N.return=w,N;case pl:var A=N._init;return h(w,A(N._payload),y)}if(pm(N)||Bh(N))return N=Jc(N,w.mode,y,null),N.return=w,N;Sx(w,N)}return null}function p(w,N,y,A){var P=N!==null?N.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return P!==null?null:l(w,N,""+y,A);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case mx:return y.key===P?c(w,N,y,A):null;case hd:return y.key===P?d(w,N,y,A):null;case pl:return P=y._init,p(w,N,P(y._payload),A)}if(pm(y)||Bh(y))return P!==null?null:f(w,N,y,A,null);Sx(w,y)}return null}function v(w,N,y,A,P){if(typeof A=="string"&&A!==""||typeof A=="number")return w=w.get(y)||null,l(N,w,""+A,P);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case mx:return w=w.get(A.key===null?y:A.key)||null,c(N,w,A,P);case hd:return w=w.get(A.key===null?y:A.key)||null,d(N,w,A,P);case pl:var E=A._init;return v(w,N,y,E(A._payload),P)}if(pm(A)||Bh(A))return w=w.get(y)||null,f(N,w,A,P,null);Sx(N,A)}return null}function j(w,N,y,A){for(var P=null,E=null,C=N,S=N=0,k=null;C!==null&&S<y.length;S++){C.index>S?(k=C,C=null):k=C.sibling;var I=p(w,C,y[S],A);if(I===null){C===null&&(C=k);break}e&&C&&I.alternate===null&&t(w,C),N=a(I,N,S),E===null?P=I:E.sibling=I,E=I,C=k}if(S===y.length)return n(w,C),qn&&Ec(w,S),P;if(C===null){for(;S<y.length;S++)C=h(w,y[S],A),C!==null&&(N=a(C,N,S),E===null?P=C:E.sibling=C,E=C);return qn&&Ec(w,S),P}for(C=s(w,C);S<y.length;S++)k=v(C,w,S,y[S],A),k!==null&&(e&&k.alternate!==null&&C.delete(k.key===null?S:k.key),N=a(k,N,S),E===null?P=k:E.sibling=k,E=k);return e&&C.forEach(function(R){return t(w,R)}),qn&&Ec(w,S),P}function g(w,N,y,A){var P=Bh(y);if(typeof P!="function")throw Error(Be(150));if(y=P.call(y),y==null)throw Error(Be(151));for(var E=P=null,C=N,S=N=0,k=null,I=y.next();C!==null&&!I.done;S++,I=y.next()){C.index>S?(k=C,C=null):k=C.sibling;var R=p(w,C,I.value,A);if(R===null){C===null&&(C=k);break}e&&C&&R.alternate===null&&t(w,C),N=a(R,N,S),E===null?P=R:E.sibling=R,E=R,C=k}if(I.done)return n(w,C),qn&&Ec(w,S),P;if(C===null){for(;!I.done;S++,I=y.next())I=h(w,I.value,A),I!==null&&(N=a(I,N,S),E===null?P=I:E.sibling=I,E=I);return qn&&Ec(w,S),P}for(C=s(w,C);!I.done;S++,I=y.next())I=v(C,w,S,I.value,A),I!==null&&(e&&I.alternate!==null&&C.delete(I.key===null?S:I.key),N=a(I,N,S),E===null?P=I:E.sibling=I,E=I);return e&&C.forEach(function(D){return t(w,D)}),qn&&Ec(w,S),P}function x(w,N,y,A){if(typeof y=="object"&&y!==null&&y.type===md&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case mx:e:{for(var P=y.key,E=N;E!==null;){if(E.key===P){if(P=y.type,P===md){if(E.tag===7){n(w,E.sibling),N=i(E,y.props.children),N.return=w,w=N;break e}}else if(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===pl&&IT(P)===E.type){n(w,E.sibling),N=i(E,y.props),N.ref=Wh(w,E,y),N.return=w,w=N;break e}n(w,E);break}else t(w,E);E=E.sibling}y.type===md?(N=Jc(y.props.children,w.mode,A,y.key),N.return=w,w=N):(A=vv(y.type,y.key,y.props,null,w.mode,A),A.ref=Wh(w,N,y),A.return=w,w=A)}return o(w);case hd:e:{for(E=y.key;N!==null;){if(N.key===E)if(N.tag===4&&N.stateNode.containerInfo===y.containerInfo&&N.stateNode.implementation===y.implementation){n(w,N.sibling),N=i(N,y.children||[]),N.return=w,w=N;break e}else{n(w,N);break}else t(w,N);N=N.sibling}N=T_(y,w.mode,A),N.return=w,w=N}return o(w);case pl:return E=y._init,x(w,N,E(y._payload),A)}if(pm(y))return j(w,N,y,A);if(Bh(y))return g(w,N,y,A);Sx(w,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,N!==null&&N.tag===6?(n(w,N.sibling),N=i(N,y),N.return=w,w=N):(n(w,N),N=E_(y,w.mode,A),N.return=w,w=N),o(w)):n(w,N)}return x}var mf=lF(!0),cF=lF(!1),Wv=lc(null),Kv=null,_d=null,gC=null;function xC(){gC=_d=Kv=null}function vC(e){var t=Wv.current;$n(Wv),e._currentValue=t}function lN(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Rd(e,t){Kv=e,gC=_d=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ls=!0),e.firstContext=null)}function Oi(e){var t=e._currentValue;if(gC!==e)if(e={context:e,memoizedValue:t,next:null},_d===null){if(Kv===null)throw Error(Be(308));_d=e,Kv.dependencies={lanes:0,firstContext:e}}else _d=_d.next=e;return t}var $c=null;function yC(e){$c===null?$c=[e]:$c.push(e)}function uF(e,t,n,s){var i=t.interleaved;return i===null?(n.next=n,yC(t)):(n.next=i.next,i.next=n),t.interleaved=n,Vo(e,s)}function Vo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var gl=!1;function bC(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dF(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ko(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zl(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,nn&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,Vo(e,n)}return i=s.interleaved,i===null?(t.next=t,yC(s)):(t.next=i.next,i.next=t),s.interleaved=t,Vo(e,n)}function fv(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,iC(e,n)}}function RT(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Gv(e,t,n,s){var i=e.updateQueue;gl=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;o=0,f=d=c=null,l=a;do{var p=l.lane,v=l.eventTime;if((s&p)===p){f!==null&&(f=f.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=e,g=l;switch(p=t,v=n,g.tag){case 1:if(j=g.payload,typeof j=="function"){h=j.call(v,h,p);break e}h=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=g.payload,p=typeof j=="function"?j.call(v,h,p):j,p==null)break e;h=Jn({},h,p);break e;case 2:gl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else v={eventTime:v,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=v,c=h):f=f.next=v,o|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(f===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);au|=o,e.lanes=o,e.memoizedState=h}}function LT(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(Be(191,i));i.call(s)}}}var xg={},Ba=lc(xg),Jm=lc(xg),ep=lc(xg);function Fc(e){if(e===xg)throw Error(Be(174));return e}function jC(e,t){switch(Tn(ep,t),Tn(Jm,e),Tn(Ba,xg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Vw(t,e)}$n(Ba),Tn(Ba,t)}function pf(){$n(Ba),$n(Jm),$n(ep)}function fF(e){Fc(ep.current);var t=Fc(Ba.current),n=Vw(t,e.type);t!==n&&(Tn(Jm,e),Tn(Ba,n))}function _C(e){Jm.current===e&&($n(Ba),$n(Jm))}var Yn=lc(0);function Zv(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var w_=[];function wC(){for(var e=0;e<w_.length;e++)w_[e]._workInProgressVersionPrimary=null;w_.length=0}var hv=Jo.ReactCurrentDispatcher,N_=Jo.ReactCurrentBatchConfig,iu=0,Xn=null,Pr=null,$r=null,Qv=!1,Pm=!1,tp=0,dX=0;function ts(){throw Error(Be(321))}function NC(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ca(e[n],t[n]))return!1;return!0}function SC(e,t,n,s,i,a){if(iu=a,Xn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hv.current=e===null||e.memoizedState===null?pX:gX,e=n(s,i),Pm){a=0;do{if(Pm=!1,tp=0,25<=a)throw Error(Be(301));a+=1,$r=Pr=null,t.updateQueue=null,hv.current=xX,e=n(s,i)}while(Pm)}if(hv.current=Yv,t=Pr!==null&&Pr.next!==null,iu=0,$r=Pr=Xn=null,Qv=!1,t)throw Error(Be(300));return e}function CC(){var e=tp!==0;return tp=0,e}function Aa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?Xn.memoizedState=$r=e:$r=$r.next=e,$r}function Mi(){if(Pr===null){var e=Xn.alternate;e=e!==null?e.memoizedState:null}else e=Pr.next;var t=$r===null?Xn.memoizedState:$r.next;if(t!==null)$r=t,Pr=e;else{if(e===null)throw Error(Be(310));Pr=e,e={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},$r===null?Xn.memoizedState=$r=e:$r=$r.next=e}return $r}function np(e,t){return typeof t=="function"?t(e):t}function S_(e){var t=Mi(),n=t.queue;if(n===null)throw Error(Be(311));n.lastRenderedReducer=e;var s=Pr,i=s.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,s=s.baseState;var l=o=null,c=null,d=a;do{var f=d.lane;if((iu&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,Xn.lanes|=f,au|=f}d=d.next}while(d!==null&&d!==a);c===null?o=s:c.next=l,ca(s,t.memoizedState)||(Ls=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Xn.lanes|=a,au|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function C_(e){var t=Mi(),n=t.queue;if(n===null)throw Error(Be(311));n.lastRenderedReducer=e;var s=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);ca(a,t.memoizedState)||(Ls=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function hF(){}function mF(e,t){var n=Xn,s=Mi(),i=t(),a=!ca(s.memoizedState,i);if(a&&(s.memoizedState=i,Ls=!0),s=s.queue,PC(xF.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||$r!==null&&$r.memoizedState.tag&1){if(n.flags|=2048,rp(9,gF.bind(null,n,s,i,t),void 0,null),zr===null)throw Error(Be(349));iu&30||pF(n,t,i)}return i}function pF(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xn.updateQueue,t===null?(t={lastEffect:null,stores:null},Xn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function gF(e,t,n,s){t.value=n,t.getSnapshot=s,vF(t)&&yF(e)}function xF(e,t,n){return n(function(){vF(t)&&yF(e)})}function vF(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ca(e,n)}catch{return!0}}function yF(e){var t=Vo(e,1);t!==null&&ia(t,e,1,-1)}function DT(e){var t=Aa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:np,lastRenderedState:e},t.queue=e,e=e.dispatch=mX.bind(null,Xn,e),[t.memoizedState,e]}function rp(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Xn.updateQueue,t===null?(t={lastEffect:null,stores:null},Xn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function bF(){return Mi().memoizedState}function mv(e,t,n,s){var i=Aa();Xn.flags|=e,i.memoizedState=rp(1|t,n,void 0,s===void 0?null:s)}function Qb(e,t,n,s){var i=Mi();s=s===void 0?null:s;var a=void 0;if(Pr!==null){var o=Pr.memoizedState;if(a=o.destroy,s!==null&&NC(s,o.deps)){i.memoizedState=rp(t,n,a,s);return}}Xn.flags|=e,i.memoizedState=rp(1|t,n,a,s)}function $T(e,t){return mv(8390656,8,e,t)}function PC(e,t){return Qb(2048,8,e,t)}function jF(e,t){return Qb(4,2,e,t)}function _F(e,t){return Qb(4,4,e,t)}function wF(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function NF(e,t,n){return n=n!=null?n.concat([e]):null,Qb(4,4,wF.bind(null,t,e),n)}function AC(){}function SF(e,t){var n=Mi();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&NC(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function CF(e,t){var n=Mi();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&NC(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function PF(e,t,n){return iu&21?(ca(n,t)||(n=O5(),Xn.lanes|=n,au|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ls=!0),e.memoizedState=n)}function fX(e,t){var n=gn;gn=n!==0&&4>n?n:4,e(!0);var s=N_.transition;N_.transition={};try{e(!1),t()}finally{gn=n,N_.transition=s}}function AF(){return Mi().memoizedState}function hX(e,t,n){var s=Vl(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},EF(e))TF(t,n);else if(n=uF(e,t,n,s),n!==null){var i=ws();ia(n,e,s,i),kF(n,t,s)}}function mX(e,t,n){var s=Vl(e),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(EF(e))TF(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,ca(l,o)){var c=t.interleaved;c===null?(i.next=i,yC(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=uF(e,t,i,s),n!==null&&(i=ws(),ia(n,e,s,i),kF(n,t,s))}}function EF(e){var t=e.alternate;return e===Xn||t!==null&&t===Xn}function TF(e,t){Pm=Qv=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function kF(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,iC(e,n)}}var Yv={readContext:Oi,useCallback:ts,useContext:ts,useEffect:ts,useImperativeHandle:ts,useInsertionEffect:ts,useLayoutEffect:ts,useMemo:ts,useReducer:ts,useRef:ts,useState:ts,useDebugValue:ts,useDeferredValue:ts,useTransition:ts,useMutableSource:ts,useSyncExternalStore:ts,useId:ts,unstable_isNewReconciler:!1},pX={readContext:Oi,useCallback:function(e,t){return Aa().memoizedState=[e,t===void 0?null:t],e},useContext:Oi,useEffect:$T,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,mv(4194308,4,wF.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mv(4194308,4,e,t)},useInsertionEffect:function(e,t){return mv(4,2,e,t)},useMemo:function(e,t){var n=Aa();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Aa();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=hX.bind(null,Xn,e),[s.memoizedState,e]},useRef:function(e){var t=Aa();return e={current:e},t.memoizedState=e},useState:DT,useDebugValue:AC,useDeferredValue:function(e){return Aa().memoizedState=e},useTransition:function(){var e=DT(!1),t=e[0];return e=fX.bind(null,e[1]),Aa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Xn,i=Aa();if(qn){if(n===void 0)throw Error(Be(407));n=n()}else{if(n=t(),zr===null)throw Error(Be(349));iu&30||pF(s,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,$T(xF.bind(null,s,a,e),[e]),s.flags|=2048,rp(9,gF.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=Aa(),t=zr.identifierPrefix;if(qn){var n=So,s=No;n=(s&~(1<<32-sa(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=tp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=dX++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},gX={readContext:Oi,useCallback:SF,useContext:Oi,useEffect:PC,useImperativeHandle:NF,useInsertionEffect:jF,useLayoutEffect:_F,useMemo:CF,useReducer:S_,useRef:bF,useState:function(){return S_(np)},useDebugValue:AC,useDeferredValue:function(e){var t=Mi();return PF(t,Pr.memoizedState,e)},useTransition:function(){var e=S_(np)[0],t=Mi().memoizedState;return[e,t]},useMutableSource:hF,useSyncExternalStore:mF,useId:AF,unstable_isNewReconciler:!1},xX={readContext:Oi,useCallback:SF,useContext:Oi,useEffect:PC,useImperativeHandle:NF,useInsertionEffect:jF,useLayoutEffect:_F,useMemo:CF,useReducer:C_,useRef:bF,useState:function(){return C_(np)},useDebugValue:AC,useDeferredValue:function(e){var t=Mi();return Pr===null?t.memoizedState=e:PF(t,Pr.memoizedState,e)},useTransition:function(){var e=C_(np)[0],t=Mi().memoizedState;return[e,t]},useMutableSource:hF,useSyncExternalStore:mF,useId:AF,unstable_isNewReconciler:!1};function Wi(e,t){if(e&&e.defaultProps){t=Jn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function cN(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Jn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Yb={isMounted:function(e){return(e=e._reactInternals)?Pu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=ws(),i=Vl(e),a=ko(s,i);a.payload=t,n!=null&&(a.callback=n),t=zl(e,a,i),t!==null&&(ia(t,e,i,s),fv(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=ws(),i=Vl(e),a=ko(s,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=zl(e,a,i),t!==null&&(ia(t,e,i,s),fv(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ws(),s=Vl(e),i=ko(n,s);i.tag=2,t!=null&&(i.callback=t),t=zl(e,i,s),t!==null&&(ia(t,e,s,n),fv(t,e,s))}};function FT(e,t,n,s,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,o):t.prototype&&t.prototype.isPureReactComponent?!Zm(n,s)||!Zm(i,a):!0}function OF(e,t,n){var s=!1,i=Gl,a=t.contextType;return typeof a=="object"&&a!==null?a=Oi(a):(i=Fs(t)?ru:cs.current,s=t.contextTypes,a=(s=s!=null)?ff(e,i):Gl),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Yb,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function zT(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Yb.enqueueReplaceState(t,t.state,null)}function uN(e,t,n,s){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},bC(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Oi(a):(a=Fs(t)?ru:cs.current,i.context=ff(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(cN(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Yb.enqueueReplaceState(i,i.state,null),Gv(e,n,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function gf(e,t){try{var n="",s=t;do n+=HQ(s),s=s.return;while(s);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function P_(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function dN(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var vX=typeof WeakMap=="function"?WeakMap:Map;function MF(e,t,n){n=ko(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Jv||(Jv=!0,jN=s),dN(e,t)},n}function IF(e,t,n){n=ko(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;n.payload=function(){return s(i)},n.callback=function(){dN(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){dN(e,t),typeof s!="function"&&(Bl===null?Bl=new Set([this]):Bl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function BT(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new vX;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(n)||(i.add(n),e=OX.bind(null,e,t,n),t.then(e,e))}function VT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qT(e,t,n,s,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ko(-1,1),t.tag=2,zl(n,t,1))),n.lanes|=1),e)}var yX=Jo.ReactCurrentOwner,Ls=!1;function xs(e,t,n,s){t.child=e===null?cF(t,null,n,s):mf(t,e.child,n,s)}function UT(e,t,n,s,i){n=n.render;var a=t.ref;return Rd(t,i),s=SC(e,t,n,s,a,i),n=CC(),e!==null&&!Ls?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i)):(qn&&n&&hC(t),t.flags|=1,xs(e,t,s,i),t.child)}function HT(e,t,n,s,i){if(e===null){var a=n.type;return typeof a=="function"&&!LC(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,RF(e,t,a,s,i)):(e=vv(n.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Zm,n(o,s)&&e.ref===t.ref)return qo(e,t,i)}return t.flags|=1,e=ql(a,s),e.ref=t.ref,e.return=t,t.child=e}function RF(e,t,n,s,i){if(e!==null){var a=e.memoizedProps;if(Zm(a,s)&&e.ref===t.ref)if(Ls=!1,t.pendingProps=s=a,(e.lanes&i)!==0)e.flags&131072&&(Ls=!0);else return t.lanes=e.lanes,qo(e,t,i)}return fN(e,t,n,s,i)}function LF(e,t,n){var s=t.pendingProps,i=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tn(Nd,Gs),Gs|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tn(Nd,Gs),Gs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,Tn(Nd,Gs),Gs|=s}else a!==null?(s=a.baseLanes|n,t.memoizedState=null):s=n,Tn(Nd,Gs),Gs|=s;return xs(e,t,i,n),t.child}function DF(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function fN(e,t,n,s,i){var a=Fs(n)?ru:cs.current;return a=ff(t,a),Rd(t,i),n=SC(e,t,n,s,a,i),s=CC(),e!==null&&!Ls?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i)):(qn&&s&&hC(t),t.flags|=1,xs(e,t,n,i),t.child)}function WT(e,t,n,s,i){if(Fs(n)){var a=!0;qv(t)}else a=!1;if(Rd(t,i),t.stateNode===null)pv(e,t),OF(t,n,s),uN(t,n,s,i),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Oi(d):(d=Fs(n)?ru:cs.current,d=ff(t,d));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&zT(t,o,s,d),gl=!1;var p=t.memoizedState;o.state=p,Gv(t,s,o,i),c=t.memoizedState,l!==s||p!==c||$s.current||gl?(typeof f=="function"&&(cN(t,n,f,s),c=t.memoizedState),(l=gl||FT(t,n,l,s,p,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,dF(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Wi(t.type,l),o.props=d,h=t.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Oi(c):(c=Fs(n)?ru:cs.current,c=ff(t,c));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==c)&&zT(t,o,s,c),gl=!1,p=t.memoizedState,o.state=p,Gv(t,s,o,i);var j=t.memoizedState;l!==h||p!==j||$s.current||gl?(typeof v=="function"&&(cN(t,n,v,s),j=t.memoizedState),(d=gl||FT(t,n,d,s,p,j,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,j,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,j,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=j),o.props=s,o.state=j,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),s=!1)}return hN(e,t,n,s,a,i)}function hN(e,t,n,s,i,a){DF(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return i&&kT(t,n,!1),qo(e,t,a);s=t.stateNode,yX.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=mf(t,e.child,null,a),t.child=mf(t,null,l,a)):xs(e,t,l,a),t.memoizedState=s.state,i&&kT(t,n,!0),t.child}function $F(e){var t=e.stateNode;t.pendingContext?TT(e,t.pendingContext,t.pendingContext!==t.context):t.context&&TT(e,t.context,!1),jC(e,t.containerInfo)}function KT(e,t,n,s,i){return hf(),pC(i),t.flags|=256,xs(e,t,n,s),t.child}var mN={dehydrated:null,treeContext:null,retryLane:0};function pN(e){return{baseLanes:e,cachePool:null,transitions:null}}function FF(e,t,n){var s=t.pendingProps,i=Yn.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Tn(Yn,i&1),e===null)return oN(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,a?(s=t.mode,a=t.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=ej(o,s,0,null),e=Jc(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=pN(n),t.memoizedState=mN,e):EC(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return bX(e,t,o,s,l,i,n);if(a){a=s.fallback,o=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=ql(i,c),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=ql(l,a):(a=Jc(a,o,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,o=e.child.memoizedState,o=o===null?pN(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=mN,s}return a=e.child,e=a.sibling,s=ql(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function EC(e,t){return t=ej({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Cx(e,t,n,s){return s!==null&&pC(s),mf(t,e.child,null,n),e=EC(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bX(e,t,n,s,i,a,o){if(n)return t.flags&256?(t.flags&=-257,s=P_(Error(Be(422))),Cx(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,i=t.mode,s=ej({mode:"visible",children:s.children},i,0,null),a=Jc(a,i,o,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&mf(t,e.child,null,o),t.child.memoizedState=pN(o),t.memoizedState=mN,a);if(!(t.mode&1))return Cx(e,t,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,a=Error(Be(419)),s=P_(a,s,void 0),Cx(e,t,o,s)}if(l=(o&e.childLanes)!==0,Ls||l){if(s=zr,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Vo(e,i),ia(s,e,i,-1))}return RC(),s=P_(Error(Be(421))),Cx(e,t,o,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=MX.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ei=Fl(i.nextSibling),ni=t,qn=!0,Yi=null,e!==null&&(Si[Ci++]=No,Si[Ci++]=So,Si[Ci++]=su,No=e.id,So=e.overflow,su=t),t=EC(t,s.children),t.flags|=4096,t)}function GT(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),lN(e.return,t,n)}function A_(e,t,n,s,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function zF(e,t,n){var s=t.pendingProps,i=s.revealOrder,a=s.tail;if(xs(e,t,s.children,n),s=Yn.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&GT(e,n,t);else if(e.tag===19)GT(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Tn(Yn,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Zv(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),A_(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Zv(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}A_(t,!0,n,null,a);break;case"together":A_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),au|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Be(153));if(t.child!==null){for(e=t.child,n=ql(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ql(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jX(e,t,n){switch(t.tag){case 3:$F(t),hf();break;case 5:fF(t);break;case 1:Fs(t.type)&&qv(t);break;case 4:jC(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;Tn(Wv,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Tn(Yn,Yn.current&1),t.flags|=128,null):n&t.child.childLanes?FF(e,t,n):(Tn(Yn,Yn.current&1),e=qo(e,t,n),e!==null?e.sibling:null);Tn(Yn,Yn.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return zF(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Tn(Yn,Yn.current),s)break;return null;case 22:case 23:return t.lanes=0,LF(e,t,n)}return qo(e,t,n)}var BF,gN,VF,qF;BF=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gN=function(){};VF=function(e,t,n,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,Fc(Ba.current);var a=null;switch(n){case"input":i=$w(e,i),s=$w(e,s),a=[];break;case"select":i=Jn({},i,{value:void 0}),s=Jn({},s,{value:void 0}),a=[];break;case"textarea":i=Bw(e,i),s=Bw(e,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Bv)}qw(n,s);var o;n=null;for(d in i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Vm.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var c=s[d];if(l=i!=null?i[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Vm.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&In("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};qF=function(e,t,n,s){n!==s&&(t.flags|=4)};function Kh(e,t){if(!qn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ns(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function _X(e,t,n){var s=t.pendingProps;switch(mC(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ns(t),null;case 1:return Fs(t.type)&&Vv(),ns(t),null;case 3:return s=t.stateNode,pf(),$n($s),$n(cs),wC(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Nx(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Yi!==null&&(NN(Yi),Yi=null))),gN(e,t),ns(t),null;case 5:_C(t);var i=Fc(ep.current);if(n=t.type,e!==null&&t.stateNode!=null)VF(e,t,n,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Be(166));return ns(t),null}if(e=Fc(Ba.current),Nx(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[Ma]=t,s[Xm]=a,e=(t.mode&1)!==0,n){case"dialog":In("cancel",s),In("close",s);break;case"iframe":case"object":case"embed":In("load",s);break;case"video":case"audio":for(i=0;i<xm.length;i++)In(xm[i],s);break;case"source":In("error",s);break;case"img":case"image":case"link":In("error",s),In("load",s);break;case"details":In("toggle",s);break;case"input":rT(s,a),In("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},In("invalid",s);break;case"textarea":iT(s,a),In("invalid",s)}qw(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?s.textContent!==l&&(a.suppressHydrationWarning!==!0&&wx(s.textContent,l,e),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&wx(s.textContent,l,e),i=["children",""+l]):Vm.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&In("scroll",s)}switch(n){case"input":px(s),sT(s,a,!0);break;case"textarea":px(s),aT(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Bv)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=x5(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(n,{is:s.is}):(e=o.createElement(n),n==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,n),e[Ma]=t,e[Xm]=s,BF(e,t,!1,!1),t.stateNode=e;e:{switch(o=Uw(n,s),n){case"dialog":In("cancel",e),In("close",e),i=s;break;case"iframe":case"object":case"embed":In("load",e),i=s;break;case"video":case"audio":for(i=0;i<xm.length;i++)In(xm[i],e);i=s;break;case"source":In("error",e),i=s;break;case"img":case"image":case"link":In("error",e),In("load",e),i=s;break;case"details":In("toggle",e),i=s;break;case"input":rT(e,s),i=$w(e,s),In("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=Jn({},s,{value:void 0}),In("invalid",e);break;case"textarea":iT(e,s),i=Bw(e,s),In("invalid",e);break;default:i=s}qw(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?b5(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&v5(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&qm(e,c):typeof c=="number"&&qm(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Vm.hasOwnProperty(a)?c!=null&&a==="onScroll"&&In("scroll",e):c!=null&&JS(e,a,c,o))}switch(n){case"input":px(e),sT(e,s,!1);break;case"textarea":px(e),aT(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Kl(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?kd(e,!!s.multiple,a,!1):s.defaultValue!=null&&kd(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Bv)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ns(t),null;case 6:if(e&&t.stateNode!=null)qF(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Be(166));if(n=Fc(ep.current),Fc(Ba.current),Nx(t)){if(s=t.stateNode,n=t.memoizedProps,s[Ma]=t,(a=s.nodeValue!==n)&&(e=ni,e!==null))switch(e.tag){case 3:wx(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wx(s.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Ma]=t,t.stateNode=s}return ns(t),null;case 13:if($n(Yn),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qn&&ei!==null&&t.mode&1&&!(t.flags&128))oF(),hf(),t.flags|=98560,a=!1;else if(a=Nx(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(Be(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Be(317));a[Ma]=t}else hf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ns(t),a=!1}else Yi!==null&&(NN(Yi),Yi=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Yn.current&1?Or===0&&(Or=3):RC())),t.updateQueue!==null&&(t.flags|=4),ns(t),null);case 4:return pf(),gN(e,t),e===null&&Qm(t.stateNode.containerInfo),ns(t),null;case 10:return vC(t.type._context),ns(t),null;case 17:return Fs(t.type)&&Vv(),ns(t),null;case 19:if($n(Yn),a=t.memoizedState,a===null)return ns(t),null;if(s=(t.flags&128)!==0,o=a.rendering,o===null)if(s)Kh(a,!1);else{if(Or!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Zv(e),o!==null){for(t.flags|=128,Kh(a,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)a=n,e=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Tn(Yn,Yn.current&1|2),t.child}e=e.sibling}a.tail!==null&&ur()>xf&&(t.flags|=128,s=!0,Kh(a,!1),t.lanes=4194304)}else{if(!s)if(e=Zv(o),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Kh(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!qn)return ns(t),null}else 2*ur()-a.renderingStartTime>xf&&n!==1073741824&&(t.flags|=128,s=!0,Kh(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ur(),t.sibling=null,n=Yn.current,Tn(Yn,s?n&1|2:n&1),t):(ns(t),null);case 22:case 23:return IC(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Gs&1073741824&&(ns(t),t.subtreeFlags&6&&(t.flags|=8192)):ns(t),null;case 24:return null;case 25:return null}throw Error(Be(156,t.tag))}function wX(e,t){switch(mC(t),t.tag){case 1:return Fs(t.type)&&Vv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pf(),$n($s),$n(cs),wC(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _C(t),null;case 13:if($n(Yn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Be(340));hf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $n(Yn),null;case 4:return pf(),null;case 10:return vC(t.type._context),null;case 22:case 23:return IC(),null;case 24:return null;default:return null}}var Px=!1,is=!1,NX=typeof WeakSet=="function"?WeakSet:Set,at=null;function wd(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){tr(e,t,s)}else n.current=null}function xN(e,t,n){try{n()}catch(s){tr(e,t,s)}}var ZT=!1;function SX(e,t){if(eN=$v,e=G5(),fC(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,f=0,h=e,p=null;t:for(;;){for(var v;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==a||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)p=h,h=v;for(;;){if(h===e)break t;if(p===n&&++d===i&&(l=o),p===a&&++f===s&&(c=o),(v=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tN={focusedElem:e,selectionRange:n},$v=!1,at=t;at!==null;)if(t=at,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,at=e;else for(;at!==null;){t=at;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var g=j.memoizedProps,x=j.memoizedState,w=t.stateNode,N=w.getSnapshotBeforeUpdate(t.elementType===t.type?g:Wi(t.type,g),x);w.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Be(163))}}catch(A){tr(t,t.return,A)}if(e=t.sibling,e!==null){e.return=t.return,at=e;break}at=t.return}return j=ZT,ZT=!1,j}function Am(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&xN(t,n,a)}i=i.next}while(i!==s)}}function Xb(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function vN(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function UF(e){var t=e.alternate;t!==null&&(e.alternate=null,UF(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ma],delete t[Xm],delete t[sN],delete t[oX],delete t[lX])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function HF(e){return e.tag===5||e.tag===3||e.tag===4}function QT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||HF(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yN(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bv));else if(s!==4&&(e=e.child,e!==null))for(yN(e,t,n),e=e.sibling;e!==null;)yN(e,t,n),e=e.sibling}function bN(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(bN(e,t,n),e=e.sibling;e!==null;)bN(e,t,n),e=e.sibling}var Gr=null,Gi=!1;function ll(e,t,n){for(n=n.child;n!==null;)WF(e,t,n),n=n.sibling}function WF(e,t,n){if(za&&typeof za.onCommitFiberUnmount=="function")try{za.onCommitFiberUnmount(Ub,n)}catch{}switch(n.tag){case 5:is||wd(n,t);case 6:var s=Gr,i=Gi;Gr=null,ll(e,t,n),Gr=s,Gi=i,Gr!==null&&(Gi?(e=Gr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Gr.removeChild(n.stateNode));break;case 18:Gr!==null&&(Gi?(e=Gr,n=n.stateNode,e.nodeType===8?j_(e.parentNode,n):e.nodeType===1&&j_(e,n),Km(e)):j_(Gr,n.stateNode));break;case 4:s=Gr,i=Gi,Gr=n.stateNode.containerInfo,Gi=!0,ll(e,t,n),Gr=s,Gi=i;break;case 0:case 11:case 14:case 15:if(!is&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&xN(n,t,o),i=i.next}while(i!==s)}ll(e,t,n);break;case 1:if(!is&&(wd(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){tr(n,t,l)}ll(e,t,n);break;case 21:ll(e,t,n);break;case 22:n.mode&1?(is=(s=is)||n.memoizedState!==null,ll(e,t,n),is=s):ll(e,t,n);break;default:ll(e,t,n)}}function YT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new NX),t.forEach(function(s){var i=IX.bind(null,e,s);n.has(s)||(n.add(s),s.then(i,i))})}}function qi(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Gr=l.stateNode,Gi=!1;break e;case 3:Gr=l.stateNode.containerInfo,Gi=!0;break e;case 4:Gr=l.stateNode.containerInfo,Gi=!0;break e}l=l.return}if(Gr===null)throw Error(Be(160));WF(a,o,i),Gr=null,Gi=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){tr(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)KF(t,e),t=t.sibling}function KF(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qi(t,e),Ca(e),s&4){try{Am(3,e,e.return),Xb(3,e)}catch(g){tr(e,e.return,g)}try{Am(5,e,e.return)}catch(g){tr(e,e.return,g)}}break;case 1:qi(t,e),Ca(e),s&512&&n!==null&&wd(n,n.return);break;case 5:if(qi(t,e),Ca(e),s&512&&n!==null&&wd(n,n.return),e.flags&32){var i=e.stateNode;try{qm(i,"")}catch(g){tr(e,e.return,g)}}if(s&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&p5(i,a),Uw(l,o);var d=Uw(l,a);for(o=0;o<c.length;o+=2){var f=c[o],h=c[o+1];f==="style"?b5(i,h):f==="dangerouslySetInnerHTML"?v5(i,h):f==="children"?qm(i,h):JS(i,f,h,d)}switch(l){case"input":Fw(i,a);break;case"textarea":g5(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?kd(i,!!a.multiple,v,!1):p!==!!a.multiple&&(a.defaultValue!=null?kd(i,!!a.multiple,a.defaultValue,!0):kd(i,!!a.multiple,a.multiple?[]:"",!1))}i[Xm]=a}catch(g){tr(e,e.return,g)}}break;case 6:if(qi(t,e),Ca(e),s&4){if(e.stateNode===null)throw Error(Be(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){tr(e,e.return,g)}}break;case 3:if(qi(t,e),Ca(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Km(t.containerInfo)}catch(g){tr(e,e.return,g)}break;case 4:qi(t,e),Ca(e);break;case 13:qi(t,e),Ca(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(OC=ur())),s&4&&YT(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(is=(d=is)||f,qi(t,e),is=d):qi(t,e),Ca(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(at=e,f=e.child;f!==null;){for(h=at=f;at!==null;){switch(p=at,v=p.child,p.tag){case 0:case 11:case 14:case 15:Am(4,p,p.return);break;case 1:wd(p,p.return);var j=p.stateNode;if(typeof j.componentWillUnmount=="function"){s=p,n=p.return;try{t=s,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(g){tr(s,n,g)}}break;case 5:wd(p,p.return);break;case 22:if(p.memoizedState!==null){JT(h);continue}}v!==null?(v.return=p,at=v):JT(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{i=h.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=y5("display",o))}catch(g){tr(e,e.return,g)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){tr(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:qi(t,e),Ca(e),s&4&&YT(e);break;case 21:break;default:qi(t,e),Ca(e)}}function Ca(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(HF(n)){var s=n;break e}n=n.return}throw Error(Be(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(qm(i,""),s.flags&=-33);var a=QT(e);bN(e,a,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=QT(e);yN(e,l,o);break;default:throw Error(Be(161))}}catch(c){tr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function CX(e,t,n){at=e,GF(e)}function GF(e,t,n){for(var s=(e.mode&1)!==0;at!==null;){var i=at,a=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||Px;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||is;l=Px;var d=is;if(Px=o,(is=c)&&!d)for(at=i;at!==null;)o=at,c=o.child,o.tag===22&&o.memoizedState!==null?ek(i):c!==null?(c.return=o,at=c):ek(i);for(;a!==null;)at=a,GF(a),a=a.sibling;at=i,Px=l,is=d}XT(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,at=a):XT(e)}}function XT(e){for(;at!==null;){var t=at;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:is||Xb(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!is)if(n===null)s.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Wi(t.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&LT(t,a,s);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}LT(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Km(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Be(163))}is||t.flags&512&&vN(t)}catch(p){tr(t,t.return,p)}}if(t===e){at=null;break}if(n=t.sibling,n!==null){n.return=t.return,at=n;break}at=t.return}}function JT(e){for(;at!==null;){var t=at;if(t===e){at=null;break}var n=t.sibling;if(n!==null){n.return=t.return,at=n;break}at=t.return}}function ek(e){for(;at!==null;){var t=at;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Xb(4,t)}catch(c){tr(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(c){tr(t,i,c)}}var a=t.return;try{vN(t)}catch(c){tr(t,a,c)}break;case 5:var o=t.return;try{vN(t)}catch(c){tr(t,o,c)}}}catch(c){tr(t,t.return,c)}if(t===e){at=null;break}var l=t.sibling;if(l!==null){l.return=t.return,at=l;break}at=t.return}}var PX=Math.ceil,Xv=Jo.ReactCurrentDispatcher,TC=Jo.ReactCurrentOwner,Ti=Jo.ReactCurrentBatchConfig,nn=0,zr=null,yr=null,Qr=0,Gs=0,Nd=lc(0),Or=0,sp=null,au=0,Jb=0,kC=0,Em=null,Is=null,OC=0,xf=1/0,yo=null,Jv=!1,jN=null,Bl=null,Ax=!1,Ml=null,ey=0,Tm=0,_N=null,gv=-1,xv=0;function ws(){return nn&6?ur():gv!==-1?gv:gv=ur()}function Vl(e){return e.mode&1?nn&2&&Qr!==0?Qr&-Qr:uX.transition!==null?(xv===0&&(xv=O5()),xv):(e=gn,e!==0||(e=window.event,e=e===void 0?16:F5(e.type)),e):1}function ia(e,t,n,s){if(50<Tm)throw Tm=0,_N=null,Error(Be(185));mg(e,n,s),(!(nn&2)||e!==zr)&&(e===zr&&(!(nn&2)&&(Jb|=n),Or===4&&bl(e,Qr)),zs(e,s),n===1&&nn===0&&!(t.mode&1)&&(xf=ur()+500,Zb&&cc()))}function zs(e,t){var n=e.callbackNode;uY(e,t);var s=Dv(e,e===zr?Qr:0);if(s===0)n!==null&&cT(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&cT(n),t===1)e.tag===0?cX(tk.bind(null,e)):sF(tk.bind(null,e)),iX(function(){!(nn&6)&&cc()}),n=null;else{switch(M5(s)){case 1:n=sC;break;case 4:n=T5;break;case 16:n=Lv;break;case 536870912:n=k5;break;default:n=Lv}n=n6(n,ZF.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ZF(e,t){if(gv=-1,xv=0,nn&6)throw Error(Be(327));var n=e.callbackNode;if(Ld()&&e.callbackNode!==n)return null;var s=Dv(e,e===zr?Qr:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=ty(e,s);else{t=s;var i=nn;nn|=2;var a=YF();(zr!==e||Qr!==t)&&(yo=null,xf=ur()+500,Xc(e,t));do try{TX();break}catch(l){QF(e,l)}while(!0);xC(),Xv.current=a,nn=i,yr!==null?t=0:(zr=null,Qr=0,t=Or)}if(t!==0){if(t===2&&(i=Zw(e),i!==0&&(s=i,t=wN(e,i))),t===1)throw n=sp,Xc(e,0),bl(e,s),zs(e,ur()),n;if(t===6)bl(e,s);else{if(i=e.current.alternate,!(s&30)&&!AX(i)&&(t=ty(e,s),t===2&&(a=Zw(e),a!==0&&(s=a,t=wN(e,a))),t===1))throw n=sp,Xc(e,0),bl(e,s),zs(e,ur()),n;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(Be(345));case 2:Tc(e,Is,yo);break;case 3:if(bl(e,s),(s&130023424)===s&&(t=OC+500-ur(),10<t)){if(Dv(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){ws(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=rN(Tc.bind(null,e,Is,yo),t);break}Tc(e,Is,yo);break;case 4:if(bl(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var o=31-sa(s);a=1<<o,o=t[o],o>i&&(i=o),s&=~a}if(s=i,s=ur()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*PX(s/1960))-s,10<s){e.timeoutHandle=rN(Tc.bind(null,e,Is,yo),s);break}Tc(e,Is,yo);break;case 5:Tc(e,Is,yo);break;default:throw Error(Be(329))}}}return zs(e,ur()),e.callbackNode===n?ZF.bind(null,e):null}function wN(e,t){var n=Em;return e.current.memoizedState.isDehydrated&&(Xc(e,t).flags|=256),e=ty(e,t),e!==2&&(t=Is,Is=n,t!==null&&NN(t)),e}function NN(e){Is===null?Is=e:Is.push.apply(Is,e)}function AX(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!ca(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bl(e,t){for(t&=~kC,t&=~Jb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-sa(t),s=1<<n;e[n]=-1,t&=~s}}function tk(e){if(nn&6)throw Error(Be(327));Ld();var t=Dv(e,0);if(!(t&1))return zs(e,ur()),null;var n=ty(e,t);if(e.tag!==0&&n===2){var s=Zw(e);s!==0&&(t=s,n=wN(e,s))}if(n===1)throw n=sp,Xc(e,0),bl(e,t),zs(e,ur()),n;if(n===6)throw Error(Be(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tc(e,Is,yo),zs(e,ur()),null}function MC(e,t){var n=nn;nn|=1;try{return e(t)}finally{nn=n,nn===0&&(xf=ur()+500,Zb&&cc())}}function ou(e){Ml!==null&&Ml.tag===0&&!(nn&6)&&Ld();var t=nn;nn|=1;var n=Ti.transition,s=gn;try{if(Ti.transition=null,gn=1,e)return e()}finally{gn=s,Ti.transition=n,nn=t,!(nn&6)&&cc()}}function IC(){Gs=Nd.current,$n(Nd)}function Xc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,sX(n)),yr!==null)for(n=yr.return;n!==null;){var s=n;switch(mC(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Vv();break;case 3:pf(),$n($s),$n(cs),wC();break;case 5:_C(s);break;case 4:pf();break;case 13:$n(Yn);break;case 19:$n(Yn);break;case 10:vC(s.type._context);break;case 22:case 23:IC()}n=n.return}if(zr=e,yr=e=ql(e.current,null),Qr=Gs=t,Or=0,sp=null,kC=Jb=au=0,Is=Em=null,$c!==null){for(t=0;t<$c.length;t++)if(n=$c[t],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,s.next=o}n.pending=s}$c=null}return e}function QF(e,t){do{var n=yr;try{if(xC(),hv.current=Yv,Qv){for(var s=Xn.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Qv=!1}if(iu=0,$r=Pr=Xn=null,Pm=!1,tp=0,TC.current=null,n===null||n.return===null){Or=1,sp=t,yr=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Qr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=VT(o);if(v!==null){v.flags&=-257,qT(v,o,l,a,t),v.mode&1&&BT(a,d,t),t=v,c=d;var j=t.updateQueue;if(j===null){var g=new Set;g.add(c),t.updateQueue=g}else j.add(c);break e}else{if(!(t&1)){BT(a,d,t),RC();break e}c=Error(Be(426))}}else if(qn&&l.mode&1){var x=VT(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),qT(x,o,l,a,t),pC(gf(c,l));break e}}a=c=gf(c,l),Or!==4&&(Or=2),Em===null?Em=[a]:Em.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var w=MF(a,c,t);RT(a,w);break e;case 1:l=c;var N=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof N.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Bl===null||!Bl.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t;var A=IF(a,l,t);RT(a,A);break e}}a=a.return}while(a!==null)}JF(n)}catch(P){t=P,yr===n&&n!==null&&(yr=n=n.return);continue}break}while(!0)}function YF(){var e=Xv.current;return Xv.current=Yv,e===null?Yv:e}function RC(){(Or===0||Or===3||Or===2)&&(Or=4),zr===null||!(au&268435455)&&!(Jb&268435455)||bl(zr,Qr)}function ty(e,t){var n=nn;nn|=2;var s=YF();(zr!==e||Qr!==t)&&(yo=null,Xc(e,t));do try{EX();break}catch(i){QF(e,i)}while(!0);if(xC(),nn=n,Xv.current=s,yr!==null)throw Error(Be(261));return zr=null,Qr=0,Or}function EX(){for(;yr!==null;)XF(yr)}function TX(){for(;yr!==null&&!tY();)XF(yr)}function XF(e){var t=t6(e.alternate,e,Gs);e.memoizedProps=e.pendingProps,t===null?JF(e):yr=t,TC.current=null}function JF(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=wX(n,t),n!==null){n.flags&=32767,yr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Or=6,yr=null;return}}else if(n=_X(n,t,Gs),n!==null){yr=n;return}if(t=t.sibling,t!==null){yr=t;return}yr=t=e}while(t!==null);Or===0&&(Or=5)}function Tc(e,t,n){var s=gn,i=Ti.transition;try{Ti.transition=null,gn=1,kX(e,t,n,s)}finally{Ti.transition=i,gn=s}return null}function kX(e,t,n,s){do Ld();while(Ml!==null);if(nn&6)throw Error(Be(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Be(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(dY(e,a),e===zr&&(yr=zr=null,Qr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ax||(Ax=!0,n6(Lv,function(){return Ld(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Ti.transition,Ti.transition=null;var o=gn;gn=1;var l=nn;nn|=4,TC.current=null,SX(e,n),KF(n,e),YY(tN),$v=!!eN,tN=eN=null,e.current=n,CX(n),nY(),nn=l,gn=o,Ti.transition=a}else e.current=n;if(Ax&&(Ax=!1,Ml=e,ey=i),a=e.pendingLanes,a===0&&(Bl=null),iY(n.stateNode),zs(e,ur()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(Jv)throw Jv=!1,e=jN,jN=null,e;return ey&1&&e.tag!==0&&Ld(),a=e.pendingLanes,a&1?e===_N?Tm++:(Tm=0,_N=e):Tm=0,cc(),null}function Ld(){if(Ml!==null){var e=M5(ey),t=Ti.transition,n=gn;try{if(Ti.transition=null,gn=16>e?16:e,Ml===null)var s=!1;else{if(e=Ml,Ml=null,ey=0,nn&6)throw Error(Be(331));var i=nn;for(nn|=4,at=e.current;at!==null;){var a=at,o=a.child;if(at.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(at=d;at!==null;){var f=at;switch(f.tag){case 0:case 11:case 15:Am(8,f,a)}var h=f.child;if(h!==null)h.return=f,at=h;else for(;at!==null;){f=at;var p=f.sibling,v=f.return;if(UF(f),f===d){at=null;break}if(p!==null){p.return=v,at=p;break}at=v}}}var j=a.alternate;if(j!==null){var g=j.child;if(g!==null){j.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}at=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,at=o;else e:for(;at!==null;){if(a=at,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Am(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,at=w;break e}at=a.return}}var N=e.current;for(at=N;at!==null;){o=at;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,at=y;else e:for(o=N;at!==null;){if(l=at,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Xb(9,l)}}catch(P){tr(l,l.return,P)}if(l===o){at=null;break e}var A=l.sibling;if(A!==null){A.return=l.return,at=A;break e}at=l.return}}if(nn=i,cc(),za&&typeof za.onPostCommitFiberRoot=="function")try{za.onPostCommitFiberRoot(Ub,e)}catch{}s=!0}return s}finally{gn=n,Ti.transition=t}}return!1}function nk(e,t,n){t=gf(n,t),t=MF(e,t,1),e=zl(e,t,1),t=ws(),e!==null&&(mg(e,1,t),zs(e,t))}function tr(e,t,n){if(e.tag===3)nk(e,e,n);else for(;t!==null;){if(t.tag===3){nk(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Bl===null||!Bl.has(s))){e=gf(n,e),e=IF(t,e,1),t=zl(t,e,1),e=ws(),t!==null&&(mg(t,1,e),zs(t,e));break}}t=t.return}}function OX(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=ws(),e.pingedLanes|=e.suspendedLanes&n,zr===e&&(Qr&n)===n&&(Or===4||Or===3&&(Qr&130023424)===Qr&&500>ur()-OC?Xc(e,0):kC|=n),zs(e,t)}function e6(e,t){t===0&&(e.mode&1?(t=vx,vx<<=1,!(vx&130023424)&&(vx=4194304)):t=1);var n=ws();e=Vo(e,t),e!==null&&(mg(e,t,n),zs(e,n))}function MX(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),e6(e,n)}function IX(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Be(314))}s!==null&&s.delete(t),e6(e,n)}var t6;t6=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$s.current)Ls=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ls=!1,jX(e,t,n);Ls=!!(e.flags&131072)}else Ls=!1,qn&&t.flags&1048576&&iF(t,Hv,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;pv(e,t),e=t.pendingProps;var i=ff(t,cs.current);Rd(t,n),i=SC(null,t,s,e,i,n);var a=CC();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fs(s)?(a=!0,qv(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bC(t),i.updater=Yb,t.stateNode=i,i._reactInternals=t,uN(t,s,e,n),t=hN(null,t,s,!0,a,n)):(t.tag=0,qn&&a&&hC(t),xs(null,t,i,n),t=t.child),t;case 16:s=t.elementType;e:{switch(pv(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=LX(s),e=Wi(s,e),i){case 0:t=fN(null,t,s,e,n);break e;case 1:t=WT(null,t,s,e,n);break e;case 11:t=UT(null,t,s,e,n);break e;case 14:t=HT(null,t,s,Wi(s.type,e),n);break e}throw Error(Be(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Wi(s,i),fN(e,t,s,i,n);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Wi(s,i),WT(e,t,s,i,n);case 3:e:{if($F(t),e===null)throw Error(Be(387));s=t.pendingProps,a=t.memoizedState,i=a.element,dF(e,t),Gv(t,s,null,n);var o=t.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=gf(Error(Be(423)),t),t=KT(e,t,s,n,i);break e}else if(s!==i){i=gf(Error(Be(424)),t),t=KT(e,t,s,n,i);break e}else for(ei=Fl(t.stateNode.containerInfo.firstChild),ni=t,qn=!0,Yi=null,n=cF(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hf(),s===i){t=qo(e,t,n);break e}xs(e,t,s,n)}t=t.child}return t;case 5:return fF(t),e===null&&oN(t),s=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,nN(s,i)?o=null:a!==null&&nN(s,a)&&(t.flags|=32),DF(e,t),xs(e,t,o,n),t.child;case 6:return e===null&&oN(t),null;case 13:return FF(e,t,n);case 4:return jC(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=mf(t,null,s,n):xs(e,t,s,n),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Wi(s,i),UT(e,t,s,i,n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:return xs(e,t,t.pendingProps.children,n),t.child;case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Tn(Wv,s._currentValue),s._currentValue=o,a!==null)if(ca(a.value,o)){if(a.children===i.children&&!$s.current){t=qo(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=ko(-1,n&-n),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),lN(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Be(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),lN(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,Rd(t,n),i=Oi(i),s=s(i),t.flags|=1,xs(e,t,s,n),t.child;case 14:return s=t.type,i=Wi(s,t.pendingProps),i=Wi(s.type,i),HT(e,t,s,i,n);case 15:return RF(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Wi(s,i),pv(e,t),t.tag=1,Fs(s)?(e=!0,qv(t)):e=!1,Rd(t,n),OF(t,s,i),uN(t,s,i,n),hN(null,t,s,!0,e,n);case 19:return zF(e,t,n);case 22:return LF(e,t,n)}throw Error(Be(156,t.tag))};function n6(e,t){return E5(e,t)}function RX(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ai(e,t,n,s){return new RX(e,t,n,s)}function LC(e){return e=e.prototype,!(!e||!e.isReactComponent)}function LX(e){if(typeof e=="function")return LC(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tC)return 11;if(e===nC)return 14}return 2}function ql(e,t){var n=e.alternate;return n===null?(n=Ai(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function vv(e,t,n,s,i,a){var o=2;if(s=e,typeof e=="function")LC(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case md:return Jc(n.children,i,a,t);case eC:o=8,i|=8;break;case Iw:return e=Ai(12,n,t,i|2),e.elementType=Iw,e.lanes=a,e;case Rw:return e=Ai(13,n,t,i),e.elementType=Rw,e.lanes=a,e;case Lw:return e=Ai(19,n,t,i),e.elementType=Lw,e.lanes=a,e;case f5:return ej(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case u5:o=10;break e;case d5:o=9;break e;case tC:o=11;break e;case nC:o=14;break e;case pl:o=16,s=null;break e}throw Error(Be(130,e==null?e:typeof e,""))}return t=Ai(o,n,t,i),t.elementType=e,t.type=s,t.lanes=a,t}function Jc(e,t,n,s){return e=Ai(7,e,s,t),e.lanes=n,e}function ej(e,t,n,s){return e=Ai(22,e,s,t),e.elementType=f5,e.lanes=n,e.stateNode={isHidden:!1},e}function E_(e,t,n){return e=Ai(6,e,null,t),e.lanes=n,e}function T_(e,t,n){return t=Ai(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function DX(e,t,n,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=u_(0),this.expirationTimes=u_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=u_(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function DC(e,t,n,s,i,a,o,l,c){return e=new DX(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ai(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bC(a),e}function $X(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hd,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function r6(e){if(!e)return Gl;e=e._reactInternals;e:{if(Pu(e)!==e||e.tag!==1)throw Error(Be(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Be(171))}if(e.tag===1){var n=e.type;if(Fs(n))return rF(e,n,t)}return t}function s6(e,t,n,s,i,a,o,l,c){return e=DC(n,s,!0,e,i,a,o,l,c),e.context=r6(null),n=e.current,s=ws(),i=Vl(n),a=ko(s,i),a.callback=t??null,zl(n,a,i),e.current.lanes=i,mg(e,i,s),zs(e,s),e}function tj(e,t,n,s){var i=t.current,a=ws(),o=Vl(i);return n=r6(n),t.context===null?t.context=n:t.pendingContext=n,t=ko(a,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=zl(i,t,o),e!==null&&(ia(e,i,o,a),fv(e,i,o)),o}function ny(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function $C(e,t){rk(e,t),(e=e.alternate)&&rk(e,t)}function FX(){return null}var i6=typeof reportError=="function"?reportError:function(e){console.error(e)};function FC(e){this._internalRoot=e}nj.prototype.render=FC.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Be(409));tj(e,t,null,null)};nj.prototype.unmount=FC.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ou(function(){tj(null,e,null,null)}),t[Bo]=null}};function nj(e){this._internalRoot=e}nj.prototype.unstable_scheduleHydration=function(e){if(e){var t=L5();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yl.length&&t!==0&&t<yl[n].priority;n++);yl.splice(n,0,e),n===0&&$5(e)}};function zC(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rj(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sk(){}function zX(e,t,n,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var d=ny(o);a.call(d)}}var o=s6(t,s,e,0,null,!1,!1,"",sk);return e._reactRootContainer=o,e[Bo]=o.current,Qm(e.nodeType===8?e.parentNode:e),ou(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var d=ny(c);l.call(d)}}var c=DC(e,0,!1,null,null,!1,!1,"",sk);return e._reactRootContainer=c,e[Bo]=c.current,Qm(e.nodeType===8?e.parentNode:e),ou(function(){tj(t,c,n,s)}),c}function sj(e,t,n,s,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=ny(o);l.call(c)}}tj(t,o,e,i)}else o=zX(n,t,e,i,s);return ny(o)}I5=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gm(t.pendingLanes);n!==0&&(iC(t,n|1),zs(t,ur()),!(nn&6)&&(xf=ur()+500,cc()))}break;case 13:ou(function(){var s=Vo(e,1);if(s!==null){var i=ws();ia(s,e,1,i)}}),$C(e,1)}};aC=function(e){if(e.tag===13){var t=Vo(e,134217728);if(t!==null){var n=ws();ia(t,e,134217728,n)}$C(e,134217728)}};R5=function(e){if(e.tag===13){var t=Vl(e),n=Vo(e,t);if(n!==null){var s=ws();ia(n,e,t,s)}$C(e,t)}};L5=function(){return gn};D5=function(e,t){var n=gn;try{return gn=e,t()}finally{gn=n}};Ww=function(e,t,n){switch(t){case"input":if(Fw(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var i=Gb(s);if(!i)throw Error(Be(90));m5(s),Fw(s,i)}}}break;case"textarea":g5(e,n);break;case"select":t=n.value,t!=null&&kd(e,!!n.multiple,t,!1)}};w5=MC;N5=ou;var BX={usingClientEntryPoint:!1,Events:[gg,vd,Gb,j5,_5,MC]},Gh={findFiberByHostInstance:Dc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VX={bundleType:Gh.bundleType,version:Gh.version,rendererPackageName:Gh.rendererPackageName,rendererConfig:Gh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=P5(e),e===null?null:e.stateNode},findFiberByHostInstance:Gh.findFiberByHostInstance||FX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ex=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ex.isDisabled&&Ex.supportsFiber)try{Ub=Ex.inject(VX),za=Ex}catch{}}ui.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BX;ui.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zC(t))throw Error(Be(200));return $X(e,t,null,n)};ui.createRoot=function(e,t){if(!zC(e))throw Error(Be(299));var n=!1,s="",i=i6;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=DC(e,1,!1,null,null,n,!1,s,i),e[Bo]=t.current,Qm(e.nodeType===8?e.parentNode:e),new FC(t)};ui.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Be(188)):(e=Object.keys(e).join(","),Error(Be(268,e)));return e=P5(t),e=e===null?null:e.stateNode,e};ui.flushSync=function(e){return ou(e)};ui.hydrate=function(e,t,n){if(!rj(t))throw Error(Be(200));return sj(null,e,t,!0,n)};ui.hydrateRoot=function(e,t,n){if(!zC(e))throw Error(Be(405));var s=n!=null&&n.hydratedSources||null,i=!1,a="",o=i6;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=s6(t,null,e,1,n??null,i,!1,a,o),e[Bo]=t.current,Qm(e),s)for(e=0;e<s.length;e++)n=s[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new nj(t)};ui.render=function(e,t,n){if(!rj(t))throw Error(Be(200));return sj(null,e,t,!1,n)};ui.unmountComponentAtNode=function(e){if(!rj(e))throw Error(Be(40));return e._reactRootContainer?(ou(function(){sj(null,null,e,!1,function(){e._reactRootContainer=null,e[Bo]=null})}),!0):!1};ui.unstable_batchedUpdates=MC;ui.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!rj(n))throw Error(Be(200));if(e==null||e._reactInternals===void 0)throw Error(Be(38));return sj(e,t,n,!1,s)};ui.version="18.3.1-next-f1338f8080-20240426";function a6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a6)}catch(e){console.error(e)}}a6(),a5.exports=ui;var uc=a5.exports;const qX=on(uc);var o6,ik=uc;o6=ik.createRoot,ik.hydrateRoot;function UX(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,s,i,a,o=[],l="",c=e.split("/");for(c[0]||c.shift();i=c.shift();)n=i[0],n==="*"?(o.push(n),l+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(s=i.indexOf("?",1),a=i.indexOf(".",1),o.push(i.substring(1,~s?s:~a?a:i.length)),l+=~s&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~s?"?":"")+"\\"+i.substring(a))):l+="/"+i;return{keys:o,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var l6={exports:{}},c6={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vf=_;function HX(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var WX=typeof Object.is=="function"?Object.is:HX,KX=vf.useState,GX=vf.useEffect,ZX=vf.useLayoutEffect,QX=vf.useDebugValue;function YX(e,t){var n=t(),s=KX({inst:{value:n,getSnapshot:t}}),i=s[0].inst,a=s[1];return ZX(function(){i.value=n,i.getSnapshot=t,k_(i)&&a({inst:i})},[e,n,t]),GX(function(){return k_(i)&&a({inst:i}),e(function(){k_(i)&&a({inst:i})})},[e]),QX(n),n}function k_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!WX(e,n)}catch{return!0}}function XX(e,t){return t()}var JX=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?XX:YX;c6.useSyncExternalStore=vf.useSyncExternalStore!==void 0?vf.useSyncExternalStore:JX;l6.exports=c6;var eJ=l6.exports;const tJ=s5.useInsertionEffect,nJ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u6=nJ?_.useLayoutEffect:_.useEffect,rJ=tJ||u6,BC=e=>{const t=_.useRef([e,(...n)=>t[0](...n)]).current;return rJ(()=>{t[0]=e}),t[1]},sJ="popstate",VC="pushState",qC="replaceState",iJ="hashchange",ak=[sJ,VC,qC,iJ],aJ=e=>{for(const t of ak)addEventListener(t,e);return()=>{for(const t of ak)removeEventListener(t,e)}},d6=(e,t)=>eJ.useSyncExternalStore(aJ,e,t),oJ=()=>location.search,lJ=({ssrSearch:e=""}={})=>d6(oJ,()=>e),ok=()=>location.pathname,cJ=({ssrPath:e}={})=>d6(ok,e?()=>e:ok),uJ=(e,{replace:t=!1,state:n=null}={})=>history[t?qC:VC](n,"",e),dJ=(e={})=>[cJ(e),uJ],lk=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[lk]>"u"){for(const e of[VC,qC]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),n}}Object.defineProperty(window,lk,{value:!0})}const fJ=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",f6=(e="")=>e==="/"?"":e,hJ=(e,t)=>e[0]==="~"?e.slice(1):f6(t)+e,mJ=(e="",t)=>fJ(ck(f6(e)),ck(t)),ck=e=>{try{return decodeURI(e)}catch{return e}},h6={hook:dJ,searchHook:lJ,parser:UX,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},m6=_.createContext(h6),rh=()=>_.useContext(m6),p6={},g6=_.createContext(p6),pJ=()=>_.useContext(g6),ij=e=>{const[t,n]=e.hook(e);return[mJ(e.base,t),BC((s,i)=>n(hJ(s,e.base),i))]},es=()=>ij(rh()),UC=(e,t,n,s)=>{const{pattern:i,keys:a}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),o=i.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=a!==!1?Object.fromEntries(a.map((h,p)=>[h,c[p]])):o.groups;let f={...c};return d&&Object.assign(f,d),f})(),...s?[l]:[]]:[!1,null]},gJ=e=>UC(rh().parser,e,es()[0]),xJ=({children:e,...t})=>{var f,h;const n=rh(),s=t.hook?h6:n;let i=s;const[a,o]=((f=t.ssrPath)==null?void 0:f.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=a),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let l=_.useRef({}),c=l.current,d=c;for(let p in s){const v=p==="base"?s[p]+(t[p]||""):t[p]||s[p];c===d&&v!==d[p]&&(l.current=d={...d}),d[p]=v,v!==s[p]&&(i=d)}return _.createElement(m6.Provider,{value:i,children:e})},uk=({children:e,component:t},n)=>t?_.createElement(t,{params:n}):typeof e=="function"?e(n):e,vJ=e=>{let t=_.useRef(p6),n=t.current;for(const s in e)e[s]!==n[s]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},Tt=({path:e,nest:t,match:n,...s})=>{const i=rh(),[a]=ij(i),[o,l,c]=n??UC(i.parser,e,a,t),d=vJ({...pJ(),...l});if(!o)return null;const f=c?_.createElement(xJ,{base:c},uk(s,d)):uk(s,d);return _.createElement(g6.Provider,{value:d,children:f})},un=_.forwardRef((e,t)=>{const n=rh(),[s,i]=ij(n),{to:a="",href:o=a,onClick:l,asChild:c,children:d,className:f,replace:h,state:p,...v}=e,j=BC(x=>{x.ctrlKey||x.metaKey||x.altKey||x.shiftKey||x.button!==0||(l==null||l(x),x.defaultPrevented||(x.preventDefault(),i(o,e)))}),g=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&_.isValidElement(d)?_.cloneElement(d,{onClick:j,href:g}):_.createElement("a",{...v,onClick:j,href:g,className:f!=null&&f.call?f(s===o):f,children:d,ref:t})}),x6=e=>Array.isArray(e)?e.flatMap(t=>x6(t&&t.type===_.Fragment?t.props.children:t)):[e],yJ=({children:e,location:t})=>{const n=rh(),[s]=ij(n);for(const i of x6(e)){let a=0;if(_.isValidElement(i)&&(a=UC(n.parser,i.props.path,t||s,i.props.nest))[0])return _.cloneElement(i,{match:a})}return null},bJ=e=>{const{to:t,href:n=t}=e,[,s]=es(),i=BC(()=>s(t||n,e));return u6(()=>{i()},[]),null};var sh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},lu=typeof window>"u"||"Deno"in globalThis;function _i(){}function jJ(e,t){return typeof e=="function"?e(t):e}function SN(e){return typeof e=="number"&&e>=0&&e!==1/0}function v6(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Dd(e,t){return typeof e=="function"?e(t):e}function Xi(e,t){return typeof e=="function"?e(t):e}function dk(e,t){const{type:n="all",exact:s,fetchStatus:i,predicate:a,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==HC(o,t.options))return!1}else if(!ip(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function fk(e,t){const{exact:n,status:s,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(cu(t.options.mutationKey)!==cu(a))return!1}else if(!ip(t.options.mutationKey,a))return!1}return!(s&&t.state.status!==s||i&&!i(t))}function HC(e,t){return((t==null?void 0:t.queryKeyHashFn)||cu)(e)}function cu(e){return JSON.stringify(e,(t,n)=>CN(n)?Object.keys(n).sort().reduce((s,i)=>(s[i]=n[i],s),{}):n)}function ip(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!ip(e[n],t[n])):!1}function y6(e,t){if(e===t)return e;const n=hk(e)&&hk(t);if(n||CN(e)&&CN(t)){const s=n?e:Object.keys(e),i=s.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{};let c=0;for(let d=0;d<o;d++){const f=n?d:a[d];(!n&&s.includes(f)||n)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,c++):(l[f]=y6(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&c++)}return i===o&&c===i?e:l}return t}function ry(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function hk(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function CN(e){if(!mk(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!mk(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function mk(e){return Object.prototype.toString.call(e)==="[object Object]"}function _J(e){return new Promise(t=>{setTimeout(t,e)})}function PN(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?y6(e,t):t}function wJ(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function NJ(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var WC=Symbol();function b6(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===WC?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Hc,wl,Yd,XL,SJ=(XL=class extends sh{constructor(){super();Nt(this,Hc);Nt(this,wl);Nt(this,Yd);tt(this,Yd,t=>{if(!lu&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){te(this,wl)||this.setEventListener(te(this,Yd))}onUnsubscribe(){var t;this.hasListeners()||((t=te(this,wl))==null||t.call(this),tt(this,wl,void 0))}setEventListener(t){var n;tt(this,Yd,t),(n=te(this,wl))==null||n.call(this),tt(this,wl,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){te(this,Hc)!==t&&(tt(this,Hc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof te(this,Hc)=="boolean"?te(this,Hc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Hc=new WeakMap,wl=new WeakMap,Yd=new WeakMap,XL),KC=new SJ,Xd,Nl,Jd,JL,CJ=(JL=class extends sh{constructor(){super();Nt(this,Xd,!0);Nt(this,Nl);Nt(this,Jd);tt(this,Jd,t=>{if(!lu&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){te(this,Nl)||this.setEventListener(te(this,Jd))}onUnsubscribe(){var t;this.hasListeners()||((t=te(this,Nl))==null||t.call(this),tt(this,Nl,void 0))}setEventListener(t){var n;tt(this,Jd,t),(n=te(this,Nl))==null||n.call(this),tt(this,Nl,t(this.setOnline.bind(this)))}setOnline(t){te(this,Xd)!==t&&(tt(this,Xd,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return te(this,Xd)}},Xd=new WeakMap,Nl=new WeakMap,Jd=new WeakMap,JL),sy=new CJ;function AN(){let e,t;const n=new Promise((i,a)=>{e=i,t=a});n.status="pending",n.catch(()=>{});function s(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{s({status:"fulfilled",value:i}),e(i)},n.reject=i=>{s({status:"rejected",reason:i}),t(i)},n}function PJ(e){return Math.min(1e3*2**e,3e4)}function j6(e){return(e??"online")==="online"?sy.isOnline():!0}var _6=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function O_(e){return e instanceof _6}function w6(e){let t=!1,n=0,s=!1,i;const a=AN(),o=g=>{var x;s||(p(new _6(g)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>KC.isFocused()&&(e.networkMode==="always"||sy.isOnline())&&e.canRun(),f=()=>j6(e.networkMode)&&e.canRun(),h=g=>{var x;s||(s=!0,(x=e.onSuccess)==null||x.call(e,g),i==null||i(),a.resolve(g))},p=g=>{var x;s||(s=!0,(x=e.onError)==null||x.call(e,g),i==null||i(),a.reject(g))},v=()=>new Promise(g=>{var x;i=w=>{(s||d())&&g(w)},(x=e.onPause)==null||x.call(e)}).then(()=>{var g;i=void 0,s||(g=e.onContinue)==null||g.call(e)}),j=()=>{if(s)return;let g;const x=n===0?e.initialPromise:void 0;try{g=x??e.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(h).catch(w=>{var E;if(s)return;const N=e.retry??(lu?0:3),y=e.retryDelay??PJ,A=typeof y=="function"?y(n,w):y,P=N===!0||typeof N=="number"&&n<N||typeof N=="function"&&N(n,w);if(t||!P){p(w);return}n++,(E=e.onFail)==null||E.call(e,n,w),_J(A).then(()=>d()?void 0:v()).then(()=>{t?p(w):j()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?j():v().then(j),a)}}function AJ(){let e=[],t=0,n=l=>{l()},s=l=>{l()},i=l=>setTimeout(l,0);const a=l=>{t?e.push(l):i(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{s(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{i=l}}}var Er=AJ(),Wc,e4,N6=(e4=class{constructor(){Nt(this,Wc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),SN(this.gcTime)&&tt(this,Wc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(lu?1/0:5*60*1e3))}clearGcTimeout(){te(this,Wc)&&(clearTimeout(te(this,Wc)),tt(this,Wc,void 0))}},Wc=new WeakMap,e4),ef,tf,ji,rs,cg,Kc,Ki,xo,t4,EJ=(t4=class extends N6{constructor(t){super();Nt(this,Ki);Nt(this,ef);Nt(this,tf);Nt(this,ji);Nt(this,rs);Nt(this,cg);Nt(this,Kc);tt(this,Kc,!1),tt(this,cg,t.defaultOptions),this.setOptions(t.options),this.observers=[],tt(this,ji,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,tt(this,ef,TJ(this.options)),this.state=t.state??te(this,ef),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=te(this,rs))==null?void 0:t.promise}setOptions(t){this.options={...te(this,cg),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&te(this,ji).remove(this)}setData(t,n){const s=PN(this.state.data,t,this.options);return Ut(this,Ki,xo).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){Ut(this,Ki,xo).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,i;const n=(s=te(this,rs))==null?void 0:s.promise;return(i=te(this,rs))==null||i.cancel(t),n?n.then(_i).catch(_i):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(te(this,ef))}isActive(){return this.observers.some(t=>Xi(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===WC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!v6(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=te(this,rs))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=te(this,rs))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),te(this,ji).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(te(this,rs)&&(te(this,Kc)?te(this,rs).cancel({revert:!0}):te(this,rs).cancelRetry()),this.scheduleGc()),te(this,ji).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ut(this,Ki,xo).call(this,{type:"invalidate"})}fetch(t,n){var c,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(te(this,rs))return te(this,rs).continueRetry(),te(this,rs).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(tt(this,Kc,!0),s.signal)})},a=()=>{const h=b6(this.options,n),p={queryKey:this.queryKey,meta:this.meta};return i(p),tt(this,Kc,!1),this.options.persister?this.options.persister(h,p,this):h(p)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(o),(c=this.options.behavior)==null||c.onFetch(o,this),tt(this,tf,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&Ut(this,Ki,xo).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta});const l=h=>{var p,v,j,g;O_(h)&&h.silent||Ut(this,Ki,xo).call(this,{type:"error",error:h}),O_(h)||((v=(p=te(this,ji).config).onError)==null||v.call(p,h,this),(g=(j=te(this,ji).config).onSettled)==null||g.call(j,this.state.data,h,this)),this.scheduleGc()};return tt(this,rs,w6({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:h=>{var p,v,j,g;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(x){l(x);return}(v=(p=te(this,ji).config).onSuccess)==null||v.call(p,h,this),(g=(j=te(this,ji).config).onSettled)==null||g.call(j,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,p)=>{Ut(this,Ki,xo).call(this,{type:"failed",failureCount:h,error:p})},onPause:()=>{Ut(this,Ki,xo).call(this,{type:"pause"})},onContinue:()=>{Ut(this,Ki,xo).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),te(this,rs).start()}},ef=new WeakMap,tf=new WeakMap,ji=new WeakMap,rs=new WeakMap,cg=new WeakMap,Kc=new WeakMap,Ki=new WeakSet,xo=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...S6(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return O_(i)&&i.revert&&te(this,tf)?{...te(this,tf),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),Er.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),te(this,ji).notify({query:this,type:"updated",action:t})})},t4);function S6(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:j6(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function TJ(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ea,n4,kJ=(n4=class extends sh{constructor(t={}){super();Nt(this,Ea);this.config=t,tt(this,Ea,new Map)}build(t,n,s){const i=n.queryKey,a=n.queryHash??HC(i,n);let o=this.get(a);return o||(o=new EJ({cache:this,queryKey:i,queryHash:a,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){te(this,Ea).has(t.queryHash)||(te(this,Ea).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=te(this,Ea).get(t.queryHash);n&&(t.destroy(),n===t&&te(this,Ea).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Er.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return te(this,Ea).get(t)}getAll(){return[...te(this,Ea).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>dk(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>dk(t,s)):n}notify(t){Er.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Er.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Er.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ea=new WeakMap,n4),Ta,ms,Gc,ka,hl,r4,OJ=(r4=class extends N6{constructor(t){super();Nt(this,ka);Nt(this,Ta);Nt(this,ms);Nt(this,Gc);this.mutationId=t.mutationId,tt(this,ms,t.mutationCache),tt(this,Ta,[]),this.state=t.state||C6(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){te(this,Ta).includes(t)||(te(this,Ta).push(t),this.clearGcTimeout(),te(this,ms).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){tt(this,Ta,te(this,Ta).filter(n=>n!==t)),this.scheduleGc(),te(this,ms).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){te(this,Ta).length||(this.state.status==="pending"?this.scheduleGc():te(this,ms).remove(this))}continue(){var t;return((t=te(this,Gc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,a,o,l,c,d,f,h,p,v,j,g,x,w,N,y,A,P,E,C;tt(this,Gc,w6({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(S,k)=>{Ut(this,ka,hl).call(this,{type:"failed",failureCount:S,error:k})},onPause:()=>{Ut(this,ka,hl).call(this,{type:"pause"})},onContinue:()=>{Ut(this,ka,hl).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>te(this,ms).canRun(this)}));const n=this.state.status==="pending",s=!te(this,Gc).canStart();try{if(!n){Ut(this,ka,hl).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(i=te(this,ms).config).onMutate)==null?void 0:a.call(i,t,this));const k=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));k!==this.state.context&&Ut(this,ka,hl).call(this,{type:"pending",context:k,variables:t,isPaused:s})}const S=await te(this,Gc).start();return await((d=(c=te(this,ms).config).onSuccess)==null?void 0:d.call(c,S,t,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,S,t,this.state.context)),await((v=(p=te(this,ms).config).onSettled)==null?void 0:v.call(p,S,null,this.state.variables,this.state.context,this)),await((g=(j=this.options).onSettled)==null?void 0:g.call(j,S,null,t,this.state.context)),Ut(this,ka,hl).call(this,{type:"success",data:S}),S}catch(S){try{throw await((w=(x=te(this,ms).config).onError)==null?void 0:w.call(x,S,t,this.state.context,this)),await((y=(N=this.options).onError)==null?void 0:y.call(N,S,t,this.state.context)),await((P=(A=te(this,ms).config).onSettled)==null?void 0:P.call(A,void 0,S,this.state.variables,this.state.context,this)),await((C=(E=this.options).onSettled)==null?void 0:C.call(E,void 0,S,t,this.state.context)),S}finally{Ut(this,ka,hl).call(this,{type:"error",error:S})}}finally{te(this,ms).runNext(this)}}},Ta=new WeakMap,ms=new WeakMap,Gc=new WeakMap,ka=new WeakSet,hl=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Er.batch(()=>{te(this,Ta).forEach(s=>{s.onMutationUpdate(t)}),te(this,ms).notify({mutation:this,type:"updated",action:t})})},r4);function C6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ks,ug,s4,MJ=(s4=class extends sh{constructor(t={}){super();Nt(this,Ks);Nt(this,ug);this.config=t,tt(this,Ks,new Map),tt(this,ug,Date.now())}build(t,n,s){const i=new OJ({mutationCache:this,mutationId:++fx(this,ug)._,options:t.defaultMutationOptions(n),state:s});return this.add(i),i}add(t){const n=Tx(t),s=te(this,Ks).get(n)??[];s.push(t),te(this,Ks).set(n,s),this.notify({type:"added",mutation:t})}remove(t){var s;const n=Tx(t);if(te(this,Ks).has(n)){const i=(s=te(this,Ks).get(n))==null?void 0:s.filter(a=>a!==t);i&&(i.length===0?te(this,Ks).delete(n):te(this,Ks).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var s;const n=(s=te(this,Ks).get(Tx(t)))==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var s;const n=(s=te(this,Ks).get(Tx(t)))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Er.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...te(this,Ks).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(s=>fk(n,s))}findAll(t={}){return this.getAll().filter(n=>fk(t,n))}notify(t){Er.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Er.batch(()=>Promise.all(t.map(n=>n.continue().catch(_i))))}},Ks=new WeakMap,ug=new WeakMap,s4);function Tx(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function pk(e){return{onFetch:(t,n)=>{var f,h,p,v,j;const s=t.options,i=(p=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,a=((v=t.state.data)==null?void 0:v.pages)||[],o=((j=t.state.data)==null?void 0:j.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const x=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},w=b6(t.options,t.fetchOptions),N=async(y,A,P)=>{if(g)return Promise.reject();if(A==null&&y.pages.length)return Promise.resolve(y);const E={queryKey:t.queryKey,pageParam:A,direction:P?"backward":"forward",meta:t.options.meta};x(E);const C=await w(E),{maxPages:S}=t.options,k=P?NJ:wJ;return{pages:k(y.pages,C,S),pageParams:k(y.pageParams,A,S)}};if(i&&a.length){const y=i==="backward",A=y?IJ:gk,P={pages:a,pageParams:o},E=A(s,P);l=await N(P,E,y)}else{const y=e??a.length;do{const A=c===0?o[0]??s.initialPageParam:gk(s,l);if(c>0&&A==null)break;l=await N(l,A),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>{var g,x;return(x=(g=t.options).persister)==null?void 0:x.call(g,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function gk(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function IJ(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var er,Sl,Cl,nf,rf,Pl,sf,af,i4,RJ=(i4=class{constructor(e={}){Nt(this,er);Nt(this,Sl);Nt(this,Cl);Nt(this,nf);Nt(this,rf);Nt(this,Pl);Nt(this,sf);Nt(this,af);tt(this,er,e.queryCache||new kJ),tt(this,Sl,e.mutationCache||new MJ),tt(this,Cl,e.defaultOptions||{}),tt(this,nf,new Map),tt(this,rf,new Map),tt(this,Pl,0)}mount(){fx(this,Pl)._++,te(this,Pl)===1&&(tt(this,sf,KC.subscribe(async e=>{e&&(await this.resumePausedMutations(),te(this,er).onFocus())})),tt(this,af,sy.subscribe(async e=>{e&&(await this.resumePausedMutations(),te(this,er).onOnline())})))}unmount(){var e,t;fx(this,Pl)._--,te(this,Pl)===0&&((e=te(this,sf))==null||e.call(this),tt(this,sf,void 0),(t=te(this,af))==null||t.call(this),tt(this,af,void 0))}isFetching(e){return te(this,er).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return te(this,Sl).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=te(this,er).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),s=te(this,er).build(this,n);return e.revalidateIfStale&&s.isStaleByTime(Dd(n.staleTime,s))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return te(this,er).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),i=te(this,er).get(s.queryHash),a=i==null?void 0:i.state.data,o=jJ(t,a);if(o!==void 0)return te(this,er).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Er.batch(()=>te(this,er).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=te(this,er).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=te(this,er);Er.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=te(this,er),s={type:"active",...e};return Er.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(s,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},s=Er.batch(()=>te(this,er).findAll(e).map(i=>i.cancel(n)));return Promise.all(s).then(_i).catch(_i)}invalidateQueries(e={},t={}){return Er.batch(()=>{if(te(this,er).findAll(e).forEach(s=>{s.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},s=Er.batch(()=>te(this,er).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(_i)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(_i)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=te(this,er).build(this,t);return n.isStaleByTime(Dd(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(_i).catch(_i)}fetchInfiniteQuery(e){return e.behavior=pk(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(_i).catch(_i)}ensureInfiniteQueryData(e){return e.behavior=pk(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return sy.isOnline()?te(this,Sl).resumePausedMutations():Promise.resolve()}getQueryCache(){return te(this,er)}getMutationCache(){return te(this,Sl)}getDefaultOptions(){return te(this,Cl)}setDefaultOptions(e){tt(this,Cl,e)}setQueryDefaults(e,t){te(this,nf).set(cu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...te(this,nf).values()];let n={};return t.forEach(s=>{ip(e,s.queryKey)&&(n={...n,...s.defaultOptions})}),n}setMutationDefaults(e,t){te(this,rf).set(cu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...te(this,rf).values()];let n={};return t.forEach(s=>{ip(e,s.mutationKey)&&(n={...n,...s.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...te(this,Cl).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=HC(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===WC&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...te(this,Cl).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){te(this,er).clear(),te(this,Sl).clear()}},er=new WeakMap,Sl=new WeakMap,Cl=new WeakMap,nf=new WeakMap,rf=new WeakMap,Pl=new WeakMap,sf=new WeakMap,af=new WeakMap,i4),Os,Xt,dg,ps,Zc,of,Al,Oa,fg,lf,cf,Qc,Yc,El,uf,dn,vm,EN,TN,kN,ON,MN,IN,RN,P6,a4,LJ=(a4=class extends sh{constructor(t,n){super();Nt(this,dn);Nt(this,Os);Nt(this,Xt);Nt(this,dg);Nt(this,ps);Nt(this,Zc);Nt(this,of);Nt(this,Al);Nt(this,Oa);Nt(this,fg);Nt(this,lf);Nt(this,cf);Nt(this,Qc);Nt(this,Yc);Nt(this,El);Nt(this,uf,new Set);this.options=n,tt(this,Os,t),tt(this,Oa,null),tt(this,Al,AN()),this.options.experimental_prefetchInRender||te(this,Al).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(te(this,Xt).addObserver(this),xk(te(this,Xt),this.options)?Ut(this,dn,vm).call(this):this.updateResult(),Ut(this,dn,ON).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return LN(te(this,Xt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return LN(te(this,Xt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ut(this,dn,MN).call(this),Ut(this,dn,IN).call(this),te(this,Xt).removeObserver(this)}setOptions(t,n){const s=this.options,i=te(this,Xt);if(this.options=te(this,Os).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xi(this.options.enabled,te(this,Xt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ut(this,dn,RN).call(this),te(this,Xt).setOptions(this.options),s._defaulted&&!ry(this.options,s)&&te(this,Os).getQueryCache().notify({type:"observerOptionsUpdated",query:te(this,Xt),observer:this});const a=this.hasListeners();a&&vk(te(this,Xt),i,this.options,s)&&Ut(this,dn,vm).call(this),this.updateResult(n),a&&(te(this,Xt)!==i||Xi(this.options.enabled,te(this,Xt))!==Xi(s.enabled,te(this,Xt))||Dd(this.options.staleTime,te(this,Xt))!==Dd(s.staleTime,te(this,Xt)))&&Ut(this,dn,EN).call(this);const o=Ut(this,dn,TN).call(this);a&&(te(this,Xt)!==i||Xi(this.options.enabled,te(this,Xt))!==Xi(s.enabled,te(this,Xt))||o!==te(this,El))&&Ut(this,dn,kN).call(this,o)}getOptimisticResult(t){const n=te(this,Os).getQueryCache().build(te(this,Os),t),s=this.createResult(n,t);return $J(this,s)&&(tt(this,ps,s),tt(this,of,this.options),tt(this,Zc,te(this,Xt).state)),s}getCurrentResult(){return te(this,ps)}trackResult(t,n){const s={};return Object.keys(t).forEach(i=>{Object.defineProperty(s,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),s}trackProp(t){te(this,uf).add(t)}getCurrentQuery(){return te(this,Xt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=te(this,Os).defaultQueryOptions(t),s=te(this,Os).getQueryCache().build(te(this,Os),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return Ut(this,dn,vm).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),te(this,ps)))}createResult(t,n){var S;const s=te(this,Xt),i=this.options,a=te(this,ps),o=te(this,Zc),l=te(this,of),d=t!==s?t.state:te(this,dg),{state:f}=t;let h={...f},p=!1,v;if(n._optimisticResults){const k=this.hasListeners(),I=!k&&xk(t,n),R=k&&vk(t,s,n,i);(I||R)&&(h={...h,...S6(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:j,errorUpdatedAt:g,status:x}=h;if(n.select&&h.data!==void 0)if(a&&h.data===(o==null?void 0:o.data)&&n.select===te(this,fg))v=te(this,lf);else try{tt(this,fg,n.select),v=n.select(h.data),v=PN(a==null?void 0:a.data,v,n),tt(this,lf,v),tt(this,Oa,null)}catch(k){tt(this,Oa,k)}else v=h.data;if(n.placeholderData!==void 0&&v===void 0&&x==="pending"){let k;if(a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))k=a.data;else if(k=typeof n.placeholderData=="function"?n.placeholderData((S=te(this,cf))==null?void 0:S.state.data,te(this,cf)):n.placeholderData,n.select&&k!==void 0)try{k=n.select(k),tt(this,Oa,null)}catch(I){tt(this,Oa,I)}k!==void 0&&(x="success",v=PN(a==null?void 0:a.data,k,n),p=!0)}te(this,Oa)&&(j=te(this,Oa),v=te(this,lf),g=Date.now(),x="error");const w=h.fetchStatus==="fetching",N=x==="pending",y=x==="error",A=N&&w,P=v!==void 0,C={status:x,fetchStatus:h.fetchStatus,isPending:N,isSuccess:x==="success",isError:y,isInitialLoading:A,isLoading:A,data:v,dataUpdatedAt:h.dataUpdatedAt,error:j,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:w,isRefetching:w&&!N,isLoadingError:y&&!P,isPaused:h.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:y&&P,isStale:GC(t,n),refetch:this.refetch,promise:te(this,Al)};if(this.options.experimental_prefetchInRender){const k=D=>{C.status==="error"?D.reject(C.error):C.data!==void 0&&D.resolve(C.data)},I=()=>{const D=tt(this,Al,C.promise=AN());k(D)},R=te(this,Al);switch(R.status){case"pending":t.queryHash===s.queryHash&&k(R);break;case"fulfilled":(C.status==="error"||C.data!==R.value)&&I();break;case"rejected":(C.status!=="error"||C.error!==R.reason)&&I();break}}return C}updateResult(t){const n=te(this,ps),s=this.createResult(te(this,Xt),this.options);if(tt(this,Zc,te(this,Xt).state),tt(this,of,this.options),te(this,Zc).data!==void 0&&tt(this,cf,te(this,Xt)),ry(s,n))return;tt(this,ps,s);const i={},a=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!te(this,uf).size)return!0;const c=new Set(l??te(this,uf));return this.options.throwOnError&&c.add("error"),Object.keys(te(this,ps)).some(d=>{const f=d;return te(this,ps)[f]!==n[f]&&c.has(f)})};(t==null?void 0:t.listeners)!==!1&&a()&&(i.listeners=!0),Ut(this,dn,P6).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ut(this,dn,ON).call(this)}},Os=new WeakMap,Xt=new WeakMap,dg=new WeakMap,ps=new WeakMap,Zc=new WeakMap,of=new WeakMap,Al=new WeakMap,Oa=new WeakMap,fg=new WeakMap,lf=new WeakMap,cf=new WeakMap,Qc=new WeakMap,Yc=new WeakMap,El=new WeakMap,uf=new WeakMap,dn=new WeakSet,vm=function(t){Ut(this,dn,RN).call(this);let n=te(this,Xt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(_i)),n},EN=function(){Ut(this,dn,MN).call(this);const t=Dd(this.options.staleTime,te(this,Xt));if(lu||te(this,ps).isStale||!SN(t))return;const s=v6(te(this,ps).dataUpdatedAt,t)+1;tt(this,Qc,setTimeout(()=>{te(this,ps).isStale||this.updateResult()},s))},TN=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(te(this,Xt)):this.options.refetchInterval)??!1},kN=function(t){Ut(this,dn,IN).call(this),tt(this,El,t),!(lu||Xi(this.options.enabled,te(this,Xt))===!1||!SN(te(this,El))||te(this,El)===0)&&tt(this,Yc,setInterval(()=>{(this.options.refetchIntervalInBackground||KC.isFocused())&&Ut(this,dn,vm).call(this)},te(this,El)))},ON=function(){Ut(this,dn,EN).call(this),Ut(this,dn,kN).call(this,Ut(this,dn,TN).call(this))},MN=function(){te(this,Qc)&&(clearTimeout(te(this,Qc)),tt(this,Qc,void 0))},IN=function(){te(this,Yc)&&(clearInterval(te(this,Yc)),tt(this,Yc,void 0))},RN=function(){const t=te(this,Os).getQueryCache().build(te(this,Os),this.options);if(t===te(this,Xt))return;const n=te(this,Xt);tt(this,Xt,t),tt(this,dg,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},P6=function(t){Er.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(te(this,ps))}),te(this,Os).getQueryCache().notify({query:te(this,Xt),type:"observerResultsUpdated"})})},a4);function DJ(e,t){return Xi(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function xk(e,t){return DJ(e,t)||e.state.data!==void 0&&LN(e,t,t.refetchOnMount)}function LN(e,t,n){if(Xi(t.enabled,e)!==!1){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&GC(e,t)}return!1}function vk(e,t,n,s){return(e!==t||Xi(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&GC(e,n)}function GC(e,t){return Xi(t.enabled,e)!==!1&&e.isStaleByTime(Dd(t.staleTime,e))}function $J(e,t){return!ry(e.getCurrentResult(),t)}var Tl,kl,Ms,wo,Fo,yv,DN,o4,FJ=(o4=class extends sh{constructor(n,s){super();Nt(this,Fo);Nt(this,Tl);Nt(this,kl);Nt(this,Ms);Nt(this,wo);tt(this,Tl,n),this.setOptions(s),this.bindMethods(),Ut(this,Fo,yv).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const s=this.options;this.options=te(this,Tl).defaultMutationOptions(n),ry(this.options,s)||te(this,Tl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:te(this,Ms),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&cu(s.mutationKey)!==cu(this.options.mutationKey)?this.reset():((i=te(this,Ms))==null?void 0:i.state.status)==="pending"&&te(this,Ms).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=te(this,Ms))==null||n.removeObserver(this)}onMutationUpdate(n){Ut(this,Fo,yv).call(this),Ut(this,Fo,DN).call(this,n)}getCurrentResult(){return te(this,kl)}reset(){var n;(n=te(this,Ms))==null||n.removeObserver(this),tt(this,Ms,void 0),Ut(this,Fo,yv).call(this),Ut(this,Fo,DN).call(this)}mutate(n,s){var i;return tt(this,wo,s),(i=te(this,Ms))==null||i.removeObserver(this),tt(this,Ms,te(this,Tl).getMutationCache().build(te(this,Tl),this.options)),te(this,Ms).addObserver(this),te(this,Ms).execute(n)}},Tl=new WeakMap,kl=new WeakMap,Ms=new WeakMap,wo=new WeakMap,Fo=new WeakSet,yv=function(){var s;const n=((s=te(this,Ms))==null?void 0:s.state)??C6();tt(this,kl,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},DN=function(n){Er.batch(()=>{var s,i,a,o,l,c,d,f;if(te(this,wo)&&this.hasListeners()){const h=te(this,kl).variables,p=te(this,kl).context;(n==null?void 0:n.type)==="success"?((i=(s=te(this,wo)).onSuccess)==null||i.call(s,n.data,h,p),(o=(a=te(this,wo)).onSettled)==null||o.call(a,n.data,null,h,p)):(n==null?void 0:n.type)==="error"&&((c=(l=te(this,wo)).onError)==null||c.call(l,n.error,h,p),(f=(d=te(this,wo)).onSettled)==null||f.call(d,void 0,n.error,h,p))}this.listeners.forEach(h=>{h(te(this,kl))})})},o4),A6=_.createContext(void 0),ih=e=>{const t=_.useContext(A6);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},zJ=({client:e,children:t})=>(_.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(A6.Provider,{value:e,children:t})),E6=_.createContext(!1),BJ=()=>_.useContext(E6);E6.Provider;function VJ(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var qJ=_.createContext(VJ()),UJ=()=>_.useContext(qJ);function T6(e,t){return typeof e=="function"?e(...t):!!e}function $N(){}var HJ=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},WJ=e=>{_.useEffect(()=>{e.clearReset()},[e])},KJ=({result:e,errorResetBoundary:t,throwOnError:n,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&T6(n,[e.error,s]),GJ=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},ZJ=(e,t)=>e.isLoading&&e.isFetching&&!t,QJ=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,yk=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function YJ(e,t,n){var f,h,p,v,j;const s=ih(),i=BJ(),a=UJ(),o=s.defaultQueryOptions(e);(h=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,o),o._optimisticResults=i?"isRestoring":"optimistic",GJ(o),HJ(o,a),WJ(a);const l=!s.getQueryCache().get(o.queryHash),[c]=_.useState(()=>new t(s,o)),d=c.getOptimisticResult(o);if(_.useSyncExternalStore(_.useCallback(g=>{const x=i?$N:c.subscribe(Er.batchCalls(g));return c.updateResult(),x},[c,i]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),_.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),QJ(o,d))throw yk(o,c,a);if(KJ({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash)}))throw d.error;if((v=(p=s.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||v.call(p,o,d),o.experimental_prefetchInRender&&!lu&&ZJ(d,i)){const g=l?yk(o,c,a):(j=s.getQueryCache().get(o.queryHash))==null?void 0:j.promise;g==null||g.catch($N).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function Ke(e,t){return YJ(e,LJ)}function dt(e,t){const n=ih(),[s]=_.useState(()=>new FJ(n,e));_.useEffect(()=>{s.setOptions(e)},[s,e]);const i=_.useSyncExternalStore(_.useCallback(o=>s.subscribe(Er.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=_.useCallback((o,l)=>{s.mutate(o,l).catch($N)},[s]);if(i.error&&T6(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}async function k6(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function rt(e,t,n){const i=await fetch(t,{method:e,headers:{"Content-Type":"application/json"},body:n?JSON.stringify(n):void 0,credentials:"include"});return await k6(i),await i.json()}const XJ=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t.join("/"),{credentials:"include"});return await k6(n),await n.json()},et=new RJ({defaultOptions:{queries:{queryFn:XJ({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),JJ=1,eee=1e6;let M_=0;function tee(){return M_=(M_+1)%Number.MAX_SAFE_INTEGER,M_.toString()}const I_=new Map,bk=e=>{if(I_.has(e))return;const t=setTimeout(()=>{I_.delete(e),km({type:"REMOVE_TOAST",toastId:e})},eee);I_.set(e,t)},nee=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,JJ)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?bk(n):e.toasts.forEach(s=>{bk(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},bv=[];let jv={toasts:[]};function km(e){jv=nee(jv,e),bv.forEach(t=>{t(jv)})}function ree({...e}){const t=tee(),n=i=>km({type:"UPDATE_TOAST",toast:{...i,id:t}}),s=()=>km({type:"DISMISS_TOAST",toastId:t});return km({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||s()}}}),{id:t,dismiss:s,update:n}}function At(){const[e,t]=_.useState(jv);return _.useEffect(()=>(bv.push(t),()=>{const n=bv.indexOf(t);n>-1&&bv.splice(n,1)}),[e]),{...e,toast:ree,dismiss:n=>km({type:"DISMISS_TOAST",toastId:n})}}function Ve(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function jk(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function aj(...e){return t=>{let n=!1;const s=e.map(i=>{const a=jk(i,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():jk(e[i],null)}}}}function Rt(...e){return _.useCallback(aj(...e),e)}function see(e,t){const n=_.createContext(t),s=a=>{const{children:o,...l}=a,c=_.useMemo(()=>l,Object.values(l));return r.jsx(n.Provider,{value:c,children:o})};s.displayName=e+"Provider";function i(a){const o=_.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[s,i]}function Nr(e,t=[]){let n=[];function s(a,o){const l=_.createContext(o),c=n.length;n=[...n,o];const d=h=>{var w;const{scope:p,children:v,...j}=h,g=((w=p==null?void 0:p[e])==null?void 0:w[c])||l,x=_.useMemo(()=>j,Object.values(j));return r.jsx(g.Provider,{value:x,children:v})};d.displayName=a+"Provider";function f(h,p){var g;const v=((g=p==null?void 0:p[e])==null?void 0:g[c])||l,j=_.useContext(v);if(j)return j;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[d,f]}const i=()=>{const a=n.map(o=>_.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return _.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[s,iee(i,...t)]}function iee(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return _.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function uu(e){const t=aee(e),n=_.forwardRef((s,i)=>{const{children:a,...o}=s,l=_.Children.toArray(a),c=l.find(oee);if(c){const d=c.props.children,f=l.map(h=>h===c?_.Children.count(d)>1?_.Children.only(null):_.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...o,ref:i,children:_.isValidElement(d)?_.cloneElement(d,void 0,f):null})}return r.jsx(t,{...o,ref:i,children:a})});return n.displayName=`${e}.Slot`,n}var oj=uu("Slot");function aee(e){const t=_.forwardRef((n,s)=>{const{children:i,...a}=n;if(_.isValidElement(i)){const o=cee(i),l=lee(a,i.props);return i.type!==_.Fragment&&(l.ref=s?aj(s,o):o),_.cloneElement(i,l)}return _.Children.count(i)>1?_.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var O6=Symbol("radix.slottable");function M6(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=O6,t}function oee(e){return _.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===O6}function lee(e,t){const n={...t};for(const s in t){const i=e[s],a=t[s];/^on[A-Z]/.test(s)?i&&a?n[s]=(...l)=>{a(...l),i(...l)}:i&&(n[s]=i):s==="style"?n[s]={...i,...a}:s==="className"&&(n[s]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}function cee(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function vg(e){const t=e+"CollectionProvider",[n,s]=Nr(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:x,children:w}=g,N=q.useRef(null),y=q.useRef(new Map).current;return r.jsx(i,{scope:x,itemMap:y,collectionRef:N,children:w})};o.displayName=t;const l=e+"CollectionSlot",c=uu(l),d=q.forwardRef((g,x)=>{const{scope:w,children:N}=g,y=a(l,w),A=Rt(x,y.collectionRef);return r.jsx(c,{ref:A,children:N})});d.displayName=l;const f=e+"CollectionItemSlot",h="data-radix-collection-item",p=uu(f),v=q.forwardRef((g,x)=>{const{scope:w,children:N,...y}=g,A=q.useRef(null),P=Rt(x,A),E=a(f,w);return q.useEffect(()=>(E.itemMap.set(A,{ref:A,...y}),()=>void E.itemMap.delete(A))),r.jsx(p,{[h]:"",ref:P,children:N})});v.displayName=f;function j(g){const x=a(e+"CollectionConsumer",g);return q.useCallback(()=>{const N=x.collectionRef.current;if(!N)return[];const y=Array.from(N.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((E,C)=>y.indexOf(E.ref.current)-y.indexOf(C.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:d,ItemSlot:v},j,s]}var uee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],st=uee.reduce((e,t)=>{const n=uu(`Primitive.${t}`),s=_.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:a})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function ZC(e,t){e&&uc.flushSync(()=>e.dispatchEvent(t))}function Un(e){const t=_.useRef(e);return _.useEffect(()=>{t.current=e}),_.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function dee(e,t=globalThis==null?void 0:globalThis.document){const n=Un(e);_.useEffect(()=>{const s=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var fee="DismissableLayer",FN="dismissableLayer.update",hee="dismissableLayer.pointerDownOutside",mee="dismissableLayer.focusOutside",_k,I6=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ah=_.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,d=_.useContext(I6),[f,h]=_.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=_.useState({}),j=Rt(t,C=>h(C)),g=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(x),N=f?g.indexOf(f):-1,y=d.layersWithOutsidePointerEventsDisabled.size>0,A=N>=w,P=gee(C=>{const S=C.target,k=[...d.branches].some(I=>I.contains(S));!A||k||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},p),E=xee(C=>{const S=C.target;[...d.branches].some(I=>I.contains(S))||(a==null||a(C),o==null||o(C),C.defaultPrevented||l==null||l())},p);return dee(C=>{N===d.layers.size-1&&(s==null||s(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},p),_.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(_k=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),wk(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=_k)}},[f,p,n,d]),_.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),wk())},[f,d]),_.useEffect(()=>{const C=()=>v({});return document.addEventListener(FN,C),()=>document.removeEventListener(FN,C)},[]),r.jsx(st.div,{...c,ref:j,style:{pointerEvents:y?A?"auto":"none":void 0,...e.style},onFocusCapture:Ve(e.onFocusCapture,E.onFocusCapture),onBlurCapture:Ve(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Ve(e.onPointerDownCapture,P.onPointerDownCapture)})});ah.displayName=fee;var pee="DismissableLayerBranch",R6=_.forwardRef((e,t)=>{const n=_.useContext(I6),s=_.useRef(null),i=Rt(t,s);return _.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),r.jsx(st.div,{...e,ref:i})});R6.displayName=pee;function gee(e,t=globalThis==null?void 0:globalThis.document){const n=Un(e),s=_.useRef(!1),i=_.useRef(()=>{});return _.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let c=function(){L6(hee,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function xee(e,t=globalThis==null?void 0:globalThis.document){const n=Un(e),s=_.useRef(!1);return _.useEffect(()=>{const i=a=>{a.target&&!s.current&&L6(mee,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function wk(){const e=new CustomEvent(FN);document.dispatchEvent(e)}function L6(e,t,n,{discrete:s}){const i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),s?ZC(i,a):i.dispatchEvent(a)}var vee=ah,yee=R6,hr=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},bee="Portal",yg=_.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[i,a]=_.useState(!1);hr(()=>a(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?qX.createPortal(r.jsx(st.div,{...s,ref:t}),o):null});yg.displayName=bee;function jee(e,t){return _.useReducer((n,s)=>t[n][s]??n,e)}var Vr=e=>{const{present:t,children:n}=e,s=_ee(t),i=typeof n=="function"?n({present:s.isPresent}):_.Children.only(n),a=Rt(s.ref,wee(i));return typeof n=="function"||s.isPresent?_.cloneElement(i,{ref:a}):null};Vr.displayName="Presence";function _ee(e){const[t,n]=_.useState(),s=_.useRef({}),i=_.useRef(e),a=_.useRef("none"),o=e?"mounted":"unmounted",[l,c]=jee(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const d=kx(s.current);a.current=l==="mounted"?d:"none"},[l]),hr(()=>{const d=s.current,f=i.current;if(f!==e){const p=a.current,v=kx(d);e?c("MOUNT"):v==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(f&&p!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),hr(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,h=v=>{const g=kx(s.current).includes(v.animationName);if(v.target===t&&g&&(c("ANIMATION_END"),!i.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},p=v=>{v.target===t&&(a.current=kx(s.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:_.useCallback(d=>{d&&(s.current=getComputedStyle(d)),n(d)},[])}}function kx(e){return(e==null?void 0:e.animationName)||"none"}function wee(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Vs({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,i]=Nee({defaultProp:t,onChange:n}),a=e!==void 0,o=a?e:s,l=Un(n),c=_.useCallback(d=>{if(a){const h=typeof d=="function"?d(e):d;h!==e&&l(h)}else i(d)},[a,e,i,l]);return[o,c]}function Nee({defaultProp:e,onChange:t}){const n=_.useState(e),[s]=n,i=_.useRef(s),a=Un(t);return _.useEffect(()=>{i.current!==s&&(a(s),i.current=s)},[s,i,a]),n}var See="VisuallyHidden",bg=_.forwardRef((e,t)=>r.jsx(st.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));bg.displayName=See;var Cee=bg,QC="ToastProvider",[YC,Pee,Aee]=vg("Toast"),[D6]=Nr("Toast",[Aee]),[Eee,lj]=D6(QC),$6=e=>{const{__scopeToast:t,label:n="Notification",duration:s=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[l,c]=_.useState(null),[d,f]=_.useState(0),h=_.useRef(!1),p=_.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${QC}\`. Expected non-empty \`string\`.`),r.jsx(YC.Provider,{scope:t,children:r.jsx(Eee,{scope:t,label:n,duration:s,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:_.useCallback(()=>f(v=>v+1),[]),onToastRemove:_.useCallback(()=>f(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};$6.displayName=QC;var F6="ToastViewport",Tee=["F8"],zN="toast.viewportPause",BN="toast.viewportResume",z6=_.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:s=Tee,label:i="Notifications ({hotkey})",...a}=e,o=lj(F6,n),l=Pee(n),c=_.useRef(null),d=_.useRef(null),f=_.useRef(null),h=_.useRef(null),p=Rt(t,h,o.onViewportChange),v=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=o.toastCount>0;_.useEffect(()=>{const x=w=>{var y;s.length!==0&&s.every(A=>w[A]||w.code===A)&&((y=h.current)==null||y.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[s]),_.useEffect(()=>{const x=c.current,w=h.current;if(j&&x&&w){const N=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(zN);w.dispatchEvent(E),o.isClosePausedRef.current=!0}},y=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(BN);w.dispatchEvent(E),o.isClosePausedRef.current=!1}},A=E=>{!x.contains(E.relatedTarget)&&y()},P=()=>{x.contains(document.activeElement)||y()};return x.addEventListener("focusin",N),x.addEventListener("focusout",A),x.addEventListener("pointermove",N),x.addEventListener("pointerleave",P),window.addEventListener("blur",N),window.addEventListener("focus",y),()=>{x.removeEventListener("focusin",N),x.removeEventListener("focusout",A),x.removeEventListener("pointermove",N),x.removeEventListener("pointerleave",P),window.removeEventListener("blur",N),window.removeEventListener("focus",y)}}},[j,o.isClosePausedRef]);const g=_.useCallback(({tabbingDirection:x})=>{const N=l().map(y=>{const A=y.ref.current,P=[A,...qee(A)];return x==="forwards"?P:P.reverse()});return(x==="forwards"?N.reverse():N).flat()},[l]);return _.useEffect(()=>{const x=h.current;if(x){const w=N=>{var P,E,C;const y=N.altKey||N.ctrlKey||N.metaKey;if(N.key==="Tab"&&!y){const S=document.activeElement,k=N.shiftKey;if(N.target===x&&k){(P=d.current)==null||P.focus();return}const D=g({tabbingDirection:k?"backwards":"forwards"}),z=D.findIndex(V=>V===S);R_(D.slice(z+1))?N.preventDefault():k?(E=d.current)==null||E.focus():(C=f.current)==null||C.focus()}};return x.addEventListener("keydown",w),()=>x.removeEventListener("keydown",w)}},[l,g]),r.jsxs(yee,{ref:c,role:"region","aria-label":i.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&r.jsx(VN,{ref:d,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"forwards"});R_(x)}}),r.jsx(YC.Slot,{scope:n,children:r.jsx(st.ol,{tabIndex:-1,...a,ref:p})}),j&&r.jsx(VN,{ref:f,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"backwards"});R_(x)}})]})});z6.displayName=F6;var B6="ToastFocusProxy",VN=_.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...i}=e,a=lj(B6,n);return r.jsx(bg,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&s()}})});VN.displayName=B6;var cj="Toast",kee="toast.swipeStart",Oee="toast.swipeMove",Mee="toast.swipeCancel",Iee="toast.swipeEnd",V6=_.forwardRef((e,t)=>{const{forceMount:n,open:s,defaultOpen:i,onOpenChange:a,...o}=e,[l=!0,c]=Vs({prop:s,defaultProp:i,onChange:a});return r.jsx(Vr,{present:n||l,children:r.jsx(Dee,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Un(e.onPause),onResume:Un(e.onResume),onSwipeStart:Ve(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ve(e.onSwipeMove,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ve(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ve(e.onSwipeEnd,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});V6.displayName=cj;var[Ree,Lee]=D6(cj,{onClose(){}}),Dee=_.forwardRef((e,t)=>{const{__scopeToast:n,type:s="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:f,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:v,...j}=e,g=lj(cj,n),[x,w]=_.useState(null),N=Rt(t,V=>w(V)),y=_.useRef(null),A=_.useRef(null),P=i||g.duration,E=_.useRef(0),C=_.useRef(P),S=_.useRef(0),{onToastAdd:k,onToastRemove:I}=g,R=Un(()=>{var K;(x==null?void 0:x.contains(document.activeElement))&&((K=g.viewport)==null||K.focus()),o()}),D=_.useCallback(V=>{!V||V===1/0||(window.clearTimeout(S.current),E.current=new Date().getTime(),S.current=window.setTimeout(R,V))},[R]);_.useEffect(()=>{const V=g.viewport;if(V){const K=()=>{D(C.current),d==null||d()},H=()=>{const W=new Date().getTime()-E.current;C.current=C.current-W,window.clearTimeout(S.current),c==null||c()};return V.addEventListener(zN,H),V.addEventListener(BN,K),()=>{V.removeEventListener(zN,H),V.removeEventListener(BN,K)}}},[g.viewport,P,c,d,D]),_.useEffect(()=>{a&&!g.isClosePausedRef.current&&D(P)},[a,P,g.isClosePausedRef,D]),_.useEffect(()=>(k(),()=>I()),[k,I]);const z=_.useMemo(()=>x?Z6(x):null,[x]);return g.viewport?r.jsxs(r.Fragment,{children:[z&&r.jsx($ee,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),r.jsx(Ree,{scope:n,onClose:R,children:uc.createPortal(r.jsx(YC.ItemSlot,{scope:n,children:r.jsx(vee,{asChild:!0,onEscapeKeyDown:Ve(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||R(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(st.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...j,ref:N,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ve(e.onKeyDown,V=>{V.key==="Escape"&&(l==null||l(V.nativeEvent),V.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:Ve(e.onPointerDown,V=>{V.button===0&&(y.current={x:V.clientX,y:V.clientY})}),onPointerMove:Ve(e.onPointerMove,V=>{if(!y.current)return;const K=V.clientX-y.current.x,H=V.clientY-y.current.y,W=!!A.current,B=["left","right"].includes(g.swipeDirection),$=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,G=B?$(0,K):0,ee=B?0:$(0,H),oe=V.pointerType==="touch"?10:2,fe={x:G,y:ee},Ee={originalEvent:V,delta:fe};W?(A.current=fe,Ox(Oee,h,Ee,{discrete:!1})):Nk(fe,g.swipeDirection,oe)?(A.current=fe,Ox(kee,f,Ee,{discrete:!1}),V.target.setPointerCapture(V.pointerId)):(Math.abs(K)>oe||Math.abs(H)>oe)&&(y.current=null)}),onPointerUp:Ve(e.onPointerUp,V=>{const K=A.current,H=V.target;if(H.hasPointerCapture(V.pointerId)&&H.releasePointerCapture(V.pointerId),A.current=null,y.current=null,K){const W=V.currentTarget,B={originalEvent:V,delta:K};Nk(K,g.swipeDirection,g.swipeThreshold)?Ox(Iee,v,B,{discrete:!0}):Ox(Mee,p,B,{discrete:!0}),W.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),$ee=e=>{const{__scopeToast:t,children:n,...s}=e,i=lj(cj,t),[a,o]=_.useState(!1),[l,c]=_.useState(!1);return Bee(()=>o(!0)),_.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(yg,{asChild:!0,children:r.jsx(bg,{...s,children:a&&r.jsxs(r.Fragment,{children:[i.label," ",n]})})})},Fee="ToastTitle",q6=_.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(st.div,{...s,ref:t})});q6.displayName=Fee;var zee="ToastDescription",U6=_.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(st.div,{...s,ref:t})});U6.displayName=zee;var H6="ToastAction",W6=_.forwardRef((e,t)=>{const{altText:n,...s}=e;return n.trim()?r.jsx(G6,{altText:n,asChild:!0,children:r.jsx(XC,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${H6}\`. Expected non-empty \`string\`.`),null)});W6.displayName=H6;var K6="ToastClose",XC=_.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e,i=Lee(K6,n);return r.jsx(G6,{asChild:!0,children:r.jsx(st.button,{type:"button",...s,ref:t,onClick:Ve(e.onClick,i.onClose)})})});XC.displayName=K6;var G6=_.forwardRef((e,t)=>{const{__scopeToast:n,altText:s,...i}=e;return r.jsx(st.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:t})});function Z6(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),Vee(s)){const i=s.ariaHidden||s.hidden||s.style.display==="none",a=s.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=s.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...Z6(s))}}),t}function Ox(e,t,n,{discrete:s}){const i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),s?ZC(i,a):i.dispatchEvent(a)}var Nk=(e,t,n=0)=>{const s=Math.abs(e.x),i=Math.abs(e.y),a=s>i;return t==="left"||t==="right"?a&&s>n:!a&&i>n};function Bee(e=()=>{}){const t=Un(e);hr(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[t])}function Vee(e){return e.nodeType===e.ELEMENT_NODE}function qee(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function R_(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var Uee=$6,Q6=z6,Y6=V6,X6=q6,J6=U6,ez=W6,tz=XC;function nz(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=nz(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function zt(){for(var e,t,n=0,s="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=nz(e))&&(s&&(s+=" "),s+=t);return s}const Sk=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Ck=zt,Au=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return Ck(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(d=>{const f=n==null?void 0:n[d],h=a==null?void 0:a[d];if(f===null)return null;const p=Sk(f)||Sk(h);return i[d][p]}),l=n&&Object.entries(n).reduce((d,f)=>{let[h,p]=f;return p===void 0||(d[h]=p),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,f)=>{let{class:h,className:p,...v}=f;return Object.entries(v).every(j=>{let[g,x]=j;return Array.isArray(x)?x.includes({...a,...l}[g]):{...a,...l}[g]===x})?[...d,h,p]:d},[]);return Ck(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hee=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rz=(...e)=>e.filter((t,n,s)=>!!t&&s.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wee={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kee=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:o,...l},c)=>_.createElement("svg",{ref:c,...Wee,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:rz("lucide",i),...l},[...o.map(([d,f])=>_.createElement(d,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=(e,t)=>{const n=_.forwardRef(({className:s,...i},a)=>_.createElement(Kee,{ref:a,iconNode:t,className:rz(`lucide-${Hee(e)}`,s),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=Me("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Me("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=Me("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=Me("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gee=Me("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=Me("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zee=Me("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=Me("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qee=Me("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=Me("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=Me("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=Me("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yee=Me("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=Me("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=Me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=Me("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=Me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=Me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xee=Me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jee=Me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=Me("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=Me("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=Me("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=Me("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=Me("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=Me("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ete=Me("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=Me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tte=Me("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=Me("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nte=Me("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=Me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rte=Me("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=Me("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ste=Me("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=Me("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=Me("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ite=Me("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=Me("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=Me("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=Me("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ate=Me("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=Me("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=Me("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=Me("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=Me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ote=Me("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lte=Me("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=Me("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=Me("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=Me("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=Me("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cte=Me("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=Me("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=Me("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=Me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=Me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=Me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=Me("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ute=Me("MapPinned",[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dte=Me("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=Me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=Me("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=Me("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fte=Me("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=Me("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=Me("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hte=Me("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=Me("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mte=Me("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=Me("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=Me("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=Me("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=Me("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=Me("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pte=Me("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=Me("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=Me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=Me("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=Me("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gte=Me("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=Me("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=Me("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=Me("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=Me("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=Me("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xte=Me("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=Me("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=Me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=Me("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=Me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Me("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Me("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=Me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=Me("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vte=Me("UserSearch",[["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}],["path",{d:"M10.3 15H7a4 4 0 0 0-4 4v2",key:"3bnktk"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=Me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=Me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=Me("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yte=Me("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=Me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=Me("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),uP="-",bte=e=>{const t=_te(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{const l=o.split(uP);return l[0]===""&&l.length!==1&&l.shift(),bz(l,t)||jte(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&s[o]?[...c,...s[o]]:c}}},bz=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),i=s?bz(e.slice(1),s):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(uP);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},kk=/^\[(.+)\]$/,jte=e=>{if(kk.test(e)){const t=kk.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},_te=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return Nte(Object.entries(e.classGroups),n).forEach(([a,o])=>{HN(o,s,a,t)}),s},HN=(e,t,n,s)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:Ok(t,i);a.classGroupId=n;return}if(typeof i=="function"){if(wte(i)){HN(i(s),t,n,s);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{HN(o,Ok(t,a),n,s)})})},Ok=(e,t)=>{let n=e;return t.split(uP).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},wte=e=>e.isThemeGetter,Nte=(e,t)=>t?e.map(([n,s])=>{const i=s.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[n,i]}):e,Ste=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const i=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,s=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=s.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},jz="!",Cte=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,i=t[0],a=t.length,o=l=>{const c=[];let d=0,f=0,h;for(let x=0;x<l.length;x++){let w=l[x];if(d===0){if(w===i&&(s||l.slice(x,x+a)===t)){c.push(l.slice(f,x)),f=x+a;continue}if(w==="/"){h=x;continue}}w==="["?d++:w==="]"&&d--}const p=c.length===0?l:l.substring(f),v=p.startsWith(jz),j=v?p.substring(1):p,g=h&&h>f?h-f:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:j,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},Pte=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},Ate=e=>({cache:Ste(e.cacheSize),parseClassName:Cte(e),...bte(e)}),Ete=/\s+/,Tte=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(Ete);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:f,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:v}=n(d);let j=!!v,g=s(j?p.substring(0,v):p);if(!g){if(!j){l=d+(l.length>0?" "+l:l);continue}if(g=s(p),!g){l=d+(l.length>0?" "+l:l);continue}j=!1}const x=Pte(f).join(":"),w=h?x+jz:x,N=w+g;if(a.includes(N))continue;a.push(N);const y=i(g,j);for(let A=0;A<y.length;++A){const P=y[A];a.push(w+P)}l=d+(l.length>0?" "+l:l)}return l};function kte(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=_z(t))&&(s&&(s+=" "),s+=n);return s}const _z=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=_z(e[s]))&&(n&&(n+=" "),n+=t);return n};function Ote(e,...t){let n,s,i,a=o;function o(c){const d=t.reduce((f,h)=>h(f),e());return n=Ate(d),s=n.cache.get,i=n.cache.set,a=l,l(c)}function l(c){const d=s(c);if(d)return d;const f=Tte(c,n);return i(c,f),f}return function(){return a(kte.apply(null,arguments))}}const Mn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},wz=/^\[(?:([a-z-]+):)?(.+)\]$/i,Mte=/^\d+\/\d+$/,Ite=new Set(["px","full","screen"]),Rte=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Lte=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Dte=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,$te=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Fte=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ho=e=>Fd(e)||Ite.has(e)||Mte.test(e),cl=e=>oh(e,"length",Kte),Fd=e=>!!e&&!Number.isNaN(Number(e)),D_=e=>oh(e,"number",Fd),Zh=e=>!!e&&Number.isInteger(Number(e)),zte=e=>e.endsWith("%")&&Fd(e.slice(0,-1)),Vt=e=>wz.test(e),ul=e=>Rte.test(e),Bte=new Set(["length","size","percentage"]),Vte=e=>oh(e,Bte,Nz),qte=e=>oh(e,"position",Nz),Ute=new Set(["image","url"]),Hte=e=>oh(e,Ute,Zte),Wte=e=>oh(e,"",Gte),Qh=()=>!0,oh=(e,t,n)=>{const s=wz.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},Kte=e=>Lte.test(e)&&!Dte.test(e),Nz=()=>!1,Gte=e=>$te.test(e),Zte=e=>Fte.test(e),Qte=()=>{const e=Mn("colors"),t=Mn("spacing"),n=Mn("blur"),s=Mn("brightness"),i=Mn("borderColor"),a=Mn("borderRadius"),o=Mn("borderSpacing"),l=Mn("borderWidth"),c=Mn("contrast"),d=Mn("grayscale"),f=Mn("hueRotate"),h=Mn("invert"),p=Mn("gap"),v=Mn("gradientColorStops"),j=Mn("gradientColorStopPositions"),g=Mn("inset"),x=Mn("margin"),w=Mn("opacity"),N=Mn("padding"),y=Mn("saturate"),A=Mn("scale"),P=Mn("sepia"),E=Mn("skew"),C=Mn("space"),S=Mn("translate"),k=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",Vt,t],D=()=>[Vt,t],z=()=>["",ho,cl],V=()=>["auto",Fd,Vt],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Vt],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[Fd,Vt];return{cacheSize:500,separator:":",theme:{colors:[Qh],spacing:[ho,cl],blur:["none","",ul,Vt],brightness:ee(),borderColor:[e],borderRadius:["none","","full",ul,Vt],borderSpacing:D(),borderWidth:z(),contrast:ee(),grayscale:$(),hueRotate:ee(),invert:$(),gap:D(),gradientColorStops:[e],gradientColorStopPositions:[zte,cl],inset:R(),margin:R(),opacity:ee(),padding:D(),saturate:ee(),scale:ee(),sepia:$(),skew:ee(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Vt]}],container:["container"],columns:[{columns:[ul]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),Vt]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Zh,Vt]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Vt]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Zh,Vt]}],"grid-cols":[{"grid-cols":[Qh]}],"col-start-end":[{col:["auto",{span:["full",Zh,Vt]},Vt]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[Qh]}],"row-start-end":[{row:["auto",{span:[Zh,Vt]},Vt]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Vt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Vt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Vt,t]}],"min-w":[{"min-w":[Vt,t,"min","max","fit"]}],"max-w":[{"max-w":[Vt,t,"none","full","min","max","fit","prose",{screen:[ul]},ul]}],h:[{h:[Vt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Vt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Vt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Vt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ul,cl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",D_]}],"font-family":[{font:[Qh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Vt]}],"line-clamp":[{"line-clamp":["none",Fd,D_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ho,Vt]}],"list-image":[{"list-image":["none",Vt]}],"list-style-type":[{list:["none","disc","decimal",Vt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ho,cl]}],"underline-offset":[{"underline-offset":["auto",ho,Vt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Vt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Vt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),qte]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Vte]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Hte]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:H()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[ho,Vt]}],"outline-w":[{outline:[ho,cl]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ho,cl]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ul,Wte]}],"shadow-color":[{shadow:[Qh]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...W(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ul,Vt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[h]}],saturate:[{saturate:[y]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Vt]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",Vt]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",Vt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Zh,Vt]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Vt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Vt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Vt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ho,cl,D_]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Yte=Ote(Qte);function Oe(...e){return Yte(zt(e))}const Xte=Uee,Sz=_.forwardRef(({className:e,...t},n)=>r.jsx(Q6,{ref:n,className:Oe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Sz.displayName=Q6.displayName;const Jte=Au("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Cz=_.forwardRef(({className:e,variant:t,...n},s)=>r.jsx(Y6,{ref:s,className:Oe(Jte({variant:t}),e),...n}));Cz.displayName=Y6.displayName;const ene=_.forwardRef(({className:e,...t},n)=>r.jsx(ez,{ref:n,className:Oe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));ene.displayName=ez.displayName;const Pz=_.forwardRef(({className:e,...t},n)=>r.jsx(tz,{ref:n,className:Oe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(dc,{className:"h-4 w-4"})}));Pz.displayName=tz.displayName;const Az=_.forwardRef(({className:e,...t},n)=>r.jsx(X6,{ref:n,className:Oe("text-sm font-semibold",e),...t}));Az.displayName=X6.displayName;const Ez=_.forwardRef(({className:e,...t},n)=>r.jsx(J6,{ref:n,className:Oe("text-sm opacity-90",e),...t}));Ez.displayName=J6.displayName;function tne(){const{toasts:e}=At();return r.jsxs(Xte,{children:[e.map(function({id:t,title:n,description:s,action:i,...a}){return r.jsxs(Cz,{...a,children:[r.jsxs("div",{className:"grid gap-1",children:[n&&r.jsx(Az,{children:n}),s&&r.jsx(Ez,{children:s})]}),i,r.jsx(Pz,{})]},t)}),r.jsx(Sz,{})]})}var nne=s5[" useId ".trim().toString()]||(()=>{}),rne=0;function ri(e){const[t,n]=_.useState(nne());return hr(()=>{n(s=>s??String(rne++))},[e]),t?`radix-${t}`:""}const sne=["top","right","bottom","left"],Xl=Math.min,Ys=Math.max,dy=Math.round,Mx=Math.floor,qa=e=>({x:e,y:e}),ine={left:"right",right:"left",bottom:"top",top:"bottom"},ane={start:"end",end:"start"};function WN(e,t,n){return Ys(e,Xl(t,n))}function Ho(e,t){return typeof e=="function"?e(t):e}function Wo(e){return e.split("-")[0]}function lh(e){return e.split("-")[1]}function dP(e){return e==="x"?"y":"x"}function fP(e){return e==="y"?"height":"width"}function Jl(e){return["top","bottom"].includes(Wo(e))?"y":"x"}function hP(e){return dP(Jl(e))}function one(e,t,n){n===void 0&&(n=!1);const s=lh(e),i=hP(e),a=fP(i);let o=i==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=fy(o)),[o,fy(o)]}function lne(e){const t=fy(e);return[KN(e),t,KN(t)]}function KN(e){return e.replace(/start|end/g,t=>ane[t])}function cne(e,t,n){const s=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:s:t?s:i;case"left":case"right":return t?a:o;default:return[]}}function une(e,t,n,s){const i=lh(e);let a=cne(Wo(e),n==="start",s);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(KN)))),a}function fy(e){return e.replace(/left|right|bottom|top/g,t=>ine[t])}function dne(e){return{top:0,right:0,bottom:0,left:0,...e}}function Tz(e){return typeof e!="number"?dne(e):{top:e,right:e,bottom:e,left:e}}function hy(e){const{x:t,y:n,width:s,height:i}=e;return{width:s,height:i,top:n,left:t,right:t+s,bottom:n+i,x:t,y:n}}function Mk(e,t,n){let{reference:s,floating:i}=e;const a=Jl(t),o=hP(t),l=fP(o),c=Wo(t),d=a==="y",f=s.x+s.width/2-i.width/2,h=s.y+s.height/2-i.height/2,p=s[l]/2-i[l]/2;let v;switch(c){case"top":v={x:f,y:s.y-i.height};break;case"bottom":v={x:f,y:s.y+s.height};break;case"right":v={x:s.x+s.width,y:h};break;case"left":v={x:s.x-i.width,y:h};break;default:v={x:s.x,y:s.y}}switch(lh(t)){case"start":v[o]-=p*(n&&d?-1:1);break;case"end":v[o]+=p*(n&&d?-1:1);break}return v}const fne=async(e,t,n)=>{const{placement:s="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:h}=Mk(d,s,c),p=s,v={},j=0;for(let g=0;g<l.length;g++){const{name:x,fn:w}=l[g],{x:N,y,data:A,reset:P}=await w({x:f,y:h,initialPlacement:s,placement:p,strategy:i,middlewareData:v,rects:d,platform:o,elements:{reference:e,floating:t}});f=N??f,h=y??h,v={...v,[x]:{...v[x],...A}},P&&j<=50&&(j++,typeof P=="object"&&(P.placement&&(p=P.placement),P.rects&&(d=P.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):P.rects),{x:f,y:h}=Mk(d,p,c)),g=-1)}return{x:f,y:h,placement:p,strategy:i,middlewareData:v}};async function op(e,t){var n;t===void 0&&(t={});const{x:s,y:i,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:v=0}=Ho(t,e),j=Tz(v),x=l[p?h==="floating"?"reference":"floating":h],w=hy(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(x)))==null||n?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:c})),N=h==="floating"?{x:s,y:i,width:o.floating.width,height:o.floating.height}:o.reference,y=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),A=await(a.isElement==null?void 0:a.isElement(y))?await(a.getScale==null?void 0:a.getScale(y))||{x:1,y:1}:{x:1,y:1},P=hy(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:N,offsetParent:y,strategy:c}):N);return{top:(w.top-P.top+j.top)/A.y,bottom:(P.bottom-w.bottom+j.bottom)/A.y,left:(w.left-P.left+j.left)/A.x,right:(P.right-w.right+j.right)/A.x}}const hne=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:f=0}=Ho(e,t)||{};if(d==null)return{};const h=Tz(f),p={x:n,y:s},v=hP(i),j=fP(v),g=await o.getDimensions(d),x=v==="y",w=x?"top":"left",N=x?"bottom":"right",y=x?"clientHeight":"clientWidth",A=a.reference[j]+a.reference[v]-p[v]-a.floating[j],P=p[v]-a.reference[v],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let C=E?E[y]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=l.floating[y]||a.floating[j]);const S=A/2-P/2,k=C/2-g[j]/2-1,I=Xl(h[w],k),R=Xl(h[N],k),D=I,z=C-g[j]-R,V=C/2-g[j]/2+S,K=WN(D,V,z),H=!c.arrow&&lh(i)!=null&&V!==K&&a.reference[j]/2-(V<D?I:R)-g[j]/2<0,W=H?V<D?V-D:V-z:0;return{[v]:p[v]+W,data:{[v]:K,centerOffset:V-K-W,...H&&{alignmentOffset:W}},reset:H}}}),mne=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:g=!0,...x}=Ho(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const w=Wo(i),N=Jl(l),y=Wo(l)===l,A=await(c.isRTL==null?void 0:c.isRTL(d.floating)),P=p||(y||!g?[fy(l)]:lne(l)),E=j!=="none";!p&&E&&P.push(...une(l,g,j,A));const C=[l,...P],S=await op(t,x),k=[];let I=((s=a.flip)==null?void 0:s.overflows)||[];if(f&&k.push(S[w]),h){const V=one(i,o,A);k.push(S[V[0]],S[V[1]])}if(I=[...I,{placement:i,overflows:k}],!k.every(V=>V<=0)){var R,D;const V=(((R=a.flip)==null?void 0:R.index)||0)+1,K=C[V];if(K)return{data:{index:V,overflows:I},reset:{placement:K}};let H=(D=I.filter(W=>W.overflows[0]<=0).sort((W,B)=>W.overflows[1]-B.overflows[1])[0])==null?void 0:D.placement;if(!H)switch(v){case"bestFit":{var z;const W=(z=I.filter(B=>{if(E){const $=Jl(B.placement);return $===N||$==="y"}return!0}).map(B=>[B.placement,B.overflows.filter($=>$>0).reduce(($,G)=>$+G,0)]).sort((B,$)=>B[1]-$[1])[0])==null?void 0:z[0];W&&(H=W);break}case"initialPlacement":H=l;break}if(i!==H)return{reset:{placement:H}}}return{}}}};function Ik(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Rk(e){return sne.some(t=>e[t]>=0)}const pne=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...i}=Ho(e,t);switch(s){case"referenceHidden":{const a=await op(t,{...i,elementContext:"reference"}),o=Ik(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Rk(o)}}}case"escaped":{const a=await op(t,{...i,altBoundary:!0}),o=Ik(a,n.floating);return{data:{escapedOffsets:o,escaped:Rk(o)}}}default:return{}}}}};async function gne(e,t){const{placement:n,platform:s,elements:i}=e,a=await(s.isRTL==null?void 0:s.isRTL(i.floating)),o=Wo(n),l=lh(n),c=Jl(n)==="y",d=["left","top"].includes(o)?-1:1,f=a&&c?-1:1,h=Ho(t,e);let{mainAxis:p,crossAxis:v,alignmentAxis:j}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof j=="number"&&(v=l==="end"?j*-1:j),c?{x:v*f,y:p*d}:{x:p*d,y:v*f}}const xne=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:i,y:a,placement:o,middlewareData:l}=t,c=await gne(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},vne=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:w,y:N}=x;return{x:w,y:N}}},...c}=Ho(e,t),d={x:n,y:s},f=await op(t,c),h=Jl(Wo(i)),p=dP(h);let v=d[p],j=d[h];if(a){const x=p==="y"?"top":"left",w=p==="y"?"bottom":"right",N=v+f[x],y=v-f[w];v=WN(N,v,y)}if(o){const x=h==="y"?"top":"left",w=h==="y"?"bottom":"right",N=j+f[x],y=j-f[w];j=WN(N,j,y)}const g=l.fn({...t,[p]:v,[h]:j});return{...g,data:{x:g.x-n,y:g.y-s,enabled:{[p]:a,[h]:o}}}}}},yne=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Ho(e,t),f={x:n,y:s},h=Jl(i),p=dP(h);let v=f[p],j=f[h];const g=Ho(l,t),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const y=p==="y"?"height":"width",A=a.reference[p]-a.floating[y]+x.mainAxis,P=a.reference[p]+a.reference[y]-x.mainAxis;v<A?v=A:v>P&&(v=P)}if(d){var w,N;const y=p==="y"?"width":"height",A=["top","left"].includes(Wo(i)),P=a.reference[h]-a.floating[y]+(A&&((w=o.offset)==null?void 0:w[h])||0)+(A?0:x.crossAxis),E=a.reference[h]+a.reference[y]+(A?0:((N=o.offset)==null?void 0:N[h])||0)-(A?x.crossAxis:0);j<P?j=P:j>E&&(j=E)}return{[p]:v,[h]:j}}}},bne=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Ho(e,t),f=await op(t,d),h=Wo(i),p=lh(i),v=Jl(i)==="y",{width:j,height:g}=a.floating;let x,w;h==="top"||h==="bottom"?(x=h,w=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(w=h,x=p==="end"?"top":"bottom");const N=g-f.top-f.bottom,y=j-f.left-f.right,A=Xl(g-f[x],N),P=Xl(j-f[w],y),E=!t.middlewareData.shift;let C=A,S=P;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(S=y),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(C=N),E&&!p){const I=Ys(f.left,0),R=Ys(f.right,0),D=Ys(f.top,0),z=Ys(f.bottom,0);v?S=j-2*(I!==0||R!==0?I+R:Ys(f.left,f.right)):C=g-2*(D!==0||z!==0?D+z:Ys(f.top,f.bottom))}await c({...t,availableWidth:S,availableHeight:C});const k=await o.getDimensions(l.floating);return j!==k.width||g!==k.height?{reset:{rects:!0}}:{}}}};function dj(){return typeof window<"u"}function ch(e){return kz(e)?(e.nodeName||"").toLowerCase():"#document"}function si(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ro(e){var t;return(t=(kz(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function kz(e){return dj()?e instanceof Node||e instanceof si(e).Node:!1}function fa(e){return dj()?e instanceof Element||e instanceof si(e).Element:!1}function Ga(e){return dj()?e instanceof HTMLElement||e instanceof si(e).HTMLElement:!1}function Lk(e){return!dj()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof si(e).ShadowRoot}function _g(e){const{overflow:t,overflowX:n,overflowY:s,display:i}=ha(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(i)}function jne(e){return["table","td","th"].includes(ch(e))}function fj(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function mP(e){const t=pP(),n=fa(e)?ha(e):e;return["transform","translate","scale","rotate","perspective"].some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function _ne(e){let t=ec(e);for(;Ga(t)&&!jf(t);){if(mP(t))return t;if(fj(t))return null;t=ec(t)}return null}function pP(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function jf(e){return["html","body","#document"].includes(ch(e))}function ha(e){return si(e).getComputedStyle(e)}function hj(e){return fa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ec(e){if(ch(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Lk(e)&&e.host||ro(e);return Lk(t)?t.host:t}function Oz(e){const t=ec(e);return jf(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ga(t)&&_g(t)?t:Oz(t)}function lp(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Oz(e),a=i===((s=e.ownerDocument)==null?void 0:s.body),o=si(i);if(a){const l=GN(o);return t.concat(o,o.visualViewport||[],_g(i)?i:[],l&&n?lp(l):[])}return t.concat(i,lp(i,[],n))}function GN(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Mz(e){const t=ha(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const i=Ga(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:s,l=dy(n)!==a||dy(s)!==o;return l&&(n=a,s=o),{width:n,height:s,$:l}}function gP(e){return fa(e)?e:e.contextElement}function zd(e){const t=gP(e);if(!Ga(t))return qa(1);const n=t.getBoundingClientRect(),{width:s,height:i,$:a}=Mz(t);let o=(a?dy(n.width):n.width)/s,l=(a?dy(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const wne=qa(0);function Iz(e){const t=si(e);return!pP()||!t.visualViewport?wne:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Nne(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==si(e)?!1:t}function mu(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),a=gP(e);let o=qa(1);t&&(s?fa(s)&&(o=zd(s)):o=zd(e));const l=Nne(a,n,s)?Iz(a):qa(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,f=i.width/o.x,h=i.height/o.y;if(a){const p=si(a),v=s&&fa(s)?si(s):s;let j=p,g=GN(j);for(;g&&s&&v!==j;){const x=zd(g),w=g.getBoundingClientRect(),N=ha(g),y=w.left+(g.clientLeft+parseFloat(N.paddingLeft))*x.x,A=w.top+(g.clientTop+parseFloat(N.paddingTop))*x.y;c*=x.x,d*=x.y,f*=x.x,h*=x.y,c+=y,d+=A,j=si(g),g=GN(j)}}return hy({width:f,height:h,x:c,y:d})}function xP(e,t){const n=hj(e).scrollLeft;return t?t.left+n:mu(ro(e)).left+n}function Rz(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=s.left+t.scrollLeft-(n?0:xP(e,s)),a=s.top+t.scrollTop;return{x:i,y:a}}function Sne(e){let{elements:t,rect:n,offsetParent:s,strategy:i}=e;const a=i==="fixed",o=ro(s),l=t?fj(t.floating):!1;if(s===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},d=qa(1);const f=qa(0),h=Ga(s);if((h||!h&&!a)&&((ch(s)!=="body"||_g(o))&&(c=hj(s)),Ga(s))){const v=mu(s);d=zd(s),f.x=v.x+s.clientLeft,f.y=v.y+s.clientTop}const p=o&&!h&&!a?Rz(o,c,!0):qa(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+f.x+p.x,y:n.y*d.y-c.scrollTop*d.y+f.y+p.y}}function Cne(e){return Array.from(e.getClientRects())}function Pne(e){const t=ro(e),n=hj(e),s=e.ownerDocument.body,i=Ys(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),a=Ys(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+xP(e);const l=-n.scrollTop;return ha(s).direction==="rtl"&&(o+=Ys(t.clientWidth,s.clientWidth)-i),{width:i,height:a,x:o,y:l}}function Ane(e,t){const n=si(e),s=ro(e),i=n.visualViewport;let a=s.clientWidth,o=s.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const d=pP();(!d||d&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}function Ene(e,t){const n=mu(e,!0,t==="fixed"),s=n.top+e.clientTop,i=n.left+e.clientLeft,a=Ga(e)?zd(e):qa(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=i*a.x,d=s*a.y;return{width:o,height:l,x:c,y:d}}function Dk(e,t,n){let s;if(t==="viewport")s=Ane(e,n);else if(t==="document")s=Pne(ro(e));else if(fa(t))s=Ene(t,n);else{const i=Iz(e);s={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return hy(s)}function Lz(e,t){const n=ec(e);return n===t||!fa(n)||jf(n)?!1:ha(n).position==="fixed"||Lz(n,t)}function Tne(e,t){const n=t.get(e);if(n)return n;let s=lp(e,[],!1).filter(l=>fa(l)&&ch(l)!=="body"),i=null;const a=ha(e).position==="fixed";let o=a?ec(e):e;for(;fa(o)&&!jf(o);){const l=ha(o),c=mP(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||_g(o)&&!c&&Lz(e,o))?s=s.filter(f=>f!==o):i=l,o=ec(o)}return t.set(e,s),s}function kne(e){let{element:t,boundary:n,rootBoundary:s,strategy:i}=e;const o=[...n==="clippingAncestors"?fj(t)?[]:Tne(t,this._c):[].concat(n),s],l=o[0],c=o.reduce((d,f)=>{const h=Dk(t,f,i);return d.top=Ys(h.top,d.top),d.right=Xl(h.right,d.right),d.bottom=Xl(h.bottom,d.bottom),d.left=Ys(h.left,d.left),d},Dk(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function One(e){const{width:t,height:n}=Mz(e);return{width:t,height:n}}function Mne(e,t,n){const s=Ga(t),i=ro(t),a=n==="fixed",o=mu(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=qa(0);if(s||!s&&!a)if((ch(t)!=="body"||_g(i))&&(l=hj(t)),s){const p=mu(t,!0,a,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else i&&(c.x=xP(i));const d=i&&!s&&!a?Rz(i,l):qa(0),f=o.left+l.scrollLeft-c.x-d.x,h=o.top+l.scrollTop-c.y-d.y;return{x:f,y:h,width:o.width,height:o.height}}function $_(e){return ha(e).position==="static"}function $k(e,t){if(!Ga(e)||ha(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ro(e)===n&&(n=n.ownerDocument.body),n}function Dz(e,t){const n=si(e);if(fj(e))return n;if(!Ga(e)){let i=ec(e);for(;i&&!jf(i);){if(fa(i)&&!$_(i))return i;i=ec(i)}return n}let s=$k(e,t);for(;s&&jne(s)&&$_(s);)s=$k(s,t);return s&&jf(s)&&$_(s)&&!mP(s)?n:s||_ne(e)||n}const Ine=async function(e){const t=this.getOffsetParent||Dz,n=this.getDimensions,s=await n(e.floating);return{reference:Mne(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Rne(e){return ha(e).direction==="rtl"}const Lne={convertOffsetParentRelativeRectToViewportRelativeRect:Sne,getDocumentElement:ro,getClippingRect:kne,getOffsetParent:Dz,getElementRects:Ine,getClientRects:Cne,getDimensions:One,getScale:zd,isElement:fa,isRTL:Rne};function $z(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Dne(e,t){let n=null,s;const i=ro(e);function a(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=e.getBoundingClientRect(),{left:f,top:h,width:p,height:v}=d;if(l||t(),!p||!v)return;const j=Mx(h),g=Mx(i.clientWidth-(f+p)),x=Mx(i.clientHeight-(h+v)),w=Mx(f),y={rootMargin:-j+"px "+-g+"px "+-x+"px "+-w+"px",threshold:Ys(0,Xl(1,c))||1};let A=!0;function P(E){const C=E[0].intersectionRatio;if(C!==c){if(!A)return o();C?o(!1,C):s=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!$z(d,e.getBoundingClientRect())&&o(),A=!1}try{n=new IntersectionObserver(P,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(P,y)}n.observe(e)}return o(!0),a}function $ne(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=gP(e),f=i||a?[...d?lp(d):[],...lp(t)]:[];f.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),a&&w.addEventListener("resize",n)});const h=d&&l?Dne(d,n):null;let p=-1,v=null;o&&(v=new ResizeObserver(w=>{let[N]=w;N&&N.target===d&&v&&(v.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var y;(y=v)==null||y.observe(t)})),n()}),d&&!c&&v.observe(d),v.observe(t));let j,g=c?mu(e):null;c&&x();function x(){const w=mu(e);g&&!$z(g,w)&&n(),g=w,j=requestAnimationFrame(x)}return n(),()=>{var w;f.forEach(N=>{i&&N.removeEventListener("scroll",n),a&&N.removeEventListener("resize",n)}),h==null||h(),(w=v)==null||w.disconnect(),v=null,c&&cancelAnimationFrame(j)}}const Fne=xne,zne=vne,Bne=mne,Vne=bne,qne=pne,Fk=hne,Une=yne,Hne=(e,t,n)=>{const s=new Map,i={platform:Lne,...n},a={...i.platform,_c:s};return fne(e,t,{...i,platform:a})};var wv=typeof document<"u"?_.useLayoutEffect:_.useEffect;function my(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!my(e[s],t[s]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,i[s]))return!1;for(s=n;s--!==0;){const a=i[s];if(!(a==="_owner"&&e.$$typeof)&&!my(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Fz(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function zk(e,t){const n=Fz(e);return Math.round(t*n)/n}function F_(e){const t=_.useRef(e);return wv(()=>{t.current=e}),t}function Wne(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[f,h]=_.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,v]=_.useState(s);my(p,s)||v(s);const[j,g]=_.useState(null),[x,w]=_.useState(null),N=_.useCallback(B=>{B!==E.current&&(E.current=B,g(B))},[]),y=_.useCallback(B=>{B!==C.current&&(C.current=B,w(B))},[]),A=a||j,P=o||x,E=_.useRef(null),C=_.useRef(null),S=_.useRef(f),k=c!=null,I=F_(c),R=F_(i),D=F_(d),z=_.useCallback(()=>{if(!E.current||!C.current)return;const B={placement:t,strategy:n,middleware:p};R.current&&(B.platform=R.current),Hne(E.current,C.current,B).then($=>{const G={...$,isPositioned:D.current!==!1};V.current&&!my(S.current,G)&&(S.current=G,uc.flushSync(()=>{h(G)}))})},[p,t,n,R,D]);wv(()=>{d===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,h(B=>({...B,isPositioned:!1})))},[d]);const V=_.useRef(!1);wv(()=>(V.current=!0,()=>{V.current=!1}),[]),wv(()=>{if(A&&(E.current=A),P&&(C.current=P),A&&P){if(I.current)return I.current(A,P,z);z()}},[A,P,z,I,k]);const K=_.useMemo(()=>({reference:E,floating:C,setReference:N,setFloating:y}),[N,y]),H=_.useMemo(()=>({reference:A,floating:P}),[A,P]),W=_.useMemo(()=>{const B={position:n,left:0,top:0};if(!H.floating)return B;const $=zk(H.floating,f.x),G=zk(H.floating,f.y);return l?{...B,transform:"translate("+$+"px, "+G+"px)",...Fz(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:G}},[n,l,H.floating,f.x,f.y]);return _.useMemo(()=>({...f,update:z,refs:K,elements:H,floatingStyles:W}),[f,z,K,H,W])}const Kne=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:i}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?Fk({element:s.current,padding:i}).fn(n):{}:s?Fk({element:s,padding:i}).fn(n):{}}}},Gne=(e,t)=>({...Fne(e),options:[e,t]}),Zne=(e,t)=>({...zne(e),options:[e,t]}),Qne=(e,t)=>({...Une(e),options:[e,t]}),Yne=(e,t)=>({...Bne(e),options:[e,t]}),Xne=(e,t)=>({...Vne(e),options:[e,t]}),Jne=(e,t)=>({...qne(e),options:[e,t]}),ere=(e,t)=>({...Kne(e),options:[e,t]});var tre="Arrow",zz=_.forwardRef((e,t)=>{const{children:n,width:s=10,height:i=5,...a}=e;return r.jsx(st.svg,{...a,ref:t,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});zz.displayName=tre;var nre=zz;function mj(e){const[t,n]=_.useState(void 0);return hr(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var vP="Popper",[Bz,uh]=Nr(vP),[rre,Vz]=Bz(vP),qz=e=>{const{__scopePopper:t,children:n}=e,[s,i]=_.useState(null);return r.jsx(rre,{scope:t,anchor:s,onAnchorChange:i,children:n})};qz.displayName=vP;var Uz="PopperAnchor",Hz=_.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...i}=e,a=Vz(Uz,n),o=_.useRef(null),l=Rt(t,o);return _.useEffect(()=>{a.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:r.jsx(st.div,{...i,ref:l})});Hz.displayName=Uz;var yP="PopperContent",[sre,ire]=Bz(yP),Wz=_.forwardRef((e,t)=>{var ze,$e,me,Te,je,ue;const{__scopePopper:n,side:s="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:v="optimized",onPlaced:j,...g}=e,x=Vz(yP,n),[w,N]=_.useState(null),y=Rt(t,ct=>N(ct)),[A,P]=_.useState(null),E=mj(A),C=(E==null?void 0:E.width)??0,S=(E==null?void 0:E.height)??0,k=s+(a!=="center"?"-"+a:""),I=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},R=Array.isArray(d)?d:[d],D=R.length>0,z={padding:I,boundary:R.filter(ore),altBoundary:D},{refs:V,floatingStyles:K,placement:H,isPositioned:W,middlewareData:B}=Wne({strategy:"fixed",placement:k,whileElementsMounted:(...ct)=>$ne(...ct,{animationFrame:v==="always"}),elements:{reference:x.anchor},middleware:[Gne({mainAxis:i+S,alignmentAxis:o}),c&&Zne({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Qne():void 0,...z}),c&&Yne({...z}),Xne({...z,apply:({elements:ct,rects:Ge,availableWidth:ut,availableHeight:Xe})=>{const{width:qe,height:lt}=Ge.reference,It=ct.floating.style;It.setProperty("--radix-popper-available-width",`${ut}px`),It.setProperty("--radix-popper-available-height",`${Xe}px`),It.setProperty("--radix-popper-anchor-width",`${qe}px`),It.setProperty("--radix-popper-anchor-height",`${lt}px`)}}),A&&ere({element:A,padding:l}),lre({arrowWidth:C,arrowHeight:S}),p&&Jne({strategy:"referenceHidden",...z})]}),[$,G]=Zz(H),ee=Un(j);hr(()=>{W&&(ee==null||ee())},[W,ee]);const oe=(ze=B.arrow)==null?void 0:ze.x,fe=($e=B.arrow)==null?void 0:$e.y,Ee=((me=B.arrow)==null?void 0:me.centerOffset)!==0,[J,Pe]=_.useState();return hr(()=>{w&&Pe(window.getComputedStyle(w).zIndex)},[w]),r.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:W?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(Te=B.transformOrigin)==null?void 0:Te.x,(je=B.transformOrigin)==null?void 0:je.y].join(" "),...((ue=B.hide)==null?void 0:ue.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(sre,{scope:n,placedSide:$,onArrowChange:P,arrowX:oe,arrowY:fe,shouldHideArrow:Ee,children:r.jsx(st.div,{"data-side":$,"data-align":G,...g,ref:y,style:{...g.style,animation:W?void 0:"none"}})})})});Wz.displayName=yP;var Kz="PopperArrow",are={top:"bottom",right:"left",bottom:"top",left:"right"},Gz=_.forwardRef(function(t,n){const{__scopePopper:s,...i}=t,a=ire(Kz,s),o=are[a.placedSide];return r.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:r.jsx(nre,{...i,ref:n,style:{...i.style,display:"block"}})})});Gz.displayName=Kz;function ore(e){return e!==null}var lre=e=>({name:"transformOrigin",options:e,fn(t){var x,w,N;const{placement:n,rects:s,middlewareData:i}=t,o=((x=i.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,f]=Zz(n),h={start:"0%",center:"50%",end:"100%"}[f],p=(((w=i.arrow)==null?void 0:w.x)??0)+l/2,v=(((N=i.arrow)==null?void 0:N.y)??0)+c/2;let j="",g="";return d==="bottom"?(j=o?h:`${p}px`,g=`${-c}px`):d==="top"?(j=o?h:`${p}px`,g=`${s.floating.height+c}px`):d==="right"?(j=`${-c}px`,g=o?h:`${v}px`):d==="left"&&(j=`${s.floating.width+c}px`,g=o?h:`${v}px`),{data:{x:j,y:g}}}});function Zz(e){const[t,n="center"]=e.split("-");return[t,n]}var bP=qz,jP=Hz,_P=Wz,wP=Gz,[pj]=Nr("Tooltip",[uh]),gj=uh(),Qz="TooltipProvider",cre=700,ZN="tooltip.open",[ure,NP]=pj(Qz),Yz=e=>{const{__scopeTooltip:t,delayDuration:n=cre,skipDelayDuration:s=300,disableHoverableContent:i=!1,children:a}=e,o=_.useRef(!0),l=_.useRef(!1),c=_.useRef(0);return _.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(ure,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:_.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:_.useCallback(d=>{l.current=d},[]),disableHoverableContent:i,children:a})};Yz.displayName=Qz;var xj="Tooltip",[dre,vj]=pj(xj),Xz=e=>{const{__scopeTooltip:t,children:n,open:s,defaultOpen:i=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,c=NP(xj,e.__scopeTooltip),d=gj(t),[f,h]=_.useState(null),p=ri(),v=_.useRef(0),j=o??c.disableHoverableContent,g=l??c.delayDuration,x=_.useRef(!1),[w=!1,N]=Vs({prop:s,defaultProp:i,onChange:C=>{C?(c.onOpen(),document.dispatchEvent(new CustomEvent(ZN))):c.onClose(),a==null||a(C)}}),y=_.useMemo(()=>w?x.current?"delayed-open":"instant-open":"closed",[w]),A=_.useCallback(()=>{window.clearTimeout(v.current),v.current=0,x.current=!1,N(!0)},[N]),P=_.useCallback(()=>{window.clearTimeout(v.current),v.current=0,N(!1)},[N]),E=_.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{x.current=!0,N(!0),v.current=0},g)},[g,N]);return _.useEffect(()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)},[]),r.jsx(bP,{...d,children:r.jsx(dre,{scope:t,contentId:p,open:w,stateAttribute:y,trigger:f,onTriggerChange:h,onTriggerEnter:_.useCallback(()=>{c.isOpenDelayedRef.current?E():A()},[c.isOpenDelayedRef,E,A]),onTriggerLeave:_.useCallback(()=>{j?P():(window.clearTimeout(v.current),v.current=0)},[P,j]),onOpen:A,onClose:P,disableHoverableContent:j,children:n})})};Xz.displayName=xj;var QN="TooltipTrigger",Jz=_.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,i=vj(QN,n),a=NP(QN,n),o=gj(n),l=_.useRef(null),c=Rt(t,l,i.onTriggerChange),d=_.useRef(!1),f=_.useRef(!1),h=_.useCallback(()=>d.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),r.jsx(jP,{asChild:!0,...o,children:r.jsx(st.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...s,ref:c,onPointerMove:Ve(e.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),f.current=!0)}),onPointerLeave:Ve(e.onPointerLeave,()=>{i.onTriggerLeave(),f.current=!1}),onPointerDown:Ve(e.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ve(e.onFocus,()=>{d.current||i.onOpen()}),onBlur:Ve(e.onBlur,i.onClose),onClick:Ve(e.onClick,i.onClose)})})});Jz.displayName=QN;var fre="TooltipPortal",[q5e,hre]=pj(fre,{forceMount:void 0}),_f="TooltipContent",eB=_.forwardRef((e,t)=>{const n=hre(_f,e.__scopeTooltip),{forceMount:s=n.forceMount,side:i="top",...a}=e,o=vj(_f,e.__scopeTooltip);return r.jsx(Vr,{present:s||o.open,children:o.disableHoverableContent?r.jsx(tB,{side:i,...a,ref:t}):r.jsx(mre,{side:i,...a,ref:t})})}),mre=_.forwardRef((e,t)=>{const n=vj(_f,e.__scopeTooltip),s=NP(_f,e.__scopeTooltip),i=_.useRef(null),a=Rt(t,i),[o,l]=_.useState(null),{trigger:c,onClose:d}=n,f=i.current,{onPointerInTransitChange:h}=s,p=_.useCallback(()=>{l(null),h(!1)},[h]),v=_.useCallback((j,g)=>{const x=j.currentTarget,w={x:j.clientX,y:j.clientY},N=yre(w,x.getBoundingClientRect()),y=bre(w,N),A=jre(g.getBoundingClientRect()),P=wre([...y,...A]);l(P),h(!0)},[h]);return _.useEffect(()=>()=>p(),[p]),_.useEffect(()=>{if(c&&f){const j=x=>v(x,f),g=x=>v(x,c);return c.addEventListener("pointerleave",j),f.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",j),f.removeEventListener("pointerleave",g)}}},[c,f,v,p]),_.useEffect(()=>{if(o){const j=g=>{const x=g.target,w={x:g.clientX,y:g.clientY},N=(c==null?void 0:c.contains(x))||(f==null?void 0:f.contains(x)),y=!_re(w,o);N?p():y&&(p(),d())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[c,f,o,d,p]),r.jsx(tB,{...e,ref:a})}),[pre,gre]=pj(xj,{isInside:!1}),xre=M6("TooltipContent"),tB=_.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=vj(_f,n),d=gj(n),{onClose:f}=c;return _.useEffect(()=>(document.addEventListener(ZN,f),()=>document.removeEventListener(ZN,f)),[f]),_.useEffect(()=>{if(c.trigger){const h=p=>{const v=p.target;v!=null&&v.contains(c.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,f]),r.jsx(ah,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:r.jsxs(_P,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(xre,{children:s}),r.jsx(pre,{scope:n,isInside:!0,children:r.jsx(Cee,{id:c.contentId,role:"tooltip",children:i||s})})]})})});eB.displayName=_f;var nB="TooltipArrow",vre=_.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,i=gj(n);return gre(nB,n).isInside?null:r.jsx(wP,{...i,...s,ref:t})});vre.displayName=nB;function yre(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,s,i,a)){case a:return"left";case i:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function bre(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function jre(e){const{top:t,right:n,bottom:s,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:s},{x:i,y:s}]}function _re(e,t){const{x:n,y:s}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,f=t[o].y;c>s!=f>s&&n<(d-l)*(s-c)/(f-c)+l&&(i=!i)}return i}function wre(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),Nre(t)}function Nre(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const i=e[s];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const i=e[s];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Sre=Yz,Cre=Xz,Pre=Jz,rB=eB;const sB=Sre,Are=Cre,Ere=Pre,iB=_.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(rB,{ref:s,sideOffset:t,className:Oe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));iB.displayName=rB.displayName;var SP="Avatar",[Tre]=Nr(SP),[kre,aB]=Tre(SP),oB=_.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[i,a]=_.useState("idle");return r.jsx(kre,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:r.jsx(st.span,{...s,ref:t})})});oB.displayName=SP;var lB="AvatarImage",cB=_.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:i=()=>{},...a}=e,o=aB(lB,n),l=Ore(s,a),c=Un(d=>{i(d),o.onImageLoadingStatusChange(d)});return hr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?r.jsx(st.img,{...a,ref:t,src:s}):null});cB.displayName=lB;var uB="AvatarFallback",dB=_.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...i}=e,a=aB(uB,n),[o,l]=_.useState(s===void 0);return _.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),o&&a.imageLoadingStatus!=="loaded"?r.jsx(st.span,{...i,ref:t}):null});dB.displayName=uB;function Bk(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Ore(e,{referrerPolicy:t,crossOrigin:n}){const s=Ire(),i=_.useRef(null),a=s?(i.current||(i.current=new window.Image),i.current):null,[o,l]=_.useState(()=>Bk(a,e));return hr(()=>{l(Bk(a,e))},[a,e]),hr(()=>{const c=h=>()=>{l(h)};if(!a)return;const d=c("loaded"),f=c("error");return a.addEventListener("load",d),a.addEventListener("error",f),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",d),a.removeEventListener("error",f)}},[a,n,t]),o}function Mre(){return()=>{}}function Ire(){return _.useSyncExternalStore(Mre,()=>!0,()=>!1)}var fB=oB,hB=cB,mB=dB;const ma=_.forwardRef(({className:e,...t},n)=>r.jsx(fB,{ref:n,className:Oe(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,e),...t}));ma.displayName=fB.displayName;const tc=_.forwardRef(({className:e,...t},n)=>r.jsx(hB,{ref:n,className:Oe("aspect-square h-full w-full",e),...t}));tc.displayName=hB.displayName;const pa=_.forwardRef(({className:e,...t},n)=>r.jsx(mB,{ref:n,className:Oe("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));pa.displayName=mB.displayName;const wf="/assets/image_1761123466101-Bl_NhI5m.png";function Rre({message:e}){const t=e.role==="user";return r.jsxs("div",{className:`flex gap-2 md:gap-4 ${t?"flex-row-reverse":"flex-row"} animate-in slide-in-from-bottom-2 duration-150`,"data-testid":`message-${e.role}-${e.id}`,children:[!t&&r.jsxs(ma,{className:"w-8 h-8 md:w-10 md:h-10 border-2 border-primary shrink-0","data-testid":"avatar-hector",children:[r.jsx(tc,{src:wf,alt:"Hector",className:"object-cover"}),r.jsx(pa,{className:"bg-primary text-primary-foreground",children:r.jsx(fu,{className:"w-4 h-4 md:w-5 md:h-5"})})]}),r.jsxs("div",{className:`flex flex-col gap-1 max-w-[85%] md:max-w-[75%] ${t?"items-end":"items-start"}`,children:[r.jsx("div",{className:`px-3 py-3 md:px-6 md:py-4 rounded-2xl ${t?"bg-primary text-primary-foreground":"bg-card border border-card-border shadow-sm"}`,"data-testid":"text-message-content",children:r.jsx("p",{className:"text-sm md:text-base leading-relaxed whitespace-pre-wrap break-words",children:e.content})}),r.jsx("span",{className:"text-xs text-muted-foreground px-2","data-testid":"text-timestamp",children:new Date(e.createdAt).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),t&&r.jsx(ma,{className:"w-8 h-8 md:w-10 md:h-10 border border-border shrink-0","data-testid":"avatar-user",children:r.jsx(pa,{className:"bg-secondary text-secondary-foreground font-medium text-xs md:text-sm",children:"Vous"})})]})}const CP=Au("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),re=_.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...i},a)=>{const o=s?oj:"button";return r.jsx(o,{className:Oe(CP({variant:t,size:n,className:e})),ref:a,...i})});re.displayName="Button";const Dn=_.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:Oe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Dn.displayName="Textarea";function Lre(e,t){const[n,s]=_.useState(!1),[i,a]=_.useState(!1),o=_.useRef(null),l=_.useRef("");_.useEffect(()=>{const f=window,h=f.SpeechRecognition||f.webkitSpeechRecognition;if(h){a(!0);const p=new h;p.continuous=!1,p.interimResults=!1,p.lang="fr-FR",p.addEventListener("result",v=>{const j=v,g=j.resultIndex,x=j.results[g][0].transcript;l.current=x}),p.addEventListener("end",()=>{s(!1),l.current&&e&&e(l.current),l.current=""}),p.addEventListener("error",v=>{const j=v;if(console.error("Speech recognition error:",j.error),s(!1),l.current="",t){let g="Une erreur est survenue lors de la reconnaissance vocale";switch(j.error){case"not-allowed":case"permission-denied":g="Accs au microphone refus. Veuillez autoriser l'accs au microphone dans les paramtres de votre navigateur.";break;case"no-speech":g="Aucune parole dtecte. Veuillez ressayer.";break;case"audio-capture":g="Impossible d'accder au microphone. Vrifiez qu'aucune autre application ne l'utilise.";break;case"network":g="Erreur rseau. Vrifiez votre connexion internet.";break;case"aborted":return}t(g)}}),o.current=p}return()=>{o.current&&o.current.abort()}},[e,t]);const c=_.useCallback(()=>{if(o.current&&!n){l.current="",s(!0);try{o.current.start()}catch(f){console.error("Error starting speech recognition:",f),s(!1),t&&t("Impossible de dmarrer la reconnaissance vocale. Le microphone est peut-tre dj en cours d'utilisation.")}}},[n,t]),d=_.useCallback(()=>{o.current&&n&&o.current.stop()},[n]);return{isListening:n,isSupported:i,startListening:c,stopListening:d}}function Dre({onSendMessage:e,disabled:t=!1}){const[n,s]=_.useState(""),{toast:i}=At(),a=_.useCallback(j=>{s(g=>g?`${g} ${j}`:j)},[]),o=_.useCallback(j=>{i({title:"Erreur microphone",description:j,variant:"destructive"})},[i]),{isListening:l,isSupported:c,startListening:d,stopListening:f}=Lre(a,o),h=()=>{n.trim()&&!t&&(e(n.trim()),s(""))},p=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),h())},v=()=>{if(!c){i({title:"Non support",description:"La reconnaissance vocale n'est pas supporte par votre navigateur",variant:"destructive"});return}l?f():d()};return r.jsx("div",{className:"border-t bg-background p-2 md:p-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto flex gap-2 items-end",children:[r.jsx(Dn,{value:n,onChange:j=>s(j.target.value),onKeyDown:p,placeholder:"Posez votre question  Hector...",className:"resize-none min-h-[48px] md:min-h-[56px] max-h-[200px] text-sm md:text-base",disabled:t,"data-testid":"input-message",rows:1}),c&&r.jsx(re,{onClick:v,disabled:t,size:"icon",variant:l?"default":"ghost",className:"shrink-0","data-testid":"button-voice",title:l?"Arrter l'enregistrement":"Dicter avec le micro",children:l?r.jsx(mz,{className:"w-7 h-7 animate-pulse"}):r.jsx(pz,{className:"w-7 h-7"})}),r.jsx(re,{onClick:h,disabled:!n.trim()||t,size:"default",className:"shrink-0 h-[48px] md:h-auto","data-testid":"button-send",children:r.jsx(oP,{className:"w-4 h-4"})})]})})}const U=_.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Oe("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...t}));U.displayName="Card";const ne=_.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Oe("flex flex-col space-y-1.5 p-6",e),...t}));ne.displayName="CardHeader";const se=_.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Oe("text-2xl font-semibold leading-none tracking-tight",e),...t}));se.displayName="CardTitle";const jt=_.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Oe("text-sm text-muted-foreground",e),...t}));jt.displayName="CardDescription";const Z=_.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Oe("p-6 pt-0",e),...t}));Z.displayName="CardContent";const cp=_.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Oe("flex items-center p-6 pt-0",e),...t}));cp.displayName="CardFooter";function pn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function nc(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const pB=6048e5,$re=864e5,Ix=43200,Vk=1440;let Fre={};function wg(){return Fre}function up(e,t){var l,c,d,f;const n=wg(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=pn(e),a=i.getDay(),o=(a<s?7:0)+a-s;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function py(e){return up(e,{weekStartsOn:1})}function gB(e){const t=pn(e),n=t.getFullYear(),s=nc(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=py(s),a=nc(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=py(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function gy(e){const t=pn(e);return t.setHours(0,0,0,0),t}function xy(e){const t=pn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function zre(e,t){const n=gy(e),s=gy(t),i=+n-xy(n),a=+s-xy(s);return Math.round((i-a)/$re)}function Bre(e){const t=gB(e),n=nc(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),py(n)}function Nv(e,t){const n=pn(e),s=pn(t),i=n.getTime()-s.getTime();return i<0?-1:i>0?1:i}function xB(e){return nc(e,Date.now())}function Vre(e,t){const n=gy(e),s=gy(t);return+n==+s}function qre(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Ure(e){if(!qre(e)&&typeof e!="number")return!1;const t=pn(e);return!isNaN(Number(t))}function Hre(e,t){const n=pn(e),s=pn(t),i=n.getFullYear()-s.getFullYear(),a=n.getMonth()-s.getMonth();return i*12+a}function Wre(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function Kre(e,t){return+pn(e)-+pn(t)}function Gre(e){const t=pn(e);return t.setHours(23,59,59,999),t}function Zre(e){const t=pn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Qre(e){const t=pn(e);return+Gre(t)==+Zre(t)}function Yre(e,t){const n=pn(e),s=pn(t),i=Nv(n,s),a=Math.abs(Hre(n,s));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let l=Nv(n,s)===-i;Qre(pn(e))&&a===1&&Nv(e,s)===1&&(l=!1),o=i*(a-Number(l))}return o===0?0:o}function Xre(e,t,n){const s=Kre(e,t)/1e3;return Wre(n==null?void 0:n.roundingMethod)(s)}function Jre(e){const t=pn(e),n=nc(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const ese={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tse=(e,t,n)=>{let s;const i=ese[e];return typeof i=="string"?s=i:t===1?s=i.one:s=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Bd(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const nse={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rse={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},sse={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ise={date:Bd({formats:nse,defaultWidth:"full"}),time:Bd({formats:rse,defaultWidth:"full"}),dateTime:Bd({formats:sse,defaultWidth:"full"})},ase={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ose=(e,t,n,s)=>ase[e];function Ia(e){return(t,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let i;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const lse={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cse={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},use={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dse={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fse={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hse={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mse=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},pse={ordinalNumber:mse,era:Ia({values:lse,defaultWidth:"wide"}),quarter:Ia({values:cse,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ia({values:use,defaultWidth:"wide"}),day:Ia({values:dse,defaultWidth:"wide"}),dayPeriod:Ia({values:fse,defaultWidth:"wide",formattingValues:hse,defaultFormattingWidth:"wide"})};function Ra(e){return(t,n={})=>{const s=n.width,i=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const o=a[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?xse(l,h=>h.test(o)):gse(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const f=t.slice(o.length);return{value:d,rest:f}}}function gse(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function xse(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function vB(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const i=s[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(i.length);return{value:o,rest:l}}}const vse=/^(\d+)(th|st|nd|rd)?/i,yse=/\d+/i,bse={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},jse={any:[/^b/i,/^(a|c)/i]},_se={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},wse={any:[/1/i,/2/i,/3/i,/4/i]},Nse={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Sse={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Cse={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Pse={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ase={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ese={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Tse={ordinalNumber:vB({matchPattern:vse,parsePattern:yse,valueCallback:e=>parseInt(e,10)}),era:Ra({matchPatterns:bse,defaultMatchWidth:"wide",parsePatterns:jse,defaultParseWidth:"any"}),quarter:Ra({matchPatterns:_se,defaultMatchWidth:"wide",parsePatterns:wse,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ra({matchPatterns:Nse,defaultMatchWidth:"wide",parsePatterns:Sse,defaultParseWidth:"any"}),day:Ra({matchPatterns:Cse,defaultMatchWidth:"wide",parsePatterns:Pse,defaultParseWidth:"any"}),dayPeriod:Ra({matchPatterns:Ase,defaultMatchWidth:"any",parsePatterns:Ese,defaultParseWidth:"any"})},yB={code:"en-US",formatDistance:tse,formatLong:ise,formatRelative:ose,localize:pse,match:Tse,options:{weekStartsOn:0,firstWeekContainsDate:1}};function kse(e){const t=pn(e);return zre(t,Jre(t))+1}function Ose(e){const t=pn(e),n=+py(t)-+Bre(t);return Math.round(n/pB)+1}function bB(e,t){var f,h,p,v;const n=pn(e),s=n.getFullYear(),i=wg(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(p=i.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??1,o=nc(e,0);o.setFullYear(s+1,0,a),o.setHours(0,0,0,0);const l=up(o,t),c=nc(e,0);c.setFullYear(s,0,a),c.setHours(0,0,0,0);const d=up(c,t);return n.getTime()>=l.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function Mse(e,t){var l,c,d,f;const n=wg(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=bB(e,t),a=nc(e,0);return a.setFullYear(i,0,s),a.setHours(0,0,0,0),up(a,t)}function Ise(e,t){const n=pn(e),s=+up(n,t)-+Mse(n,t);return Math.round(s/pB)+1}function mn(e,t){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return n+s}const dl={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return mn(t==="yy"?s%100:s,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):mn(n+1,2)},d(e,t){return mn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return mn(e.getHours()%12||12,t.length)},H(e,t){return mn(e.getHours(),t.length)},m(e,t){return mn(e.getMinutes(),t.length)},s(e,t){return mn(e.getSeconds(),t.length)},S(e,t){const n=t.length,s=e.getMilliseconds(),i=Math.trunc(s*Math.pow(10,n-3));return mn(i,t.length)}},Qu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},qk={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const s=e.getFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return dl.y(e,t)},Y:function(e,t,n,s){const i=bB(e,s),a=i>0?i:1-i;if(t==="YY"){const o=a%100;return mn(o,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):mn(a,t.length)},R:function(e,t){const n=gB(e);return mn(n,t.length)},u:function(e,t){const n=e.getFullYear();return mn(n,t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return mn(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return mn(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return dl.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return mn(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const i=Ise(e,s);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):mn(i,t.length)},I:function(e,t,n){const s=Ose(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):mn(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):dl.d(e,t)},D:function(e,t,n){const s=kse(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):mn(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const i=e.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return mn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const i=e.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return mn(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),i=s===0?7:s;switch(t){case"i":return String(i);case"ii":return mn(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let i;switch(s===12?i=Qu.noon:s===0?i=Qu.midnight:i=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let i;switch(s>=17?i=Qu.evening:s>=12?i=Qu.afternoon:s>=4?i=Qu.morning:i=Qu.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return dl.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):dl.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):mn(s,t.length)},k:function(e,t,n){let s=e.getHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):mn(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):dl.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):dl.s(e,t)},S:function(e,t){return dl.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return Hk(s);case"XXXX":case"XX":return kc(s);case"XXXXX":case"XXX":default:return kc(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return Hk(s);case"xxxx":case"xx":return kc(s);case"xxxxx":case"xxx":default:return kc(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Uk(s,":");case"OOOO":default:return"GMT"+kc(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Uk(s,":");case"zzzz":default:return"GMT"+kc(s,":")}},t:function(e,t,n){const s=Math.trunc(e.getTime()/1e3);return mn(s,t.length)},T:function(e,t,n){const s=e.getTime();return mn(s,t.length)}};function Uk(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),i=Math.trunc(s/60),a=s%60;return a===0?n+String(i):n+String(i)+t+mn(a,2)}function Hk(e,t){return e%60===0?(e>0?"-":"+")+mn(Math.abs(e)/60,2):kc(e,t)}function kc(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),i=mn(Math.trunc(s/60),2),a=mn(s%60,2);return n+i+t+a}const Wk=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},jB=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Rse=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return Wk(e,t);let a;switch(s){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",Wk(s,t)).replace("{{time}}",jB(i,t))},Lse={p:jB,P:Rse},Dse=/^D+$/,$se=/^Y+$/,Fse=["D","DD","YY","YYYY"];function zse(e){return Dse.test(e)}function Bse(e){return $se.test(e)}function Vse(e,t,n){const s=qse(e,t,n);if(console.warn(s),Fse.includes(e))throw new RangeError(s)}function qse(e,t,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Use=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Hse=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Wse=/^'([^]*?)'?$/,Kse=/''/g,Gse=/[a-zA-Z]/;function br(e,t,n){var f,h,p,v,j,g,x,w;const s=wg(),i=(n==null?void 0:n.locale)??s.locale??yB,a=(n==null?void 0:n.firstWeekContainsDate)??((h=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((v=(p=s.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((g=(j=n==null?void 0:n.locale)==null?void 0:j.options)==null?void 0:g.weekStartsOn)??s.weekStartsOn??((w=(x=s.locale)==null?void 0:x.options)==null?void 0:w.weekStartsOn)??0,l=pn(e);if(!Ure(l))throw new RangeError("Invalid time value");let c=t.match(Hse).map(N=>{const y=N[0];if(y==="p"||y==="P"){const A=Lse[y];return A(N,i.formatLong)}return N}).join("").match(Use).map(N=>{if(N==="''")return{isToken:!1,value:"'"};const y=N[0];if(y==="'")return{isToken:!1,value:Zse(N)};if(qk[y])return{isToken:!0,value:N};if(y.match(Gse))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:N}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(N=>{if(!N.isToken)return N.value;const y=N.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Bse(y)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&zse(y))&&Vse(y,t,String(e));const A=qk[y[0]];return A(l,y,i.localize,d)}).join("")}function Zse(e){const t=e.match(Wse);return t?t[1].replace(Kse,"'"):e}function Qse(e,t,n){const s=wg(),i=(n==null?void 0:n.locale)??s.locale??yB,a=2520,o=Nv(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let c,d;o>0?(c=pn(t),d=pn(e)):(c=pn(e),d=pn(t));const f=Xre(d,c),h=(xy(d)-xy(c))/1e3,p=Math.round((f-h)/60);let v;if(p<2)return n!=null&&n.includeSeconds?f<5?i.formatDistance("lessThanXSeconds",5,l):f<10?i.formatDistance("lessThanXSeconds",10,l):f<20?i.formatDistance("lessThanXSeconds",20,l):f<40?i.formatDistance("halfAMinute",0,l):f<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):p===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",p,l);if(p<45)return i.formatDistance("xMinutes",p,l);if(p<90)return i.formatDistance("aboutXHours",1,l);if(p<Vk){const j=Math.round(p/60);return i.formatDistance("aboutXHours",j,l)}else{if(p<a)return i.formatDistance("xDays",1,l);if(p<Ix){const j=Math.round(p/Vk);return i.formatDistance("xDays",j,l)}else if(p<Ix*2)return v=Math.round(p/Ix),i.formatDistance("aboutXMonths",v,l)}if(v=Yre(d,c),v<12){const j=Math.round(p/Ix);return i.formatDistance("xMonths",j,l)}else{const j=v%12,g=Math.trunc(v/12);return j<3?i.formatDistance("aboutXYears",g,l):j<9?i.formatDistance("overXYears",g,l):i.formatDistance("almostXYears",g+1,l)}}function PP(e,t){return Qse(e,xB(e),t)}function _B(e){return+pn(e)>Date.now()}function yj(e){return+pn(e)<Date.now()}function dp(e){return Vre(e,xB(e))}const Yse={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},Xse=(e,t,n)=>{let s;const i=Yse[e];return typeof i=="string"?s=i:t===1?s=i.one:s=i.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+s:"il y a "+s:s},Jse={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},eie={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},tie={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nie={date:Bd({formats:Jse,defaultWidth:"full"}),time:Bd({formats:eie,defaultWidth:"full"}),dateTime:Bd({formats:tie,defaultWidth:"full"})},rie={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},sie=(e,t,n,s)=>rie[e],iie={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},aie={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},oie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},lie={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},cie={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},uie=(e,t)=>{const n=Number(e),s=t==null?void 0:t.unit;if(n===0)return"0";const i=["year","week","hour","minute","second"];let a;return n===1?a=s&&i.includes(s)?"re":"er":a="me",n+a},die=["MMM","MMMM"],fie={preprocessor:(e,t)=>e.getDate()===1||!t.some(s=>s.isToken&&die.includes(s.value))?t:t.map(s=>s.isToken&&s.value==="do"?{isToken:!0,value:"d"}:s),ordinalNumber:uie,era:Ia({values:iie,defaultWidth:"wide"}),quarter:Ia({values:aie,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ia({values:oie,defaultWidth:"wide"}),day:Ia({values:lie,defaultWidth:"wide"}),dayPeriod:Ia({values:cie,defaultWidth:"wide"})},hie=/^(\d+)(ime|re|me|er|e)?/i,mie=/\d+/i,pie={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},gie={any:[/^av/i,/^ap/i]},xie={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},vie={any:[/1/i,/2/i,/3/i,/4/i]},yie={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},bie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},jie={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},_ie={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},wie={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},Nie={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},Sie={ordinalNumber:vB({matchPattern:hie,parsePattern:mie,valueCallback:e=>parseInt(e)}),era:Ra({matchPatterns:pie,defaultMatchWidth:"wide",parsePatterns:gie,defaultParseWidth:"any"}),quarter:Ra({matchPatterns:xie,defaultMatchWidth:"wide",parsePatterns:vie,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ra({matchPatterns:yie,defaultMatchWidth:"wide",parsePatterns:bie,defaultParseWidth:"any"}),day:Ra({matchPatterns:jie,defaultMatchWidth:"wide",parsePatterns:_ie,defaultParseWidth:"any"}),dayPeriod:Ra({matchPatterns:wie,defaultMatchWidth:"any",parsePatterns:Nie,defaultParseWidth:"any"})},jr={code:"fr",formatDistance:Xse,formatLong:nie,formatRelative:sie,localize:fie,match:Sie,options:{weekStartsOn:1,firstWeekContainsDate:4}},Cie=[{type:"commercial",icon:Va,title:"Questions Commerciales",description:"Obtenez des rponses expertes sur vos dfis commerciaux"},{type:"meeting",icon:xn,title:"Structure de Runion",description:"Crez des agendas et plans de runion efficaces"},{type:"training",icon:rP,title:"Formation",description:"Formez vos quipes aux meilleures pratiques"},{type:"arguments",icon:yf,title:"Arguments de Vente",description:"Gnrez des arguments percutants et personnaliss"}];function Pie({selectedFeature:e,onFeatureSelect:t,onNewConversation:n,conversations:s=[],selectedConversationId:i,onConversationSelect:a}){return r.jsxs("div",{className:"hidden md:flex w-80 border-r bg-sidebar h-screen flex-col p-4 gap-4",children:[r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsxs(ma,{className:"w-10 h-10 border-2 border-primary/20 shrink-0",children:[r.jsx(tc,{src:wf,alt:"Hector",className:"object-cover"}),r.jsx(pa,{className:"bg-primary text-primary-foreground",children:r.jsx(fu,{className:"w-5 h-5"})})]}),r.jsx("h2",{className:"text-lg font-semibold text-sidebar-foreground",children:"Hector IA"})]}),r.jsxs(re,{onClick:n,variant:"default",className:"w-full justify-start gap-2","data-testid":"button-new-conversation",children:[r.jsx(dr,{className:"w-4 h-4"}),"Nouvelle conversation"]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3",children:[s.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-sm font-medium text-sidebar-foreground px-2",children:"Conversations rcentes"}),r.jsx("div",{className:"space-y-2",children:s.slice(0,5).map(o=>r.jsx(re,{variant:i===o.id?"secondary":"ghost",className:"w-full justify-start text-left h-auto py-2",onClick:()=>a==null?void 0:a(o.id),"data-testid":`button-conversation-${o.id}`,children:r.jsxs("div",{className:"truncate w-full",children:[r.jsx("div",{className:"font-medium text-sm truncate",children:o.title}),r.jsx("div",{className:"text-xs text-muted-foreground",children:PP(new Date(o.createdAt),{addSuffix:!0,locale:jr})})]})},o.id))})]}),r.jsx("p",{className:"text-sm font-medium text-sidebar-foreground px-2",children:"Fonctionnalits"}),Cie.map(o=>{const l=o.icon,c=e===o.type;return r.jsxs(U,{className:`cursor-pointer transition-all hover-elevate ${c?"border-primary shadow-md":""}`,onClick:()=>t(o.type),"data-testid":`card-feature-${o.type}`,children:[r.jsx(ne,{className:"p-4 space-y-1",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${c?"bg-primary text-primary-foreground":"bg-accent"}`,children:r.jsx(l,{className:"w-4 h-4"})}),r.jsx(se,{className:"text-sm",children:o.title})]})}),r.jsx(Z,{className:"p-4 pt-0",children:r.jsx(jt,{className:"text-xs leading-relaxed",children:o.description})})]},o.type)})]}),r.jsxs("div",{className:"border-t pt-4 space-y-2",children:[r.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Propuls par Claude AI"}),r.jsx("p",{className:"text-xs text-muted-foreground text-center font-medium",children:"ADS GROUP  2025"})]})]})}var z_="focusScope.autoFocusOnMount",B_="focusScope.autoFocusOnUnmount",Kk={bubbles:!1,cancelable:!0},Aie="FocusScope",bj=_.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,c]=_.useState(null),d=Un(i),f=Un(a),h=_.useRef(null),p=Rt(t,g=>c(g)),v=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(s){let g=function(y){if(v.paused||!l)return;const A=y.target;l.contains(A)?h.current=A:ml(h.current,{select:!0})},x=function(y){if(v.paused||!l)return;const A=y.relatedTarget;A!==null&&(l.contains(A)||ml(h.current,{select:!0}))},w=function(y){if(document.activeElement===document.body)for(const P of y)P.removedNodes.length>0&&ml(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",x);const N=new MutationObserver(w);return l&&N.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",x),N.disconnect()}}},[s,l,v.paused]),_.useEffect(()=>{if(l){Zk.add(v);const g=document.activeElement;if(!l.contains(g)){const w=new CustomEvent(z_,Kk);l.addEventListener(z_,d),l.dispatchEvent(w),w.defaultPrevented||(Eie(Iie(wB(l)),{select:!0}),document.activeElement===g&&ml(l))}return()=>{l.removeEventListener(z_,d),setTimeout(()=>{const w=new CustomEvent(B_,Kk);l.addEventListener(B_,f),l.dispatchEvent(w),w.defaultPrevented||ml(g??document.body,{select:!0}),l.removeEventListener(B_,f),Zk.remove(v)},0)}}},[l,d,f,v]);const j=_.useCallback(g=>{if(!n&&!s||v.paused)return;const x=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(x&&w){const N=g.currentTarget,[y,A]=Tie(N);y&&A?!g.shiftKey&&w===A?(g.preventDefault(),n&&ml(y,{select:!0})):g.shiftKey&&w===y&&(g.preventDefault(),n&&ml(A,{select:!0})):w===N&&g.preventDefault()}},[n,s,v.paused]);return r.jsx(st.div,{tabIndex:-1,...o,ref:p,onKeyDown:j})});bj.displayName=Aie;function Eie(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(ml(s,{select:t}),document.activeElement!==n)return}function Tie(e){const t=wB(e),n=Gk(t,e),s=Gk(t.reverse(),e);return[n,s]}function wB(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Gk(e,t){for(const n of e)if(!kie(n,{upTo:t}))return n}function kie(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Oie(e){return e instanceof HTMLInputElement&&"select"in e}function ml(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Oie(e)&&t&&e.select()}}var Zk=Mie();function Mie(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Qk(e,t),e.unshift(t)},remove(t){var n;e=Qk(e,t),(n=e[0])==null||n.resume()}}}function Qk(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function Iie(e){return e.filter(t=>t.tagName!=="A")}var V_=0;function AP(){_.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Yk()),document.body.insertAdjacentElement("beforeend",e[1]??Yk()),V_++,()=>{V_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),V_--}},[])}function Yk(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var La=function(){return La=Object.assign||function(t){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},La.apply(this,arguments)};function NB(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n}function Rie(e,t,n){if(n||arguments.length===2)for(var s=0,i=t.length,a;s<i;s++)(a||!(s in t))&&(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}var Sv="right-scroll-bar-position",Cv="width-before-scroll-bar",Lie="with-scroll-bars-hidden",Die="--removed-body-scroll-bar-size";function q_(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function $ie(e,t){var n=_.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var i=n.value;i!==s&&(n.value=s,n.callback(s,i))}}}})[0];return n.callback=t,n.facade}var Fie=typeof window<"u"?_.useLayoutEffect:_.useEffect,Xk=new WeakMap;function zie(e,t){var n=$ie(null,function(s){return e.forEach(function(i){return q_(i,s)})});return Fie(function(){var s=Xk.get(n);if(s){var i=new Set(s),a=new Set(e),o=n.current;i.forEach(function(l){a.has(l)||q_(l,null)}),a.forEach(function(l){i.has(l)||q_(l,o)})}Xk.set(n,e)},[e]),n}function Bie(e){return e}function Vie(e,t){t===void 0&&(t=Bie);var n=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=t(a,s);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(s=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){s=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var f=o;o=[],f.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(f){o.push(f),d()},filter:function(f){return o=o.filter(f),n}}}};return i}function qie(e){e===void 0&&(e={});var t=Vie(null);return t.options=La({async:!0,ssr:!1},e),t}var SB=function(e){var t=e.sideCar,n=NB(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return _.createElement(s,La({},n))};SB.isSideCarExport=!0;function Uie(e,t){return e.useMedium(t),SB}var CB=qie(),U_=function(){},jj=_.forwardRef(function(e,t){var n=_.useRef(null),s=_.useState({onScrollCapture:U_,onWheelCapture:U_,onTouchMoveCapture:U_}),i=s[0],a=s[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,h=e.shards,p=e.sideCar,v=e.noIsolation,j=e.inert,g=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,N=e.gapMode,y=NB(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=p,P=zie([n,t]),E=La(La({},y),i);return _.createElement(_.Fragment,null,f&&_.createElement(A,{sideCar:CB,removeScrollBar:d,shards:h,noIsolation:v,inert:j,setCallbacks:a,allowPinchZoom:!!g,lockRef:n,gapMode:N}),o?_.cloneElement(_.Children.only(l),La(La({},E),{ref:P})):_.createElement(w,La({},E,{className:c,ref:P}),l))});jj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};jj.classNames={fullWidth:Cv,zeroRight:Sv};var Hie=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Wie(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Hie();return t&&e.setAttribute("nonce",t),e}function Kie(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Gie(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Zie=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Wie())&&(Kie(t,n),Gie(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Qie=function(){var e=Zie();return function(t,n){_.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},PB=function(){var e=Qie(),t=function(n){var s=n.styles,i=n.dynamic;return e(s,i),null};return t},Yie={left:0,top:0,right:0,gap:0},H_=function(e){return parseInt(e||"",10)||0},Xie=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[H_(n),H_(s),H_(i)]},Jie=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Yie;var t=Xie(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},eae=PB(),Vd="data-scroll-locked",tae=function(e,t,n,s){var i=e.left,a=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Lie,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Vd,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Sv,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Cv,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Sv," .").concat(Sv,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Cv," .").concat(Cv,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Vd,`] {
    `).concat(Die,": ").concat(l,`px;
  }
`)},Jk=function(){var e=parseInt(document.body.getAttribute(Vd)||"0",10);return isFinite(e)?e:0},nae=function(){_.useEffect(function(){return document.body.setAttribute(Vd,(Jk()+1).toString()),function(){var e=Jk()-1;e<=0?document.body.removeAttribute(Vd):document.body.setAttribute(Vd,e.toString())}},[])},rae=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,i=s===void 0?"margin":s;nae();var a=_.useMemo(function(){return Jie(i)},[i]);return _.createElement(eae,{styles:tae(a,!t,i,n?"":"!important")})},YN=!1;if(typeof window<"u")try{var Rx=Object.defineProperty({},"passive",{get:function(){return YN=!0,!0}});window.addEventListener("test",Rx,Rx),window.removeEventListener("test",Rx,Rx)}catch{YN=!1}var Yu=YN?{passive:!1}:!1,sae=function(e){return e.tagName==="TEXTAREA"},AB=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!sae(e)&&n[t]==="visible")},iae=function(e){return AB(e,"overflowY")},aae=function(e){return AB(e,"overflowX")},eO=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=EB(e,s);if(i){var a=TB(e,s),o=a[1],l=a[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},oae=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},lae=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},EB=function(e,t){return e==="v"?iae(t):aae(t)},TB=function(e,t){return e==="v"?oae(t):lae(t)},cae=function(e,t){return e==="h"&&t==="rtl"?-1:1},uae=function(e,t,n,s,i){var a=cae(e,window.getComputedStyle(t).direction),o=a*s,l=n.target,c=t.contains(l),d=!1,f=o>0,h=0,p=0;do{var v=TB(e,l),j=v[0],g=v[1],x=v[2],w=g-x-a*j;(j||w)&&EB(e,l)&&(h+=w,p+=j),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&Math.abs(h)<1||!f&&Math.abs(p)<1)&&(d=!0),d},Lx=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},tO=function(e){return[e.deltaX,e.deltaY]},nO=function(e){return e&&"current"in e?e.current:e},dae=function(e,t){return e[0]===t[0]&&e[1]===t[1]},fae=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},hae=0,Xu=[];function mae(e){var t=_.useRef([]),n=_.useRef([0,0]),s=_.useRef(),i=_.useState(hae++)[0],a=_.useState(PB)[0],o=_.useRef(e);_.useEffect(function(){o.current=e},[e]),_.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=Rie([e.lockRef.current],(e.shards||[]).map(nO),!0).filter(Boolean);return g.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=_.useCallback(function(g,x){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var w=Lx(g),N=n.current,y="deltaX"in g?g.deltaX:N[0]-w[0],A="deltaY"in g?g.deltaY:N[1]-w[1],P,E=g.target,C=Math.abs(y)>Math.abs(A)?"h":"v";if("touches"in g&&C==="h"&&E.type==="range")return!1;var S=eO(C,E);if(!S)return!0;if(S?P=C:(P=C==="v"?"h":"v",S=eO(C,E)),!S)return!1;if(!s.current&&"changedTouches"in g&&(y||A)&&(s.current=P),!P)return!0;var k=s.current||P;return uae(k,x,g,k==="h"?y:A)},[]),c=_.useCallback(function(g){var x=g;if(!(!Xu.length||Xu[Xu.length-1]!==a)){var w="deltaY"in x?tO(x):Lx(x),N=t.current.filter(function(P){return P.name===x.type&&(P.target===x.target||x.target===P.shadowParent)&&dae(P.delta,w)})[0];if(N&&N.should){x.cancelable&&x.preventDefault();return}if(!N){var y=(o.current.shards||[]).map(nO).filter(Boolean).filter(function(P){return P.contains(x.target)}),A=y.length>0?l(x,y[0]):!o.current.noIsolation;A&&x.cancelable&&x.preventDefault()}}},[]),d=_.useCallback(function(g,x,w,N){var y={name:g,delta:x,target:w,should:N,shadowParent:pae(w)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(A){return A!==y})},1)},[]),f=_.useCallback(function(g){n.current=Lx(g),s.current=void 0},[]),h=_.useCallback(function(g){d(g.type,tO(g),g.target,l(g,e.lockRef.current))},[]),p=_.useCallback(function(g){d(g.type,Lx(g),g.target,l(g,e.lockRef.current))},[]);_.useEffect(function(){return Xu.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Yu),document.addEventListener("touchmove",c,Yu),document.addEventListener("touchstart",f,Yu),function(){Xu=Xu.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,Yu),document.removeEventListener("touchmove",c,Yu),document.removeEventListener("touchstart",f,Yu)}},[]);var v=e.removeScrollBar,j=e.inert;return _.createElement(_.Fragment,null,j?_.createElement(a,{styles:fae(i)}):null,v?_.createElement(rae,{gapMode:e.gapMode}):null)}function pae(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const gae=Uie(CB,mae);var _j=_.forwardRef(function(e,t){return _.createElement(jj,La({},e,{ref:t,sideCar:gae}))});_j.classNames=jj.classNames;var xae=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ju=new WeakMap,Dx=new WeakMap,$x={},W_=0,kB=function(e){return e&&(e.host||kB(e.parentNode))},vae=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=kB(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},yae=function(e,t,n,s){var i=vae(t,Array.isArray(e)?e:[e]);$x[n]||($x[n]=new WeakMap);var a=$x[n],o=[],l=new Set,c=new Set(i),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};i.forEach(d);var f=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(l.has(p))f(p);else try{var v=p.getAttribute(s),j=v!==null&&v!=="false",g=(Ju.get(p)||0)+1,x=(a.get(p)||0)+1;Ju.set(p,g),a.set(p,x),o.push(p),g===1&&j&&Dx.set(p,!0),x===1&&p.setAttribute(n,"true"),j||p.setAttribute(s,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return f(t),l.clear(),W_++,function(){o.forEach(function(h){var p=Ju.get(h)-1,v=a.get(h)-1;Ju.set(h,p),a.set(h,v),p||(Dx.has(h)||h.removeAttribute(s),Dx.delete(h)),v||h.removeAttribute(n)}),W_--,W_||(Ju=new WeakMap,Ju=new WeakMap,Dx=new WeakMap,$x={})}},EP=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),i=xae(e);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live]"))),yae(s,i,n,"aria-hidden")):function(){return null}},TP="Dialog",[OB,MB]=Nr(TP),[bae,va]=OB(TP),IB=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=_.useRef(null),c=_.useRef(null),[d=!1,f]=Vs({prop:s,defaultProp:i,onChange:a});return r.jsx(bae,{scope:t,triggerRef:l,contentRef:c,contentId:ri(),titleId:ri(),descriptionId:ri(),open:d,onOpenChange:f,onOpenToggle:_.useCallback(()=>f(h=>!h),[f]),modal:o,children:n})};IB.displayName=TP;var RB="DialogTrigger",LB=_.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=va(RB,n),a=Rt(t,i.triggerRef);return r.jsx(st.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":MP(i.open),...s,ref:a,onClick:Ve(e.onClick,i.onOpenToggle)})});LB.displayName=RB;var kP="DialogPortal",[jae,DB]=OB(kP,{forceMount:void 0}),$B=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:i}=e,a=va(kP,t);return r.jsx(jae,{scope:t,forceMount:n,children:_.Children.map(s,o=>r.jsx(Vr,{present:n||a.open,children:r.jsx(yg,{asChild:!0,container:i,children:o})}))})};$B.displayName=kP;var vy="DialogOverlay",FB=_.forwardRef((e,t)=>{const n=DB(vy,e.__scopeDialog),{forceMount:s=n.forceMount,...i}=e,a=va(vy,e.__scopeDialog);return a.modal?r.jsx(Vr,{present:s||a.open,children:r.jsx(wae,{...i,ref:t})}):null});FB.displayName=vy;var _ae=uu("DialogOverlay.RemoveScroll"),wae=_.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=va(vy,n);return r.jsx(_j,{as:_ae,allowPinchZoom:!0,shards:[i.contentRef],children:r.jsx(st.div,{"data-state":MP(i.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),pu="DialogContent",zB=_.forwardRef((e,t)=>{const n=DB(pu,e.__scopeDialog),{forceMount:s=n.forceMount,...i}=e,a=va(pu,e.__scopeDialog);return r.jsx(Vr,{present:s||a.open,children:a.modal?r.jsx(Nae,{...i,ref:t}):r.jsx(Sae,{...i,ref:t})})});zB.displayName=pu;var Nae=_.forwardRef((e,t)=>{const n=va(pu,e.__scopeDialog),s=_.useRef(null),i=Rt(t,n.contentRef,s);return _.useEffect(()=>{const a=s.current;if(a)return EP(a)},[]),r.jsx(BB,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ve(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ve(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Ve(e.onFocusOutside,a=>a.preventDefault())})}),Sae=_.forwardRef((e,t)=>{const n=va(pu,e.__scopeDialog),s=_.useRef(!1),i=_.useRef(!1);return r.jsx(BB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),BB=_.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=va(pu,n),c=_.useRef(null),d=Rt(t,c);return AP(),r.jsxs(r.Fragment,{children:[r.jsx(bj,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:r.jsx(ah,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":MP(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(Pae,{titleId:l.titleId}),r.jsx(Eae,{contentRef:c,descriptionId:l.descriptionId})]})]})}),OP="DialogTitle",VB=_.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=va(OP,n);return r.jsx(st.h2,{id:i.titleId,...s,ref:t})});VB.displayName=OP;var qB="DialogDescription",UB=_.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=va(qB,n);return r.jsx(st.p,{id:i.descriptionId,...s,ref:t})});UB.displayName=qB;var HB="DialogClose",WB=_.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=va(HB,n);return r.jsx(st.button,{type:"button",...s,ref:t,onClick:Ve(e.onClick,()=>i.onOpenChange(!1))})});WB.displayName=HB;function MP(e){return e?"open":"closed"}var KB="DialogTitleWarning",[Cae,GB]=see(KB,{contentName:pu,titleName:OP,docsSlug:"dialog"}),Pae=({titleId:e})=>{const t=GB(KB),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return _.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Aae="DialogDescriptionWarning",Eae=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${GB(Aae).contentName}}.`;return _.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},IP=IB,ZB=LB,RP=$B,Ng=FB,Sg=zB,Cg=VB,Pg=UB,wj=WB;const QB=IP,Tae=RP,YB=_.forwardRef(({className:e,...t},n)=>r.jsx(Ng,{className:Oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));YB.displayName=Ng.displayName;const kae=Au("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),LP=_.forwardRef(({side:e="right",className:t,children:n,...s},i)=>r.jsxs(Tae,{children:[r.jsx(YB,{}),r.jsxs(Sg,{ref:i,className:Oe(kae({side:e}),t),...s,children:[n,r.jsxs(wj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(dc,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));LP.displayName=Sg.displayName;const DP=({className:e,...t})=>r.jsx("div",{className:Oe("flex flex-col space-y-2 text-center sm:text-left",e),...t});DP.displayName="SheetHeader";const $P=_.forwardRef(({className:e,...t},n)=>r.jsx(Cg,{ref:n,className:Oe("text-lg font-semibold text-foreground",e),...t}));$P.displayName=Cg.displayName;const XB=_.forwardRef(({className:e,...t},n)=>r.jsx(Pg,{ref:n,className:Oe("text-sm text-muted-foreground",e),...t}));XB.displayName=Pg.displayName;const Oae=[{type:"commercial",icon:Va,title:"Questions Commerciales",description:"Obtenez des rponses expertes sur vos dfis commerciaux"},{type:"meeting",icon:xn,title:"Structure de Runion",description:"Crez des agendas et plans de runion efficaces"},{type:"training",icon:rP,title:"Formation",description:"Formez vos quipes aux meilleures pratiques"},{type:"arguments",icon:yf,title:"Arguments de Vente",description:"Gnrez des arguments percutants et personnaliss"}];function Mae({isOpen:e,onClose:t,selectedFeature:n,onFeatureSelect:s,onNewConversation:i}){const a=l=>{s(l),t()},o=()=>{i(),t()};return r.jsx(QB,{open:e,onOpenChange:t,children:r.jsxs(LP,{side:"left",className:"w-80 p-4",children:[r.jsx(DP,{className:"mb-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(ma,{className:"w-10 h-10 border-2 border-primary/20 shrink-0",children:[r.jsx(tc,{src:wf,alt:"Hector",className:"object-cover"}),r.jsx(pa,{className:"bg-primary text-primary-foreground",children:r.jsx(fu,{className:"w-5 h-5"})})]}),r.jsx($P,{className:"text-lg font-semibold",children:"Hector IA"})]})}),r.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[r.jsxs(re,{onClick:o,variant:"default",className:"w-full justify-start gap-2","data-testid":"button-new-conversation-mobile",children:[r.jsx(dr,{className:"w-4 h-4"}),"Nouvelle conversation"]}),r.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3",children:[r.jsx("p",{className:"text-sm font-medium text-foreground px-2",children:"Fonctionnalits"}),Oae.map(l=>{const c=l.icon,d=n===l.type;return r.jsxs("button",{onClick:()=>a(l.type),"data-testid":`card-feature-${l.type}-mobile`,className:`w-full text-left rounded-lg border bg-card transition-all hover-elevate active-elevate-2 ${d?"border-primary shadow-md":"border-border"}`,children:[r.jsx("div",{className:"p-3 space-y-1",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg shrink-0 ${d?"bg-primary text-primary-foreground":"bg-accent"}`,children:r.jsx(c,{className:"w-4 h-4"})}),r.jsx("h3",{className:"text-sm font-semibold text-card-foreground",children:l.title})]})}),r.jsx("div",{className:"px-3 pb-3",children:r.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:l.description})})]},l.type)})]}),r.jsxs("div",{className:"border-t pt-4 space-y-2",children:[r.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Propuls par Claude AI"}),r.jsx("p",{className:"text-xs text-muted-foreground text-center font-medium",children:"ADS GROUP  2025"})]})]})]})})}function Iae(){return r.jsxs("div",{className:"flex gap-4 animate-in fade-in duration-200","data-testid":"indicator-typing",children:[r.jsx(ma,{className:"w-10 h-10 border-2 border-primary shrink-0",children:r.jsx(pa,{className:"bg-primary text-primary-foreground",children:r.jsx(fu,{className:"w-5 h-5"})})}),r.jsx("div",{className:"bg-card border border-card-border shadow-sm px-6 py-4 rounded-2xl",children:r.jsxs("div",{className:"flex gap-1.5 items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})}const Rae="/assets/HECTOR%20IMAGE%20ACCEUIL_1762342438308-NKjwl9Z4.png",Lae=[{type:"commercial",icon:Va,title:"Questions Commerciales",description:"Rponses expertes  vos dfis de vente et stratgies commerciales"},{type:"meeting",icon:xn,title:"Structure de Runion",description:"Crez des agendas structurs et productifs pour vos runions managriales"},{type:"training",icon:rP,title:"Formation quipes",description:"Modules de formation et conseils pour dvelopper vos comptences commerciales"},{type:"arguments",icon:yf,title:"Arguments de Vente",description:"Gnrez des arguments percutants adapts  votre contexte commercial"}];function Dae({onFeatureSelect:e,onCameraClick:t,onPatronSearchClick:n}){return r.jsxs("div",{className:"flex-1 overflow-y-auto",children:[r.jsxs("div",{className:"relative w-full bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-900/95 via-slate-900/70 to-transparent"}),r.jsx("div",{className:"relative max-w-7xl mx-auto",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[r.jsx("div",{className:"px-6 py-12 lg:py-16 space-y-6 z-10",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"inline-block",children:r.jsx("div",{className:"px-4 py-1.5 bg-primary/20 border border-primary/30 rounded-full text-sm font-medium text-primary-foreground backdrop-blur-sm",children:"Intelligence Artificielle Business"})}),r.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white leading-tight",children:["Hector",r.jsx("span",{className:"block text-3xl md:text-4xl lg:text-5xl mt-2 text-cyan-400",children:"Agent IA Business"})]}),r.jsx("p",{className:"text-lg md:text-xl text-slate-200 max-w-xl leading-relaxed",children:"Votre assistant IA commercial pour booster vos performances, structurer vos process de vente et optimiser votre relation client."}),r.jsx("div",{className:"flex items-center gap-3 pt-4",children:r.jsx("div",{className:"px-3 py-1 bg-white/10 backdrop-blur-sm border border-white/20 rounded-md",children:r.jsx("span",{className:"text-sm font-semibold text-white",children:"ADS GROUP SECURITY"})})})]})}),r.jsx("div",{className:"relative lg:block",children:r.jsx("div",{className:"aspect-square lg:aspect-auto lg:h-[500px] overflow-hidden",children:r.jsx("img",{src:Rae,alt:"Hector - Agent IA Business pour ADS Group Security",className:"w-full h-full object-cover object-center","data-testid":"img-hero-hector"})})})]})})]}),r.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12 space-y-12",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Actions Rapides"}),r.jsx("p",{className:"text-muted-foreground",children:"Accdez rapidement  vos outils essentiels"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("button",{onClick:()=>t==null?void 0:t("photo"),className:"flex flex-col items-center gap-3 p-6 border rounded-lg hover-elevate active-elevate-2 transition-all bg-card","data-testid":"button-take-photo",children:[r.jsx("div",{className:"p-4 rounded-full bg-blue-500/10",children:r.jsx(ay,{className:"w-8 h-8 text-blue-500"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold",children:"Prendre une photo"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Scanner une carte de visite"})]})]}),r.jsxs("button",{onClick:()=>n==null?void 0:n(),className:"flex flex-col items-center gap-3 p-6 border rounded-lg hover-elevate active-elevate-2 transition-all bg-card","data-testid":"button-patron-search",children:[r.jsx("div",{className:"p-4 rounded-full bg-purple-500/10",children:r.jsx(vte,{className:"w-8 h-8 text-purple-500"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold",children:"Trouve-moi le patron"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Recherche de dirigeant"})]})]}),r.jsxs(un,{href:"/crm/rdvs",className:"flex flex-col items-center gap-3 p-6 border rounded-lg hover-elevate active-elevate-2 transition-all bg-card","data-testid":"button-view-appointments",children:[r.jsx("div",{className:"p-4 rounded-full bg-green-500/10",children:r.jsx(Yee,{className:"w-8 h-8 text-green-500"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold",children:"Mes RDV"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Liste des rendez-vous"})]})]}),r.jsxs(un,{href:"/crm/dashboard",className:"flex flex-col items-center gap-3 p-6 border rounded-lg hover-elevate active-elevate-2 transition-all bg-card","data-testid":"button-view-crm",children:[r.jsx("div",{className:"p-4 rounded-full bg-primary/10",children:r.jsx(ate,{className:"w-8 h-8 text-primary"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold",children:"CRM"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Gestion de la relation client"})]})]}),r.jsxs(un,{href:"/crm/opportunities-module",className:"flex flex-col items-center gap-3 p-6 border rounded-lg hover-elevate active-elevate-2 transition-all bg-card","data-testid":"button-opportunities",children:[r.jsx("div",{className:"p-4 rounded-full bg-amber-500/10",children:r.jsx(wn,{className:"w-8 h-8 text-amber-500"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold",children:"Opportunits"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Pre-CRM intelligent"})]})]}),r.jsxs(un,{href:"/prospection/campagnes",className:"flex flex-col items-center gap-3 p-6 border rounded-lg hover-elevate active-elevate-2 transition-all bg-card","data-testid":"button-prospection-linkedin",children:[r.jsx("div",{className:"p-4 rounded-full bg-cyan-500/10",children:r.jsx(fn,{className:"w-8 h-8 text-cyan-500"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold",children:"Prospection LinkedIn"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Campagnes multi-canal"})]})]}),r.jsxs("button",{onClick:()=>t==null?void 0:t("video"),className:"flex flex-col items-center gap-3 p-6 border rounded-lg hover-elevate active-elevate-2 transition-all bg-card","data-testid":"button-record-video",children:[r.jsx("div",{className:"p-4 rounded-full bg-red-500/10",children:r.jsx(bf,{className:"w-8 h-8 text-red-500"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold",children:"Enregistrer une vido"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Prospection & formation"})]})]}),r.jsxs(un,{href:"/phoning",className:"flex flex-col items-center gap-3 p-6 border rounded-lg hover-elevate active-elevate-2 transition-all bg-card","data-testid":"button-session-phoning",children:[r.jsx("div",{className:"p-4 rounded-full bg-orange-500/10",children:r.jsx(Vn,{className:"w-8 h-8 text-orange-500"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold",children:"Session phoning"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Appels commerciaux"})]})]}),r.jsxs(un,{href:"/crm/prospects-a-qualifier",className:"flex flex-col items-center gap-3 p-6 border rounded-lg hover-elevate active-elevate-2 transition-all bg-card","data-testid":"button-prospects-qualifier",children:[r.jsx("div",{className:"p-4 rounded-full bg-indigo-500/10",children:r.jsx(ete,{className:"w-8 h-8 text-indigo-500"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold",children:"Prospects  qualifier"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Validation terrain"})]})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Assistance IA"}),r.jsx("p",{className:"text-muted-foreground",children:"Posez vos questions commerciales  Hector"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Lae.map(s=>{const i=s.icon;return r.jsx("button",{onClick:()=>e==null?void 0:e(s.type),className:"w-full text-left rounded-lg border bg-card p-6 hover-elevate active-elevate-2 transition-all","data-testid":`card-welcome-feature-${s.type}`,children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:r.jsx(i,{className:"w-5 h-5 text-primary"})}),r.jsx("h3",{className:"text-base font-semibold text-card-foreground",children:s.title})]}),r.jsx("p",{className:"text-sm leading-relaxed text-muted-foreground",children:s.description})]})},s.title)})})]}),r.jsx("div",{className:"text-center pt-6",children:r.jsx("p",{className:"text-sm text-muted-foreground",children:"Slectionnez une fonctionnalit dans la barre latrale ou commencez  taper pour dmarrer une conversation."})})]})]})}function JB({mode:e,onCapture:t,onClose:n,allowMultiplePhotos:s=!1}){const[i,a]=_.useState(!1),[o,l]=_.useState(!1),[c,d]=_.useState([]),[f,h]=_.useState(null),[p,v]=_.useState(0),[j,g]=_.useState(!1),x=_.useRef(null),w=_.useRef(null),N=_.useRef(null),y=_.useRef(null),A=_.useRef(null),P=_.useRef([]),{toast:E}=At();_.useEffect(()=>(C(),()=>{S()}),[]);const C=async()=>{try{let W={video:{facingMode:"environment"},audio:e==="video"};console.log("[Camera]  Demande d'accs camra arrire...");let B;try{B=await navigator.mediaDevices.getUserMedia(W)}catch{console.log("[Camera]  Camra arrire indisponible, utilisation camra par dfaut..."),W={video:!0,audio:e==="video"},B=await navigator.mediaDevices.getUserMedia(W)}if(N.current=B,console.log("[Camera]  Stream obtenu, tracks:",B.getTracks().map($=>({kind:$.kind,label:$.label,enabled:$.enabled,readyState:$.readyState}))),x.current){x.current.srcObject=B,console.log("[Camera]  srcObject assign au video element"),x.current.onloadedmetadata=()=>{var ee,oe;const $=((ee=x.current)==null?void 0:ee.videoWidth)||0,G=((oe=x.current)==null?void 0:oe.videoHeight)||0;console.log("[Camera]  Metadata charges - dimensions:",$,"x",G),$===0||G===0?console.error("[Camera]  PROBLME: Dimensions vido = 0!"):console.log("[Camera]  Vido prte  tre affiche")};try{await x.current.play(),console.log("[Camera]  video.play() russi"),a(!0)}catch($){console.error("[Camera]  Erreur video.play():",$),setTimeout(()=>{var G;(G=x.current)==null||G.play().then(()=>{console.log("[Camera]  video.play() russi (2me tentative)"),a(!0)}).catch(ee=>console.error("[Camera]  play() chou mme en 2me tentative:",ee))},100)}}}catch(W){console.error("[Camera]  Erreur accs camra:",W),E({title:"Erreur camra",description:"Impossible d'accder  la camra. Vrifiez les permissions.",variant:"destructive"})}},S=()=>{N.current&&(N.current.getTracks().forEach(W=>W.stop()),N.current=null),A.current&&clearInterval(A.current),a(!1)},k=()=>{if(!x.current||!w.current)return;const W=x.current,B=w.current,$=1920,G=1080;let ee=W.videoWidth,oe=W.videoHeight;if(ee>$||oe>G){const Ee=Math.min($/ee,G/oe);ee=Math.floor(ee*Ee),oe=Math.floor(oe*Ee)}B.width=ee,B.height=oe;const fe=B.getContext("2d");if(fe){fe.drawImage(W,0,0,ee,oe);const Ee=B.toDataURL("image/jpeg",.85);d(J=>[...J,Ee]),console.log(`[Camera]  Photo capture : ${ee}x${oe}, taille base64: ${Math.round(Ee.length/1024)}KB`),S(),s&&c.length===0?g(!0):g(!1)}},I=()=>{if(N.current)try{const W=new MediaRecorder(N.current,{mimeType:"video/webm;codecs=vp8,opus"});P.current=[],W.ondataavailable=B=>{B.data.size>0&&P.current.push(B.data)},W.onstop=()=>{const B=new Blob(P.current,{type:"video/webm"});h(B),S()},W.start(),y.current=W,l(!0),v(0),A.current=window.setInterval(()=>{v(B=>B+1)},1e3)}catch(W){console.error("Recording error:",W),E({title:"Erreur enregistrement",description:"Impossible de dmarrer l'enregistrement vido.",variant:"destructive"})}},R=()=>{y.current&&o&&(y.current.stop(),l(!1),A.current&&clearInterval(A.current))},D=()=>{g(!1),C()},z=()=>{d([]),h(null),v(0),g(!1),C()},V=async()=>{if(e==="photo"&&c.length>0){const W=Date.now(),B=await Promise.all(c.map(async($,G)=>{const ee=await fetch($).then(J=>J.blob()),oe=s&&c.length>1?G===0?"recto":"verso":"",fe=W+G,Ee=oe?`photo-${oe}-${fe}.jpg`:`photo-${fe}.jpg`;return new File([ee],Ee,{type:"image/jpeg"})}));t(B.length===1?B[0]:B)}else if(e==="video"&&f){const W=new File([f],`video-${Date.now()}.webm`,{type:"video/webm"});t(W)}},K=W=>{const B=Math.floor(W/60),$=W%60;return`${B}:${$.toString().padStart(2,"0")}`},H=s&&c.length===1&&j;return r.jsx("div",{className:"fixed inset-0 z-50 bg-black",children:r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-black/50",children:[r.jsx("h2",{className:"text-white font-semibold",children:e==="photo"?"Prendre une photo":"Enregistrer une vido"}),r.jsx(re,{size:"icon",variant:"ghost",onClick:n,className:"text-white hover:bg-white/20","data-testid":"button-close-camera",children:r.jsx(dc,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"flex-1 relative flex items-center justify-center bg-black",children:[r.jsx("video",{ref:x,className:"max-w-full max-h-full object-contain",style:{display:i&&!H&&(c.length===0||s&&c.length===1)&&!f?"block":"none",minWidth:"320px",minHeight:"240px"},autoPlay:!0,playsInline:!0,muted:!0}),c.length>0&&!H&&r.jsx("div",{className:`flex gap-4 ${c.length>1?"flex-row":""} max-w-full max-h-full p-4`,children:c.map((W,B)=>r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("img",{src:W,alt:`Photo ${B+1}`,className:"max-w-full max-h-[60vh] object-contain rounded-lg"}),r.jsx("span",{className:"text-white text-sm bg-black/50 px-3 py-1 rounded-full",children:s&&c.length>1?B===0?"Recto":"Verso":`Photo ${B+1}`})]},B))}),H&&r.jsxs("div",{className:"flex flex-col items-center gap-6 p-4",children:[r.jsx("img",{src:c[0],alt:"Photo recto",className:"max-w-full max-h-[50vh] object-contain rounded-lg"}),r.jsx("span",{className:"text-white text-sm bg-black/50 px-3 py-1 rounded-full",children:"Recto"}),r.jsx("p",{className:"text-white text-center text-lg",children:"Souhaitez-vous ajouter une photo du verso ?"})]}),f&&r.jsx("video",{src:URL.createObjectURL(f),className:"max-w-full max-h-full object-contain",controls:!0,autoPlay:!0,loop:!0}),o&&r.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-red-600 text-white px-4 py-2 rounded-full flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),r.jsx("span",{className:"font-mono",children:K(p)})]}),r.jsx("canvas",{ref:w,className:"hidden"})]}),r.jsxs("div",{className:"p-6 bg-black/50",children:[H&&r.jsx("div",{className:"flex flex-col items-center gap-4",children:r.jsxs("div",{className:"flex gap-4",children:[r.jsxs(re,{size:"lg",variant:"outline",onClick:z,className:"h-12 px-6 bg-white/10 border-white text-white hover:bg-white/20","data-testid":"button-retake",children:[r.jsx(L_,{className:"h-5 w-5 mr-2"}),"Recommencer"]}),r.jsxs(re,{size:"lg",onClick:V,className:"h-12 px-6 bg-primary hover:bg-primary/90","data-testid":"button-confirm-single-photo",children:[r.jsx(Ql,{className:"h-5 w-5 mr-2"}),"Valider"]}),r.jsxs(re,{size:"lg",onClick:D,className:"h-12 px-6 bg-blue-600 hover:bg-blue-700","data-testid":"button-add-verso",children:[r.jsx(dr,{className:"h-5 w-5 mr-2"}),"Ajouter photo verso"]})]})}),!H&&c.length===0&&!f&&r.jsxs(r.Fragment,{children:[e==="photo"&&r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s&&r.jsx("p",{className:"text-white text-sm",children:"Photo recto"}),r.jsx(re,{size:"lg",onClick:k,disabled:!i,className:"h-16 w-16 rounded-full bg-white hover:bg-gray-200","data-testid":"button-take-photo",children:r.jsx(ay,{className:"h-8 w-8 text-black"})})]}),e==="video"&&!o&&r.jsx(re,{size:"lg",onClick:I,disabled:!i,className:"h-16 w-16 rounded-full bg-red-600 hover:bg-red-700","data-testid":"button-start-recording",children:r.jsx(bf,{className:"h-8 w-8 text-white"})}),e==="video"&&o&&r.jsx(re,{size:"lg",onClick:R,className:"h-16 w-16 rounded-full bg-white hover:bg-gray-200","data-testid":"button-stop-recording",children:r.jsx("div",{className:"h-6 w-6 bg-red-600 rounded-sm"})})]}),!H&&(!s&&c.length>0||s&&c.length===2||f)&&r.jsxs("div",{className:"flex items-center justify-center gap-4",children:[r.jsxs(re,{size:"lg",variant:"outline",onClick:z,className:"h-12 px-6 bg-white/10 border-white text-white hover:bg-white/20","data-testid":"button-retake",children:[r.jsx(L_,{className:"h-5 w-5 mr-2"}),"Reprendre"]}),r.jsxs(re,{size:"lg",onClick:V,className:"h-12 px-6 bg-primary hover:bg-primary/90","data-testid":"button-confirm-capture",children:[r.jsx(Ql,{className:"h-5 w-5 mr-2"}),"Valider"]})]}),!H&&s&&c.length===1&&i&&r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("p",{className:"text-white text-sm",children:"Photo verso"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs(re,{size:"lg",variant:"outline",onClick:z,className:"h-12 px-6 bg-white/10 border-white text-white hover:bg-white/20","data-testid":"button-retake",children:[r.jsx(L_,{className:"h-5 w-5 mr-2"}),"Recommencer"]}),r.jsx(re,{size:"lg",onClick:k,disabled:!i,className:"h-16 w-16 rounded-full bg-white hover:bg-gray-200","data-testid":"button-take-photo-2",children:r.jsx(ay,{className:"h-8 w-8 text-black"})})]})]})]})]})})}const Wn=IP,Mo=ZB,$ae=RP,e8=_.forwardRef(({className:e,...t},n)=>r.jsx(Ng,{ref:n,className:Oe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));e8.displayName=Ng.displayName;const Fn=_.forwardRef(({className:e,children:t,...n},s)=>r.jsxs($ae,{children:[r.jsx(e8,{}),r.jsxs(Sg,{ref:s,className:Oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,r.jsxs(wj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(dc,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Fn.displayName=Sg.displayName;const zn=({className:e,...t})=>r.jsx("div",{className:Oe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});zn.displayName="DialogHeader";const t8=({className:e,...t})=>r.jsx("div",{className:Oe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});t8.displayName="DialogFooter";const Bn=_.forwardRef(({className:e,...t},n)=>r.jsx(Cg,{ref:n,className:Oe("text-lg font-semibold leading-none tracking-tight",e),...t}));Bn.displayName=Cg.displayName;const Za=_.forwardRef(({className:e,...t},n)=>r.jsx(Pg,{ref:n,className:Oe("text-sm text-muted-foreground",e),...t}));Za.displayName=Pg.displayName;var Fae=_.createContext(void 0);function Eu(e){const t=_.useContext(Fae);return e||t||"ltr"}var K_="rovingFocusGroup.onEntryFocus",zae={bubbles:!1,cancelable:!0},Nj="RovingFocusGroup",[XN,n8,Bae]=vg(Nj),[Vae,dh]=Nr(Nj,[Bae]),[qae,Uae]=Vae(Nj),r8=_.forwardRef((e,t)=>r.jsx(XN.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(XN.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Hae,{...e,ref:t})})}));r8.displayName=Nj;var Hae=_.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...h}=e,p=_.useRef(null),v=Rt(t,p),j=Eu(a),[g=null,x]=Vs({prop:o,defaultProp:l,onChange:c}),[w,N]=_.useState(!1),y=Un(d),A=n8(n),P=_.useRef(!1),[E,C]=_.useState(0);return _.useEffect(()=>{const S=p.current;if(S)return S.addEventListener(K_,y),()=>S.removeEventListener(K_,y)},[y]),r.jsx(qae,{scope:n,orientation:s,dir:j,loop:i,currentTabStopId:g,onItemFocus:_.useCallback(S=>x(S),[x]),onItemShiftTab:_.useCallback(()=>N(!0),[]),onFocusableItemAdd:_.useCallback(()=>C(S=>S+1),[]),onFocusableItemRemove:_.useCallback(()=>C(S=>S-1),[]),children:r.jsx(st.div,{tabIndex:w||E===0?-1:0,"data-orientation":s,...h,ref:v,style:{outline:"none",...e.style},onMouseDown:Ve(e.onMouseDown,()=>{P.current=!0}),onFocus:Ve(e.onFocus,S=>{const k=!P.current;if(S.target===S.currentTarget&&k&&!w){const I=new CustomEvent(K_,zae);if(S.currentTarget.dispatchEvent(I),!I.defaultPrevented){const R=A().filter(H=>H.focusable),D=R.find(H=>H.active),z=R.find(H=>H.id===g),K=[D,z,...R].filter(Boolean).map(H=>H.ref.current);a8(K,f)}}P.current=!1}),onBlur:Ve(e.onBlur,()=>N(!1))})})}),s8="RovingFocusGroupItem",i8=_.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:i=!1,tabStopId:a,...o}=e,l=ri(),c=a||l,d=Uae(s8,n),f=d.currentTabStopId===c,h=n8(n),{onFocusableItemAdd:p,onFocusableItemRemove:v}=d;return _.useEffect(()=>{if(s)return p(),()=>v()},[s,p,v]),r.jsx(XN.ItemSlot,{scope:n,id:c,focusable:s,active:i,children:r.jsx(st.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:Ve(e.onMouseDown,j=>{s?d.onItemFocus(c):j.preventDefault()}),onFocus:Ve(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:Ve(e.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){d.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const g=Gae(j,d.orientation,d.dir);if(g!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let w=h().filter(N=>N.focusable).map(N=>N.ref.current);if(g==="last")w.reverse();else if(g==="prev"||g==="next"){g==="prev"&&w.reverse();const N=w.indexOf(j.currentTarget);w=d.loop?Zae(w,N+1):w.slice(N+1)}setTimeout(()=>a8(w))}})})})});i8.displayName=s8;var Wae={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Kae(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Gae(e,t,n){const s=Kae(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Wae[s]}function a8(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function Zae(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var FP=r8,zP=i8,BP="Tabs",[Qae]=Nr(BP,[dh]),o8=dh(),[Yae,VP]=Qae(BP),l8=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,f=Eu(l),[h,p]=Vs({prop:s,onChange:i,defaultProp:a});return r.jsx(Yae,{scope:n,baseId:ri(),value:h,onValueChange:p,orientation:o,dir:f,activationMode:c,children:r.jsx(st.div,{dir:f,"data-orientation":o,...d,ref:t})})});l8.displayName=BP;var c8="TabsList",u8=_.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...i}=e,a=VP(c8,n),o=o8(n);return r.jsx(FP,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:s,children:r.jsx(st.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});u8.displayName=c8;var d8="TabsTrigger",f8=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:i=!1,...a}=e,o=VP(d8,n),l=o8(n),c=p8(o.baseId,s),d=g8(o.baseId,s),f=s===o.value;return r.jsx(zP,{asChild:!0,...l,focusable:!i,active:f,children:r.jsx(st.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:t,onMouseDown:Ve(e.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(s):h.preventDefault()}),onKeyDown:Ve(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(s)}),onFocus:Ve(e.onFocus,()=>{const h=o.activationMode!=="manual";!f&&!i&&h&&o.onValueChange(s)})})})});f8.displayName=d8;var h8="TabsContent",m8=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:i,children:a,...o}=e,l=VP(h8,n),c=p8(l.baseId,s),d=g8(l.baseId,s),f=s===l.value,h=_.useRef(f);return _.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),r.jsx(Vr,{present:i||f,children:({present:p})=>r.jsx(st.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&a})})});m8.displayName=h8;function p8(e,t){return`${e}-trigger-${t}`}function g8(e,t){return`${e}-content-${t}`}var Xae=l8,x8=u8,v8=f8,y8=m8;const fi=Xae,qs=_.forwardRef(({className:e,...t},n)=>r.jsx(x8,{ref:n,className:Oe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));qs.displayName=x8.displayName;const Ht=_.forwardRef(({className:e,...t},n)=>r.jsx(v8,{ref:n,className:Oe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ht.displayName=v8.displayName;const Zt=_.forwardRef(({className:e,...t},n)=>r.jsx(y8,{ref:n,className:Oe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Zt.displayName=y8.displayName;const ge=_.forwardRef(({className:e,type:t,...n},s)=>r.jsx("input",{type:t,className:Oe("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...n}));ge.displayName="Input";var Jae="Label",b8=_.forwardRef((e,t)=>r.jsx(st.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));b8.displayName=Jae;var j8=b8;const eoe=Au("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ce=_.forwardRef(({className:e,...t},n)=>r.jsx(j8,{ref:n,className:Oe(eoe(),e),...t}));Ce.displayName=j8.displayName;function ed({isListening:e,isSupported:t,onClick:n,className:s,size:i="icon"}){return t?r.jsx(re,{type:"button",size:i,variant:"ghost",onClick:n,disabled:!t,className:Oe("transition-all",e&&"text-red-600 dark:text-red-500",e&&"animate-pulse",s),"data-testid":`button-voice-${e?"stop":"start"}`,title:e?"Arrter l'coute":"Activer la reconnaissance vocale",children:e?r.jsx(mz,{className:"h-4 w-4"}):r.jsx(pz,{className:"h-4 w-4"})}):null}function td({lang:e="fr-FR",onResult:t,convertNumbers:n=!1}={}){const[s,i]=_.useState(!1),[a,o]=_.useState(""),[l,c]=_.useState(null),{toast:d}=At(),f=_.useRef(typeof window<"u"&&("webkitSpeechRecognition"in window||"SpeechRecognition"in window)).current,h=_.useRef(null);_.useEffect(()=>{if(!f){c("Reconnaissance vocale non supporte par ce navigateur");return}const g=window.SpeechRecognition||window.webkitSpeechRecognition,x=new g;return x.lang=e,x.continuous=!1,x.interimResults=!1,x.maxAlternatives=1,x.onresult=w=>{const N=w.results[0][0].transcript;let y=N;n&&(y=toe(N)),o(y),i(!1),t&&t(y),d({title:"Reconnaissance russie",description:y})},x.onerror=w=>{console.error("[VOICE] Erreur reconnaissance:",w.error),i(!1);let N="Erreur de reconnaissance vocale";switch(w.error){case"not-allowed":case"permission-denied":N="Microphone non autoris. Vrifiez les permissions du navigateur.";break;case"no-speech":N="Aucune parole dtecte. Ressayez.";break;case"network":N="Erreur rseau. Vrifiez votre connexion.";break;case"aborted":N="Reconnaissance annule.";break}c(N),d({title:"Erreur vocale",description:N,variant:"destructive"})},x.onend=()=>{i(!1)},h.current=x,()=>{h.current&&h.current.abort()}},[f,e,n,t,d]);const p=_.useCallback(()=>{if(!f){d({title:"Non support",description:"Votre navigateur ne supporte pas la reconnaissance vocale. Utilisez Chrome, Safari ou Edge.",variant:"destructive"});return}if(h.current&&!s){c(null),o("");try{h.current.start(),i(!0),d({title:"coute en cours...",description:"Parlez maintenant"})}catch(g){console.error("[VOICE] Erreur dmarrage:",g),c("Impossible de dmarrer le microphone")}}},[f,s,d]),v=_.useCallback(()=>{h.current&&s&&(h.current.stop(),i(!1))},[s]),j=_.useCallback(()=>{o(""),c(null)},[]);return{isListening:s,isSupported:f,transcript:a,error:l,startListening:p,stopListening:v,resetTranscript:j}}function toe(e){const t={zro:"0",zero:"0",un:"1",une:"1",deux:"2",trois:"3",quatre:"4",cinq:"5",six:"6",sept:"7",huit:"8",neuf:"9"};let n=e.toLowerCase();return Object.entries(t).forEach(([s,i])=>{const a=new RegExp(`\\b${s}\\b`,"g");n=n.replace(a,i)}),n=n.replace(/[^\d]/g,""),n}const noe=Au("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function ve({className:e,variant:t,...n}){return r.jsx("div",{className:Oe(noe({variant:t}),e),...n})}var qP="Collapsible",[roe,_8]=Nr(qP),[soe,UP]=roe(qP),w8=_.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:i,disabled:a,onOpenChange:o,...l}=e,[c=!1,d]=Vs({prop:s,defaultProp:i,onChange:o});return r.jsx(soe,{scope:n,disabled:a,contentId:ri(),open:c,onOpenToggle:_.useCallback(()=>d(f=>!f),[d]),children:r.jsx(st.div,{"data-state":WP(c),"data-disabled":a?"":void 0,...l,ref:t})})});w8.displayName=qP;var N8="CollapsibleTrigger",S8=_.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,i=UP(N8,n);return r.jsx(st.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":WP(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...s,ref:t,onClick:Ve(e.onClick,i.onOpenToggle)})});S8.displayName=N8;var HP="CollapsibleContent",C8=_.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=UP(HP,e.__scopeCollapsible);return r.jsx(Vr,{present:n||i.open,children:({present:a})=>r.jsx(ioe,{...s,ref:t,present:a})})});C8.displayName=HP;var ioe=_.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:i,...a}=e,o=UP(HP,n),[l,c]=_.useState(s),d=_.useRef(null),f=Rt(t,d),h=_.useRef(0),p=h.current,v=_.useRef(0),j=v.current,g=o.open||l,x=_.useRef(g),w=_.useRef(void 0);return _.useEffect(()=>{const N=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(N)},[]),hr(()=>{const N=d.current;if(N){w.current=w.current||{transitionDuration:N.style.transitionDuration,animationName:N.style.animationName},N.style.transitionDuration="0s",N.style.animationName="none";const y=N.getBoundingClientRect();h.current=y.height,v.current=y.width,x.current||(N.style.transitionDuration=w.current.transitionDuration,N.style.animationName=w.current.animationName),c(s)}},[o.open,s]),r.jsx(st.div,{"data-state":WP(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...a,ref:f,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":j?`${j}px`:void 0,...e.style},children:g&&i})});function WP(e){return e?"open":"closed"}var aoe=w8,ooe=S8,loe=C8,el="Accordion",coe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[KP,uoe,doe]=vg(el),[Sj]=Nr(el,[doe,_8]),GP=_8(),P8=q.forwardRef((e,t)=>{const{type:n,...s}=e,i=s,a=s;return r.jsx(KP.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?r.jsx(poe,{...a,ref:t}):r.jsx(moe,{...i,ref:t})})});P8.displayName=el;var[A8,foe]=Sj(el),[E8,hoe]=Sj(el,{collapsible:!1}),moe=q.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:i=()=>{},collapsible:a=!1,...o}=e,[l,c]=Vs({prop:n,defaultProp:s,onChange:i});return r.jsx(A8,{scope:e.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:q.useCallback(()=>a&&c(""),[a,c]),children:r.jsx(E8,{scope:e.__scopeAccordion,collapsible:a,children:r.jsx(T8,{...o,ref:t})})})}),poe=q.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:i=()=>{},...a}=e,[o=[],l]=Vs({prop:n,defaultProp:s,onChange:i}),c=q.useCallback(f=>l((h=[])=>[...h,f]),[l]),d=q.useCallback(f=>l((h=[])=>h.filter(p=>p!==f)),[l]);return r.jsx(A8,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:d,children:r.jsx(E8,{scope:e.__scopeAccordion,collapsible:!0,children:r.jsx(T8,{...a,ref:t})})})}),[goe,Cj]=Sj(el),T8=q.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:s,dir:i,orientation:a="vertical",...o}=e,l=q.useRef(null),c=Rt(l,t),d=uoe(n),h=Eu(i)==="ltr",p=Ve(e.onKeyDown,v=>{var S;if(!coe.includes(v.key))return;const j=v.target,g=d().filter(k=>{var I;return!((I=k.ref.current)!=null&&I.disabled)}),x=g.findIndex(k=>k.ref.current===j),w=g.length;if(x===-1)return;v.preventDefault();let N=x;const y=0,A=w-1,P=()=>{N=x+1,N>A&&(N=y)},E=()=>{N=x-1,N<y&&(N=A)};switch(v.key){case"Home":N=y;break;case"End":N=A;break;case"ArrowRight":a==="horizontal"&&(h?P():E());break;case"ArrowDown":a==="vertical"&&P();break;case"ArrowLeft":a==="horizontal"&&(h?E():P());break;case"ArrowUp":a==="vertical"&&E();break}const C=N%w;(S=g[C].ref.current)==null||S.focus()});return r.jsx(goe,{scope:n,disabled:s,direction:i,orientation:a,children:r.jsx(KP.Slot,{scope:n,children:r.jsx(st.div,{...o,"data-orientation":a,ref:c,onKeyDown:s?void 0:p})})})}),yy="AccordionItem",[xoe,ZP]=Sj(yy),k8=q.forwardRef((e,t)=>{const{__scopeAccordion:n,value:s,...i}=e,a=Cj(yy,n),o=foe(yy,n),l=GP(n),c=ri(),d=s&&o.value.includes(s)||!1,f=a.disabled||e.disabled;return r.jsx(xoe,{scope:n,open:d,disabled:f,triggerId:c,children:r.jsx(aoe,{"data-orientation":a.orientation,"data-state":D8(d),...l,...i,ref:t,disabled:f,open:d,onOpenChange:h=>{h?o.onItemOpen(s):o.onItemClose(s)}})})});k8.displayName=yy;var O8="AccordionHeader",M8=q.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,i=Cj(el,n),a=ZP(O8,n);return r.jsx(st.h3,{"data-orientation":i.orientation,"data-state":D8(a.open),"data-disabled":a.disabled?"":void 0,...s,ref:t})});M8.displayName=O8;var JN="AccordionTrigger",I8=q.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,i=Cj(el,n),a=ZP(JN,n),o=hoe(JN,n),l=GP(n);return r.jsx(KP.ItemSlot,{scope:n,children:r.jsx(ooe,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...l,...s,ref:t})})});I8.displayName=JN;var R8="AccordionContent",L8=q.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,i=Cj(el,n),a=ZP(R8,n),o=GP(n);return r.jsx(loe,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...o,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});L8.displayName=R8;function D8(e){return e?"open":"closed"}var voe=P8,yoe=k8,boe=M8,$8=I8,F8=L8;const joe=voe,ld=_.forwardRef(({className:e,...t},n)=>r.jsx(yoe,{ref:n,className:Oe("border-b",e),...t}));ld.displayName="AccordionItem";const cd=_.forwardRef(({className:e,children:t,...n},s)=>r.jsx(boe,{className:"flex",children:r.jsxs($8,{ref:s,className:Oe("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,r.jsx(eP,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));cd.displayName=$8.displayName;const ud=_.forwardRef(({className:e,children:t,...n},s)=>r.jsx(F8,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:r.jsx("div",{className:Oe("pb-4 pt-0",e),children:t})}));ud.displayName=F8.displayName;function _oe({result:e,onClose:t,onAddToCrm:n}){var o,l,c,d;const s=e.dirigeant,i=s?`${((o=s.prenom)==null?void 0:o[0])||""}${((l=s.nom)==null?void 0:l[0])||""}`:"N/A",a=e.latitude&&e.longitude?`https://www.google.com/maps?q=${e.latitude},${e.longitude}`:null;return r.jsxs(U,{"data-testid":"card-patron-result",className:"border-primary/20",children:[r.jsxs(ne,{className:"flex flex-row items-start justify-between space-y-0 pb-4",children:[r.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[r.jsxs(ma,{className:"h-16 w-16",children:[r.jsx(tc,{src:(s==null?void 0:s.photo_url)||void 0}),r.jsx(pa,{className:"bg-primary/10 text-primary text-lg",children:i})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs(se,{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(Ri,{className:"h-5 w-5"}),s?r.jsxs("span",{children:[s.prenom," ",s.nom]}):r.jsx("span",{children:"Dirigeant non disponible"}),e.alerte_juridique&&r.jsxs(ve,{variant:"destructive",className:"gap-1",children:[r.jsx(Yr,{className:"h-3 w-3"}),"ALERTE RJ/LJ"]}),e.etat_administratif==="Cess"&&r.jsx(ve,{variant:"destructive",children:"Cess"})]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(s==null?void 0:s.fonction)||"Fonction inconnue"})]})]}),t&&r.jsx(re,{variant:"ghost",size:"icon",onClick:t,"data-testid":"button-close-result",children:r.jsx(dc,{className:"h-4 w-4"})})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Ir,{className:"h-4 w-4 mt-0.5 text-muted-foreground shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium",children:e.enseigne_commerciale||e.raison_sociale}),e.enseigne_commerciale&&e.raison_sociale!==e.enseigne_commerciale&&r.jsx("p",{className:"text-sm text-muted-foreground",children:e.raison_sociale})]})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(JC,{className:"h-4 w-4 text-muted-foreground shrink-0"}),r.jsx(ve,{variant:"secondary","data-testid":"badge-secteur",children:e.secteur||"Secteur non spcifi"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"SIRET :"})," ",r.jsx("span",{className:"font-mono",children:woe(e.siret)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"SIREN :"})," ",r.jsx("span",{className:"font-mono",children:Noe(e.siren)})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 pt-2",children:[e.effectif_texte&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Nn,{className:"h-4 w-4 text-muted-foreground shrink-0"}),r.jsx("span",{className:"text-sm font-medium",children:e.effectif_texte})]}),e.capital_social!==void 0&&e.capital_social!==null&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Oo,{className:"h-4 w-4 text-muted-foreground shrink-0"}),r.jsxs("span",{className:"text-sm font-medium",children:["Capital : ",rO(e.capital_social)]})]}),e.tva_intracommunautaire&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hu,{className:"h-4 w-4 text-muted-foreground shrink-0"}),r.jsx("span",{className:"text-sm font-mono",children:e.tva_intracommunautaire})]})]}),e.procedure_collective&&r.jsxs("div",{className:"flex items-start gap-2 pt-3 border-t border-destructive/30",children:[r.jsx(Yr,{className:"h-5 w-5 text-destructive shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"text-sm font-medium text-destructive",children:"Procdure collective :"}),r.jsx(ve,{variant:"destructive",className:"font-semibold","data-testid":"badge-alerte-rj",children:e.procedure_type||"RJ/LJ"})]}),e.procedure_collective_libelle&&r.jsx("p",{className:"text-sm text-destructive",children:e.procedure_collective_libelle}),e.procedure_collective_date&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Date : ",Fx(e.procedure_collective_date)]})]})]})]}),r.jsxs(joe,{type:"multiple",className:"w-full",children:[r.jsxs(ld,{value:"coordonnees",children:[r.jsx(cd,{className:"text-sm font-medium","data-testid":"accordion-coordonnees",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vn,{className:"h-4 w-4"}),"Coordonnes"]})}),r.jsxs(ud,{className:"space-y-2 pt-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(da,{className:"h-4 w-4 text-muted-foreground shrink-0"}),r.jsx("p",{className:"text-sm","data-testid":"text-email",children:e.email||r.jsx("span",{className:"text-muted-foreground italic",children:"Non disponible"})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vn,{className:"h-4 w-4 text-muted-foreground shrink-0"}),r.jsx("p",{className:"text-sm","data-testid":"text-telephone",children:e.telephone||r.jsx("span",{className:"text-muted-foreground italic",children:"Non disponible"})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(uz,{className:"h-4 w-4 text-muted-foreground shrink-0"}),r.jsx("p",{className:"text-sm","data-testid":"text-siteweb",children:e.site_web?r.jsxs("a",{href:e.site_web,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1",children:[e.site_web,r.jsx(ste,{className:"h-3 w-3"})]}):r.jsx("span",{className:"text-muted-foreground italic",children:"Non disponible"})})]})]})]}),r.jsxs(ld,{value:"adresse",children:[r.jsx(cd,{className:"text-sm font-medium","data-testid":"accordion-adresse",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jr,{className:"h-4 w-4"}),"Adresse & Localisation"]})}),r.jsxs(ud,{className:"space-y-2 pt-2",children:[r.jsxs("div",{className:"text-sm space-y-1",children:[e.adresse&&r.jsx("p",{children:e.adresse}),e.adresse_ligne_2&&r.jsx("p",{children:e.adresse_ligne_2}),e.complement_adresse&&r.jsx("p",{className:"text-muted-foreground",children:e.complement_adresse}),r.jsxs("p",{children:[e.code_postal," ",e.ville]}),e.commune&&e.commune!==e.ville&&r.jsxs("p",{className:"text-muted-foreground",children:["Commune : ",e.commune]}),e.departement&&r.jsxs("p",{className:"text-muted-foreground",children:["Dpartement : ",e.departement]}),e.region&&r.jsxs("p",{className:"text-muted-foreground",children:["Rgion : ",e.region]})]}),a&&r.jsxs("div",{className:"pt-2",children:[r.jsx(re,{variant:"outline",size:"sm",asChild:!0,className:"gap-2","data-testid":"button-google-maps",children:r.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:[r.jsx(ute,{className:"h-4 w-4"}),"Ouvrir dans Google Maps"]})}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["GPS : ",(c=e.latitude)==null?void 0:c.toFixed(6),", ",(d=e.longitude)==null?void 0:d.toFixed(6)]})]})]})]}),r.jsxs(ld,{value:"business",children:[r.jsx(cd,{className:"text-sm font-medium","data-testid":"accordion-business",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(wn,{className:"h-4 w-4"}),"Indicateurs Business"]})}),r.jsxs(ud,{className:"space-y-3 pt-2",children:[(e.effectif_texte||e.effectif!==void 0)&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-1",children:"Effectif"}),r.jsx("p",{className:"text-sm",children:e.effectif_texte}),e.effectif_min!==void 0&&e.effectif_max!==void 0&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Fourchette : ",e.effectif_min," - ",e.effectif_max," salaris"]})]}),e.capital_social!==void 0&&e.capital_social!==null&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-1",children:"Capital Social"}),r.jsx("p",{className:"text-sm",children:rO(e.capital_social)})]}),e.tva_intracommunautaire&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-1",children:"TVA Intracommunautaire"}),r.jsx("p",{className:"text-sm font-mono",children:e.tva_intracommunautaire})]}),e.forme_juridique_libelle&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-1",children:"Forme Juridique"}),r.jsx("p",{className:"text-sm",children:e.forme_juridique_libelle}),e.forme_juridique&&e.forme_juridique!==e.forme_juridique_libelle&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Code : ",e.forme_juridique]})]})]})]}),e.procedure_collective&&r.jsxs(ld,{value:"alertes",className:"border-destructive/50",children:[r.jsx(cd,{className:"text-sm font-medium text-destructive","data-testid":"accordion-alertes",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yr,{className:"h-4 w-4"}),"Alertes Juridiques"]})}),r.jsx(ud,{className:"space-y-2 pt-2",children:r.jsxs("div",{className:"bg-destructive/10 rounded-lg p-3 space-y-2",children:[e.procedure_collective_libelle&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-destructive",children:e.procedure_collective_libelle}),e.procedure_type&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Type : ",e.procedure_type]})]}),e.procedure_collective_date&&r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Date :"})," ",Fx(e.procedure_collective_date)]}),e.tribunal_commerce&&r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Tribunal :"})," ",e.tribunal_commerce]})]})})]}),r.jsxs(ld,{value:"admin",children:[r.jsx(cd,{className:"text-sm font-medium","data-testid":"accordion-admin",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Uo,{className:"h-4 w-4"}),"Informations Administratives"]})}),r.jsxs(ud,{className:"space-y-2 pt-2",children:[e.etat_administratif&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"tat :"}),r.jsx(ve,{variant:e.etat_administratif==="Actif"?"default":"destructive",children:e.etat_administratif})]}),e.date_creation&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xn,{className:"h-4 w-4 text-muted-foreground shrink-0"}),r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Cre le :"})," ",Fx(e.date_creation)]})]}),e.date_cessation&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xn,{className:"h-4 w-4 text-destructive shrink-0"}),r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"text-destructive",children:"Cessation :"})," ",Fx(e.date_cessation)]})]})]})]})]})]}),r.jsxs(cp,{className:"flex gap-2",children:[r.jsxs(re,{onClick:n,className:"flex-1","data-testid":"button-add-to-crm",children:[r.jsx(uy,{className:"mr-2 h-4 w-4"}),"Ajouter au CRM"]}),t&&r.jsx(re,{variant:"outline",onClick:t,"data-testid":"button-cancel-result",children:"Annuler"})]})]})}function woe(e){return!e||e.length!==14?e:`${e.slice(0,3)} ${e.slice(3,6)} ${e.slice(6,9)} ${e.slice(9)}`}function Noe(e){return!e||e.length!==9?e:`${e.slice(0,3)} ${e.slice(3,6)} ${e.slice(6)}`}function rO(e){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function Fx(e){try{const t=new Date(e);return new Intl.DateFormat("fr-FR").format(t)}catch{return e}}function Soe({open:e,onOpenChange:t}){const{toast:n}=At(),[s,i]=_.useState(""),[a,o]=_.useState(""),[l,c]=_.useState(""),[d,f]=_.useState(""),[h,p]=_.useState(""),[v,j]=_.useState(""),[g,x]=_.useState([]),[w,N]=_.useState(null),[y,A]=_.useState([]),[P,E]=_.useState(null),[C,S]=_.useState("nom"),k=td({lang:"fr-FR",convertNumbers:!1,onResult:J=>{i(J)}}),I=td({lang:"fr-FR",convertNumbers:!1,onResult:J=>{o(J)}}),R=td({lang:"fr-FR",convertNumbers:!0,onResult:J=>{c(J)}}),D=td({lang:"fr-FR",convertNumbers:!0,onResult:J=>{const Pe=J.replace(/\s/g,"");f(Pe.slice(0,5))}}),z=td({lang:"fr-FR",convertNumbers:!0,onResult:J=>{p(sO(J))}}),V=td({lang:"fr-FR",convertNumbers:!0,onResult:J=>{j(iO(J))}}),K=dt({mutationFn:async J=>await rt("POST","/api/patron/search-nom",J),onSuccess:J=>{S("nom"),J.success&&J.results&&J.results.length>0?(x(J.results),E(null),J.results.length===1&&E(J.results[0]),n({title:"Recherche termine",description:`${J.count} entreprise(s) trouve(s)`})):J.success&&J.count===0&&(x([]),E(null),n({title:"Aucun rsultat",description:J.message||"Aucune entreprise trouve",variant:"destructive"}))},onError:J=>{n({title:"Erreur de recherche",description:J.message||"Impossible de rechercher l'entreprise",variant:"destructive"})}}),H=dt({mutationFn:async J=>await rt("POST","/api/patron/search-siret",J),onSuccess:J=>{S("siret"),J.success&&J.result?(N(J.result),E(J.result),n({title:"Entreprise trouve",description:J.result.raison_sociale})):J.success&&!J.result&&(N(null),E(null),n({title:"Aucun rsultat",description:"Aucune entreprise avec ce SIRET",variant:"destructive"}))},onError:J=>{n({title:"Erreur de recherche",description:J.message||"Impossible de rechercher l'entreprise",variant:"destructive"})}}),W=()=>{if(!s||s.length<3){n({title:"Nom trop court",description:"Le nom de l'entreprise doit contenir au moins 3 caractres",variant:"destructive"});return}K.mutate({nom_entreprise:s,ville:a||void 0,adresse:l||void 0,code_postal:d||void 0})},B=()=>{const J=h.replace(/\s/g,"");if(!J||J.length!==14||!/^\d{14}$/.test(J)){n({title:"SIRET invalide",description:"Le SIRET doit contenir exactement 14 chiffres",variant:"destructive"});return}H.mutate({siret:J})},$=dt({mutationFn:async J=>await rt("POST","/api/patron/search-telephone",J),onSuccess:J=>{J.success&&J.results&&J.results.length>0?(A(J.results),E(null),J.results.length===1&&E(J.results[0]),n({title:"Recherche termine",description:`${J.count} entreprise(s) trouve(s)`})):J.success&&J.count===0&&(A([]),E(null),n({title:"Aucun rsultat",description:J.message||"Aucune entreprise trouve avec ce numro",variant:"destructive"}))},onError:J=>{n({title:"Erreur de recherche",description:J.message||"Impossible de rechercher l'entreprise",variant:"destructive"})}}),G=()=>{const J=v.replace(/\s/g,"");if(!J||J.length<10){n({title:"Tlphone invalide",description:"Le numro de tlphone doit contenir au moins 10 chiffres",variant:"destructive"});return}$.mutate({telephone:J})},ee=J=>{E(J)},oe=dt({mutationFn:async J=>{var $e,me,Te,je;const Pe={siret:J.siret,raisonSociale:J.raison_sociale,enseigneCommerciale:J.enseigne_commerciale,secteur:J.secteur,ville:J.ville,codePostal:J.code_postal,dirigeantNom:(($e=J.dirigeant)==null?void 0:$e.nom)||null,dirigeantPrenom:((me=J.dirigeant)==null?void 0:me.prenom)||null,dirigeantFonction:((Te=J.dirigeant)==null?void 0:Te.fonction)||null,dirigeantPhotoUrl:((je=J.dirigeant)==null?void 0:je.photo_url)||null,email:J.email,telephone:J.telephone,siteWeb:J.site_web,searchMode:C,pappersRawData:J.pappers_raw_data};return await rt("POST","/api/patron/contacts",Pe)},onSuccess:()=>{n({title:"Contact ajout",description:"Le contact a t ajout  votre CRM avec succs"}),Ee()},onError:J=>{var Pe;(Pe=J.message)!=null&&Pe.includes("Doublon")?n({title:"Contact dj existant",description:"Ce contact existe dj dans votre CRM",variant:"destructive"}):n({title:"Erreur d'ajout",description:J.message||"Impossible d'ajouter le contact au CRM",variant:"destructive"})}}),fe=()=>{P&&oe.mutate(P)},Ee=()=>{i(""),o(""),c(""),f(""),p(""),j(""),x([]),N(null),A([]),E(null),t(!1)};return r.jsx(Wn,{open:e,onOpenChange:Ee,children:r.jsxs(Fn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto","data-testid":"dialog-patron-search",children:[r.jsxs(zn,{children:[r.jsxs(Bn,{className:"flex items-center gap-2",children:[r.jsx(Ri,{className:"h-5 w-5"}),"Trouve-moi le patron"]}),r.jsx(Za,{children:"Recherchez instantanment un dirigeant par nom d'entreprise, SIRET ou tlphone"})]}),r.jsxs(fi,{defaultValue:"nom",className:"w-full",children:[r.jsxs(qs,{className:"grid w-full grid-cols-3",children:[r.jsx(Ht,{value:"nom","data-testid":"tab-search-nom",children:"Par nom d'entreprise"}),r.jsx(Ht,{value:"siret","data-testid":"tab-search-siret",children:"Par SIRET"}),r.jsx(Ht,{value:"telephone","data-testid":"tab-search-telephone",children:"Par tlphone"})]}),r.jsxs(Zt,{value:"nom",className:"space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"nom-entreprise",children:"Nom de l'entreprise *"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ge,{id:"nom-entreprise",placeholder:"Ex: Pharmacie Centrale",value:s,onChange:J=>i(J.target.value),onKeyDown:J=>J.key==="Enter"&&W(),"data-testid":"input-nom-entreprise"}),r.jsx(ed,{isListening:k.isListening,isSupported:k.isSupported,onClick:k.isListening?k.stopListening:k.startListening})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"adresse",children:"Adresse (optionnel)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ge,{id:"adresse",placeholder:"Ex: 12 rue de la Paix",value:l,onChange:J=>c(J.target.value),onKeyDown:J=>J.key==="Enter"&&W(),"data-testid":"input-adresse"}),r.jsx(ed,{isListening:R.isListening,isSupported:R.isSupported,onClick:R.isListening?R.stopListening:R.startListening})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"code-postal",children:"Code postal (optionnel)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ge,{id:"code-postal",placeholder:"Ex: 75001",value:d,onChange:J=>f(J.target.value.replace(/\D/g,"").slice(0,5)),onKeyDown:J=>J.key==="Enter"&&W(),maxLength:5,"data-testid":"input-code-postal"}),r.jsx(ed,{isListening:D.isListening,isSupported:D.isSupported,onClick:D.isListening?D.stopListening:D.startListening})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"ville",children:"Ville (optionnel)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ge,{id:"ville",placeholder:"Ex: Lyon",value:a,onChange:J=>o(J.target.value),onKeyDown:J=>J.key==="Enter"&&W(),"data-testid":"input-ville"}),r.jsx(ed,{isListening:I.isListening,isSupported:I.isSupported,onClick:I.isListening?I.stopListening:I.startListening})]})]}),r.jsx(re,{onClick:W,disabled:K.isPending||!s,className:"w-full","data-testid":"button-search-nom",children:K.isPending?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),"Recherche en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ls,{className:"mr-2 h-4 w-4"}),"Rechercher"]})})]}),g.length>1&&!P&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h3",{className:"text-sm font-medium",children:[g.length," rsultats trouvs - Slectionnez une entreprise :"]}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:g.map((J,Pe)=>r.jsx(U,{className:"p-3 hover-elevate cursor-pointer",onClick:()=>ee(J),"data-testid":`result-item-${Pe}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ir,{className:"h-5 w-5 mt-0.5 text-muted-foreground"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:J.enseigne_commerciale||J.raison_sociale}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[J.ville," (",J.code_postal,")  SIRET : ",J.siret]})]})]})},Pe))})]})]}),r.jsx(Zt,{value:"siret",className:"space-y-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"siret",children:"Numro SIRET *"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ge,{id:"siret",placeholder:"Ex: 443 061 841 00047",value:h,onChange:J=>p(sO(J.target.value)),onKeyDown:J=>J.key==="Enter"&&B(),maxLength:17,"data-testid":"input-siret"}),r.jsx(ed,{isListening:z.isListening,isSupported:z.isSupported,onClick:z.isListening?z.stopListening:z.startListening})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Format : 14 chiffres (avec ou sans espaces)"})]}),r.jsx(re,{onClick:B,disabled:H.isPending||!h,className:"w-full","data-testid":"button-search-siret",children:H.isPending?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),"Recherche en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ls,{className:"mr-2 h-4 w-4"}),"Rechercher"]})})]})}),r.jsxs(Zt,{value:"telephone",className:"space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"telephone",children:"Numro de tlphone *"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ge,{id:"telephone",placeholder:"Ex: 01 23 45 67 89",value:v,onChange:J=>j(iO(J.target.value)),onKeyDown:J=>J.key==="Enter"&&G(),maxLength:14,"data-testid":"input-telephone"}),r.jsx(ed,{isListening:V.isListening,isSupported:V.isSupported,onClick:V.isListening?V.stopListening:V.startListening})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Format : 10 chiffres (fixe ou mobile de l'entreprise)"})]}),r.jsx(re,{onClick:G,disabled:$.isPending||!v,className:"w-full","data-testid":"button-search-telephone",children:$.isPending?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),"Recherche en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ls,{className:"mr-2 h-4 w-4"}),"Rechercher"]})})]}),y.length>1&&!P&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h3",{className:"text-sm font-medium",children:[y.length," rsultats trouvs - Slectionnez une entreprise :"]}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:y.map((J,Pe)=>r.jsx(U,{className:"p-3 hover-elevate cursor-pointer",onClick:()=>ee(J),"data-testid":`result-item-tel-${Pe}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ir,{className:"h-5 w-5 mt-0.5 text-muted-foreground"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:J.enseigne_commerciale||J.raison_sociale}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[J.ville," (",J.code_postal,")  SIRET : ",J.siret]})]})]})},Pe))})]})]})]}),P&&r.jsx("div",{className:"mt-6",children:r.jsx(_oe,{result:P,onClose:()=>E(null),onAddToCrm:fe})})]})})}function sO(e){const n=e.replace(/\D/g,"").slice(0,14);return n.length<=3?n:n.length<=6?`${n.slice(0,3)} ${n.slice(3)}`:n.length<=9?`${n.slice(0,3)} ${n.slice(3,6)} ${n.slice(6)}`:`${n.slice(0,3)} ${n.slice(3,6)} ${n.slice(6,9)} ${n.slice(9)}`}function iO(e){const n=e.replace(/\D/g,"").slice(0,10);return n.length<=2?n:n.length<=4?`${n.slice(0,2)} ${n.slice(2)}`:n.length<=6?`${n.slice(0,2)} ${n.slice(2,4)} ${n.slice(4)}`:n.length<=8?`${n.slice(0,2)} ${n.slice(2,4)} ${n.slice(4,6)} ${n.slice(6)}`:`${n.slice(0,2)} ${n.slice(2,4)} ${n.slice(4,6)} ${n.slice(6,8)} ${n.slice(8)}`}const Coe="hector_access_token",Poe="hector_refresh_token";function Aoe(e){return/^401/.test(e.message)}function Eoe(){return localStorage.getItem(Coe)}function Toe(){return localStorage.getItem(Poe)}function ya(){const{data:e,isLoading:t,error:n}=Ke({queryKey:["/api/auth/user"],retry:!1,refetchOnMount:!0}),s=n?Aoe(n):!1;return{user:e,isLoading:t,isAuthenticated:!!e&&!s,isUnauthenticated:s}}function mr({className:e="",showHomeButton:t=!1}){const{user:n}=ya(),[,s]=es(),i=async()=>{try{await rt("POST","/api/auth/logout")}catch(a){console.error("Logout error:",a)}finally{et.clear(),window.location.href="/auth"}};return r.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[t&&r.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>s("/home"),"data-testid":"button-nav-home",title:"Accueil",children:[r.jsx(lte,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden md:inline",children:"Accueil"})]}),r.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>s("/crm"),"data-testid":"button-nav-crm",title:"CRM",children:[r.jsx(fz,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden md:inline",children:"CRM"})]}),((n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="admin_groupe")&&r.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>s("/admin"),"data-testid":"button-nav-admin",title:"Administration",children:[r.jsx(Uo,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden md:inline",children:"Admin"})]}),(n==null?void 0:n.email)==="kaladjian@adsgroup-security.com"&&r.jsxs(r.Fragment,{children:[r.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>s("/crm/competitor-module"),"data-testid":"button-nav-competitor",title:"chances Concurrent - Reconqute",children:[r.jsx(UN,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden md:inline",children:"chances"})]}),r.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>s("/admin/supervision-equipe"),"data-testid":"button-nav-supervision",title:"Supervision quipe GPS",children:[r.jsx(Jr,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden md:inline",children:"Supervision"})]})]}),r.jsx(re,{variant:"ghost",size:"icon",onClick:i,title:(n==null?void 0:n.email)||"Dconnexion","data-testid":"button-logout",children:r.jsx(hz,{className:"w-5 h-5"})})]})}const G_=768;function QP(){const[e,t]=_.useState(void 0);return _.useEffect(()=>{const n=window.matchMedia(`(max-width: ${G_-1}px)`),s=()=>{t(window.innerWidth<G_)};return n.addEventListener("change",s),t(window.innerWidth<G_),()=>n.removeEventListener("change",s)},[]),!!e}function aO(){const[e,t]=_.useState(null),[n,s]=_.useState(null),[i,a]=_.useState([]),[o,l]=_.useState(!1),[c,d]=_.useState(!1),[f,h]=_.useState(null),[p,v]=_.useState(!1),j=_.useRef(null),{toast:g}=At(),x=QP(),{user:w}=ya(),[,N]=es(),{data:y=[]}=Ke({queryKey:["/api/conversations"],enabled:!!w});_.useEffect(()=>{e&&(async()=>{try{const V=await rt("GET",`/api/messages/${e}`);a(V)}catch(V){console.error("[Frontend] Error loading messages:",V),g({title:"Erreur",description:"Impossible de charger les messages",variant:"destructive"})}})()},[e,g]);const A=dt({mutationFn:async z=>(l(!0),await rt("POST","/api/chat/send",{content:z,conversationId:e,featureType:n})),onSuccess:z=>{console.log("[Frontend] Message sent successfully, full response:",JSON.stringify(z,null,2)),z.conversationId&&!e&&t(z.conversationId),a(V=>{const K=[...V];return z.userMessage&&z.userMessage.id?K.find(H=>H.id===z.userMessage.id)||(console.log("[Frontend] Adding user message:",z.userMessage.id),K.push(z.userMessage)):console.error("[Frontend] userMessage is missing from response:",z),z.assistantMessage&&z.assistantMessage.id?K.find(H=>H.id===z.assistantMessage.id)||(console.log("[Frontend] Adding assistant message:",z.assistantMessage.id),K.push(z.assistantMessage)):console.error("[Frontend] assistantMessage is missing from response:",z),K.sort((H,W)=>new Date(H.createdAt).getTime()-new Date(W.createdAt).getTime())}),l(!1)},onError:z=>{console.error("[Frontend] Error sending message:",z),l(!1),g({title:"Erreur",description:z.message||"Impossible d'envoyer le message",variant:"destructive"})}}),P=z=>{console.log("[Frontend] Sending message:",z),A.mutate(z)},E=()=>{console.log("[Frontend] Starting new conversation"),t(null),s(null),a([])},C=z=>{console.log("[Frontend] Feature selected:",z),s(z)},S=z=>{h(z)},k=async z=>{const V=Array.isArray(z)?z:[z];console.log("[Frontend] Files captured:",V.length,V.map(K=>K.name)),h(null),g({title:"Analyse en cours...",description:"Extraction automatique des informations de la carte de visite"});try{const K=V[0],H=new FileReader,B=await new Promise((oe,fe)=>{H.onloadend=()=>oe(H.result),H.onerror=fe,H.readAsDataURL(K)});console.log("[Frontend] Analyzing business card...");const $=await rt("POST","/api/analyze-business-card",{imageData:B});console.log("[Frontend] Analysis complete:",$),g({title:"Analyse termine ",description:"Informations extraites avec succs !"});const G=$.data,ee=new URLSearchParams;G.nom&&ee.set("nom",G.nom),G.prenom&&ee.set("prenom",G.prenom),G.entreprise&&ee.set("entreprise",G.entreprise),G.email&&ee.set("email",G.email),G.telephone&&ee.set("telephone",G.telephone),G.poste&&ee.set("poste",G.poste),G.secteur&&ee.set("secteur",G.secteur),G.adresse1&&ee.set("adresse1",G.adresse1),G.adresse2&&ee.set("adresse2",G.adresse2),G.codePostal&&ee.set("codePostal",G.codePostal),G.ville&&ee.set("ville",G.ville),G.pays&&ee.set("pays",G.pays),sessionStorage.setItem("businessCardImage",B),N(`/crm/workflow?${ee.toString()}`)}catch(K){console.error("[Frontend] Analysis error:",K),g({title:"Erreur d'analyse",description:K instanceof Error?K.message:"Impossible d'analyser la carte. Essayez de remplir manuellement.",variant:"destructive"}),N("/crm/workflow")}},I=()=>{h(null)};_.useEffect(()=>{var z;(z=j.current)==null||z.scrollIntoView({behavior:"smooth"})},[i,o]);const R=!e&&i.length===0&&!n,D=z=>{console.log("[Frontend] Conversation selected:",z),t(z)};return r.jsxs("div",{className:"flex h-screen bg-background",children:[r.jsx(Pie,{selectedFeature:n,onFeatureSelect:C,onNewConversation:E,conversations:y,selectedConversationId:e,onConversationSelect:D}),r.jsx(Mae,{isOpen:c,onClose:()=>d(!1),selectedFeature:n,onFeatureSelect:C,onNewConversation:E}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx("header",{className:"border-b bg-card px-3 md:px-6 py-3 md:py-4 shrink-0",children:r.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3",children:[x&&r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>d(!0),"data-testid":"button-mobile-menu",children:r.jsx(dte,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h1",{className:"text-lg md:text-2xl font-semibold text-foreground truncate",children:x?"Hector":"Hector - Assistant Commercial IA"}),r.jsxs("p",{className:"text-xs md:text-sm text-muted-foreground mt-0.5 md:mt-1 truncate",children:[n==="commercial"&&"Questions Commerciales",n==="meeting"&&"Structure de Runion",n==="training"&&"Formation Commerciale",n==="arguments"&&"Arguments de Vente",!n&&"Slectionnez une fonctionnalit"]})]}),r.jsx(mr,{showHomeButton:!1})]})}),R?r.jsx(Dae,{onFeatureSelect:C,onCameraClick:S,onPatronSearchClick:()=>v(!0)}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 md:space-y-6",children:[i.length===0&&!o&&r.jsx("div",{className:"flex items-center justify-center py-12 text-muted-foreground",children:"Commencez une conversation..."}),i.map(z=>r.jsx(Rre,{message:z},z.id)),o&&r.jsx(Iae,{}),r.jsx("div",{ref:j})]})}),r.jsx(Dre,{onSendMessage:P,disabled:A.isPending||o})]})]}),f&&r.jsx(JB,{mode:f,onCapture:k,onClose:I,allowMultiplePhotos:f==="photo"}),r.jsx(Soe,{open:p,onOpenChange:v})]})}const koe="/assets/logo_ADS_Group_2025_1760984027908-BN-2LsA4.png";function e1({className:e="",height:t=60}){return r.jsx("div",{className:`inline-block bg-white rounded-lg px-4 py-2 ${e}`,children:r.jsx("img",{src:koe,alt:"ADS GROUP - Business Security",style:{height:`${t}px`}})})}const Ooe="/assets/image_1760986018611-CKFFU5iu.png";function oO(){const[,e]=es(),[t,n]=_.useState(""),[s,i]=_.useState(""),[a,o]=_.useState(!1),[l,c]=_.useState(!1),[d,f]=_.useState("email"),{toast:h}=At(),p=g=>{if(g.preventDefault(),!t.endsWith("@adsgroup-security.com")){h({variant:"destructive",title:"Accs refus",description:"Seuls les emails @adsgroup-security.com sont autoriss"});return}f("password")},v=async g=>{g.preventDefault(),c(!0);try{const x=await rt("POST","/api/auth/login",{email:t,password:s,rememberMe:a});console.log(" Login successful, session created",{rememberMe:a}),window.location.replace("/")}catch(x){console.error("Login error:",x),h({variant:"destructive",title:"chec de la connexion",description:x.message||"Email ou mot de passe incorrect"})}finally{c(!1)}},j=()=>{f("email"),i("")};return r.jsx("div",{className:"min-h-screen flex flex-col bg-[#0A1628]",children:r.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:r.jsx("div",{className:"w-full max-w-6xl",children:r.jsxs("div",{className:"grid md:grid-cols-2 gap-8 lg:gap-12 items-center",children:[r.jsxs("div",{className:"w-full max-w-md mx-auto md:mx-0 md:ml-auto space-y-8",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx(e1,{height:45})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 md:p-10 space-y-6",children:[r.jsxs("div",{className:"md:hidden text-center space-y-2 pb-4",children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"La nouvelle re"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Agents intelligents pour renforcer la performance"})]}),d==="email"?r.jsxs("form",{onSubmit:p,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-foreground",children:"Adresse e-mail professionnelle"}),r.jsx(ge,{id:"email",type:"email",placeholder:"prenom.nom@adsgroup-security.com",value:t,onChange:g=>n(g.target.value),required:!0,disabled:l,"data-testid":"input-email",className:"h-12 text-base"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Seules les adresses @adsgroup-security.com sont autorises"})]}),r.jsx(re,{type:"submit",className:"w-full h-12 bg-[#1e3a5f] hover:bg-[#2d4a6f] text-white font-medium",disabled:l,"data-testid":"button-continue",children:"Continuer"}),r.jsx("button",{type:"button",className:"w-full text-sm text-muted-foreground hover:text-foreground transition-colors",onClick:()=>e("/forgot-password"),disabled:l,"data-testid":"link-forgot-password",children:"Mot de passe oubli ?"})]}):r.jsxs("form",{onSubmit:v,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"email-display",className:"text-sm font-medium text-foreground",children:"Adresse e-mail professionnelle"}),r.jsx("div",{className:"h-12 px-3 flex items-center bg-muted rounded-md text-sm text-muted-foreground",children:t})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-foreground",children:"Mot de passe"}),r.jsx(ge,{id:"password",type:"password",placeholder:"Entrez votre mot de passe",value:s,onChange:g=>i(g.target.value),required:!0,disabled:l,"data-testid":"input-password",className:"h-12 text-base",autoFocus:!0})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"rememberMe",checked:a,onChange:g=>o(g.target.checked),disabled:l,"data-testid":"checkbox-remember-me",className:"h-4 w-4 rounded border-gray-300 text-[#1e3a5f] focus:ring-[#1e3a5f]"}),r.jsx("label",{htmlFor:"rememberMe",className:"text-sm text-foreground cursor-pointer select-none",children:"Rester connect (30 jours)"})]}),r.jsx(re,{type:"submit",className:"w-full h-12 bg-[#1e3a5f] hover:bg-[#2d4a6f] text-white font-medium",disabled:l,"data-testid":"button-login",children:l?"Connexion...":"Se connecter"}),r.jsx("button",{type:"button",className:"w-full text-sm text-muted-foreground hover:text-foreground transition-colors",onClick:j,disabled:l,"data-testid":"button-back",children:"Retour"})]}),r.jsxs("div",{className:"pt-4 border-t border-border text-center space-y-2",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Vous ne pouvez pas vous connecter ?"}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Contactez votre administrateur"," ",r.jsx("span",{className:"font-medium",children:"ADS GROUP SECURITY"})]})]})]})]}),r.jsxs("div",{className:"hidden md:flex flex-col justify-center space-y-6",children:[r.jsxs("div",{className:"space-y-4 text-white",children:[r.jsx("h1",{className:"text-4xl lg:text-5xl font-bold leading-tight",children:"La nouvelle re"}),r.jsxs("p",{className:"text-lg text-white/90 leading-relaxed",children:["Dcouvrez nos agents intelligents,",r.jsx("br",{}),"crs pour renforcer la performance",r.jsx("br",{}),"et scuriser le futur."]})]}),r.jsx("div",{className:"relative",children:r.jsx("img",{src:Ooe,alt:"AI Technology",className:"w-full h-auto rounded-2xl shadow-2xl"})})]})]})})})})}function Moe(){const[,e]=es(),[t,n]=_.useState(""),[s,i]=_.useState(!1),[a,o]=_.useState(!1),{toast:l}=At(),c=async d=>{d.preventDefault(),i(!0);try{await rt("POST","/api/auth/forgot-password",{email:t}),o(!0),l({title:"Email envoy",description:"Si cet email existe, un lien de rinitialisation a t envoy"})}catch(f){console.error("Forgot password error:",f),l({variant:"destructive",title:"Erreur",description:f.message||"Une erreur est survenue"})}finally{i(!1)}};return a?r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:r.jsxs(U,{className:"w-full max-w-md",children:[r.jsxs(ne,{className:"text-center space-y-4",children:[r.jsx("div",{className:"flex justify-center",children:r.jsxs(ma,{className:"h-20 w-20",children:[r.jsx(tc,{src:wf,alt:"Hector"}),r.jsx(pa,{children:r.jsx(fu,{className:"h-12 w-12"})})]})}),r.jsxs("div",{children:[r.jsx(se,{className:"text-2xl",children:"Email envoy"}),r.jsx(jt,{children:"Vrifie ta bote mail"})]})]}),r.jsx(Z,{className:"space-y-4 text-center",children:r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Si un compte existe avec l'email ",r.jsx("strong",{children:t}),", tu recevras un lien de rinitialisation dans quelques minutes."]})}),r.jsx(cp,{children:r.jsx(re,{className:"w-full",onClick:()=>e("/login"),"data-testid":"button-back-to-login",children:"Retour  la connexion"})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:r.jsxs(U,{className:"w-full max-w-md",children:[r.jsxs(ne,{className:"text-center space-y-4",children:[r.jsx("div",{className:"flex justify-center",children:r.jsxs(ma,{className:"h-20 w-20",children:[r.jsx(tc,{src:wf,alt:"Hector"}),r.jsx(pa,{children:r.jsx(fu,{className:"h-12 w-12"})})]})}),r.jsxs("div",{children:[r.jsx(se,{className:"text-2xl",children:"Mot de passe oubli"}),r.jsx(jt,{children:"Entre ton email pour recevoir un lien de rinitialisation"})]})]}),r.jsxs("form",{onSubmit:c,children:[r.jsx(Z,{className:"space-y-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"email",children:"Email professionnel"}),r.jsx(ge,{id:"email",type:"email",placeholder:"prenom.nom@adsgroup-security.com",value:t,onChange:d=>n(d.target.value),required:!0,disabled:s,"data-testid":"input-email"})]})}),r.jsxs(cp,{className:"flex flex-col gap-4",children:[r.jsx(re,{type:"submit",className:"w-full",disabled:s,"data-testid":"button-submit",children:s?"Envoi...":"Envoyer le lien"}),r.jsxs("button",{type:"button",className:"w-full text-sm text-primary hover:underline flex items-center justify-center gap-2",onClick:()=>e("/login"),disabled:s,"data-testid":"link-back-to-login",children:[r.jsx(ua,{className:"h-4 w-4"}),"Retour  la connexion"]})]})]})]})})}function Ioe(){const[,e]=es(),[t,n]=_.useState(""),[s,i]=_.useState(""),[a,o]=_.useState(""),[l,c]=_.useState(!1),{toast:d}=At();_.useEffect(()=>{const p=new URLSearchParams(window.location.search).get("token");p?n(p):(d({variant:"destructive",title:"Lien invalide",description:"Aucun token de rinitialisation trouv"}),e("/login"))},[e,d]);const f=async h=>{if(h.preventDefault(),s!==a){d({variant:"destructive",title:"Erreur",description:"Les mots de passe ne correspondent pas"});return}if(s.length<8){d({variant:"destructive",title:"Mot de passe trop court",description:"Le mot de passe doit contenir au moins 8 caractres"});return}c(!0);try{await rt("POST","/api/auth/reset-password",{token:t,password:s}),d({title:"Mot de passe rinitialis",description:"Tu peux maintenant te connecter avec ton nouveau mot de passe"}),setTimeout(()=>{e("/login")},1500)}catch(p){console.error("Reset password error:",p),d({variant:"destructive",title:"Erreur",description:p.message||"Lien invalide ou expir"})}finally{c(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:r.jsxs(U,{className:"w-full max-w-md",children:[r.jsxs(ne,{className:"text-center space-y-4",children:[r.jsx("div",{className:"flex justify-center",children:r.jsxs(ma,{className:"h-20 w-20",children:[r.jsx(tc,{src:wf,alt:"Hector"}),r.jsx(pa,{children:r.jsx(fu,{className:"h-12 w-12"})})]})}),r.jsxs("div",{children:[r.jsx(se,{className:"text-2xl",children:"Nouveau mot de passe"}),r.jsx(jt,{children:"Choisis un nouveau mot de passe scuris"})]})]}),r.jsxs("form",{onSubmit:f,children:[r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"password",children:"Nouveau mot de passe"}),r.jsx(ge,{id:"password",type:"password",placeholder:"Au moins 8 caractres",value:s,onChange:h=>i(h.target.value),required:!0,minLength:8,disabled:l,"data-testid":"input-password"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"confirm-password",children:"Confirmer le mot de passe"}),r.jsx(ge,{id:"confirm-password",type:"password",placeholder:"Retape ton mot de passe",value:a,onChange:h=>o(h.target.value),required:!0,minLength:8,disabled:l,"data-testid":"input-confirm-password"})]})]}),r.jsx(cp,{children:r.jsx(re,{type:"submit",className:"w-full",disabled:l,"data-testid":"button-submit",children:l?"Rinitialisation...":"Rinitialiser le mot de passe"})})]})]})})}function Roe(){const[e,t]=_.useState(null),{toast:n}=At(),{data:s=[],isLoading:i}=Ke({queryKey:["/api/appointments"]}),a=dt({mutationFn:async c=>await rt("DELETE",`/api/appointments/${c}`),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/appointments"]}),n({title:"RDV supprim",description:"Le rendez-vous a t supprim avec succs."})},onError:c=>{n({title:"Erreur",description:c.message||"Impossible de supprimer le rendez-vous",variant:"destructive"})}}),o=c=>{switch(c){case"confirmed":return"default";case"pending":return"secondary";case"cancelled":return"destructive";case"completed":return"outline";default:return"secondary"}},l=c=>{switch(c){case"confirmed":return"Confirm";case"pending":return"En attente";case"cancelled":return"Annul";case"completed":return"Termin";default:return c}};return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"border-b bg-card",children:r.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center gap-4",children:[r.jsx(un,{href:"/",children:r.jsx(re,{variant:"ghost",size:"icon","data-testid":"button-back-home",children:r.jsx(ua,{className:"h-5 w-5"})})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Mes Rendez-vous"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.length," RDV au total"]})]})]})}),r.jsx("main",{className:"container mx-auto px-4 py-6",children:i?r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(c=>r.jsxs(U,{className:"animate-pulse",children:[r.jsxs(ne,{children:[r.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),r.jsx("div",{className:"h-3 bg-muted rounded w-1/2 mt-2"})]}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-3 bg-muted rounded"}),r.jsx("div",{className:"h-3 bg-muted rounded w-5/6"})]})})]},c))}):s.length===0?r.jsx(U,{children:r.jsxs(Z,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(xn,{className:"h-16 w-16 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun rendez-vous"}),r.jsxs("p",{className:"text-muted-foreground mb-6 text-center",children:["Vous n'avez pas encore de rendez-vous planifi.",r.jsx("br",{}),"Scannez une carte de visite pour crer un RDV."]}),r.jsx(un,{href:"/",children:r.jsx(re,{"data-testid":"button-go-home",children:"Retour  l'accueil"})})]})}):r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(c=>r.jsxs(U,{className:"hover-elevate",children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(se,{className:"text-lg",children:c.contactName}),c.company&&r.jsxs(jt,{className:"flex items-center gap-1 mt-1",children:[r.jsx(iy,{className:"h-3 w-3"}),c.company]})]}),r.jsx(ve,{variant:o(c.status),children:l(c.status)})]})}),r.jsxs(Z,{className:"space-y-3",children:[c.contactEmail&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(da,{className:"h-4 w-4"}),r.jsx("span",{className:"truncate",children:c.contactEmail})]}),c.contactPhone&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(Vn,{className:"h-4 w-4"}),r.jsx("span",{children:c.contactPhone})]}),c.appointmentDate&&r.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[r.jsx(xn,{className:"h-4 w-4 text-primary"}),r.jsx("span",{children:br(new Date(c.appointmentDate),"PPP '' p",{locale:jr})})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsxs(re,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>t(c),"data-testid":`button-view-appointment-${c.id}`,children:[r.jsx(oz,{className:"h-4 w-4 mr-1"}),"Dtails"]}),r.jsx(re,{variant:"destructive",size:"sm",onClick:()=>a.mutate(c.id),disabled:a.isPending,"data-testid":`button-delete-appointment-${c.id}`,children:r.jsx(Ns,{className:"h-4 w-4"})})]})]})]},c.id))})}),r.jsx(Wn,{open:!!e,onOpenChange:()=>t(null),children:r.jsxs(Fn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(zn,{children:r.jsx(Bn,{children:"Dtails du rendez-vous"})}),e&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg mb-1",children:e.contactName}),e.company&&r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(iy,{className:"h-3 w-3"}),e.company]})]}),r.jsxs("div",{className:"space-y-2",children:[e.contactEmail&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(da,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:e.contactEmail})]}),e.contactPhone&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vn,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:e.contactPhone})]}),e.appointmentDate&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xn,{className:"h-4 w-4 text-primary"}),r.jsx("span",{className:"text-sm font-medium",children:br(new Date(e.appointmentDate),"PPPPp",{locale:jr})})]})]}),e.notes&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Notes"}),r.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:e.notes})]}),e.businessCardImageUrl&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Carte de visite"}),r.jsx("img",{src:e.businessCardImageUrl,alt:"Business card",className:"w-full rounded-lg border"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-semibold",children:"Statut:"}),r.jsx(ve,{variant:o(e.status),children:l(e.status)})]})]})]})})]})}function Loe(){const[e,t]=_.useState("kaladjian@adsgroup-security.com"),[n,s]=_.useState("Hector2025!"),[i,a]=_.useState(!1),{toast:o}=At(),l=async()=>{a(!0);try{const c=await fetch("/api/auth/admin/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,new_password:n})}),d=await c.json();c.ok?o({title:" Mot de passe rinitialis !",description:`Vous pouvez maintenant vous connecter avec ${e}`}):o({title:"Erreur",description:d.detail||"Impossible de rinitialiser le mot de passe",variant:"destructive"})}catch{o({title:"Erreur rseau",description:"Impossible de contacter le serveur",variant:"destructive"})}finally{a(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:r.jsxs(U,{className:"w-full max-w-md",children:[r.jsxs(ne,{children:[r.jsx(se,{children:" Rinitialisation Admin"}),r.jsx(jt,{children:"Page temporaire pour rinitialiser votre mot de passe"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Email"}),r.jsx(ge,{type:"email",value:e,onChange:c=>t(c.target.value),"data-testid":"input-admin-email"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Nouveau mot de passe"}),r.jsx(ge,{type:"text",value:n,onChange:c=>s(c.target.value),"data-testid":"input-admin-password"})]}),r.jsx(re,{className:"w-full",onClick:l,disabled:i,"data-testid":"button-admin-reset",children:i?"Rinitialisation...":"Rinitialiser le mot de passe"}),r.jsx("div",{className:"text-sm text-muted-foreground text-center",children:" Cette page est temporaire et sera supprime"})]})]})})}function Doe(){const{user:e,isLoading:t,isAuthenticated:n,isUnauthenticated:s}=ya(),[,i]=es(),a=Eoe(),o=Toe();return r.jsx("div",{className:"min-h-screen bg-background p-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsx("h1",{className:"text-3xl font-bold",children:" Page de Diagnostic"}),r.jsxs("div",{className:"bg-card p-6 rounded-lg border space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"tat de l'authentification"}),r.jsxs("div",{className:"space-y-2 font-mono text-sm",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"isLoading:"})," ",t?" true":" false"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"isAuthenticated:"})," ",n?" true":" false"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"isUnauthenticated:"})," ",s?" true":" false"]})]})]}),r.jsxs("div",{className:"bg-card p-6 rounded-lg border space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Tokens localStorage"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{className:"font-mono text-sm break-all",children:[r.jsx("strong",{children:"Access Token:"}),r.jsx("br",{}),a||" Aucun token"]}),r.jsxs("p",{className:"font-mono text-sm break-all",children:[r.jsx("strong",{children:"Refresh Token:"}),r.jsx("br",{}),o||" Aucun token"]})]})]}),r.jsxs("div",{className:"bg-card p-6 rounded-lg border space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Donnes utilisateur"}),r.jsx("pre",{className:"bg-muted p-4 rounded text-sm overflow-auto",children:e?JSON.stringify(e,null,2):" Aucun utilisateur"})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(re,{onClick:()=>i("/login"),children:"Retour au Login"}),r.jsx(re,{onClick:()=>i("/"),children:"Aller  l'accueil"}),r.jsx(re,{onClick:()=>{localStorage.clear(),window.location.reload()},variant:"destructive",children:"Vider localStorage"})]})]})})}function $oe(){const[,e]=es(),[t,n]=_.useState(""),[s,i]=_.useState(""),[a,o]=_.useState(""),[l,c]=_.useState(""),[d,f]=_.useState(""),[h,p]=_.useState(!1),[v,j]=_.useState(!1),{toast:g}=At();_.useEffect(()=>{const N=new URLSearchParams(window.location.search).get("token");N?(n(N),j(!0)):j(!1)},[]);const x=async w=>{if(w.preventDefault(),s!==a){g({variant:"destructive",title:"Erreur",description:"Les mots de passe ne correspondent pas"});return}if(s.length<8){g({variant:"destructive",title:"Erreur",description:"Le mot de passe doit contenir au moins 8 caractres"});return}p(!0);try{await rt("POST","/api/auth/accept-invite",{token:t,password:s,firstName:l||void 0,lastName:d||void 0}),g({title:"Compte cr",description:"Ton compte a t cr avec succs. Connexion en cours..."}),setTimeout(()=>{window.location.href="/"},1500)}catch(N){console.error("Accept invite error:",N),g({variant:"destructive",title:"Erreur",description:N.message||"Impossible de crer le compte. Le lien a peut-tre expir."})}finally{p(!1)}};return v?r.jsx("div",{className:"min-h-screen flex flex-col bg-[#0A1628]",children:r.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:r.jsxs("div",{className:"w-full max-w-md mx-auto space-y-8",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx(e1,{height:45})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 md:p-10 space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2 pb-4",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx(Yt,{className:"h-16 w-16 text-green-600"})}),r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Bienvenue dans l'quipe !"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Cre ton compte pour accder  Hector"})]}),r.jsxs("form",{onSubmit:x,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"firstName",children:"Prnom"}),r.jsx(ge,{id:"firstName",value:l,onChange:w=>c(w.target.value),placeholder:"Jean",disabled:h,"data-testid":"input-first-name",className:"h-12 text-base"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"lastName",children:"Nom"}),r.jsx(ge,{id:"lastName",value:d,onChange:w=>f(w.target.value),placeholder:"Dupont",disabled:h,"data-testid":"input-last-name",className:"h-12 text-base"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"password",children:"Mot de passe *"}),r.jsx(ge,{id:"password",type:"password",value:s,onChange:w=>i(w.target.value),placeholder:"Au moins 8 caractres",required:!0,minLength:8,disabled:h,"data-testid":"input-password",className:"h-12 text-base"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe *"}),r.jsx(ge,{id:"confirmPassword",type:"password",value:a,onChange:w=>o(w.target.value),placeholder:"Rpte ton mot de passe",required:!0,minLength:8,disabled:h,"data-testid":"input-confirm-password",className:"h-12 text-base"})]}),r.jsx(re,{type:"submit",className:"w-full h-12 bg-[#1e3a5f] hover:bg-[#2d4a6f] text-white font-medium",disabled:h,"data-testid":"button-create-account",children:h?"Cration du compte...":"Crer mon compte"})]}),r.jsx("div",{className:"pt-4 border-t border-border text-center",children:r.jsx("p",{className:"text-xs text-muted-foreground",children:"En crant ton compte, tu rejoins Hector, l'assistant commercial IA d'ADS GROUP"})})]})]})})}):r.jsx("div",{className:"min-h-screen flex flex-col bg-[#0A1628]",children:r.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:r.jsxs("div",{className:"w-full max-w-md mx-auto space-y-8",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx(e1,{height:45})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 md:p-10 text-center space-y-4",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx(Br,{className:"h-16 w-16 text-destructive"})}),r.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Lien invalide"}),r.jsx("p",{className:"text-muted-foreground",children:"Ce lien d'invitation est invalide ou a expir."}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Contacte ton administrateur pour recevoir une nouvelle invitation."}),r.jsx(re,{onClick:()=>e("/login"),className:"w-full","data-testid":"button-back-to-login",children:"Retour  la connexion"})]})]})})})}const Qa=_.forwardRef(({className:e,...t},n)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:n,className:Oe("w-full caption-bottom text-sm",e),...t})}));Qa.displayName="Table";const Ya=_.forwardRef(({className:e,...t},n)=>r.jsx("thead",{ref:n,className:Oe("[&_tr]:border-b",e),...t}));Ya.displayName="TableHeader";const Xa=_.forwardRef(({className:e,...t},n)=>r.jsx("tbody",{ref:n,className:Oe("[&_tr:last-child]:border-0",e),...t}));Xa.displayName="TableBody";const Foe=_.forwardRef(({className:e,...t},n)=>r.jsx("tfoot",{ref:n,className:Oe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Foe.displayName="TableFooter";const _r=_.forwardRef(({className:e,...t},n)=>r.jsx("tr",{ref:n,className:Oe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));_r.displayName="TableRow";const kt=_.forwardRef(({className:e,...t},n)=>r.jsx("th",{ref:n,className:Oe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));kt.displayName="TableHead";const Ct=_.forwardRef(({className:e,...t},n)=>r.jsx("td",{ref:n,className:Oe("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Ct.displayName="TableCell";const zoe=_.forwardRef(({className:e,...t},n)=>r.jsx("caption",{ref:n,className:Oe("mt-4 text-sm text-muted-foreground",e),...t}));zoe.displayName="TableCaption";function t1(e,[t,n]){return Math.min(n,Math.max(t,e))}function Pj(e){const t=_.useRef({value:e,previous:e});return _.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Boe=[" ","Enter","ArrowUp","ArrowDown"],Voe=[" ","Enter"],Ag="Select",[Aj,Ej,qoe]=vg(Ag),[fh]=Nr(Ag,[qoe,uh]),Tj=uh(),[Uoe,fc]=fh(Ag),[Hoe,Woe]=fh(Ag),z8=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:d,name:f,autoComplete:h,disabled:p,required:v,form:j}=e,g=Tj(t),[x,w]=_.useState(null),[N,y]=_.useState(null),[A,P]=_.useState(!1),E=Eu(d),[C=!1,S]=Vs({prop:s,defaultProp:i,onChange:a}),[k,I]=Vs({prop:o,defaultProp:l,onChange:c}),R=_.useRef(null),D=x?j||!!x.closest("form"):!0,[z,V]=_.useState(new Set),K=Array.from(z).map(H=>H.props.value).join(";");return r.jsx(bP,{...g,children:r.jsxs(Uoe,{required:v,scope:t,trigger:x,onTriggerChange:w,valueNode:N,onValueNodeChange:y,valueNodeHasChildren:A,onValueNodeHasChildrenChange:P,contentId:ri(),value:k,onValueChange:I,open:C,onOpenChange:S,dir:E,triggerPointerDownPosRef:R,disabled:p,children:[r.jsx(Aj.Provider,{scope:t,children:r.jsx(Hoe,{scope:e.__scopeSelect,onNativeOptionAdd:_.useCallback(H=>{V(W=>new Set(W).add(H))},[]),onNativeOptionRemove:_.useCallback(H=>{V(W=>{const B=new Set(W);return B.delete(H),B})},[]),children:n})}),D?r.jsxs(fV,{"aria-hidden":!0,required:v,tabIndex:-1,name:f,autoComplete:h,value:k,onChange:H=>I(H.target.value),disabled:p,form:j,children:[k===void 0?r.jsx("option",{value:""}):null,Array.from(z)]},K):null]})})};z8.displayName=Ag;var B8="SelectTrigger",V8=_.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...i}=e,a=Tj(n),o=fc(B8,n),l=o.disabled||s,c=Rt(t,o.onTriggerChange),d=Ej(n),f=_.useRef("touch"),[h,p,v]=hV(g=>{const x=d().filter(y=>!y.disabled),w=x.find(y=>y.value===o.value),N=mV(x,g,w);N!==void 0&&o.onValueChange(N.value)}),j=g=>{l||(o.onOpenChange(!0),v()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return r.jsx(jP,{asChild:!0,...a,children:r.jsx(st.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":dV(o.value)?"":void 0,...i,ref:c,onClick:Ve(i.onClick,g=>{g.currentTarget.focus(),f.current!=="mouse"&&j(g)}),onPointerDown:Ve(i.onPointerDown,g=>{f.current=g.pointerType;const x=g.target;x.hasPointerCapture(g.pointerId)&&x.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(j(g),g.preventDefault())}),onKeyDown:Ve(i.onKeyDown,g=>{const x=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(x&&g.key===" ")&&Boe.includes(g.key)&&(j(),g.preventDefault())})})})});V8.displayName=B8;var q8="SelectValue",U8=_.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:i,children:a,placeholder:o="",...l}=e,c=fc(q8,n),{onValueNodeHasChildrenChange:d}=c,f=a!==void 0,h=Rt(t,c.onValueNodeChange);return hr(()=>{d(f)},[d,f]),r.jsx(st.span,{...l,ref:h,style:{pointerEvents:"none"},children:dV(c.value)?r.jsx(r.Fragment,{children:o}):a})});U8.displayName=q8;var Koe="SelectIcon",H8=_.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...i}=e;return r.jsx(st.span,{"aria-hidden":!0,...i,ref:t,children:s||""})});H8.displayName=Koe;var Goe="SelectPortal",W8=e=>r.jsx(yg,{asChild:!0,...e});W8.displayName=Goe;var gu="SelectContent",K8=_.forwardRef((e,t)=>{const n=fc(gu,e.__scopeSelect),[s,i]=_.useState();if(hr(()=>{i(new DocumentFragment)},[]),!n.open){const a=s;return a?uc.createPortal(r.jsx(G8,{scope:e.__scopeSelect,children:r.jsx(Aj.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),a):null}return r.jsx(Z8,{...e,ref:t})});K8.displayName=gu;var Hi=10,[G8,hc]=fh(gu),Zoe="SelectContentImpl",Qoe=uu("SelectContent.RemoveScroll"),Z8=_.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:v,sticky:j,hideWhenDetached:g,avoidCollisions:x,...w}=e,N=fc(gu,n),[y,A]=_.useState(null),[P,E]=_.useState(null),C=Rt(t,ze=>A(ze)),[S,k]=_.useState(null),[I,R]=_.useState(null),D=Ej(n),[z,V]=_.useState(!1),K=_.useRef(!1);_.useEffect(()=>{if(y)return EP(y)},[y]),AP();const H=_.useCallback(ze=>{const[$e,...me]=D().map(ue=>ue.ref.current),[Te]=me.slice(-1),je=document.activeElement;for(const ue of ze)if(ue===je||(ue==null||ue.scrollIntoView({block:"nearest"}),ue===$e&&P&&(P.scrollTop=0),ue===Te&&P&&(P.scrollTop=P.scrollHeight),ue==null||ue.focus(),document.activeElement!==je))return},[D,P]),W=_.useCallback(()=>H([S,y]),[H,S,y]);_.useEffect(()=>{z&&W()},[z,W]);const{onOpenChange:B,triggerPointerDownPosRef:$}=N;_.useEffect(()=>{if(y){let ze={x:0,y:0};const $e=Te=>{var je,ue;ze={x:Math.abs(Math.round(Te.pageX)-(((je=$.current)==null?void 0:je.x)??0)),y:Math.abs(Math.round(Te.pageY)-(((ue=$.current)==null?void 0:ue.y)??0))}},me=Te=>{ze.x<=10&&ze.y<=10?Te.preventDefault():y.contains(Te.target)||B(!1),document.removeEventListener("pointermove",$e),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",$e),document.addEventListener("pointerup",me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",$e),document.removeEventListener("pointerup",me,{capture:!0})}}},[y,B,$]),_.useEffect(()=>{const ze=()=>B(!1);return window.addEventListener("blur",ze),window.addEventListener("resize",ze),()=>{window.removeEventListener("blur",ze),window.removeEventListener("resize",ze)}},[B]);const[G,ee]=hV(ze=>{const $e=D().filter(je=>!je.disabled),me=$e.find(je=>je.ref.current===document.activeElement),Te=mV($e,ze,me);Te&&setTimeout(()=>Te.ref.current.focus())}),oe=_.useCallback((ze,$e,me)=>{const Te=!K.current&&!me;(N.value!==void 0&&N.value===$e||Te)&&(k(ze),Te&&(K.current=!0))},[N.value]),fe=_.useCallback(()=>y==null?void 0:y.focus(),[y]),Ee=_.useCallback((ze,$e,me)=>{const Te=!K.current&&!me;(N.value!==void 0&&N.value===$e||Te)&&R(ze)},[N.value]),J=s==="popper"?n1:Q8,Pe=J===n1?{side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:v,sticky:j,hideWhenDetached:g,avoidCollisions:x}:{};return r.jsx(G8,{scope:n,content:y,viewport:P,onViewportChange:E,itemRefCallback:oe,selectedItem:S,onItemLeave:fe,itemTextRefCallback:Ee,focusSelectedItem:W,selectedItemText:I,position:s,isPositioned:z,searchRef:G,children:r.jsx(_j,{as:Qoe,allowPinchZoom:!0,children:r.jsx(bj,{asChild:!0,trapped:N.open,onMountAutoFocus:ze=>{ze.preventDefault()},onUnmountAutoFocus:Ve(i,ze=>{var $e;($e=N.trigger)==null||$e.focus({preventScroll:!0}),ze.preventDefault()}),children:r.jsx(ah,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:ze=>ze.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:r.jsx(J,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:ze=>ze.preventDefault(),...w,...Pe,onPlaced:()=>V(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Ve(w.onKeyDown,ze=>{const $e=ze.ctrlKey||ze.altKey||ze.metaKey;if(ze.key==="Tab"&&ze.preventDefault(),!$e&&ze.key.length===1&&ee(ze.key),["ArrowUp","ArrowDown","Home","End"].includes(ze.key)){let Te=D().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(ze.key)&&(Te=Te.slice().reverse()),["ArrowUp","ArrowDown"].includes(ze.key)){const je=ze.target,ue=Te.indexOf(je);Te=Te.slice(ue+1)}setTimeout(()=>H(Te)),ze.preventDefault()}})})})})})})});Z8.displayName=Zoe;var Yoe="SelectItemAlignedPosition",Q8=_.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...i}=e,a=fc(gu,n),o=hc(gu,n),[l,c]=_.useState(null),[d,f]=_.useState(null),h=Rt(t,C=>f(C)),p=Ej(n),v=_.useRef(!1),j=_.useRef(!0),{viewport:g,selectedItem:x,selectedItemText:w,focusSelectedItem:N}=o,y=_.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&g&&x&&w){const C=a.trigger.getBoundingClientRect(),S=d.getBoundingClientRect(),k=a.valueNode.getBoundingClientRect(),I=w.getBoundingClientRect();if(a.dir!=="rtl"){const je=I.left-S.left,ue=k.left-je,ct=C.left-ue,Ge=C.width+ct,ut=Math.max(Ge,S.width),Xe=window.innerWidth-Hi,qe=t1(ue,[Hi,Math.max(Hi,Xe-ut)]);l.style.minWidth=Ge+"px",l.style.left=qe+"px"}else{const je=S.right-I.right,ue=window.innerWidth-k.right-je,ct=window.innerWidth-C.right-ue,Ge=C.width+ct,ut=Math.max(Ge,S.width),Xe=window.innerWidth-Hi,qe=t1(ue,[Hi,Math.max(Hi,Xe-ut)]);l.style.minWidth=Ge+"px",l.style.right=qe+"px"}const R=p(),D=window.innerHeight-Hi*2,z=g.scrollHeight,V=window.getComputedStyle(d),K=parseInt(V.borderTopWidth,10),H=parseInt(V.paddingTop,10),W=parseInt(V.borderBottomWidth,10),B=parseInt(V.paddingBottom,10),$=K+H+z+B+W,G=Math.min(x.offsetHeight*5,$),ee=window.getComputedStyle(g),oe=parseInt(ee.paddingTop,10),fe=parseInt(ee.paddingBottom,10),Ee=C.top+C.height/2-Hi,J=D-Ee,Pe=x.offsetHeight/2,ze=x.offsetTop+Pe,$e=K+H+ze,me=$-$e;if($e<=Ee){const je=R.length>0&&x===R[R.length-1].ref.current;l.style.bottom="0px";const ue=d.clientHeight-g.offsetTop-g.offsetHeight,ct=Math.max(J,Pe+(je?fe:0)+ue+W),Ge=$e+ct;l.style.height=Ge+"px"}else{const je=R.length>0&&x===R[0].ref.current;l.style.top="0px";const ct=Math.max(Ee,K+g.offsetTop+(je?oe:0)+Pe)+me;l.style.height=ct+"px",g.scrollTop=$e-Ee+g.offsetTop}l.style.margin=`${Hi}px 0`,l.style.minHeight=G+"px",l.style.maxHeight=D+"px",s==null||s(),requestAnimationFrame(()=>v.current=!0)}},[p,a.trigger,a.valueNode,l,d,g,x,w,a.dir,s]);hr(()=>y(),[y]);const[A,P]=_.useState();hr(()=>{d&&P(window.getComputedStyle(d).zIndex)},[d]);const E=_.useCallback(C=>{C&&j.current===!0&&(y(),N==null||N(),j.current=!1)},[y,N]);return r.jsx(Joe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:E,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:r.jsx(st.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Q8.displayName=Yoe;var Xoe="SelectPopperPosition",n1=_.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:i=Hi,...a}=e,o=Tj(n);return r.jsx(_P,{...o,...a,ref:t,align:s,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});n1.displayName=Xoe;var[Joe,YP]=fh(gu,{}),r1="SelectViewport",Y8=_.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...i}=e,a=hc(r1,n),o=YP(r1,n),l=Rt(t,a.onViewportChange),c=_.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Aj.Slot,{scope:n,children:r.jsx(st.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ve(i.onScroll,d=>{const f=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const v=Math.abs(c.current-f.scrollTop);if(v>0){const j=window.innerHeight-Hi*2,g=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),w=Math.max(g,x);if(w<j){const N=w+v,y=Math.min(j,N),A=N-y;h.style.height=y+"px",h.style.bottom==="0px"&&(f.scrollTop=A>0?A:0,h.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});Y8.displayName=r1;var X8="SelectGroup",[ele,tle]=fh(X8),J8=_.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=ri();return r.jsx(ele,{scope:n,id:i,children:r.jsx(st.div,{role:"group","aria-labelledby":i,...s,ref:t})})});J8.displayName=X8;var eV="SelectLabel",tV=_.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=tle(eV,n);return r.jsx(st.div,{id:i.id,...s,ref:t})});tV.displayName=eV;var by="SelectItem",[nle,nV]=fh(by),rV=_.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:i=!1,textValue:a,...o}=e,l=fc(by,n),c=hc(by,n),d=l.value===s,[f,h]=_.useState(a??""),[p,v]=_.useState(!1),j=Rt(t,N=>{var y;return(y=c.itemRefCallback)==null?void 0:y.call(c,N,s,i)}),g=ri(),x=_.useRef("touch"),w=()=>{i||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(nle,{scope:n,value:s,disabled:i,textId:g,isSelected:d,onItemTextChange:_.useCallback(N=>{h(y=>y||((N==null?void 0:N.textContent)??"").trim())},[]),children:r.jsx(Aj.ItemSlot,{scope:n,value:s,disabled:i,textValue:f,children:r.jsx(st.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:j,onFocus:Ve(o.onFocus,()=>v(!0)),onBlur:Ve(o.onBlur,()=>v(!1)),onClick:Ve(o.onClick,()=>{x.current!=="mouse"&&w()}),onPointerUp:Ve(o.onPointerUp,()=>{x.current==="mouse"&&w()}),onPointerDown:Ve(o.onPointerDown,N=>{x.current=N.pointerType}),onPointerMove:Ve(o.onPointerMove,N=>{var y;x.current=N.pointerType,i?(y=c.onItemLeave)==null||y.call(c):x.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ve(o.onPointerLeave,N=>{var y;N.currentTarget===document.activeElement&&((y=c.onItemLeave)==null||y.call(c))}),onKeyDown:Ve(o.onKeyDown,N=>{var A;((A=c.searchRef)==null?void 0:A.current)!==""&&N.key===" "||(Voe.includes(N.key)&&w(),N.key===" "&&N.preventDefault())})})})})});rV.displayName=by;var ym="SelectItemText",sV=_.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:i,...a}=e,o=fc(ym,n),l=hc(ym,n),c=nV(ym,n),d=Woe(ym,n),[f,h]=_.useState(null),p=Rt(t,w=>h(w),c.onItemTextChange,w=>{var N;return(N=l.itemTextRefCallback)==null?void 0:N.call(l,w,c.value,c.disabled)}),v=f==null?void 0:f.textContent,j=_.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:g,onNativeOptionRemove:x}=d;return hr(()=>(g(j),()=>x(j)),[g,x,j]),r.jsxs(r.Fragment,{children:[r.jsx(st.span,{id:c.textId,...a,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?uc.createPortal(a.children,o.valueNode):null]})});sV.displayName=ym;var iV="SelectItemIndicator",aV=_.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return nV(iV,n).isSelected?r.jsx(st.span,{"aria-hidden":!0,...s,ref:t}):null});aV.displayName=iV;var s1="SelectScrollUpButton",oV=_.forwardRef((e,t)=>{const n=hc(s1,e.__scopeSelect),s=YP(s1,e.__scopeSelect),[i,a]=_.useState(!1),o=Rt(t,s.onScrollButtonChange);return hr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?r.jsx(cV,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});oV.displayName=s1;var i1="SelectScrollDownButton",lV=_.forwardRef((e,t)=>{const n=hc(i1,e.__scopeSelect),s=YP(i1,e.__scopeSelect),[i,a]=_.useState(!1),o=Rt(t,s.onScrollButtonChange);return hr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<d;a(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?r.jsx(cV,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});lV.displayName=i1;var cV=_.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...i}=e,a=hc("SelectScrollButton",n),o=_.useRef(null),l=Ej(n),c=_.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return _.useEffect(()=>()=>c(),[c]),hr(()=>{var f;const d=l().find(h=>h.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),r.jsx(st.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Ve(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:Ve(i.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:Ve(i.onPointerLeave,()=>{c()})})}),rle="SelectSeparator",uV=_.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return r.jsx(st.div,{"aria-hidden":!0,...s,ref:t})});uV.displayName=rle;var a1="SelectArrow",sle=_.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=Tj(n),a=fc(a1,n),o=hc(a1,n);return a.open&&o.position==="popper"?r.jsx(wP,{...i,...s,ref:t}):null});sle.displayName=a1;function dV(e){return e===""||e===void 0}var fV=_.forwardRef((e,t)=>{const{value:n,...s}=e,i=_.useRef(null),a=Rt(t,i),o=Pj(n);return _.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&f){const h=new Event("change",{bubbles:!0});f.call(l,n),l.dispatchEvent(h)}},[o,n]),r.jsx(bg,{asChild:!0,children:r.jsx("select",{...s,ref:a,defaultValue:n})})});fV.displayName="BubbleSelect";function hV(e){const t=Un(e),n=_.useRef(""),s=_.useRef(0),i=_.useCallback(o=>{const l=n.current+o;t(l),function c(d){n.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=_.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,i,a]}function mV(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=ile(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function ile(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var ale=z8,pV=V8,ole=U8,lle=H8,cle=W8,gV=K8,ule=Y8,dle=J8,xV=tV,vV=rV,fle=sV,hle=aV,yV=oV,bV=lV,jV=uV;const gt=ale,Z_=dle,xt=ole,mt=_.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(pV,{ref:s,className:Oe("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx(lle,{asChild:!0,children:r.jsx(eP,{className:"h-4 w-4 opacity-50"})})]}));mt.displayName=pV.displayName;const _V=_.forwardRef(({className:e,...t},n)=>r.jsx(yV,{ref:n,className:Oe("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Jee,{className:"h-4 w-4"})}));_V.displayName=yV.displayName;const wV=_.forwardRef(({className:e,...t},n)=>r.jsx(bV,{ref:n,className:Oe("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(eP,{className:"h-4 w-4"})}));wV.displayName=bV.displayName;const pt=_.forwardRef(({className:e,children:t,position:n="popper",...s},i)=>r.jsx(cle,{children:r.jsxs(gV,{ref:i,className:Oe("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[r.jsx(_V,{}),r.jsx(ule,{className:Oe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(wV,{})]})}));pt.displayName=gV.displayName;const Pv=_.forwardRef(({className:e,...t},n)=>r.jsx(xV,{ref:n,className:Oe("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Pv.displayName=xV.displayName;const Y=_.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(vV,{ref:s,className:Oe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(hle,{children:r.jsx(Ql,{className:"h-4 w-4"})})}),r.jsx(fle,{children:t})]}));Y.displayName=vV.displayName;const mle=_.forwardRef(({className:e,...t},n)=>r.jsx(jV,{ref:n,className:Oe("-mx-1 my-1 h-px bg-muted",e),...t}));mle.displayName=jV.displayName;const Yh={claude_api:"Claude AI",brave_search:"Brave Search",pappers:"Pappers",google_search:"Google Search",linkedin:"LinkedIn",pagejaunes:"Pages Jaunes"};function ple(){const[e,t]=_.useState(!0),[n,s]=_.useState("all"),[i,a]=_.useState("all"),{toast:o}=At(),{data:l,isLoading:c,refetch:d}=Ke({queryKey:["/api/admin/api-security/stats"],refetchInterval:e?1e4:!1}),f=dt({mutationFn:async x=>rt("POST","/api/admin/api-security/reset-quotas",{apiSource:x}),onSuccess:(x,w)=>{o({title:"Quota rinitialis",description:w?`Le quota de ${Yh[w]||w} a t rinitialis`:"Tous les quotas ont t rinitialiss"}),et.invalidateQueries({queryKey:["/api/admin/api-security/stats"]}),d()},onError:x=>{o({variant:"destructive",title:"Erreur",description:x.message||"Impossible de rinitialiser le quota"})}}),h=x=>{const w={ok:r.jsxs(ve,{variant:"default",className:"bg-green-500 hover:bg-green-600",children:[r.jsx(ti,{className:"w-3 h-3 mr-1"}),"OK"]}),warning:r.jsxs(ve,{variant:"default",className:"bg-yellow-500 hover:bg-yellow-600",children:[r.jsx(Yr,{className:"w-3 h-3 mr-1"}),"Alerte"]}),critical:r.jsxs(ve,{variant:"default",className:"bg-orange-500 hover:bg-orange-600",children:[r.jsx(Yr,{className:"w-3 h-3 mr-1"}),"Critique"]}),blocked:r.jsxs(ve,{variant:"destructive",children:[r.jsx(os,{className:"w-3 h-3 mr-1"}),"Bloqu"]})};return w[x]||w.ok},p=x=>{const w={INFO:r.jsx(ve,{variant:"outline",children:"Info"}),WARNING:r.jsx(ve,{variant:"default",className:"bg-yellow-500 hover:bg-yellow-600",children:"Warning"}),CRITICAL:r.jsx(ve,{variant:"destructive",children:"Critique"})};return w[x]||w.INFO},v=(x,w)=>Math.round(x/w*100),j=x=>x>=95?"bg-red-500":x>=80?"bg-orange-500":x>=60?"bg-yellow-500":"bg-green-500",g=(l==null?void 0:l.incidents.filter(x=>{const w=n==="all"||x.severity===n,N=i==="all"||x.api_source===i;return w&&N}))||[];return c?r.jsx("div",{className:"container mx-auto py-8","data-testid":"loading-api-security",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Da,{className:"w-8 h-8 animate-spin"})})}):r.jsxs("div",{className:"container mx-auto py-8 space-y-6","data-testid":"page-api-security-dashboard",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Uo,{className:"w-8 h-8 text-primary"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"title-api-security",children:"Scurit & Surveillance API"}),r.jsx("p",{className:"text-muted-foreground",children:"Gestion des quotas et monitoring des incidents"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>t(!e),"data-testid":"button-toggle-auto-refresh",children:[r.jsx(Da,{className:`w-4 h-4 mr-2 ${e?"animate-spin":""}`}),e?"Auto-refresh ON":"Auto-refresh OFF"]}),r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>d(),"data-testid":"button-manual-refresh",children:[r.jsx(Da,{className:"w-4 h-4 mr-2"}),"Actualiser"]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:l==null?void 0:l.quotas.map(x=>{const w=v(x.compteur_jour,x.quota_jour),N=w>=x.seuil_alerte;return r.jsxs(U,{className:N?"border-orange-500":"","data-testid":`card-quota-${x.api_source}`,children:[r.jsxs(ne,{className:"pb-2",children:[r.jsxs(se,{className:"text-sm font-medium flex items-center justify-between",children:[Yh[x.api_source]||x.api_source,h(x.status)]}),r.jsxs(jt,{className:"text-xs",children:["Dernire reset: ",new Date(x.last_reset_jour).toLocaleTimeString()]})]}),r.jsxs(Z,{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[r.jsx("span",{children:"Jour"}),r.jsxs("span",{className:"font-semibold",children:[x.compteur_jour," / ",x.quota_jour]})]}),r.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full ${j(w)}`,style:{width:`${Math.min(w,100)}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[r.jsx("span",{children:"Heure"}),r.jsxs("span",{className:"font-semibold",children:[x.compteur_heure," / ",x.quota_heure]})]}),r.jsx("div",{className:"w-full bg-muted rounded-full h-1.5",children:r.jsx("div",{className:`h-1.5 rounded-full ${j(v(x.compteur_heure,x.quota_heure))}`,style:{width:`${Math.min(v(x.compteur_heure,x.quota_heure),100)}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[r.jsx("span",{children:"Minute"}),r.jsxs("span",{className:"font-semibold",children:[x.compteur_minute," / ",x.quota_minute]})]}),r.jsx("div",{className:"w-full bg-muted rounded-full h-1.5",children:r.jsx("div",{className:`h-1.5 rounded-full ${j(v(x.compteur_minute,x.quota_minute))}`,style:{width:`${Math.min(v(x.compteur_minute,x.quota_minute),100)}%`}})})]})]})]},x.id)})}),r.jsxs(U,{"data-testid":"card-quotas-table",children:[r.jsxs(ne,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(wn,{className:"w-5 h-5"}),"Dtails des quotas"]}),r.jsx(jt,{children:"Suivi en temps rel de la consommation API"})]}),r.jsx(Z,{children:r.jsxs(Qa,{children:[r.jsx(Ya,{children:r.jsxs(_r,{children:[r.jsx(kt,{children:"API Source"}),r.jsx(kt,{children:"Status"}),r.jsx(kt,{children:"Usage Jour"}),r.jsx(kt,{children:"Usage Heure"}),r.jsx(kt,{children:"Usage Minute"}),r.jsx(kt,{children:"Actions"})]})}),r.jsx(Xa,{children:l==null?void 0:l.quotas.map(x=>r.jsxs(_r,{"data-testid":`row-quota-${x.api_source}`,children:[r.jsx(Ct,{className:"font-medium",children:Yh[x.api_source]||x.api_source}),r.jsx(Ct,{children:h(x.status)}),r.jsx(Ct,{children:r.jsxs("span",{className:v(x.compteur_jour,x.quota_jour)>=80?"text-orange-500 font-semibold":"",children:[x.compteur_jour," / ",x.quota_jour," (",v(x.compteur_jour,x.quota_jour),"%)"]})}),r.jsxs(Ct,{children:[x.compteur_heure," / ",x.quota_heure]}),r.jsxs(Ct,{children:[x.compteur_minute," / ",x.quota_minute]}),r.jsx(Ct,{children:r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>f.mutate(x.api_source),disabled:f.isPending,"data-testid":`button-reset-${x.api_source}`,children:[r.jsx(Da,{className:`w-3 h-3 mr-1 ${f.isPending?"animate-spin":""}`}),"Rinitialiser"]})})]},x.id))})]})})]}),r.jsxs(U,{"data-testid":"card-incidents-log",children:[r.jsxs(ne,{children:[r.jsxs(se,{children:["Journal des incidents (",g.length,")"]}),r.jsx(jt,{children:"Historique des erreurs et incidents API"}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsxs(gt,{value:n,onValueChange:s,children:[r.jsx(mt,{className:"w-[180px]","data-testid":"filter-severity",children:r.jsx(xt,{placeholder:"Svrit"})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"all",children:"Toutes svrits"}),r.jsx(Y,{value:"INFO",children:"Info"}),r.jsx(Y,{value:"WARNING",children:"Warning"}),r.jsx(Y,{value:"CRITICAL",children:"Critique"})]})]}),r.jsxs(gt,{value:i,onValueChange:a,children:[r.jsx(mt,{className:"w-[180px]","data-testid":"filter-api-source",children:r.jsx(xt,{placeholder:"API Source"})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"all",children:"Toutes les APIs"}),l==null?void 0:l.quotas.map(x=>r.jsx(Y,{value:x.api_source,children:Yh[x.api_source]||x.api_source},x.api_source))]})]})]})]}),r.jsx(Z,{children:g.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground","data-testid":"text-no-incidents",children:[r.jsx(ti,{className:"w-12 h-12 mx-auto mb-2 text-green-500"}),r.jsx("p",{children:"Aucun incident dtect"})]}):r.jsxs(Qa,{children:[r.jsx(Ya,{children:r.jsxs(_r,{children:[r.jsx(kt,{children:"Timestamp"}),r.jsx(kt,{children:"API Source"}),r.jsx(kt,{children:"Type"}),r.jsx(kt,{children:"Code"}),r.jsx(kt,{children:"Message"}),r.jsx(kt,{children:"Svrit"})]})}),r.jsx(Xa,{children:g.map(x=>r.jsxs(_r,{"data-testid":`row-incident-${x.id}`,children:[r.jsx(Ct,{className:"text-xs",children:new Date(x.timestamp).toLocaleString()}),r.jsx(Ct,{children:Yh[x.api_source]||x.api_source}),r.jsx(Ct,{className:"text-xs",children:x.incident_type}),r.jsx(Ct,{children:x.error_code}),r.jsx(Ct,{className:"max-w-md truncate text-xs",children:x.error_message}),r.jsx(Ct,{children:p(x.severity)})]},x.id))})]})})]}),r.jsxs("div",{className:"text-xs text-muted-foreground text-center","data-testid":"text-last-update",children:["Dernire mise  jour: ",l!=null&&l.timestamp?new Date(l.timestamp).toLocaleString():"-"]})]})}function gle(e,t){return _.useReducer((n,s)=>t[n][s]??n,e)}var XP="ScrollArea",[NV]=Nr(XP),[xle,$i]=NV(XP),SV=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:i,scrollHideDelay:a=600,...o}=e,[l,c]=_.useState(null),[d,f]=_.useState(null),[h,p]=_.useState(null),[v,j]=_.useState(null),[g,x]=_.useState(null),[w,N]=_.useState(0),[y,A]=_.useState(0),[P,E]=_.useState(!1),[C,S]=_.useState(!1),k=Rt(t,R=>c(R)),I=Eu(i);return r.jsx(xle,{scope:n,type:s,dir:I,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:f,content:h,onContentChange:p,scrollbarX:v,onScrollbarXChange:j,scrollbarXEnabled:P,onScrollbarXEnabledChange:E,scrollbarY:g,onScrollbarYChange:x,scrollbarYEnabled:C,onScrollbarYEnabledChange:S,onCornerWidthChange:N,onCornerHeightChange:A,children:r.jsx(st.div,{dir:I,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});SV.displayName=XP;var CV="ScrollAreaViewport",PV=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:i,...a}=e,o=$i(CV,n),l=_.useRef(null),c=Rt(t,l,o.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),r.jsx(st.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:r.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});PV.displayName=CV;var so="ScrollAreaScrollbar",JP=_.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=$i(so,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=e.orientation==="horizontal";return _.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?r.jsx(vle,{...s,ref:t,forceMount:n}):i.type==="scroll"?r.jsx(yle,{...s,ref:t,forceMount:n}):i.type==="auto"?r.jsx(AV,{...s,ref:t,forceMount:n}):i.type==="always"?r.jsx(e2,{...s,ref:t}):null});JP.displayName=so;var vle=_.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=$i(so,e.__scopeScrollArea),[a,o]=_.useState(!1);return _.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},f=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",f)}}},[i.scrollArea,i.scrollHideDelay]),r.jsx(Vr,{present:n||a,children:r.jsx(AV,{"data-state":a?"visible":"hidden",...s,ref:t})})}),yle=_.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=$i(so,e.__scopeScrollArea),a=e.orientation==="horizontal",o=Oj(()=>c("SCROLL_END"),100),[l,c]=gle("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return _.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,i.scrollHideDelay,c]),_.useEffect(()=>{const d=i.viewport,f=a?"scrollLeft":"scrollTop";if(d){let h=d[f];const p=()=>{const v=d[f];h!==v&&(c("SCROLL"),o()),h=v};return d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[i.viewport,a,c,o]),r.jsx(Vr,{present:n||l!=="hidden",children:r.jsx(e2,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:Ve(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ve(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),AV=_.forwardRef((e,t)=>{const n=$i(so,e.__scopeScrollArea),{forceMount:s,...i}=e,[a,o]=_.useState(!1),l=e.orientation==="horizontal",c=Oj(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:f)}},10);return Nf(n.viewport,c),Nf(n.content,c),r.jsx(Vr,{present:s||a,children:r.jsx(e2,{"data-state":a?"visible":"hidden",...i,ref:t})})}),e2=_.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,i=$i(so,e.__scopeScrollArea),a=_.useRef(null),o=_.useRef(0),[l,c]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=MV(l.viewport,l.content),f={...s,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function h(p,v){return Sle(p,o.current,l,v)}return n==="horizontal"?r.jsx(ble,{...f,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const p=i.viewport.scrollLeft,v=lO(p,l,i.dir);a.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=h(p,i.dir))}}):n==="vertical"?r.jsx(jle,{...f,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const p=i.viewport.scrollTop,v=lO(p,l);a.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=h(p))}}):null}),ble=_.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...i}=e,a=$i(so,e.__scopeScrollArea),[o,l]=_.useState(),c=_.useRef(null),d=Rt(t,c,a.onScrollbarXChange);return _.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(TV,{"data-orientation":"horizontal",...i,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":kj(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(a.viewport){const p=a.viewport.scrollLeft+f.deltaX;e.onWheelScroll(p),RV(p,h)&&f.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:_y(o.paddingLeft),paddingEnd:_y(o.paddingRight)}})}})}),jle=_.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...i}=e,a=$i(so,e.__scopeScrollArea),[o,l]=_.useState(),c=_.useRef(null),d=Rt(t,c,a.onScrollbarYChange);return _.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(TV,{"data-orientation":"vertical",...i,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":kj(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(a.viewport){const p=a.viewport.scrollTop+f.deltaY;e.onWheelScroll(p),RV(p,h)&&f.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:_y(o.paddingTop),paddingEnd:_y(o.paddingBottom)}})}})}),[_le,EV]=NV(so),TV=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:f,onResize:h,...p}=e,v=$i(so,n),[j,g]=_.useState(null),x=Rt(t,k=>g(k)),w=_.useRef(null),N=_.useRef(""),y=v.viewport,A=s.content-s.viewport,P=Un(f),E=Un(c),C=Oj(h,10);function S(k){if(w.current){const I=k.clientX-w.current.left,R=k.clientY-w.current.top;d({x:I,y:R})}}return _.useEffect(()=>{const k=I=>{const R=I.target;(j==null?void 0:j.contains(R))&&P(I,A)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[y,j,A,P]),_.useEffect(E,[s,E]),Nf(j,C),Nf(v.content,C),r.jsx(_le,{scope:n,scrollbar:j,hasThumb:i,onThumbChange:Un(a),onThumbPointerUp:Un(o),onThumbPositionChange:E,onThumbPointerDown:Un(l),children:r.jsx(st.div,{...p,ref:x,style:{position:"absolute",...p.style},onPointerDown:Ve(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),w.current=j.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),S(k))}),onPointerMove:Ve(e.onPointerMove,S),onPointerUp:Ve(e.onPointerUp,k=>{const I=k.target;I.hasPointerCapture(k.pointerId)&&I.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=N.current,v.viewport&&(v.viewport.style.scrollBehavior=""),w.current=null})})})}),jy="ScrollAreaThumb",kV=_.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=EV(jy,e.__scopeScrollArea);return r.jsx(Vr,{present:n||i.hasThumb,children:r.jsx(wle,{ref:t,...s})})}),wle=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...i}=e,a=$i(jy,n),o=EV(jy,n),{onThumbPositionChange:l}=o,c=Rt(t,h=>o.onThumbChange(h)),d=_.useRef(void 0),f=Oj(()=>{d.current&&(d.current(),d.current=void 0)},100);return _.useEffect(()=>{const h=a.viewport;if(h){const p=()=>{if(f(),!d.current){const v=Cle(h,l);d.current=v,l()}};return l(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[a.viewport,f,l]),r.jsx(st.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Ve(e.onPointerDownCapture,h=>{const v=h.target.getBoundingClientRect(),j=h.clientX-v.left,g=h.clientY-v.top;o.onThumbPointerDown({x:j,y:g})}),onPointerUp:Ve(e.onPointerUp,o.onThumbPointerUp)})});kV.displayName=jy;var t2="ScrollAreaCorner",OV=_.forwardRef((e,t)=>{const n=$i(t2,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?r.jsx(Nle,{...e,ref:t}):null});OV.displayName=t2;var Nle=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,i=$i(t2,n),[a,o]=_.useState(0),[l,c]=_.useState(0),d=!!(a&&l);return Nf(i.scrollbarX,()=>{var h;const f=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(f),c(f)}),Nf(i.scrollbarY,()=>{var h;const f=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),d?r.jsx(st.div,{...s,ref:t,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function _y(e){return e?parseInt(e,10):0}function MV(e,t){const n=e/t;return isNaN(n)?0:n}function kj(e){const t=MV(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function Sle(e,t,n,s="ltr"){const i=kj(n),a=i/2,o=t||a,l=i-o,c=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,h=s==="ltr"?[0,f]:[f*-1,0];return IV([c,d],h)(e)}function lO(e,t,n="ltr"){const s=kj(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,o=t.content-t.viewport,l=a-s,c=n==="ltr"?[0,o]:[o*-1,0],d=t1(e,c);return IV([0,o],[0,l])(d)}function IV(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function RV(e,t){return e>0&&e<t}var Cle=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&t(),n=a,s=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(s)};function Oj(e,t){const n=Un(e),s=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(s.current),[]),_.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function Nf(e,t){const n=Un(t);hr(()=>{let s=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(s),i.unobserve(e)}}},[e,n])}var LV=SV,Ple=PV,Ale=OV;const Ul=_.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(LV,{ref:s,className:Oe("relative overflow-hidden",e),...n,children:[r.jsx(Ple,{className:"h-full w-full rounded-[inherit]",children:t}),r.jsx(DV,{}),r.jsx(Ale,{})]}));Ul.displayName=LV.displayName;const DV=_.forwardRef(({className:e,orientation:t="vertical",...n},s)=>r.jsx(JP,{ref:s,orientation:t,className:Oe("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:r.jsx(kV,{className:"relative flex-1 rounded-full bg-border"})}));DV.displayName=JP.displayName;var Ele="Separator",cO="horizontal",Tle=["horizontal","vertical"],$V=_.forwardRef((e,t)=>{const{decorative:n,orientation:s=cO,...i}=e,a=kle(s)?s:cO,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return r.jsx(st.div,{"data-orientation":a,...l,...i,ref:t})});$V.displayName=Ele;function kle(e){return Tle.includes(e)}var FV=$V;const Tr=_.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},i)=>r.jsx(FV,{ref:i,decorative:n,orientation:t,className:Oe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));Tr.displayName=FV.displayName;function Ole(){const{toast:e}=At(),[t,n]=_.useState(null),[s,i]=_.useState("all"),{data:a,isLoading:o}=Ke({queryKey:["/api/learning/stats"]}),l=s==="all"?"":`?validated=${s==="validated"?"true":"false"}`,{data:c,isLoading:d}=Ke({queryKey:["/api/learning/insights",s],queryFn:()=>fetch(`/api/learning/insights${l}`).then(x=>x.json())}),{data:f,isLoading:h}=Ke({queryKey:["/api/learning/prompts"]}),p=dt({mutationFn:async()=>await rt("POST","/api/learning/run-async",{}),onSuccess:()=>{e({title:"Learning Loop lanc",description:"L'analyse IA a t lance en arrire-plan. Les rsultats seront disponibles dans quelques minutes."}),et.invalidateQueries({queryKey:["/api/learning/stats"]}),et.invalidateQueries({queryKey:["/api/learning/insights"]})},onError:x=>{e({title:"Erreur",description:x.message||"Impossible de lancer le learning loop",variant:"destructive"})}}),v=dt({mutationFn:async({id:x,validated:w})=>await rt("POST",`/api/learning/insights/${x}/validate`,{validated:w}),onSuccess:()=>{e({title:"Insight mis  jour",description:"Le statut de validation a t modifi avec succs."}),et.invalidateQueries({queryKey:["/api/learning/insights"]}),et.invalidateQueries({queryKey:["/api/learning/stats"]})},onError:x=>{e({title:"Erreur",description:x.message||"Impossible de mettre  jour l'insight",variant:"destructive"})}}),j=(x,w)=>{v.mutate({id:x,validated:w})},g=c==null?void 0:c.find(x=>x.id===t);return r.jsx("div",{className:"h-screen overflow-hidden bg-background",children:r.jsxs("div",{className:"flex h-full flex-col",children:[r.jsxs("header",{className:"flex items-center justify-between border-b px-6 py-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Qee,{className:"h-6 w-6 text-primary"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold","data-testid":"text-page-title",children:"Learning Loop IA"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Amlioration continue par analyse des performances"})]})]}),r.jsx(re,{onClick:()=>p.mutate(),disabled:p.isPending,"data-testid":"button-run-learning",children:p.isPending?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyse en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(az,{className:"mr-2 h-4 w-4"}),"Lancer Learning Loop"]})})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 p-6",children:[r.jsxs(U,{"data-testid":"card-insights-total",children:[r.jsx(ne,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:"Total Insights"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:o?"...":(a==null?void 0:a.insights.total)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"patterns dtects"})]})]}),r.jsxs(U,{"data-testid":"card-insights-validated",children:[r.jsx(ne,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:"Insights Valids"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:o?"...":(a==null?void 0:a.insights.validated)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:a!=null&&a.insights.total?`${Math.round(a.insights.validated/a.insights.total*100)}% du total`:"0%"})]})]}),r.jsxs(U,{"data-testid":"card-insights-applied",children:[r.jsx(ne,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:"Insights Appliqus"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o?"...":(a==null?void 0:a.insights.applied)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"utiliss dans prompts"})]})]}),r.jsxs(U,{"data-testid":"card-prompts-active",children:[r.jsx(ne,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:"Versions Prompts"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:o?"...":(a==null?void 0:a.prompts.active)||0}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["actives sur ",(a==null?void 0:a.prompts.total)||0]})]})]})]}),r.jsx("div",{className:"flex-1 overflow-hidden px-6 pb-6",children:r.jsxs(fi,{defaultValue:"insights",className:"h-full flex flex-col",children:[r.jsxs(qs,{"data-testid":"tabs-learning",children:[r.jsxs(Ht,{value:"insights","data-testid":"tab-insights",children:[r.jsx(yf,{className:"mr-2 h-4 w-4"}),"Insights"]}),r.jsxs(Ht,{value:"prompts","data-testid":"tab-prompts",children:[r.jsx(hu,{className:"mr-2 h-4 w-4"}),"Versions Prompts"]}),r.jsxs(Ht,{value:"recommendations","data-testid":"tab-recommendations",children:[r.jsx(ap,{className:"mr-2 h-4 w-4"}),"Recommandations"]})]}),r.jsx(Zt,{value:"insights",className:"flex-1 overflow-hidden",children:r.jsxs("div",{className:"flex h-full gap-4",children:[r.jsxs(U,{className:"flex-1 overflow-hidden",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(se,{children:"Patterns Dtects"}),r.jsx(jt,{children:"Structures de messages performantes"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(re,{variant:s==="all"?"default":"outline",size:"sm",onClick:()=>i("all"),"data-testid":"filter-all",children:"Tous"}),r.jsx(re,{variant:s==="validated"?"default":"outline",size:"sm",onClick:()=>i("validated"),"data-testid":"filter-validated",children:"Valids"}),r.jsx(re,{variant:s==="pending"?"default":"outline",size:"sm",onClick:()=>i("pending"),"data-testid":"filter-pending",children:"En attente"})]})]}),r.jsx(Z,{className:"h-[calc(100%-80px)] p-0",children:r.jsx(Ul,{className:"h-full",children:d?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(On,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):c&&c.length>0?r.jsx("div",{className:"space-y-2 p-4",children:c.map(x=>r.jsx("div",{className:`cursor-pointer rounded-lg border p-3 transition-colors hover-elevate ${t===x.id?"border-primary bg-accent":""}`,onClick:()=>n(x.id),"data-testid":`insight-card-${x.id}`,children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-semibold",children:x.pattern}),x.validated==="true"?r.jsxs(ve,{variant:"default","data-testid":"badge-validated",children:[r.jsx(Yt,{className:"mr-1 h-3 w-3"}),"Valid"]}):r.jsx(ve,{variant:"secondary","data-testid":"badge-pending",children:"En attente"}),x.appliedToPrompts==="true"&&r.jsx(ve,{variant:"outline","data-testid":"badge-applied",children:"Appliqu"})]}),r.jsx("p",{className:"mt-1 text-sm text-muted-foreground line-clamp-2",children:x.description}),r.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:[r.jsxs("span",{children:[r.jsx(wn,{className:"inline h-3 w-3 mr-1"}),(x.successRate*100).toFixed(1),"% succs"]}),r.jsxs("span",{children:[x.sampleSize," messages"]}),x.canal&&r.jsx(ve,{variant:"outline",className:"text-xs",children:x.canal})]})]})})},x.id))}):r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[r.jsx(yf,{className:"h-12 w-12 text-muted-foreground/50"}),r.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"Aucun insight dtect"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Lancez le learning loop pour analyser les performances"})]})})})]}),g&&r.jsxs(U,{className:"w-96 overflow-hidden",children:[r.jsx(ne,{children:r.jsx(se,{children:"Dtails de l'Insight"})}),r.jsx(Z,{children:r.jsx(Ul,{className:"h-[calc(100vh-300px)]",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Pattern"}),r.jsx("p",{className:"mt-1 font-semibold","data-testid":"detail-pattern",children:g.pattern})]}),r.jsx(Tr,{}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),r.jsx("p",{className:"mt-1 text-sm","data-testid":"detail-description",children:g.description})]}),r.jsx(Tr,{}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Taux de succs"}),r.jsxs("p",{className:"mt-1 text-2xl font-bold text-green-600","data-testid":"detail-success-rate",children:[(g.successRate*100).toFixed(1),"%"]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"chantillon"}),r.jsx("p",{className:"mt-1 text-2xl font-bold","data-testid":"detail-sample-size",children:g.sampleSize})]})]}),r.jsx(Tr,{}),(g.sector||g.discProfile||g.canal)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Contexte"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.sector&&r.jsx(ve,{variant:"secondary",children:g.sector}),g.discProfile&&r.jsxs(ve,{variant:"secondary",children:["DISC: ",g.discProfile]}),g.canal&&r.jsx(ve,{variant:"secondary",children:g.canal})]})]}),r.jsx(Tr,{})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Actions"}),r.jsx("div",{className:"flex gap-2",children:g.validated==="true"?r.jsxs(re,{variant:"outline",className:"flex-1",onClick:()=>j(g.id,!1),disabled:v.isPending,"data-testid":"button-invalidate",children:[r.jsx(os,{className:"mr-2 h-4 w-4"}),"Invalider"]}):r.jsxs(re,{variant:"default",className:"flex-1",onClick:()=>j(g.id,!0),disabled:v.isPending,"data-testid":"button-validate",children:[r.jsx(Yt,{className:"mr-2 h-4 w-4"}),"Valider"]})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Mtadonnes"}),r.jsxs("div",{className:"mt-2 space-y-1 text-xs text-muted-foreground",children:[r.jsxs("p",{children:["Dtect le : ",new Date(g.detectedAt).toLocaleDateString("fr-FR")]}),g.validatedAt&&r.jsxs("p",{children:["Valid le : ",new Date(g.validatedAt).toLocaleDateString("fr-FR")]}),r.jsxs("p",{children:["ID : ",g.id.slice(0,8),"..."]})]})]})]})})})]})]})}),r.jsx(Zt,{value:"prompts",className:"flex-1 overflow-hidden",children:r.jsxs(U,{className:"h-full overflow-hidden",children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Historique des Versions de Prompts"}),r.jsx(jt,{children:"volution des prompts IA base sur les insights"})]}),r.jsx(Z,{className:"h-[calc(100%-80px)] p-0",children:r.jsx(Ul,{className:"h-full",children:h?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(On,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):f&&f.length>0?r.jsx("div",{className:"space-y-3 p-4",children:f.map(x=>r.jsx("div",{className:"rounded-lg border p-4","data-testid":`prompt-card-${x.id}`,children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold",children:[x.promptType," v",x.version]}),x.isActive==="true"&&r.jsx(ve,{variant:"default","data-testid":"badge-active-prompt",children:"Actif"}),x.performanceScore!==null&&r.jsxs(ve,{variant:"outline",children:["Score: ",x.performanceScore.toFixed(2)]})]}),r.jsxs("p",{className:"mt-2 text-sm text-muted-foreground line-clamp-3",children:[x.content.substring(0,200),"..."]}),r.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Cr le : ",new Date(x.createdAt).toLocaleDateString("fr-FR")]})]})})},x.id))}):r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[r.jsx(hu,{className:"h-12 w-12 text-muted-foreground/50"}),r.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"Aucune version de prompt"})]})})})]})}),r.jsx(Zt,{value:"recommendations",className:"flex-1 overflow-hidden",children:r.jsxs(U,{className:"h-full overflow-hidden",children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Recommandations IA"}),r.jsx(jt,{children:"Suggestions d'amliorations bases sur les insights valids"})]}),r.jsx(Z,{className:"h-[calc(100%-80px)]",children:r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[r.jsx(ap,{className:"h-16 w-16 text-muted-foreground/50"}),r.jsx("p",{className:"mt-4 text-lg font-medium",children:"Fonctionnalit en dveloppement"}),r.jsx("p",{className:"mt-2 text-sm text-muted-foreground max-w-md",children:"Les recommandations automatiques seront disponibles aprs validation de plusieurs insights."})]})})]})})]})})]})})}function sr({className:e,...t}){return r.jsx("div",{className:Oe("animate-pulse rounded-md bg-muted",e),...t})}const Mle="sidebar_state",Ile=60*60*24*7,Rle="16rem",Lle="18rem",Dle="3rem",$le="b",zV=_.createContext(null);function n2(){const e=_.useContext(zV);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}function Fle({defaultOpen:e=!0,open:t,onOpenChange:n,className:s,style:i,children:a,...o}){const l=QP(),[c,d]=_.useState(!1),[f,h]=_.useState(e),p=t??f,v=_.useCallback(w=>{const N=typeof w=="function"?w(p):w;n?n(N):h(N),document.cookie=`${Mle}=${N}; path=/; max-age=${Ile}`},[n,p]),j=_.useCallback(()=>l?d(w=>!w):v(w=>!w),[l,v,d]);_.useEffect(()=>{const w=N=>{N.key===$le&&(N.metaKey||N.ctrlKey)&&(N.preventDefault(),j())};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[j]);const g=p?"expanded":"collapsed",x=_.useMemo(()=>({state:g,open:p,setOpen:v,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:j}),[g,p,v,l,c,d,j]);return r.jsx(zV.Provider,{value:x,children:r.jsx(sB,{delayDuration:0,children:r.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":Rle,"--sidebar-width-icon":Dle,...i},className:Oe("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",s),...o,children:a})})})}function zle({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:s,children:i,...a}){const{isMobile:o,state:l,openMobile:c,setOpenMobile:d}=n2();return n==="none"?r.jsx("div",{"data-slot":"sidebar",className:Oe("bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col",s),...a,children:i}):o?r.jsx(QB,{open:c,onOpenChange:d,...a,children:r.jsxs(LP,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden",style:{"--sidebar-width":Lle},side:e,children:[r.jsxs(DP,{className:"sr-only",children:[r.jsx($P,{children:"Sidebar"}),r.jsx(XB,{children:"Displays the mobile sidebar."})]}),r.jsx("div",{className:"flex h-full w-full flex-col",children:i})]})}):r.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":l==="collapsed"?n:"","data-variant":t,"data-side":e,"data-slot":"sidebar",children:[r.jsx("div",{"data-slot":"sidebar-gap",className:Oe("relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]")}),r.jsx("div",{"data-slot":"sidebar-container",className:Oe("fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l",s),...a,children:r.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:i})})]})}function Ble({className:e,onClick:t,...n}){const{toggleSidebar:s}=n2();return r.jsxs(re,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:Oe("h-7 w-7",e),onClick:i=>{t==null||t(i),s()},...n,children:[r.jsx(hte,{}),r.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function Vle({className:e,...t}){return r.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:Oe("flex flex-col gap-2 p-2",e),...t})}function qle({className:e,...t}){return r.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:Oe("flex flex-col gap-2 p-2",e),...t})}function Ule({className:e,...t}){return r.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:Oe("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t})}function zx({className:e,...t}){return r.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:Oe("relative flex w-full min-w-0 flex-col p-2",e),...t})}function Bx({className:e,asChild:t=!1,...n}){const s=t?oj:"div";return r.jsx(s,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:Oe("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})}function Vx({className:e,...t}){return r.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:Oe("w-full text-sm",e),...t})}function Xh({className:e,...t}){return r.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:Oe("flex w-full min-w-0 flex-col gap-1",e),...t})}function nd({className:e,...t}){return r.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:Oe("group/menu-item relative",e),...t})}const Hle=Au("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Jh({asChild:e=!1,isActive:t=!1,variant:n="default",size:s="default",tooltip:i,className:a,...o}){const l=e?oj:"button",{isMobile:c,state:d}=n2(),f=r.jsx(l,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":s,"data-active":t,className:Oe(Hle({variant:n,size:s}),a),...o});return i?(typeof i=="string"&&(i={children:i}),r.jsxs(Are,{children:[r.jsx(Ere,{asChild:!0,children:f}),r.jsx(iB,{side:"right",align:"center",hidden:d!=="collapsed"||c,...i})]})):f}const Wle=[{title:"Dashboard",url:"/admin/dashboard",icon:fz},{title:"Analytics Commercial",url:"/admin/analytics",icon:wn},{title:"Organisations",url:"/admin/organizations",icon:Ir},{title:"quipes",url:"/admin/teams",icon:Nn},{title:"Utilisateurs",url:"/admin/users",icon:Nn},{title:"Concurrents",url:"/admin/concurrents",icon:Uo},{title:"Audit Logs",url:"/admin/audit-logs",icon:du}],Kle=[{title:"Configurations",url:"/admin/phone-config-dynamic",icon:jg},{title:"Analytics",url:"/phoning/analytics",icon:Zl}],Gle=[{title:"Configuration GPS",url:"/admin/gps",icon:jg},{title:"Tracking Terrain",url:"/gps/track",icon:Jr}],Zle=[{title:"Campagnes",url:"/prospection/campagnes",icon:fn},{title:"Analytics",url:"/prospection/analytics",icon:wn}];function Qle(){const[e,t]=es(),{user:n}=ya(),s=async()=>{try{const o=await fetch("/api/logout",{method:"POST",credentials:"include"});o.ok?(t("/login"),setTimeout(()=>window.location.reload(),100)):(console.error("Logout failed:",await o.text()),t("/login"))}catch(o){console.error("Logout error:",o),t("/login")}},i=()=>n!=null&&n.email?n.email.substring(0,2).toUpperCase():"AD",a=(n==null?void 0:n.email)==="kaladjian@adsgroup-security.com";return r.jsxs(zle,{children:[r.jsx(Vle,{children:r.jsxs("div",{className:"flex items-center gap-2 px-4 py-2",children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-indigo-600 text-white font-bold",children:"H"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-semibold",children:"Hector Admin"}),r.jsx("span",{className:"text-xs text-muted-foreground",children:"ADS GROUP"})]})]})}),r.jsxs(Ule,{children:[r.jsxs(zx,{children:[r.jsx(Bx,{className:"font-bold text-orange-600",children:"Tableau de Bord"}),r.jsx(Vx,{children:r.jsx(Xh,{children:Wle.map(o=>r.jsx(nd,{children:r.jsx(Jh,{asChild:!0,isActive:e===o.url,"data-testid":`link-sidebar-${o.title.toLowerCase().replace(/\s+/g,"-")}`,children:r.jsxs("a",{href:o.url,children:[r.jsx(o.icon,{className:"w-4 h-4"}),r.jsx("span",{children:o.title})]})})},o.title))})})]}),r.jsxs(zx,{children:[r.jsxs(Bx,{className:"flex items-center gap-2 font-bold text-orange-600",children:[r.jsx(Vn,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"Module Phoning"})]}),r.jsx(Vx,{children:r.jsx(Xh,{children:Kle.map(o=>r.jsx(nd,{children:r.jsx(Jh,{asChild:!0,isActive:e===o.url,"data-testid":`link-sidebar-phoning-${o.title.toLowerCase().replace(/\s+/g,"-")}`,children:r.jsxs("a",{href:o.url,children:[r.jsx(o.icon,{className:"w-4 h-4"}),r.jsx("span",{children:o.title})]})})},o.title))})})]}),r.jsxs(zx,{children:[r.jsxs(Bx,{className:"flex items-center gap-2 font-bold text-orange-600",children:[r.jsx(tte,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"Gaming GPS"})]}),r.jsx(Vx,{children:r.jsxs(Xh,{children:[Gle.map(o=>r.jsx(nd,{children:r.jsx(Jh,{asChild:!0,isActive:e===o.url,"data-testid":`link-sidebar-gps-${o.title.toLowerCase().replace(/\s+/g,"-")}`,children:r.jsxs("a",{href:o.url,children:[r.jsx(o.icon,{className:"w-4 h-4"}),r.jsx("span",{children:o.title})]})})},o.title)),a&&r.jsx(nd,{children:r.jsx(Jh,{asChild:!0,isActive:e==="/admin/supervision-equipe","data-testid":"link-sidebar-gps-supervision-quipe",children:r.jsxs("a",{href:"/admin/supervision-equipe",children:[r.jsx(oz,{className:"w-4 h-4"}),r.jsx("span",{children:"Supervision quipe"})]})})})]})})]}),r.jsxs(zx,{children:[r.jsxs(Bx,{className:"flex items-center gap-2 font-bold text-orange-600",children:[r.jsx(fn,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"Prospection LinkedIn"})]}),r.jsx(Vx,{children:r.jsx(Xh,{children:Zle.map(o=>r.jsx(nd,{children:r.jsx(Jh,{asChild:!0,isActive:e===o.url,"data-testid":`link-sidebar-prospection-${o.title.toLowerCase().replace(/\s+/g,"-")}`,children:r.jsxs("a",{href:o.url,children:[r.jsx(o.icon,{className:"w-4 h-4"}),r.jsx("span",{children:o.title})]})})},o.title))})})]})]}),r.jsx(qle,{children:r.jsx(Xh,{children:r.jsx(nd,{children:r.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[r.jsx(ma,{className:"w-8 h-8",children:r.jsx(pa,{className:"bg-indigo-100 text-indigo-700 text-xs font-semibold",children:i()})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:(n==null?void 0:n.email)||"Administrateur"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin"})]}),r.jsx("button",{onClick:s,className:"p-1.5 hover:bg-accent rounded-md transition-colors",title:"Dconnexion","data-testid":"button-logout",children:r.jsx(hz,{className:"w-4 h-4 text-muted-foreground"})})]})})})})]})}const Q_="/api",uO={async getAnalytics(){var c,d,f,h;const[e,t]=await Promise.all([fetch(`${Q_}/analytics/kpis`,{credentials:"include"}),fetch(`${Q_}/audit/logs?limit=100`,{credentials:"include"})]);if(!e.ok)throw new Error("Failed to fetch analytics");const n=await e.json(),s=t.ok?await t.json():{logs:[]},i=new Date;i.setDate(i.getDate()-7);const a=new Map;let o=0;(s.logs||[]).forEach(p=>{if(!p.createdAt)return;const v=new Date(p.createdAt),j=v.toDateString();v>=i&&o++,a.has(j)||a.set(j,{actions:0,userIds:new Set});const g=a.get(j);g.actions++,p.userId&&g.userIds.add(p.userId)});const l=[];for(let p=29;p>=0;p--){const v=new Date;v.setDate(v.getDate()-p);const j=v.toDateString(),g=v.toLocaleDateString("fr-FR",{month:"short",day:"numeric"}),x=a.get(j)||{actions:0,userIds:new Set};l.push({date:g,actions:x.actions,users:x.userIds.size})}return{totalOrganizations:((c=n.global)==null?void 0:c.totalEntities)||0,totalTeams:((d=n.byEntity)==null?void 0:d.reduce((p,v)=>{var j;return p+(((j=v.teams)==null?void 0:j.total)||0)},0))||0,activeUsers:((f=n.global)==null?void 0:f.activeUsers)||0,actionsLast7Days:o,activityChart:l,usersByEntity:((h=n.byEntity)==null?void 0:h.map(p=>({entity:p.entityName,users:p.totalUsers||0,active:p.activeUsers||0,inactive:p.inactive||0})))||[]}},async getRecentAuditLogs(e=10){const t=await fetch(`${Q_}/audit/logs?limit=${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch recent audit logs");return t.json()}},Yle={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600",red:"bg-red-100 text-red-600"};function Xle({title:e,value:t,icon:n,color:s,trend:i,trendUp:a}){return r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow","data-testid":`kpi-card-${e.toLowerCase().replace(/\s+/g,"-")}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1","data-testid":"kpi-title",children:e}),r.jsx("p",{className:"text-3xl font-bold text-gray-900","data-testid":"kpi-value",children:t}),i&&r.jsxs("div",{className:`flex items-center gap-1 mt-2 text-sm ${a?"text-green-600":"text-red-600"}`,"data-testid":"kpi-trend",children:[a?r.jsx(wn,{className:"w-4 h-4"}):r.jsx(uj,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:i})]})]}),r.jsx("div",{className:`p-3 rounded-lg ${Yle[s]}`,children:r.jsx(n,{className:"w-6 h-6"})})]})})}var Jle=Array.isArray,Us=Jle,ece=typeof fd=="object"&&fd&&fd.Object===Object&&fd,BV=ece,tce=BV,nce=typeof self=="object"&&self&&self.Object===Object&&self,rce=tce||nce||Function("return this")(),io=rce,sce=io,ice=sce.Symbol,Eg=ice,dO=Eg,VV=Object.prototype,ace=VV.hasOwnProperty,oce=VV.toString,em=dO?dO.toStringTag:void 0;function lce(e){var t=ace.call(e,em),n=e[em];try{e[em]=void 0;var s=!0}catch{}var i=oce.call(e);return s&&(t?e[em]=n:delete e[em]),i}var cce=lce,uce=Object.prototype,dce=uce.toString;function fce(e){return dce.call(e)}var hce=fce,fO=Eg,mce=cce,pce=hce,gce="[object Null]",xce="[object Undefined]",hO=fO?fO.toStringTag:void 0;function vce(e){return e==null?e===void 0?xce:gce:hO&&hO in Object(e)?mce(e):pce(e)}var tl=vce;function yce(e){return e!=null&&typeof e=="object"}var nl=yce,bce=tl,jce=nl,_ce="[object Symbol]";function wce(e){return typeof e=="symbol"||jce(e)&&bce(e)==_ce}var hh=wce,Nce=Us,Sce=hh,Cce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pce=/^\w*$/;function Ace(e,t){if(Nce(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Sce(e)?!0:Pce.test(e)||!Cce.test(e)||t!=null&&e in Object(t)}var r2=Ace;function Ece(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var mc=Ece;const mh=on(mc);var Tce=tl,kce=mc,Oce="[object AsyncFunction]",Mce="[object Function]",Ice="[object GeneratorFunction]",Rce="[object Proxy]";function Lce(e){if(!kce(e))return!1;var t=Tce(e);return t==Mce||t==Ice||t==Oce||t==Rce}var s2=Lce;const Mt=on(s2);var Dce=io,$ce=Dce["__core-js_shared__"],Fce=$ce,Y_=Fce,mO=function(){var e=/[^.]+$/.exec(Y_&&Y_.keys&&Y_.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function zce(e){return!!mO&&mO in e}var Bce=zce,Vce=Function.prototype,qce=Vce.toString;function Uce(e){if(e!=null){try{return qce.call(e)}catch{}try{return e+""}catch{}}return""}var qV=Uce,Hce=s2,Wce=Bce,Kce=mc,Gce=qV,Zce=/[\\^$.*+?()[\]{}|]/g,Qce=/^\[object .+?Constructor\]$/,Yce=Function.prototype,Xce=Object.prototype,Jce=Yce.toString,eue=Xce.hasOwnProperty,tue=RegExp("^"+Jce.call(eue).replace(Zce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nue(e){if(!Kce(e)||Wce(e))return!1;var t=Hce(e)?tue:Qce;return t.test(Gce(e))}var rue=nue;function sue(e,t){return e==null?void 0:e[t]}var iue=sue,aue=rue,oue=iue;function lue(e,t){var n=oue(e,t);return aue(n)?n:void 0}var Tu=lue,cue=Tu,uue=cue(Object,"create"),Mj=uue,pO=Mj;function due(){this.__data__=pO?pO(null):{},this.size=0}var fue=due;function hue(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var mue=hue,pue=Mj,gue="__lodash_hash_undefined__",xue=Object.prototype,vue=xue.hasOwnProperty;function yue(e){var t=this.__data__;if(pue){var n=t[e];return n===gue?void 0:n}return vue.call(t,e)?t[e]:void 0}var bue=yue,jue=Mj,_ue=Object.prototype,wue=_ue.hasOwnProperty;function Nue(e){var t=this.__data__;return jue?t[e]!==void 0:wue.call(t,e)}var Sue=Nue,Cue=Mj,Pue="__lodash_hash_undefined__";function Aue(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Cue&&t===void 0?Pue:t,this}var Eue=Aue,Tue=fue,kue=mue,Oue=bue,Mue=Sue,Iue=Eue;function ph(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}ph.prototype.clear=Tue;ph.prototype.delete=kue;ph.prototype.get=Oue;ph.prototype.has=Mue;ph.prototype.set=Iue;var Rue=ph;function Lue(){this.__data__=[],this.size=0}var Due=Lue;function $ue(e,t){return e===t||e!==e&&t!==t}var i2=$ue,Fue=i2;function zue(e,t){for(var n=e.length;n--;)if(Fue(e[n][0],t))return n;return-1}var Ij=zue,Bue=Ij,Vue=Array.prototype,que=Vue.splice;function Uue(e){var t=this.__data__,n=Bue(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():que.call(t,n,1),--this.size,!0}var Hue=Uue,Wue=Ij;function Kue(e){var t=this.__data__,n=Wue(t,e);return n<0?void 0:t[n][1]}var Gue=Kue,Zue=Ij;function Que(e){return Zue(this.__data__,e)>-1}var Yue=Que,Xue=Ij;function Jue(e,t){var n=this.__data__,s=Xue(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var ede=Jue,tde=Due,nde=Hue,rde=Gue,sde=Yue,ide=ede;function gh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}gh.prototype.clear=tde;gh.prototype.delete=nde;gh.prototype.get=rde;gh.prototype.has=sde;gh.prototype.set=ide;var Rj=gh,ade=Tu,ode=io,lde=ade(ode,"Map"),a2=lde,gO=Rue,cde=Rj,ude=a2;function dde(){this.size=0,this.__data__={hash:new gO,map:new(ude||cde),string:new gO}}var fde=dde;function hde(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var mde=hde,pde=mde;function gde(e,t){var n=e.__data__;return pde(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Lj=gde,xde=Lj;function vde(e){var t=xde(this,e).delete(e);return this.size-=t?1:0,t}var yde=vde,bde=Lj;function jde(e){return bde(this,e).get(e)}var _de=jde,wde=Lj;function Nde(e){return wde(this,e).has(e)}var Sde=Nde,Cde=Lj;function Pde(e,t){var n=Cde(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var Ade=Pde,Ede=fde,Tde=yde,kde=_de,Ode=Sde,Mde=Ade;function xh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}xh.prototype.clear=Ede;xh.prototype.delete=Tde;xh.prototype.get=kde;xh.prototype.has=Ode;xh.prototype.set=Mde;var o2=xh,UV=o2,Ide="Expected a function";function l2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ide);var n=function(){var s=arguments,i=t?t.apply(this,s):s[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,s);return n.cache=a.set(i,o)||a,o};return n.cache=new(l2.Cache||UV),n}l2.Cache=UV;var HV=l2;const Rde=on(HV);var Lde=HV,Dde=500;function $de(e){var t=Lde(e,function(s){return n.size===Dde&&n.clear(),s}),n=t.cache;return t}var Fde=$de,zde=Fde,Bde=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vde=/\\(\\)?/g,qde=zde(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Bde,function(n,s,i,a){t.push(i?a.replace(Vde,"$1"):s||n)}),t}),Ude=qde;function Hde(e,t){for(var n=-1,s=e==null?0:e.length,i=Array(s);++n<s;)i[n]=t(e[n],n,e);return i}var c2=Hde,xO=Eg,Wde=c2,Kde=Us,Gde=hh,vO=xO?xO.prototype:void 0,yO=vO?vO.toString:void 0;function WV(e){if(typeof e=="string")return e;if(Kde(e))return Wde(e,WV)+"";if(Gde(e))return yO?yO.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Zde=WV,Qde=Zde;function Yde(e){return e==null?"":Qde(e)}var KV=Yde,Xde=Us,Jde=r2,efe=Ude,tfe=KV;function nfe(e,t){return Xde(e)?e:Jde(e,t)?[e]:efe(tfe(e))}var GV=nfe,rfe=hh;function sfe(e){if(typeof e=="string"||rfe(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Dj=sfe,ife=GV,afe=Dj;function ofe(e,t){t=ife(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[afe(t[n++])];return n&&n==s?e:void 0}var u2=ofe,lfe=u2;function cfe(e,t,n){var s=e==null?void 0:lfe(e,t);return s===void 0?n:s}var ZV=cfe;const ii=on(ZV);function ufe(e){return e==null}var dfe=ufe;const Dt=on(dfe);var ffe=tl,hfe=Us,mfe=nl,pfe="[object String]";function gfe(e){return typeof e=="string"||!hfe(e)&&mfe(e)&&ffe(e)==pfe}var xfe=gfe;const Tg=on(xfe);var QV={exports:{}},vn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d2=Symbol.for("react.element"),f2=Symbol.for("react.portal"),$j=Symbol.for("react.fragment"),Fj=Symbol.for("react.strict_mode"),zj=Symbol.for("react.profiler"),Bj=Symbol.for("react.provider"),Vj=Symbol.for("react.context"),vfe=Symbol.for("react.server_context"),qj=Symbol.for("react.forward_ref"),Uj=Symbol.for("react.suspense"),Hj=Symbol.for("react.suspense_list"),Wj=Symbol.for("react.memo"),Kj=Symbol.for("react.lazy"),yfe=Symbol.for("react.offscreen"),YV;YV=Symbol.for("react.module.reference");function Fi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case d2:switch(e=e.type,e){case $j:case zj:case Fj:case Uj:case Hj:return e;default:switch(e=e&&e.$$typeof,e){case vfe:case Vj:case qj:case Kj:case Wj:case Bj:return e;default:return t}}case f2:return t}}}vn.ContextConsumer=Vj;vn.ContextProvider=Bj;vn.Element=d2;vn.ForwardRef=qj;vn.Fragment=$j;vn.Lazy=Kj;vn.Memo=Wj;vn.Portal=f2;vn.Profiler=zj;vn.StrictMode=Fj;vn.Suspense=Uj;vn.SuspenseList=Hj;vn.isAsyncMode=function(){return!1};vn.isConcurrentMode=function(){return!1};vn.isContextConsumer=function(e){return Fi(e)===Vj};vn.isContextProvider=function(e){return Fi(e)===Bj};vn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===d2};vn.isForwardRef=function(e){return Fi(e)===qj};vn.isFragment=function(e){return Fi(e)===$j};vn.isLazy=function(e){return Fi(e)===Kj};vn.isMemo=function(e){return Fi(e)===Wj};vn.isPortal=function(e){return Fi(e)===f2};vn.isProfiler=function(e){return Fi(e)===zj};vn.isStrictMode=function(e){return Fi(e)===Fj};vn.isSuspense=function(e){return Fi(e)===Uj};vn.isSuspenseList=function(e){return Fi(e)===Hj};vn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===$j||e===zj||e===Fj||e===Uj||e===Hj||e===yfe||typeof e=="object"&&e!==null&&(e.$$typeof===Kj||e.$$typeof===Wj||e.$$typeof===Bj||e.$$typeof===Vj||e.$$typeof===qj||e.$$typeof===YV||e.getModuleId!==void 0)};vn.typeOf=Fi;QV.exports=vn;var bfe=QV.exports,jfe=tl,_fe=nl,wfe="[object Number]";function Nfe(e){return typeof e=="number"||_fe(e)&&jfe(e)==wfe}var XV=Nfe;const Sfe=on(XV);var Cfe=XV;function Pfe(e){return Cfe(e)&&e!=+e}var Afe=Pfe;const kg=on(Afe);var bs=function(t){return t===0?0:t>0?1:-1},zc=function(t){return Tg(t)&&t.indexOf("%")===t.length-1},We=function(t){return Sfe(t)&&!kg(t)},Mr=function(t){return We(t)||Tg(t)},Efe=0,vh=function(t){var n=++Efe;return"".concat(t||"").concat(n)},js=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!We(t)&&!Tg(t))return s;var a;if(zc(t)){var o=t.indexOf("%");a=n*parseFloat(t.slice(0,o))/100}else a=+t;return kg(a)&&(a=s),i&&a>n&&(a=n),a},jl=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},Tfe=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,s={},i=0;i<n;i++)if(!s[t[i]])s[t[i]]=!0;else return!0;return!1},Xs=function(t,n){return We(t)&&We(n)?function(s){return t+s*(n-t)}:function(){return n}};function wy(e,t,n){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):ii(s,t))===n})}function qd(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function o1(e){"@babel/helpers - typeof";return o1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o1(e)}var kfe=["viewBox","children"],Ofe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],bO=["points","pathLength"],X_={svg:kfe,polygon:bO,polyline:bO},h2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ny=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(_.isValidElement(t)&&(s=t.props),!mh(s))return null;var i={};return Object.keys(s).forEach(function(a){h2.includes(a)&&(i[a]=n||function(o){return s[a](s,o)})}),i},Mfe=function(t,n,s){return function(i){return t(n,s,i),null}},xu=function(t,n,s){if(!mh(t)||o1(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(a){var o=t[a];h2.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=Mfe(o,n,s))}),i},Ife=["children"],Rfe=["children"];function jO(e,t){if(e==null)return{};var n=Lfe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Lfe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function l1(e){"@babel/helpers - typeof";return l1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l1(e)}var _O={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Io=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},wO=null,J_=null,m2=function e(t){if(t===wO&&Array.isArray(J_))return J_;var n=[];return _.Children.forEach(t,function(s){Dt(s)||(bfe.isFragment(s)?n=n.concat(e(s.props.children)):n.push(s))}),J_=n,wO=t,n};function ai(e,t){var n=[],s=[];return Array.isArray(t)?s=t.map(function(i){return Io(i)}):s=[Io(t)],m2(e).forEach(function(i){var a=ii(i,"type.displayName")||ii(i,"type.name");s.indexOf(a)!==-1&&n.push(i)}),n}function Zs(e,t){var n=ai(e,t);return n&&n[0]}var NO=function(t){if(!t||!t.props)return!1;var n=t.props,s=n.width,i=n.height;return!(!We(s)||s<=0||!We(i)||i<=0)},Dfe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],$fe=function(t){return t&&t.type&&Tg(t.type)&&Dfe.indexOf(t.type)>=0},Ffe=function(t){return t&&l1(t)==="object"&&"clipDot"in t},zfe=function(t,n,s,i){var a,o=(a=X_==null?void 0:X_[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Mt(t)&&(i&&o.includes(n)||Ofe.includes(n))||s&&h2.includes(n)},wt=function(t,n,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(_.isValidElement(t)&&(i=t.props),!mh(i))return null;var a={};return Object.keys(i).forEach(function(o){var l;zfe((l=i)===null||l===void 0?void 0:l[o],o,n,s)&&(a[o]=i[o])}),a},c1=function e(t,n){if(t===n)return!0;var s=_.Children.count(t);if(s!==_.Children.count(n))return!1;if(s===0)return!0;if(s===1)return SO(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<s;i++){var a=t[i],o=n[i];if(Array.isArray(a)||Array.isArray(o)){if(!e(a,o))return!1}else if(!SO(a,o))return!1}return!0},SO=function(t,n){if(Dt(t)&&Dt(n))return!0;if(!Dt(t)&&!Dt(n)){var s=t.props||{},i=s.children,a=jO(s,Ife),o=n.props||{},l=o.children,c=jO(o,Rfe);return i&&l?qd(a,c)&&c1(i,l):!i&&!l?qd(a,c):!1}return!1},CO=function(t,n){var s=[],i={};return m2(t).forEach(function(a,o){if($fe(a))s.push(a);else if(a){var l=Io(a.type),c=n[l]||{},d=c.handler,f=c.once;if(d&&(!f||!i[l])){var h=d(a,l,o);s.push(h),i[l]=!0}}}),s},Bfe=function(t){var n=t&&t.type;return n&&_O[n]?_O[n]:null},Vfe=function(t,n){return m2(n).indexOf(t)},qfe=["children","width","height","viewBox","className","style","title","desc"];function u1(){return u1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},u1.apply(this,arguments)}function Ufe(e,t){if(e==null)return{};var n=Hfe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Hfe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function d1(e){var t=e.children,n=e.width,s=e.height,i=e.viewBox,a=e.className,o=e.style,l=e.title,c=e.desc,d=Ufe(e,qfe),f=i||{width:n,height:s,x:0,y:0},h=zt("recharts-surface",a);return q.createElement("svg",u1({},wt(d,!0,"svg"),{className:h,width:n,height:s,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),q.createElement("title",null,l),q.createElement("desc",null,c),t)}var Wfe=["children","className"];function f1(){return f1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},f1.apply(this,arguments)}function Kfe(e,t){if(e==null)return{};var n=Gfe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Gfe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var sn=q.forwardRef(function(e,t){var n=e.children,s=e.className,i=Kfe(e,Wfe),a=zt("recharts-layer",s);return q.createElement("g",f1({className:a},wt(i,!0),{ref:t}),n)}),aa=function(t,n){for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a]};function Zfe(e,t,n){var s=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++s<i;)a[s]=e[s+t];return a}var Qfe=Zfe,Yfe=Qfe;function Xfe(e,t,n){var s=e.length;return n=n===void 0?s:n,!t&&n>=s?e:Yfe(e,t,n)}var Jfe=Xfe,ehe="\\ud800-\\udfff",the="\\u0300-\\u036f",nhe="\\ufe20-\\ufe2f",rhe="\\u20d0-\\u20ff",she=the+nhe+rhe,ihe="\\ufe0e\\ufe0f",ahe="\\u200d",ohe=RegExp("["+ahe+ehe+she+ihe+"]");function lhe(e){return ohe.test(e)}var JV=lhe;function che(e){return e.split("")}var uhe=che,eq="\\ud800-\\udfff",dhe="\\u0300-\\u036f",fhe="\\ufe20-\\ufe2f",hhe="\\u20d0-\\u20ff",mhe=dhe+fhe+hhe,phe="\\ufe0e\\ufe0f",ghe="["+eq+"]",h1="["+mhe+"]",m1="\\ud83c[\\udffb-\\udfff]",xhe="(?:"+h1+"|"+m1+")",tq="[^"+eq+"]",nq="(?:\\ud83c[\\udde6-\\uddff]){2}",rq="[\\ud800-\\udbff][\\udc00-\\udfff]",vhe="\\u200d",sq=xhe+"?",iq="["+phe+"]?",yhe="(?:"+vhe+"(?:"+[tq,nq,rq].join("|")+")"+iq+sq+")*",bhe=iq+sq+yhe,jhe="(?:"+[tq+h1+"?",h1,nq,rq,ghe].join("|")+")",_he=RegExp(m1+"(?="+m1+")|"+jhe+bhe,"g");function whe(e){return e.match(_he)||[]}var Nhe=whe,She=uhe,Che=JV,Phe=Nhe;function Ahe(e){return Che(e)?Phe(e):She(e)}var Ehe=Ahe,The=Jfe,khe=JV,Ohe=Ehe,Mhe=KV;function Ihe(e){return function(t){t=Mhe(t);var n=khe(t)?Ohe(t):void 0,s=n?n[0]:t.charAt(0),i=n?The(n,1).join(""):t.slice(1);return s[e]()+i}}var Rhe=Ihe,Lhe=Rhe,Dhe=Lhe("toUpperCase"),$he=Dhe;const Gj=on($he);function En(e){return function(){return e}}const aq=Math.cos,Sy=Math.sin,ba=Math.sqrt,Cy=Math.PI,Zj=2*Cy,p1=Math.PI,g1=2*p1,Oc=1e-6,Fhe=g1-Oc;function oq(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function zhe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return oq;const n=10**t;return function(s){this._+=s[0];for(let i=1,a=s.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+s[i]}}class Bhe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?oq:zhe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,s,i){this._append`Q${+t},${+n},${this._x1=+s},${this._y1=+i}`}bezierCurveTo(t,n,s,i,a,o){this._append`C${+t},${+n},${+s},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,s,i,a){if(t=+t,n=+n,s=+s,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=s-t,d=i-n,f=o-t,h=l-n,p=f*f+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Oc)if(!(Math.abs(h*c-d*f)>Oc)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let v=s-o,j=i-l,g=c*c+d*d,x=v*v+j*j,w=Math.sqrt(g),N=Math.sqrt(p),y=a*Math.tan((p1-Math.acos((g+p-x)/(2*w*N)))/2),A=y/N,P=y/w;Math.abs(A-1)>Oc&&this._append`L${t+A*f},${n+A*h}`,this._append`A${a},${a},0,0,${+(h*v>f*j)},${this._x1=t+P*c},${this._y1=n+P*d}`}}arc(t,n,s,i,a,o){if(t=+t,n=+n,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(i),c=s*Math.sin(i),d=t+l,f=n+c,h=1^o,p=o?i-a:a-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Oc||Math.abs(this._y1-f)>Oc)&&this._append`L${d},${f}`,s&&(p<0&&(p=p%g1+g1),p>Fhe?this._append`A${s},${s},0,1,${h},${t-l},${n-c}A${s},${s},0,1,${h},${this._x1=d},${this._y1=f}`:p>Oc&&this._append`A${s},${s},0,${+(p>=p1)},${h},${this._x1=t+s*Math.cos(a)},${this._y1=n+s*Math.sin(a)}`)}rect(t,n,s,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${s=+s}v${+i}h${-s}Z`}toString(){return this._}}function p2(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);t=s}return e},()=>new Bhe(t)}function g2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function lq(e){this._context=e}lq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Qj(e){return new lq(e)}function cq(e){return e[0]}function uq(e){return e[1]}function dq(e,t){var n=En(!0),s=null,i=Qj,a=null,o=p2(l);e=typeof e=="function"?e:e===void 0?cq:En(e),t=typeof t=="function"?t:t===void 0?uq:En(t);function l(c){var d,f=(c=g2(c)).length,h,p=!1,v;for(s==null&&(a=i(v=o())),d=0;d<=f;++d)!(d<f&&n(h=c[d],d,c))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(h,d,c),+t(h,d,c));if(v)return a=null,v+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:En(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:En(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:En(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,s!=null&&(a=i(s)),l):i},l.context=function(c){return arguments.length?(c==null?s=a=null:a=i(s=c),l):s},l}function qx(e,t,n){var s=null,i=En(!0),a=null,o=Qj,l=null,c=p2(d);e=typeof e=="function"?e:e===void 0?cq:En(+e),t=typeof t=="function"?t:En(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?uq:En(+n);function d(h){var p,v,j,g=(h=g2(h)).length,x,w=!1,N,y=new Array(g),A=new Array(g);for(a==null&&(l=o(N=c())),p=0;p<=g;++p){if(!(p<g&&i(x=h[p],p,h))===w)if(w=!w)v=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),j=p-1;j>=v;--j)l.point(y[j],A[j]);l.lineEnd(),l.areaEnd()}w&&(y[p]=+e(x,p,h),A[p]=+t(x,p,h),l.point(s?+s(x,p,h):y[p],n?+n(x,p,h):A[p]))}if(N)return l=null,N+""||null}function f(){return dq().defined(i).curve(o).context(a)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:En(+h),s=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:En(+h),d):e},d.x1=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:En(+h),d):s},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:En(+h),n=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:En(+h),d):t},d.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:En(+h),d):n},d.lineX0=d.lineY0=function(){return f().x(e).y(t)},d.lineY1=function(){return f().x(e).y(n)},d.lineX1=function(){return f().x(s).y(t)},d.defined=function(h){return arguments.length?(i=typeof h=="function"?h:En(!!h),d):i},d.curve=function(h){return arguments.length?(o=h,a!=null&&(l=o(a)),d):o},d.context=function(h){return arguments.length?(h==null?a=l=null:l=o(a=h),d):a},d}class fq{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Vhe(e){return new fq(e,!0)}function qhe(e){return new fq(e,!1)}const x2={draw(e,t){const n=ba(t/Cy);e.moveTo(n,0),e.arc(0,0,n,0,Zj)}},Uhe={draw(e,t){const n=ba(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},hq=ba(1/3),Hhe=hq*2,Whe={draw(e,t){const n=ba(t/Hhe),s=n*hq;e.moveTo(0,-n),e.lineTo(s,0),e.lineTo(0,n),e.lineTo(-s,0),e.closePath()}},Khe={draw(e,t){const n=ba(t),s=-n/2;e.rect(s,s,n,n)}},Ghe=.8908130915292852,mq=Sy(Cy/10)/Sy(7*Cy/10),Zhe=Sy(Zj/10)*mq,Qhe=-aq(Zj/10)*mq,Yhe={draw(e,t){const n=ba(t*Ghe),s=Zhe*n,i=Qhe*n;e.moveTo(0,-n),e.lineTo(s,i);for(let a=1;a<5;++a){const o=Zj*a/5,l=aq(o),c=Sy(o);e.lineTo(c*n,-l*n),e.lineTo(l*s-c*i,c*s+l*i)}e.closePath()}},ew=ba(3),Xhe={draw(e,t){const n=-ba(t/(ew*3));e.moveTo(0,n*2),e.lineTo(-ew*n,-n),e.lineTo(ew*n,-n),e.closePath()}},xi=-.5,vi=ba(3)/2,x1=1/ba(12),Jhe=(x1/2+1)*3,eme={draw(e,t){const n=ba(t/Jhe),s=n/2,i=n*x1,a=s,o=n*x1+n,l=-a,c=o;e.moveTo(s,i),e.lineTo(a,o),e.lineTo(l,c),e.lineTo(xi*s-vi*i,vi*s+xi*i),e.lineTo(xi*a-vi*o,vi*a+xi*o),e.lineTo(xi*l-vi*c,vi*l+xi*c),e.lineTo(xi*s+vi*i,xi*i-vi*s),e.lineTo(xi*a+vi*o,xi*o-vi*a),e.lineTo(xi*l+vi*c,xi*c-vi*l),e.closePath()}};function tme(e,t){let n=null,s=p2(i);e=typeof e=="function"?e:En(e||x2),t=typeof t=="function"?t:En(t===void 0?64:+t);function i(){let a;if(n||(n=a=s()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:En(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:En(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Py(){}function Ay(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function pq(e){this._context=e}pq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ay(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ay(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nme(e){return new pq(e)}function gq(e){this._context=e}gq.prototype={areaStart:Py,areaEnd:Py,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ay(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rme(e){return new gq(e)}function xq(e){this._context=e}xq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:Ay(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sme(e){return new xq(e)}function vq(e){this._context=e}vq.prototype={areaStart:Py,areaEnd:Py,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ime(e){return new vq(e)}function PO(e){return e<0?-1:1}function AO(e,t,n){var s=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(s||i<0&&-0),o=(n-e._y1)/(i||s<0&&-0),l=(a*i+o*s)/(s+i);return(PO(a)+PO(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function EO(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function tw(e,t,n){var s=e._x0,i=e._y0,a=e._x1,o=e._y1,l=(a-s)/3;e._context.bezierCurveTo(s+l,i+l*t,a-l,o-l*n,a,o)}function Ey(e){this._context=e}Ey.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tw(this,this._t0,EO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,tw(this,EO(this,n=AO(this,e,t)),n);break;default:tw(this,this._t0,n=AO(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function yq(e){this._context=new bq(e)}(yq.prototype=Object.create(Ey.prototype)).point=function(e,t){Ey.prototype.point.call(this,t,e)};function bq(e){this._context=e}bq.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,i,a){this._context.bezierCurveTo(t,e,s,n,a,i)}};function ame(e){return new Ey(e)}function ome(e){return new yq(e)}function jq(e){this._context=e}jq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var s=TO(e),i=TO(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(s[0][a],i[0][a],s[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function TO(e){var t,n=e.length-1,s,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)s=i[t]/a[t-1],a[t]-=s,o[t]-=s*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function lme(e){return new jq(e)}function Yj(e,t){this._context=e,this._t=t}Yj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function cme(e){return new Yj(e,.5)}function ume(e){return new Yj(e,0)}function dme(e){return new Yj(e,1)}function Sf(e,t){if((o=e.length)>1)for(var n=1,s,i,a=e[t[0]],o,l=a.length;n<o;++n)for(i=a,a=e[t[n]],s=0;s<l;++s)a[s][1]+=a[s][0]=isNaN(i[s][1])?i[s][0]:i[s][1]}function v1(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function fme(e,t){return e[t]}function hme(e){const t=[];return t.key=e,t}function mme(){var e=En([]),t=v1,n=Sf,s=fme;function i(a){var o=Array.from(e.apply(this,arguments),hme),l,c=o.length,d=-1,f;for(const h of a)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(h,o[l].key,d,a)]).data=h;for(l=0,f=g2(t(o));l<c;++l)o[f[l]].index=l;return n(o,f),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:En(Array.from(a)),i):e},i.value=function(a){return arguments.length?(s=typeof a=="function"?a:En(+a),i):s},i.order=function(a){return arguments.length?(t=a==null?v1:typeof a=="function"?a:En(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??Sf,i):n},i}function pme(e,t){if((s=e.length)>0){for(var n,s,i=0,a=e[0].length,o;i<a;++i){for(o=n=0;n<s;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<s;++n)e[n][i][1]/=o}Sf(e,t)}}function gme(e,t){if((i=e.length)>0){for(var n=0,s=e[t[0]],i,a=s.length;n<a;++n){for(var o=0,l=0;o<i;++o)l+=e[o][n][1]||0;s[n][1]+=s[n][0]=-l/2}Sf(e,t)}}function xme(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,s=1,i,a,o;s<a;++s){for(var l=0,c=0,d=0;l<o;++l){for(var f=e[t[l]],h=f[s][1]||0,p=f[s-1][1]||0,v=(h-p)/2,j=0;j<l;++j){var g=e[t[j]],x=g[s][1]||0,w=g[s-1][1]||0;v+=x-w}c+=h,d+=v*h}i[s-1][1]+=i[s-1][0]=n,c&&(n-=d/c)}i[s-1][1]+=i[s-1][0]=n,Sf(e,t)}}function fp(e){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}var vme=["type","size","sizeType"];function y1(){return y1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},y1.apply(this,arguments)}function kO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function OO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kO(Object(n),!0).forEach(function(s){yme(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function yme(e,t,n){return t=bme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bme(e){var t=jme(e,"string");return fp(t)=="symbol"?t:t+""}function jme(e,t){if(fp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(fp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _me(e,t){if(e==null)return{};var n=wme(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function wme(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var _q={symbolCircle:x2,symbolCross:Uhe,symbolDiamond:Whe,symbolSquare:Khe,symbolStar:Yhe,symbolTriangle:Xhe,symbolWye:eme},Nme=Math.PI/180,Sme=function(t){var n="symbol".concat(Gj(t));return _q[n]||x2},Cme=function(t,n,s){if(n==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*Nme;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Pme=function(t,n){_q["symbol".concat(Gj(t))]=n},v2=function(t){var n=t.type,s=n===void 0?"circle":n,i=t.size,a=i===void 0?64:i,o=t.sizeType,l=o===void 0?"area":o,c=_me(t,vme),d=OO(OO({},c),{},{type:s,size:a,sizeType:l}),f=function(){var x=Sme(s),w=tme().type(x).size(Cme(a,l,s));return w()},h=d.className,p=d.cx,v=d.cy,j=wt(d,!0);return p===+p&&v===+v&&a===+a?q.createElement("path",y1({},j,{className:zt("recharts-symbols",h),transform:"translate(".concat(p,", ").concat(v,")"),d:f()})):null};v2.registerSymbol=Pme;function Cf(e){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cf(e)}function b1(){return b1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},b1.apply(this,arguments)}function MO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ame(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MO(Object(n),!0).forEach(function(s){hp(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MO(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Eme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tme(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Nq(s.key),s)}}function kme(e,t,n){return t&&Tme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ome(e,t,n){return t=Ty(t),Mme(e,wq()?Reflect.construct(t,n||[],Ty(e).constructor):t.apply(e,n))}function Mme(e,t){if(t&&(Cf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ime(e)}function Ime(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wq=function(){return!!e})()}function Ty(e){return Ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ty(e)}function Rme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j1(e,t)}function j1(e,t){return j1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},j1(e,t)}function hp(e,t,n){return t=Nq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nq(e){var t=Lme(e,"string");return Cf(t)=="symbol"?t:t+""}function Lme(e,t){if(Cf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Cf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yi=32,y2=function(e){function t(){return Eme(this,t),Ome(this,t,arguments)}return Rme(t,e),kme(t,[{key:"renderIcon",value:function(s){var i=this.props.inactiveColor,a=yi/2,o=yi/6,l=yi/3,c=s.inactive?i:s.color;if(s.type==="plainline")return q.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:a,x2:yi,y2:a,className:"recharts-legend-icon"});if(s.type==="line")return q.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(yi,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(s.type==="rect")return q.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(yi/8,"h").concat(yi,"v").concat(yi*3/4,"h").concat(-yi,"z"),className:"recharts-legend-icon"});if(q.isValidElement(s.legendIcon)){var d=Ame({},s);return delete d.legendIcon,q.cloneElement(s.legendIcon,d)}return q.createElement(v2,{fill:c,cx:a,cy:a,size:yi,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,i=this.props,a=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,d=i.inactiveColor,f={x:0,y:0,width:yi,height:yi},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(v,j){var g=v.formatter||c,x=zt(hp(hp({"recharts-legend-item":!0},"legend-item-".concat(j),!0),"inactive",v.inactive));if(v.type==="none")return null;var w=Mt(v.value)?null:v.value;aa(!Mt(v.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var N=v.inactive?d:v.color;return q.createElement("li",b1({className:x,style:h,key:"legend-item-".concat(j)},xu(s.props,v,j)),q.createElement(d1,{width:o,height:o,viewBox:f,style:p},s.renderIcon(v)),q.createElement("span",{className:"recharts-legend-item-text",style:{color:N}},g?g(w,v,j):w))})}},{key:"render",value:function(){var s=this.props,i=s.payload,a=s.layout,o=s.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return q.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(_.PureComponent);hp(y2,"displayName","Legend");hp(y2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Dme=Rj;function $me(){this.__data__=new Dme,this.size=0}var Fme=$me;function zme(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Bme=zme;function Vme(e){return this.__data__.get(e)}var qme=Vme;function Ume(e){return this.__data__.has(e)}var Hme=Ume,Wme=Rj,Kme=a2,Gme=o2,Zme=200;function Qme(e,t){var n=this.__data__;if(n instanceof Wme){var s=n.__data__;if(!Kme||s.length<Zme-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new Gme(s)}return n.set(e,t),this.size=n.size,this}var Yme=Qme,Xme=Rj,Jme=Fme,epe=Bme,tpe=qme,npe=Hme,rpe=Yme;function yh(e){var t=this.__data__=new Xme(e);this.size=t.size}yh.prototype.clear=Jme;yh.prototype.delete=epe;yh.prototype.get=tpe;yh.prototype.has=npe;yh.prototype.set=rpe;var Sq=yh,spe="__lodash_hash_undefined__";function ipe(e){return this.__data__.set(e,spe),this}var ape=ipe;function ope(e){return this.__data__.has(e)}var lpe=ope,cpe=o2,upe=ape,dpe=lpe;function ky(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new cpe;++t<n;)this.add(e[t])}ky.prototype.add=ky.prototype.push=upe;ky.prototype.has=dpe;var Cq=ky;function fpe(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var Pq=fpe;function hpe(e,t){return e.has(t)}var Aq=hpe,mpe=Cq,ppe=Pq,gpe=Aq,xpe=1,vpe=2;function ype(e,t,n,s,i,a){var o=n&xpe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var h=-1,p=!0,v=n&vpe?new mpe:void 0;for(a.set(e,t),a.set(t,e);++h<l;){var j=e[h],g=t[h];if(s)var x=o?s(g,j,h,t,e,a):s(j,g,h,e,t,a);if(x!==void 0){if(x)continue;p=!1;break}if(v){if(!ppe(t,function(w,N){if(!gpe(v,N)&&(j===w||i(j,w,n,s,a)))return v.push(N)})){p=!1;break}}else if(!(j===g||i(j,g,n,s,a))){p=!1;break}}return a.delete(e),a.delete(t),p}var Eq=ype,bpe=io,jpe=bpe.Uint8Array,_pe=jpe;function wpe(e){var t=-1,n=Array(e.size);return e.forEach(function(s,i){n[++t]=[i,s]}),n}var Npe=wpe;function Spe(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var b2=Spe,IO=Eg,RO=_pe,Cpe=i2,Ppe=Eq,Ape=Npe,Epe=b2,Tpe=1,kpe=2,Ope="[object Boolean]",Mpe="[object Date]",Ipe="[object Error]",Rpe="[object Map]",Lpe="[object Number]",Dpe="[object RegExp]",$pe="[object Set]",Fpe="[object String]",zpe="[object Symbol]",Bpe="[object ArrayBuffer]",Vpe="[object DataView]",LO=IO?IO.prototype:void 0,nw=LO?LO.valueOf:void 0;function qpe(e,t,n,s,i,a,o){switch(n){case Vpe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Bpe:return!(e.byteLength!=t.byteLength||!a(new RO(e),new RO(t)));case Ope:case Mpe:case Lpe:return Cpe(+e,+t);case Ipe:return e.name==t.name&&e.message==t.message;case Dpe:case Fpe:return e==t+"";case Rpe:var l=Ape;case $pe:var c=s&Tpe;if(l||(l=Epe),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;s|=kpe,o.set(e,t);var f=Ppe(l(e),l(t),s,i,a,o);return o.delete(e),f;case zpe:if(nw)return nw.call(e)==nw.call(t)}return!1}var Upe=qpe;function Hpe(e,t){for(var n=-1,s=t.length,i=e.length;++n<s;)e[i+n]=t[n];return e}var Tq=Hpe,Wpe=Tq,Kpe=Us;function Gpe(e,t,n){var s=t(e);return Kpe(e)?s:Wpe(s,n(e))}var Zpe=Gpe;function Qpe(e,t){for(var n=-1,s=e==null?0:e.length,i=0,a=[];++n<s;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var Ype=Qpe;function Xpe(){return[]}var Jpe=Xpe,ege=Ype,tge=Jpe,nge=Object.prototype,rge=nge.propertyIsEnumerable,DO=Object.getOwnPropertySymbols,sge=DO?function(e){return e==null?[]:(e=Object(e),ege(DO(e),function(t){return rge.call(e,t)}))}:tge,ige=sge;function age(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var oge=age,lge=tl,cge=nl,uge="[object Arguments]";function dge(e){return cge(e)&&lge(e)==uge}var fge=dge,$O=fge,hge=nl,kq=Object.prototype,mge=kq.hasOwnProperty,pge=kq.propertyIsEnumerable,gge=$O(function(){return arguments}())?$O:function(e){return hge(e)&&mge.call(e,"callee")&&!pge.call(e,"callee")},j2=gge,Oy={exports:{}};function xge(){return!1}var vge=xge;Oy.exports;(function(e,t){var n=io,s=vge,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;e.exports=d})(Oy,Oy.exports);var Oq=Oy.exports,yge=9007199254740991,bge=/^(?:0|[1-9]\d*)$/;function jge(e,t){var n=typeof e;return t=t??yge,!!t&&(n=="number"||n!="symbol"&&bge.test(e))&&e>-1&&e%1==0&&e<t}var _2=jge,_ge=9007199254740991;function wge(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=_ge}var w2=wge,Nge=tl,Sge=w2,Cge=nl,Pge="[object Arguments]",Age="[object Array]",Ege="[object Boolean]",Tge="[object Date]",kge="[object Error]",Oge="[object Function]",Mge="[object Map]",Ige="[object Number]",Rge="[object Object]",Lge="[object RegExp]",Dge="[object Set]",$ge="[object String]",Fge="[object WeakMap]",zge="[object ArrayBuffer]",Bge="[object DataView]",Vge="[object Float32Array]",qge="[object Float64Array]",Uge="[object Int8Array]",Hge="[object Int16Array]",Wge="[object Int32Array]",Kge="[object Uint8Array]",Gge="[object Uint8ClampedArray]",Zge="[object Uint16Array]",Qge="[object Uint32Array]",Rn={};Rn[Vge]=Rn[qge]=Rn[Uge]=Rn[Hge]=Rn[Wge]=Rn[Kge]=Rn[Gge]=Rn[Zge]=Rn[Qge]=!0;Rn[Pge]=Rn[Age]=Rn[zge]=Rn[Ege]=Rn[Bge]=Rn[Tge]=Rn[kge]=Rn[Oge]=Rn[Mge]=Rn[Ige]=Rn[Rge]=Rn[Lge]=Rn[Dge]=Rn[$ge]=Rn[Fge]=!1;function Yge(e){return Cge(e)&&Sge(e.length)&&!!Rn[Nge(e)]}var Xge=Yge;function Jge(e){return function(t){return e(t)}}var Mq=Jge,My={exports:{}};My.exports;(function(e,t){var n=BV,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===s,o=a&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(My,My.exports);var exe=My.exports,txe=Xge,nxe=Mq,FO=exe,zO=FO&&FO.isTypedArray,rxe=zO?nxe(zO):txe,Iq=rxe,sxe=oge,ixe=j2,axe=Us,oxe=Oq,lxe=_2,cxe=Iq,uxe=Object.prototype,dxe=uxe.hasOwnProperty;function fxe(e,t){var n=axe(e),s=!n&&ixe(e),i=!n&&!s&&oxe(e),a=!n&&!s&&!i&&cxe(e),o=n||s||i||a,l=o?sxe(e.length,String):[],c=l.length;for(var d in e)(t||dxe.call(e,d))&&!(o&&(d=="length"||i&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||lxe(d,c)))&&l.push(d);return l}var hxe=fxe,mxe=Object.prototype;function pxe(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||mxe;return e===n}var gxe=pxe;function xxe(e,t){return function(n){return e(t(n))}}var Rq=xxe,vxe=Rq,yxe=vxe(Object.keys,Object),bxe=yxe,jxe=gxe,_xe=bxe,wxe=Object.prototype,Nxe=wxe.hasOwnProperty;function Sxe(e){if(!jxe(e))return _xe(e);var t=[];for(var n in Object(e))Nxe.call(e,n)&&n!="constructor"&&t.push(n);return t}var Cxe=Sxe,Pxe=s2,Axe=w2;function Exe(e){return e!=null&&Axe(e.length)&&!Pxe(e)}var Og=Exe,Txe=hxe,kxe=Cxe,Oxe=Og;function Mxe(e){return Oxe(e)?Txe(e):kxe(e)}var Xj=Mxe,Ixe=Zpe,Rxe=ige,Lxe=Xj;function Dxe(e){return Ixe(e,Lxe,Rxe)}var $xe=Dxe,BO=$xe,Fxe=1,zxe=Object.prototype,Bxe=zxe.hasOwnProperty;function Vxe(e,t,n,s,i,a){var o=n&Fxe,l=BO(e),c=l.length,d=BO(t),f=d.length;if(c!=f&&!o)return!1;for(var h=c;h--;){var p=l[h];if(!(o?p in t:Bxe.call(t,p)))return!1}var v=a.get(e),j=a.get(t);if(v&&j)return v==t&&j==e;var g=!0;a.set(e,t),a.set(t,e);for(var x=o;++h<c;){p=l[h];var w=e[p],N=t[p];if(s)var y=o?s(N,w,p,t,e,a):s(w,N,p,e,t,a);if(!(y===void 0?w===N||i(w,N,n,s,a):y)){g=!1;break}x||(x=p=="constructor")}if(g&&!x){var A=e.constructor,P=t.constructor;A!=P&&"constructor"in e&&"constructor"in t&&!(typeof A=="function"&&A instanceof A&&typeof P=="function"&&P instanceof P)&&(g=!1)}return a.delete(e),a.delete(t),g}var qxe=Vxe,Uxe=Tu,Hxe=io,Wxe=Uxe(Hxe,"DataView"),Kxe=Wxe,Gxe=Tu,Zxe=io,Qxe=Gxe(Zxe,"Promise"),Yxe=Qxe,Xxe=Tu,Jxe=io,eve=Xxe(Jxe,"Set"),Lq=eve,tve=Tu,nve=io,rve=tve(nve,"WeakMap"),sve=rve,_1=Kxe,w1=a2,N1=Yxe,S1=Lq,C1=sve,Dq=tl,bh=qV,VO="[object Map]",ive="[object Object]",qO="[object Promise]",UO="[object Set]",HO="[object WeakMap]",WO="[object DataView]",ave=bh(_1),ove=bh(w1),lve=bh(N1),cve=bh(S1),uve=bh(C1),Mc=Dq;(_1&&Mc(new _1(new ArrayBuffer(1)))!=WO||w1&&Mc(new w1)!=VO||N1&&Mc(N1.resolve())!=qO||S1&&Mc(new S1)!=UO||C1&&Mc(new C1)!=HO)&&(Mc=function(e){var t=Dq(e),n=t==ive?e.constructor:void 0,s=n?bh(n):"";if(s)switch(s){case ave:return WO;case ove:return VO;case lve:return qO;case cve:return UO;case uve:return HO}return t});var dve=Mc,rw=Sq,fve=Eq,hve=Upe,mve=qxe,KO=dve,GO=Us,ZO=Oq,pve=Iq,gve=1,QO="[object Arguments]",YO="[object Array]",Ux="[object Object]",xve=Object.prototype,XO=xve.hasOwnProperty;function vve(e,t,n,s,i,a){var o=GO(e),l=GO(t),c=o?YO:KO(e),d=l?YO:KO(t);c=c==QO?Ux:c,d=d==QO?Ux:d;var f=c==Ux,h=d==Ux,p=c==d;if(p&&ZO(e)){if(!ZO(t))return!1;o=!0,f=!1}if(p&&!f)return a||(a=new rw),o||pve(e)?fve(e,t,n,s,i,a):hve(e,t,c,n,s,i,a);if(!(n&gve)){var v=f&&XO.call(e,"__wrapped__"),j=h&&XO.call(t,"__wrapped__");if(v||j){var g=v?e.value():e,x=j?t.value():t;return a||(a=new rw),i(g,x,n,s,a)}}return p?(a||(a=new rw),mve(e,t,n,s,i,a)):!1}var yve=vve,bve=yve,JO=nl;function $q(e,t,n,s,i){return e===t?!0:e==null||t==null||!JO(e)&&!JO(t)?e!==e&&t!==t:bve(e,t,n,s,$q,i)}var N2=$q,jve=Sq,_ve=N2,wve=1,Nve=2;function Sve(e,t,n,s){var i=n.length,a=i,o=!s;if(e==null)return!a;for(e=Object(e);i--;){var l=n[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){l=n[i];var c=l[0],d=e[c],f=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var h=new jve;if(s)var p=s(d,f,c,e,t,h);if(!(p===void 0?_ve(f,d,wve|Nve,s,h):p))return!1}}return!0}var Cve=Sve,Pve=mc;function Ave(e){return e===e&&!Pve(e)}var Fq=Ave,Eve=Fq,Tve=Xj;function kve(e){for(var t=Tve(e),n=t.length;n--;){var s=t[n],i=e[s];t[n]=[s,i,Eve(i)]}return t}var Ove=kve;function Mve(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var zq=Mve,Ive=Cve,Rve=Ove,Lve=zq;function Dve(e){var t=Rve(e);return t.length==1&&t[0][2]?Lve(t[0][0],t[0][1]):function(n){return n===e||Ive(n,e,t)}}var $ve=Dve;function Fve(e,t){return e!=null&&t in Object(e)}var zve=Fve,Bve=GV,Vve=j2,qve=Us,Uve=_2,Hve=w2,Wve=Dj;function Kve(e,t,n){t=Bve(t,e);for(var s=-1,i=t.length,a=!1;++s<i;){var o=Wve(t[s]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++s!=i?a:(i=e==null?0:e.length,!!i&&Hve(i)&&Uve(o,i)&&(qve(e)||Vve(e)))}var Gve=Kve,Zve=zve,Qve=Gve;function Yve(e,t){return e!=null&&Qve(e,t,Zve)}var Xve=Yve,Jve=N2,eye=ZV,tye=Xve,nye=r2,rye=Fq,sye=zq,iye=Dj,aye=1,oye=2;function lye(e,t){return nye(e)&&rye(t)?sye(iye(e),t):function(n){var s=eye(n,e);return s===void 0&&s===t?tye(n,e):Jve(t,s,aye|oye)}}var cye=lye;function uye(e){return e}var jh=uye;function dye(e){return function(t){return t==null?void 0:t[e]}}var fye=dye,hye=u2;function mye(e){return function(t){return hye(t,e)}}var pye=mye,gye=fye,xye=pye,vye=r2,yye=Dj;function bye(e){return vye(e)?gye(yye(e)):xye(e)}var jye=bye,_ye=$ve,wye=cye,Nye=jh,Sye=Us,Cye=jye;function Pye(e){return typeof e=="function"?e:e==null?Nye:typeof e=="object"?Sye(e)?wye(e[0],e[1]):_ye(e):Cye(e)}var ao=Pye;function Aye(e,t,n,s){for(var i=e.length,a=n+(s?1:-1);s?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var Bq=Aye;function Eye(e){return e!==e}var Tye=Eye;function kye(e,t,n){for(var s=n-1,i=e.length;++s<i;)if(e[s]===t)return s;return-1}var Oye=kye,Mye=Bq,Iye=Tye,Rye=Oye;function Lye(e,t,n){return t===t?Rye(e,t,n):Mye(e,Iye,n)}var Dye=Lye,$ye=Dye;function Fye(e,t){var n=e==null?0:e.length;return!!n&&$ye(e,t,0)>-1}var zye=Fye;function Bye(e,t,n){for(var s=-1,i=e==null?0:e.length;++s<i;)if(n(t,e[s]))return!0;return!1}var Vye=Bye;function qye(){}var Uye=qye,sw=Lq,Hye=Uye,Wye=b2,Kye=1/0,Gye=sw&&1/Wye(new sw([,-0]))[1]==Kye?function(e){return new sw(e)}:Hye,Zye=Gye,Qye=Cq,Yye=zye,Xye=Vye,Jye=Aq,ebe=Zye,tbe=b2,nbe=200;function rbe(e,t,n){var s=-1,i=Yye,a=e.length,o=!0,l=[],c=l;if(n)o=!1,i=Xye;else if(a>=nbe){var d=t?null:ebe(e);if(d)return tbe(d);o=!1,i=Jye,c=new Qye}else c=t?[]:l;e:for(;++s<a;){var f=e[s],h=t?t(f):f;if(f=n||f!==0?f:0,o&&h===h){for(var p=c.length;p--;)if(c[p]===h)continue e;t&&c.push(h),l.push(f)}else i(c,h,n)||(c!==l&&c.push(h),l.push(f))}return l}var sbe=rbe,ibe=ao,abe=sbe;function obe(e,t){return e&&e.length?abe(e,ibe(t)):[]}var lbe=obe;const eM=on(lbe);function Vq(e,t,n){return t===!0?eM(e,n):Mt(t)?eM(e,t):e}function Pf(e){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pf(e)}var cbe=["ref"];function tM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function mo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tM(Object(n),!0).forEach(function(s){Jj(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ube(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nM(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Uq(s.key),s)}}function dbe(e,t,n){return t&&nM(e.prototype,t),n&&nM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fbe(e,t,n){return t=Iy(t),hbe(e,qq()?Reflect.construct(t,n||[],Iy(e).constructor):t.apply(e,n))}function hbe(e,t){if(t&&(Pf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mbe(e)}function mbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qq=function(){return!!e})()}function Iy(e){return Iy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Iy(e)}function pbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P1(e,t)}function P1(e,t){return P1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},P1(e,t)}function Jj(e,t,n){return t=Uq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uq(e){var t=gbe(e,"string");return Pf(t)=="symbol"?t:t+""}function gbe(e,t){if(Pf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Pf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function xbe(e,t){if(e==null)return{};var n=vbe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function vbe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function ybe(e){return e.value}function bbe(e,t){if(q.isValidElement(e))return q.cloneElement(e,t);if(typeof e=="function")return q.createElement(e,t);t.ref;var n=xbe(t,cbe);return q.createElement(y2,n)}var rM=1,Bs=function(e){function t(){var n;ube(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=fbe(this,t,[].concat(i)),Jj(n,"lastBoundingBox",{width:-1,height:-1}),n}return pbe(t,e),dbe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>rM||Math.abs(i.height-this.lastBoundingBox.height)>rM)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,s&&s(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?mo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var i=this.props,a=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,d=i.chartWidth,f=i.chartHeight,h,p;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&a==="vertical"){var v=this.getBBoxSnapshot();h={left:((d||0)-v.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var j=this.getBBoxSnapshot();p={top:((f||0)-j.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return mo(mo({},h),p)}},{key:"render",value:function(){var s=this,i=this.props,a=i.content,o=i.width,l=i.height,c=i.wrapperStyle,d=i.payloadUniqBy,f=i.payload,h=mo(mo({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return q.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(v){s.wrapperNode=v}},bbe(a,mo(mo({},this.props),{},{payload:Vq(f,d,ybe)})))}}],[{key:"getWithHeight",value:function(s,i){var a=mo(mo({},this.defaultProps),s.props),o=a.layout;return o==="vertical"&&We(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||i}:null}}])}(_.PureComponent);Jj(Bs,"displayName","Legend");Jj(Bs,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var sM=Eg,jbe=j2,_be=Us,iM=sM?sM.isConcatSpreadable:void 0;function wbe(e){return _be(e)||jbe(e)||!!(iM&&e&&e[iM])}var Nbe=wbe,Sbe=Tq,Cbe=Nbe;function Hq(e,t,n,s,i){var a=-1,o=e.length;for(n||(n=Cbe),i||(i=[]);++a<o;){var l=e[a];t>0&&n(l)?t>1?Hq(l,t-1,n,s,i):Sbe(i,l):s||(i[i.length]=l)}return i}var Wq=Hq;function Pbe(e){return function(t,n,s){for(var i=-1,a=Object(t),o=s(t),l=o.length;l--;){var c=o[e?l:++i];if(n(a[c],c,a)===!1)break}return t}}var Abe=Pbe,Ebe=Abe,Tbe=Ebe(),kbe=Tbe,Obe=kbe,Mbe=Xj;function Ibe(e,t){return e&&Obe(e,t,Mbe)}var Kq=Ibe,Rbe=Og;function Lbe(e,t){return function(n,s){if(n==null)return n;if(!Rbe(n))return e(n,s);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&s(o[a],a,o)!==!1;);return n}}var Dbe=Lbe,$be=Kq,Fbe=Dbe,zbe=Fbe($be),S2=zbe,Bbe=S2,Vbe=Og;function qbe(e,t){var n=-1,s=Vbe(e)?Array(e.length):[];return Bbe(e,function(i,a,o){s[++n]=t(i,a,o)}),s}var Gq=qbe;function Ube(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Hbe=Ube,aM=hh;function Wbe(e,t){if(e!==t){var n=e!==void 0,s=e===null,i=e===e,a=aM(e),o=t!==void 0,l=t===null,c=t===t,d=aM(t);if(!l&&!d&&!a&&e>t||a&&o&&c&&!l&&!d||s&&o&&c||!n&&c||!i)return 1;if(!s&&!a&&!d&&e<t||d&&n&&i&&!s&&!a||l&&n&&i||!o&&i||!c)return-1}return 0}var Kbe=Wbe,Gbe=Kbe;function Zbe(e,t,n){for(var s=-1,i=e.criteria,a=t.criteria,o=i.length,l=n.length;++s<o;){var c=Gbe(i[s],a[s]);if(c){if(s>=l)return c;var d=n[s];return c*(d=="desc"?-1:1)}}return e.index-t.index}var Qbe=Zbe,iw=c2,Ybe=u2,Xbe=ao,Jbe=Gq,eje=Hbe,tje=Mq,nje=Qbe,rje=jh,sje=Us;function ije(e,t,n){t.length?t=iw(t,function(a){return sje(a)?function(o){return Ybe(o,a.length===1?a[0]:a)}:a}):t=[rje];var s=-1;t=iw(t,tje(Xbe));var i=Jbe(e,function(a,o,l){var c=iw(t,function(d){return d(a)});return{criteria:c,index:++s,value:a}});return eje(i,function(a,o){return nje(a,o,n)})}var aje=ije;function oje(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var lje=oje,cje=lje,oM=Math.max;function uje(e,t,n){return t=oM(t===void 0?e.length-1:t,0),function(){for(var s=arguments,i=-1,a=oM(s.length-t,0),o=Array(a);++i<a;)o[i]=s[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=s[i];return l[t]=n(o),cje(e,this,l)}}var dje=uje;function fje(e){return function(){return e}}var hje=fje,mje=Tu,pje=function(){try{var e=mje(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Zq=pje,gje=hje,lM=Zq,xje=jh,vje=lM?function(e,t){return lM(e,"toString",{configurable:!0,enumerable:!1,value:gje(t),writable:!0})}:xje,yje=vje,bje=800,jje=16,_je=Date.now;function wje(e){var t=0,n=0;return function(){var s=_je(),i=jje-(s-n);if(n=s,i>0){if(++t>=bje)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Nje=wje,Sje=yje,Cje=Nje,Pje=Cje(Sje),Aje=Pje,Eje=jh,Tje=dje,kje=Aje;function Oje(e,t){return kje(Tje(e,t,Eje),e+"")}var Mje=Oje,Ije=i2,Rje=Og,Lje=_2,Dje=mc;function $je(e,t,n){if(!Dje(n))return!1;var s=typeof t;return(s=="number"?Rje(n)&&Lje(t,n.length):s=="string"&&t in n)?Ije(n[t],e):!1}var e0=$je,Fje=Wq,zje=aje,Bje=Mje,cM=e0,Vje=Bje(function(e,t){if(e==null)return[];var n=t.length;return n>1&&cM(e,t[0],t[1])?t=[]:n>2&&cM(t[0],t[1],t[2])&&(t=[t[0]]),zje(e,Fje(t,1),[])}),qje=Vje;const C2=on(qje);function mp(e){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mp(e)}function A1(){return A1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},A1.apply(this,arguments)}function Uje(e,t){return Gje(e)||Kje(e,t)||Wje(e,t)||Hje()}function Hje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wje(e,t){if(e){if(typeof e=="string")return uM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uM(e,t)}}function uM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Kje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Gje(e){if(Array.isArray(e))return e}function dM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function aw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dM(Object(n),!0).forEach(function(s){Zje(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Zje(e,t,n){return t=Qje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qje(e){var t=Yje(e,"string");return mp(t)=="symbol"?t:t+""}function Yje(e,t){if(mp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(mp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xje(e){return Array.isArray(e)&&Mr(e[0])&&Mr(e[1])?e.join(" ~ "):e}var Jje=function(t){var n=t.separator,s=n===void 0?" : ":n,i=t.contentStyle,a=i===void 0?{}:i,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,f=t.payload,h=t.formatter,p=t.itemSorter,v=t.wrapperClassName,j=t.labelClassName,g=t.label,x=t.labelFormatter,w=t.accessibilityLayer,N=w===void 0?!1:w,y=function(){if(f&&f.length){var D={padding:0,margin:0},z=(p?C2(f,p):f).map(function(V,K){if(V.type==="none")return null;var H=aw({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},l),W=V.formatter||h||Xje,B=V.value,$=V.name,G=B,ee=$;if(W&&G!=null&&ee!=null){var oe=W(B,$,V,K,f);if(Array.isArray(oe)){var fe=Uje(oe,2);G=fe[0],ee=fe[1]}else G=oe}return q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:H},Mr(ee)?q.createElement("span",{className:"recharts-tooltip-item-name"},ee):null,Mr(ee)?q.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,q.createElement("span",{className:"recharts-tooltip-item-value"},G),q.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return q.createElement("ul",{className:"recharts-tooltip-item-list",style:D},z)}return null},A=aw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),P=aw({margin:0},d),E=!Dt(g),C=E?g:"",S=zt("recharts-default-tooltip",v),k=zt("recharts-tooltip-label",j);E&&x&&f!==void 0&&f!==null&&(C=x(g,f));var I=N?{role:"status","aria-live":"assertive"}:{};return q.createElement("div",A1({className:S,style:A},I),q.createElement("p",{className:k,style:P},q.isValidElement(C)?C:"".concat(C)),y())};function pp(e){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pp(e)}function Hx(e,t,n){return t=e0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e0e(e){var t=t0e(e,"string");return pp(t)=="symbol"?t:t+""}function t0e(e,t){if(pp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(pp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tm="recharts-tooltip-wrapper",n0e={visibility:"hidden"};function r0e(e){var t=e.coordinate,n=e.translateX,s=e.translateY;return zt(tm,Hx(Hx(Hx(Hx({},"".concat(tm,"-right"),We(n)&&t&&We(t.x)&&n>=t.x),"".concat(tm,"-left"),We(n)&&t&&We(t.x)&&n<t.x),"".concat(tm,"-bottom"),We(s)&&t&&We(t.y)&&s>=t.y),"".concat(tm,"-top"),We(s)&&t&&We(t.y)&&s<t.y))}function fM(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.key,i=e.offsetTopLeft,a=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(a&&We(a[s]))return a[s];var f=n[s]-l-i,h=n[s]+i;if(t[s])return o[s]?f:h;if(o[s]){var p=f,v=c[s];return p<v?Math.max(h,c[s]):Math.max(f,c[s])}var j=h+l,g=c[s]+d;return j>g?Math.max(f,c[s]):Math.max(h,c[s])}function s0e(e){var t=e.translateX,n=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function i0e(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.offsetTopLeft,i=e.position,a=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,f,h;return o.height>0&&o.width>0&&n?(f=fM({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=fM({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=s0e({translateX:f,translateY:h,useTranslate3d:l})):d=n0e,{cssProperties:d,cssClasses:r0e({translateX:f,translateY:h,coordinate:n})}}function Af(e){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Af(e)}function hM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function mM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hM(Object(n),!0).forEach(function(s){T1(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function a0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o0e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Yq(s.key),s)}}function l0e(e,t,n){return t&&o0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function c0e(e,t,n){return t=Ry(t),u0e(e,Qq()?Reflect.construct(t,n||[],Ry(e).constructor):t.apply(e,n))}function u0e(e,t){if(t&&(Af(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d0e(e)}function d0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qq=function(){return!!e})()}function Ry(e){return Ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ry(e)}function f0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E1(e,t)}function E1(e,t){return E1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},E1(e,t)}function T1(e,t,n){return t=Yq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yq(e){var t=h0e(e,"string");return Af(t)=="symbol"?t:t+""}function h0e(e,t){if(Af(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Af(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pM=1,m0e=function(e){function t(){var n;a0e(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=c0e(this,t,[].concat(i)),T1(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),T1(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),n}return f0e(t,e),l0e(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>pM||Math.abs(s.height-this.state.lastBoundingBox.height)>pM)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.children,f=i.coordinate,h=i.hasPayload,p=i.isAnimationActive,v=i.offset,j=i.position,g=i.reverseDirection,x=i.useTranslate3d,w=i.viewBox,N=i.wrapperStyle,y=i0e({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:v,position:j,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:w}),A=y.cssClasses,P=y.cssProperties,E=mM(mM({transition:p&&a?"transform ".concat(l,"ms ").concat(c):void 0},P),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},N);return q.createElement("div",{tabIndex:-1,className:A,style:E,ref:function(S){s.wrapperNode=S}},d)}}])}(_.PureComponent),p0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ku={isSsr:p0e()};function Ef(e){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ef(e)}function gM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function xM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gM(Object(n),!0).forEach(function(s){P2(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function g0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x0e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Jq(s.key),s)}}function v0e(e,t,n){return t&&x0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function y0e(e,t,n){return t=Ly(t),b0e(e,Xq()?Reflect.construct(t,n||[],Ly(e).constructor):t.apply(e,n))}function b0e(e,t){if(t&&(Ef(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j0e(e)}function j0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xq=function(){return!!e})()}function Ly(e){return Ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ly(e)}function _0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k1(e,t)}function k1(e,t){return k1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},k1(e,t)}function P2(e,t,n){return t=Jq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jq(e){var t=w0e(e,"string");return Ef(t)=="symbol"?t:t+""}function w0e(e,t){if(Ef(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ef(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function N0e(e){return e.dataKey}function S0e(e,t){return q.isValidElement(e)?q.cloneElement(e,t):typeof e=="function"?q.createElement(e,t):q.createElement(Jje,t)}var Ar=function(e){function t(){return g0e(this,t),y0e(this,t,arguments)}return _0e(t,e),v0e(t,[{key:"render",value:function(){var s=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.content,f=i.coordinate,h=i.filterNull,p=i.isAnimationActive,v=i.offset,j=i.payload,g=i.payloadUniqBy,x=i.position,w=i.reverseDirection,N=i.useTranslate3d,y=i.viewBox,A=i.wrapperStyle,P=j??[];h&&P.length&&(P=Vq(j.filter(function(C){return C.value!=null&&(C.hide!==!0||s.props.includeHidden)}),g,N0e));var E=P.length>0;return q.createElement(m0e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:p,active:a,coordinate:f,hasPayload:E,offset:v,position:x,reverseDirection:w,useTranslate3d:N,viewBox:y,wrapperStyle:A},S0e(d,xM(xM({},this.props),{},{payload:P})))}}])}(_.PureComponent);P2(Ar,"displayName","Tooltip");P2(Ar,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ku.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var C0e=io,P0e=function(){return C0e.Date.now()},A0e=P0e,E0e=/\s/;function T0e(e){for(var t=e.length;t--&&E0e.test(e.charAt(t)););return t}var k0e=T0e,O0e=k0e,M0e=/^\s+/;function I0e(e){return e&&e.slice(0,O0e(e)+1).replace(M0e,"")}var R0e=I0e,L0e=R0e,vM=mc,D0e=hh,yM=NaN,$0e=/^[-+]0x[0-9a-f]+$/i,F0e=/^0b[01]+$/i,z0e=/^0o[0-7]+$/i,B0e=parseInt;function V0e(e){if(typeof e=="number")return e;if(D0e(e))return yM;if(vM(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=vM(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=L0e(e);var n=F0e.test(e);return n||z0e.test(e)?B0e(e.slice(2),n?2:8):$0e.test(e)?yM:+e}var eU=V0e,q0e=mc,ow=A0e,bM=eU,U0e="Expected a function",H0e=Math.max,W0e=Math.min;function K0e(e,t,n){var s,i,a,o,l,c,d=0,f=!1,h=!1,p=!0;if(typeof e!="function")throw new TypeError(U0e);t=bM(t)||0,q0e(n)&&(f=!!n.leading,h="maxWait"in n,a=h?H0e(bM(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p);function v(E){var C=s,S=i;return s=i=void 0,d=E,o=e.apply(S,C),o}function j(E){return d=E,l=setTimeout(w,t),f?v(E):o}function g(E){var C=E-c,S=E-d,k=t-C;return h?W0e(k,a-S):k}function x(E){var C=E-c,S=E-d;return c===void 0||C>=t||C<0||h&&S>=a}function w(){var E=ow();if(x(E))return N(E);l=setTimeout(w,g(E))}function N(E){return l=void 0,p&&s?v(E):(s=i=void 0,o)}function y(){l!==void 0&&clearTimeout(l),d=0,s=c=i=l=void 0}function A(){return l===void 0?o:N(ow())}function P(){var E=ow(),C=x(E);if(s=arguments,i=this,c=E,C){if(l===void 0)return j(c);if(h)return clearTimeout(l),l=setTimeout(w,t),v(c)}return l===void 0&&(l=setTimeout(w,t)),o}return P.cancel=y,P.flush=A,P}var G0e=K0e,Z0e=G0e,Q0e=mc,Y0e="Expected a function";function X0e(e,t,n){var s=!0,i=!0;if(typeof e!="function")throw new TypeError(Y0e);return Q0e(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),Z0e(e,t,{leading:s,maxWait:t,trailing:i})}var J0e=X0e;const tU=on(J0e);function gp(e){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(e)}function jM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Wx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jM(Object(n),!0).forEach(function(s){e_e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function e_e(e,t,n){return t=t_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t_e(e){var t=n_e(e,"string");return gp(t)=="symbol"?t:t+""}function n_e(e,t){if(gp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(gp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r_e(e,t){return o_e(e)||a_e(e,t)||i_e(e,t)||s_e()}function s_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i_e(e,t){if(e){if(typeof e=="string")return _M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _M(e,t)}}function _M(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function a_e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function o_e(e){if(Array.isArray(e))return e}var Ua=_.forwardRef(function(e,t){var n=e.aspect,s=e.initialDimension,i=s===void 0?{width:-1,height:-1}:s,a=e.width,o=a===void 0?"100%":a,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,f=d===void 0?0:d,h=e.minHeight,p=e.maxHeight,v=e.children,j=e.debounce,g=j===void 0?0:j,x=e.id,w=e.className,N=e.onResize,y=e.style,A=y===void 0?{}:y,P=_.useRef(null),E=_.useRef();E.current=N,_.useImperativeHandle(t,function(){return Object.defineProperty(P.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),P.current},configurable:!0})});var C=_.useState({containerWidth:i.width,containerHeight:i.height}),S=r_e(C,2),k=S[0],I=S[1],R=_.useCallback(function(z,V){I(function(K){var H=Math.round(z),W=Math.round(V);return K.containerWidth===H&&K.containerHeight===W?K:{containerWidth:H,containerHeight:W}})},[]);_.useEffect(function(){var z=function($){var G,ee=$[0].contentRect,oe=ee.width,fe=ee.height;R(oe,fe),(G=E.current)===null||G===void 0||G.call(E,oe,fe)};g>0&&(z=tU(z,g,{trailing:!0,leading:!1}));var V=new ResizeObserver(z),K=P.current.getBoundingClientRect(),H=K.width,W=K.height;return R(H,W),V.observe(P.current),function(){V.disconnect()}},[R,g]);var D=_.useMemo(function(){var z=k.containerWidth,V=k.containerHeight;if(z<0||V<0)return null;aa(zc(o)||zc(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),aa(!n||n>0,"The aspect(%s) must be greater than zero.",n);var K=zc(o)?z:o,H=zc(c)?V:c;n&&n>0&&(K?H=K/n:H&&(K=H*n),p&&H>p&&(H=p)),aa(K>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,K,H,o,c,f,h,n);var W=!Array.isArray(v)&&Io(v.type).endsWith("Chart");return q.Children.map(v,function(B){return q.isValidElement(B)?_.cloneElement(B,Wx({width:K,height:H},W?{style:Wx({height:"100%",width:"100%",maxHeight:H,maxWidth:K},B.props.style)}:{})):B})},[n,v,c,p,h,f,k,o]);return q.createElement("div",{id:x?"".concat(x):void 0,className:zt("recharts-responsive-container",w),style:Wx(Wx({},A),{},{width:o,height:c,minWidth:f,minHeight:h,maxHeight:p}),ref:P},D)}),_h=function(t){return null};_h.displayName="Cell";function xp(e){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xp(e)}function wM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function O1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wM(Object(n),!0).forEach(function(s){l_e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function l_e(e,t,n){return t=c_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c_e(e){var t=u_e(e,"string");return xp(t)=="symbol"?t:t+""}function u_e(e,t){if(xp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(xp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rd={widthCache:{},cacheCount:0},d_e=2e3,f_e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},NM="recharts_measurement_span";function h_e(e){var t=O1({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Om=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ku.isSsr)return{width:0,height:0};var s=h_e(n),i=JSON.stringify({text:t,copyStyle:s});if(rd.widthCache[i])return rd.widthCache[i];try{var a=document.getElementById(NM);a||(a=document.createElement("span"),a.setAttribute("id",NM),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=O1(O1({},f_e),s);Object.assign(a.style,o),a.textContent="".concat(t);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return rd.widthCache[i]=c,++rd.cacheCount>d_e&&(rd.cacheCount=0,rd.widthCache={}),c}catch{return{width:0,height:0}}},m_e=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function vp(e){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(e)}function Dy(e,t){return v_e(e)||x_e(e,t)||g_e(e,t)||p_e()}function p_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g_e(e,t){if(e){if(typeof e=="string")return SM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SM(e,t)}}function SM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function x_e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function v_e(e){if(Array.isArray(e))return e}function y_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CM(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,j_e(s.key),s)}}function b_e(e,t,n){return t&&CM(e.prototype,t),n&&CM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function j_e(e){var t=__e(e,"string");return vp(t)=="symbol"?t:t+""}function __e(e,t){if(vp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(vp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var PM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,w_e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,N_e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},S_e=Object.keys(nU),Sd="NaN";function C_e(e,t){return e*nU[t]}var Kx=function(){function e(t,n){y_e(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!w_e.test(n)&&(this.num=NaN,this.unit=""),S_e.includes(n)&&(this.num=C_e(t,n),this.unit="px")}return b_e(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var s,i=(s=N_e.exec(n))!==null&&s!==void 0?s:[],a=Dy(i,3),o=a[1],l=a[2];return new e(parseFloat(o),l??"")}}])}();function rU(e){if(e.includes(Sd))return Sd;for(var t=e;t.includes("*")||t.includes("/");){var n,s=(n=PM.exec(t))!==null&&n!==void 0?n:[],i=Dy(s,4),a=i[1],o=i[2],l=i[3],c=Kx.parse(a??""),d=Kx.parse(l??""),f=o==="*"?c.multiply(d):c.divide(d);if(f.isNaN())return Sd;t=t.replace(PM,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,p=(h=AM.exec(t))!==null&&h!==void 0?h:[],v=Dy(p,4),j=v[1],g=v[2],x=v[3],w=Kx.parse(j??""),N=Kx.parse(x??""),y=g==="+"?w.add(N):w.subtract(N);if(y.isNaN())return Sd;t=t.replace(AM,y.toString())}return t}var EM=/\(([^()]*)\)/;function P_e(e){for(var t=e;t.includes("(");){var n=EM.exec(t),s=Dy(n,2),i=s[1];t=t.replace(EM,rU(i))}return t}function A_e(e){var t=e.replace(/\s+/g,"");return t=P_e(t),t=rU(t),t}function E_e(e){try{return A_e(e)}catch{return Sd}}function lw(e){var t=E_e(e.slice(5,-1));return t===Sd?"":t}var T_e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],k_e=["dx","dy","angle","className","breakAll"];function M1(){return M1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},M1.apply(this,arguments)}function TM(e,t){if(e==null)return{};var n=O_e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function O_e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function kM(e,t){return L_e(e)||R_e(e,t)||I_e(e,t)||M_e()}function M_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I_e(e,t){if(e){if(typeof e=="string")return OM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OM(e,t)}}function OM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function R_e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function L_e(e){if(Array.isArray(e))return e}var sU=/[ \f\n\r\t\v\u2028\u2029]+/,iU=function(t){var n=t.children,s=t.breakAll,i=t.style;try{var a=[];Dt(n)||(s?a=n.toString().split(""):a=n.toString().split(sU));var o=a.map(function(c){return{word:c,width:Om(c,i).width}}),l=s?0:Om("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},D_e=function(t,n,s,i,a){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,f=We(o),h=l,p=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return K.reduce(function(H,W){var B=W.word,$=W.width,G=H[H.length-1];if(G&&(i==null||a||G.width+$+s<Number(i)))G.words.push(B),G.width+=$+s;else{var ee={words:[B],width:$};H.push(ee)}return H},[])},v=p(n),j=function(K){return K.reduce(function(H,W){return H.width>W.width?H:W})};if(!f)return v;for(var g="",x=function(K){var H=h.slice(0,K),W=iU({breakAll:d,style:c,children:H+g}).wordsWithComputedWidth,B=p(W),$=B.length>o||j(B).width>Number(i);return[$,B]},w=0,N=h.length-1,y=0,A;w<=N&&y<=h.length-1;){var P=Math.floor((w+N)/2),E=P-1,C=x(E),S=kM(C,2),k=S[0],I=S[1],R=x(P),D=kM(R,1),z=D[0];if(!k&&!z&&(w=P+1),k&&z&&(N=P-1),!k&&z){A=I;break}y++}return A||v},MM=function(t){var n=Dt(t)?[]:t.toString().split(sU);return[{words:n}]},$_e=function(t){var n=t.width,s=t.scaleToFit,i=t.children,a=t.style,o=t.breakAll,l=t.maxLines;if((n||s)&&!ku.isSsr){var c,d,f=iU({breakAll:o,children:i,style:a});if(f){var h=f.wordsWithComputedWidth,p=f.spaceWidth;c=h,d=p}else return MM(i);return D_e({breakAll:o,children:i,maxLines:l,style:a},c,d,n,s)}return MM(i)},IM="#808080",vu=function(t){var n=t.x,s=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,f=t.scaleToFit,h=f===void 0?!1:f,p=t.textAnchor,v=p===void 0?"start":p,j=t.verticalAnchor,g=j===void 0?"end":j,x=t.fill,w=x===void 0?IM:x,N=TM(t,T_e),y=_.useMemo(function(){return $_e({breakAll:N.breakAll,children:N.children,maxLines:N.maxLines,scaleToFit:h,style:N.style,width:N.width})},[N.breakAll,N.children,N.maxLines,h,N.style,N.width]),A=N.dx,P=N.dy,E=N.angle,C=N.className,S=N.breakAll,k=TM(N,k_e);if(!Mr(s)||!Mr(a))return null;var I=s+(We(A)?A:0),R=a+(We(P)?P:0),D;switch(g){case"start":D=lw("calc(".concat(d,")"));break;case"middle":D=lw("calc(".concat((y.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:D=lw("calc(".concat(y.length-1," * -").concat(l,")"));break}var z=[];if(h){var V=y[0].width,K=N.width;z.push("scale(".concat((We(K)?K/V:1)/V,")"))}return E&&z.push("rotate(".concat(E,", ").concat(I,", ").concat(R,")")),z.length&&(k.transform=z.join(" ")),q.createElement("text",M1({},wt(k,!0),{x:I,y:R,className:zt("recharts-text",C),textAnchor:v,fill:w.includes("url")?IM:w}),y.map(function(H,W){var B=H.words.join(S?"":" ");return q.createElement("tspan",{x:I,dy:W===0?D:l,key:"".concat(B,"-").concat(W)},B)}))};function Hl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function F_e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function A2(e){let t,n,s;e.length!==2?(t=Hl,n=(l,c)=>Hl(e(l),c),s=(l,c)=>e(l)-c):(t=e===Hl||e===F_e?e:z_e,n=e,s=e);function i(l,c,d=0,f=l.length){if(d<f){if(t(c,c)!==0)return f;do{const h=d+f>>>1;n(l[h],c)<0?d=h+1:f=h}while(d<f)}return d}function a(l,c,d=0,f=l.length){if(d<f){if(t(c,c)!==0)return f;do{const h=d+f>>>1;n(l[h],c)<=0?d=h+1:f=h}while(d<f)}return d}function o(l,c,d=0,f=l.length){const h=i(l,c,d,f-1);return h>d&&s(l[h-1],c)>-s(l[h],c)?h-1:h}return{left:i,center:o,right:a}}function z_e(){return 0}function aU(e){return e===null?NaN:+e}function*B_e(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const V_e=A2(Hl),Mg=V_e.right;A2(aU).center;class RM extends Map{constructor(t,n=H_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[s,i]of t)this.set(s,i)}get(t){return super.get(LM(this,t))}has(t){return super.has(LM(this,t))}set(t,n){return super.set(q_e(this,t),n)}delete(t){return super.delete(U_e(this,t))}}function LM({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function q_e({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function U_e({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(s),e.delete(s)),n}function H_e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function W_e(e=Hl){if(e===Hl)return oU;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const s=e(t,n);return s||s===0?s:(e(n,n)===0)-(e(t,t)===0)}}function oU(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const K_e=Math.sqrt(50),G_e=Math.sqrt(10),Z_e=Math.sqrt(2);function $y(e,t,n){const s=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(s)),a=s/Math.pow(10,i),o=a>=K_e?10:a>=G_e?5:a>=Z_e?2:1;let l,c,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,i)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=n&&n<2?$y(e,t,n*2):[l,c,d]}function I1(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const s=t<e,[i,a,o]=s?$y(t,e,n):$y(e,t,n);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(s)if(o<0)for(let d=0;d<l;++d)c[d]=(a-d)/-o;else for(let d=0;d<l;++d)c[d]=(a-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(i+d)/-o;else for(let d=0;d<l;++d)c[d]=(i+d)*o;return c}function R1(e,t,n){return t=+t,e=+e,n=+n,$y(e,t,n)[2]}function L1(e,t,n){t=+t,e=+e,n=+n;const s=t<e,i=s?R1(t,e,n):R1(e,t,n);return(s?-1:1)*(i<0?1/-i:i)}function DM(e,t){let n;for(const s of e)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function $M(e,t){let n;for(const s of e)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function lU(e,t,n=0,s=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),s=Math.floor(Math.min(e.length-1,s)),!(n<=t&&t<=s))return e;for(i=i===void 0?oU:W_e(i);s>n;){if(s-n>600){const c=s-n+1,d=t-n+1,f=Math.log(c),h=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*h*(c-h)/c)*(d-c/2<0?-1:1),v=Math.max(n,Math.floor(t-d*h/c+p)),j=Math.min(s,Math.floor(t+(c-d)*h/c+p));lU(e,t,v,j,i)}const a=e[t];let o=n,l=s;for(nm(e,n,t),i(e[s],a)>0&&nm(e,n,s);o<l;){for(nm(e,o,l),++o,--l;i(e[o],a)<0;)++o;for(;i(e[l],a)>0;)--l}i(e[n],a)===0?nm(e,n,l):(++l,nm(e,l,s)),l<=t&&(n=l+1),t<=l&&(s=l-1)}return e}function nm(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function Q_e(e,t,n){if(e=Float64Array.from(B_e(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return $M(e);if(t>=1)return DM(e);var s,i=(s-1)*t,a=Math.floor(i),o=DM(lU(e,a).subarray(0,a+1)),l=$M(e.subarray(a+1));return o+(l-o)*(i-a)}}function Y_e(e,t,n=aU){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+n(e[0],0,e);if(t>=1)return+n(e[s-1],s-1,e);var s,i=(s-1)*t,a=Math.floor(i),o=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return o+(l-o)*(i-a)}}function X_e(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var s=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++s<i;)a[s]=e+s*n;return a}function zi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function rl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const D1=Symbol("implicit");function E2(){var e=new RM,t=[],n=[],s=D1;function i(a){let o=e.get(a);if(o===void 0){if(s!==D1)return s;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new RM;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(s=a,i):s},i.copy=function(){return E2(t,n).unknown(s)},zi.apply(i,arguments),i}function yp(){var e=E2().unknown(void 0),t=e.domain,n=e.range,s=0,i=1,a,o,l=!1,c=0,d=0,f=.5;delete e.unknown;function h(){var p=t().length,v=i<s,j=v?i:s,g=v?s:i;a=(g-j)/Math.max(1,p-c+d*2),l&&(a=Math.floor(a)),j+=(g-j-a*(p-c))*f,o=a*(1-c),l&&(j=Math.round(j),o=Math.round(o));var x=X_e(p).map(function(w){return j+a*w});return n(v?x.reverse():x)}return e.domain=function(p){return arguments.length?(t(p),h()):t()},e.range=function(p){return arguments.length?([s,i]=p,s=+s,i=+i,h()):[s,i]},e.rangeRound=function(p){return[s,i]=p,s=+s,i=+i,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(p){return arguments.length?(l=!!p,h()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,d=+p),h()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),h()):c},e.paddingOuter=function(p){return arguments.length?(d=+p,h()):d},e.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),h()):f},e.copy=function(){return yp(t(),[s,i]).round(l).paddingInner(c).paddingOuter(d).align(f)},zi.apply(h(),arguments)}function cU(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return cU(t())},e}function Mm(){return cU(yp.apply(null,arguments).paddingInner(1))}function T2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function uU(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function Ig(){}var bp=.7,Fy=1/bp,Ud="\\s*([+-]?\\d+)\\s*",jp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ha="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",J_e=/^#([0-9a-f]{3,8})$/,ewe=new RegExp(`^rgb\\(${Ud},${Ud},${Ud}\\)$`),twe=new RegExp(`^rgb\\(${Ha},${Ha},${Ha}\\)$`),nwe=new RegExp(`^rgba\\(${Ud},${Ud},${Ud},${jp}\\)$`),rwe=new RegExp(`^rgba\\(${Ha},${Ha},${Ha},${jp}\\)$`),swe=new RegExp(`^hsl\\(${jp},${Ha},${Ha}\\)$`),iwe=new RegExp(`^hsla\\(${jp},${Ha},${Ha},${jp}\\)$`),FM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};T2(Ig,_p,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zM,formatHex:zM,formatHex8:awe,formatHsl:owe,formatRgb:BM,toString:BM});function zM(){return this.rgb().formatHex()}function awe(){return this.rgb().formatHex8()}function owe(){return dU(this).formatHsl()}function BM(){return this.rgb().formatRgb()}function _p(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=J_e.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?VM(t):n===3?new Ds(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Gx(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Gx(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ewe.exec(e))?new Ds(t[1],t[2],t[3],1):(t=twe.exec(e))?new Ds(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nwe.exec(e))?Gx(t[1],t[2],t[3],t[4]):(t=rwe.exec(e))?Gx(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=swe.exec(e))?HM(t[1],t[2]/100,t[3]/100,1):(t=iwe.exec(e))?HM(t[1],t[2]/100,t[3]/100,t[4]):FM.hasOwnProperty(e)?VM(FM[e]):e==="transparent"?new Ds(NaN,NaN,NaN,0):null}function VM(e){return new Ds(e>>16&255,e>>8&255,e&255,1)}function Gx(e,t,n,s){return s<=0&&(e=t=n=NaN),new Ds(e,t,n,s)}function lwe(e){return e instanceof Ig||(e=_p(e)),e?(e=e.rgb(),new Ds(e.r,e.g,e.b,e.opacity)):new Ds}function $1(e,t,n,s){return arguments.length===1?lwe(e):new Ds(e,t,n,s??1)}function Ds(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}T2(Ds,$1,uU(Ig,{brighter(e){return e=e==null?Fy:Math.pow(Fy,e),new Ds(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?bp:Math.pow(bp,e),new Ds(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ds(eu(this.r),eu(this.g),eu(this.b),zy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qM,formatHex:qM,formatHex8:cwe,formatRgb:UM,toString:UM}));function qM(){return`#${Bc(this.r)}${Bc(this.g)}${Bc(this.b)}`}function cwe(){return`#${Bc(this.r)}${Bc(this.g)}${Bc(this.b)}${Bc((isNaN(this.opacity)?1:this.opacity)*255)}`}function UM(){const e=zy(this.opacity);return`${e===1?"rgb(":"rgba("}${eu(this.r)}, ${eu(this.g)}, ${eu(this.b)}${e===1?")":`, ${e})`}`}function zy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function eu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Bc(e){return e=eu(e),(e<16?"0":"")+e.toString(16)}function HM(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ji(e,t,n,s)}function dU(e){if(e instanceof Ji)return new Ji(e.h,e.s,e.l,e.opacity);if(e instanceof Ig||(e=_p(e)),!e)return new Ji;if(e instanceof Ji)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,i=Math.min(t,n,s),a=Math.max(t,n,s),o=NaN,l=a-i,c=(a+i)/2;return l?(t===a?o=(n-s)/l+(n<s)*6:n===a?o=(s-t)/l+2:o=(t-n)/l+4,l/=c<.5?a+i:2-a-i,o*=60):l=c>0&&c<1?0:o,new Ji(o,l,c,e.opacity)}function uwe(e,t,n,s){return arguments.length===1?dU(e):new Ji(e,t,n,s??1)}function Ji(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}T2(Ji,uwe,uU(Ig,{brighter(e){return e=e==null?Fy:Math.pow(Fy,e),new Ji(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?bp:Math.pow(bp,e),new Ji(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,i=2*n-s;return new Ds(cw(e>=240?e-240:e+120,i,s),cw(e,i,s),cw(e<120?e+240:e-120,i,s),this.opacity)},clamp(){return new Ji(WM(this.h),Zx(this.s),Zx(this.l),zy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zy(this.opacity);return`${e===1?"hsl(":"hsla("}${WM(this.h)}, ${Zx(this.s)*100}%, ${Zx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function WM(e){return e=(e||0)%360,e<0?e+360:e}function Zx(e){return Math.max(0,Math.min(1,e||0))}function cw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const k2=e=>()=>e;function dwe(e,t){return function(n){return e+n*t}}function fwe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function hwe(e){return(e=+e)==1?fU:function(t,n){return n-t?fwe(t,n,e):k2(isNaN(t)?n:t)}}function fU(e,t){var n=t-e;return n?dwe(e,n):k2(isNaN(e)?t:e)}const KM=function e(t){var n=hwe(t);function s(i,a){var o=n((i=$1(i)).r,(a=$1(a)).r),l=n(i.g,a.g),c=n(i.b,a.b),d=fU(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=l(f),i.b=c(f),i.opacity=d(f),i+""}}return s.gamma=e,s}(1);function mwe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),i;return function(a){for(i=0;i<n;++i)s[i]=e[i]*(1-a)+t[i]*a;return s}}function pwe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gwe(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,i=new Array(s),a=new Array(n),o;for(o=0;o<s;++o)i[o]=wh(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<s;++o)a[o]=i[o](l);return a}}function xwe(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function By(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function vwe(e,t){var n={},s={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=wh(e[i],t[i]):s[i]=t[i];return function(a){for(i in n)s[i]=n[i](a);return s}}var F1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uw=new RegExp(F1.source,"g");function ywe(e){return function(){return e}}function bwe(e){return function(t){return e(t)+""}}function jwe(e,t){var n=F1.lastIndex=uw.lastIndex=0,s,i,a,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=F1.exec(e))&&(i=uw.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(s=s[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:By(s,i)})),n=uw.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?bwe(c[0].x):ywe(t):(t=c.length,function(d){for(var f=0,h;f<t;++f)l[(h=c[f]).i]=h.x(d);return l.join("")})}function wh(e,t){var n=typeof t,s;return t==null||n==="boolean"?k2(t):(n==="number"?By:n==="string"?(s=_p(t))?(t=s,KM):jwe:t instanceof _p?KM:t instanceof Date?xwe:pwe(t)?mwe:Array.isArray(t)?gwe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?vwe:By)(e,t)}function O2(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function _we(e,t){t===void 0&&(t=e,e=wh);for(var n=0,s=t.length-1,i=t[0],a=new Array(s<0?0:s);n<s;)a[n]=e(i,i=t[++n]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return a[l](o-l)}}function wwe(e){return function(){return e}}function Vy(e){return+e}var GM=[0,1];function _s(e){return e}function z1(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:wwe(isNaN(t)?NaN:.5)}function Nwe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(s){return Math.max(e,Math.min(t,s))}}function Swe(e,t,n){var s=e[0],i=e[1],a=t[0],o=t[1];return i<s?(s=z1(i,s),a=n(o,a)):(s=z1(s,i),a=n(a,o)),function(l){return a(s(l))}}function Cwe(e,t,n){var s=Math.min(e.length,t.length)-1,i=new Array(s),a=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)i[o]=z1(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var c=Mg(e,l,1,s)-1;return a[c](i[c](l))}}function Rg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function t0(){var e=GM,t=GM,n=wh,s,i,a,o=_s,l,c,d;function f(){var p=Math.min(e.length,t.length);return o!==_s&&(o=Nwe(e[0],e[p-1])),l=p>2?Cwe:Swe,c=d=null,h}function h(p){return p==null||isNaN(p=+p)?a:(c||(c=l(e.map(s),t,n)))(s(o(p)))}return h.invert=function(p){return o(i((d||(d=l(t,e.map(s),By)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,Vy),f()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=O2,f()},h.clamp=function(p){return arguments.length?(o=p?!0:_s,f()):o!==_s},h.interpolate=function(p){return arguments.length?(n=p,f()):n},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,v){return s=p,i=v,f()}}function M2(){return t0()(_s,_s)}function Pwe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function qy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function Tf(e){return e=qy(Math.abs(e)),e?e[1]:NaN}function Awe(e,t){return function(n,s){for(var i=n.length,a=[],o=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),a.push(n.substring(i-=l,i+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function Ewe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Twe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wp(e){if(!(t=Twe.exec(e)))throw new Error("invalid format: "+e);var t;return new I2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}wp.prototype=I2.prototype;function I2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}I2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kwe(e){e:for(var t=e.length,n=1,s=-1,i;n<t;++n)switch(e[n]){case".":s=i=n;break;case"0":s===0&&(s=n),i=n;break;default:if(!+e[n])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(i+1):e}var hU;function Owe(e,t){var n=qy(e,t);if(!n)return e+"";var s=n[0],i=n[1],a=i-(hU=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=s.length;return a===o?s:a>o?s+new Array(a-o+1).join("0"):a>0?s.slice(0,a)+"."+s.slice(a):"0."+new Array(1-a).join("0")+qy(e,Math.max(0,t+a-1))[0]}function ZM(e,t){var n=qy(e,t);if(!n)return e+"";var s=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+s:s.length>i+1?s.slice(0,i+1)+"."+s.slice(i+1):s+new Array(i-s.length+2).join("0")}const QM={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Pwe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ZM(e*100,t),r:ZM,s:Owe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function YM(e){return e}var XM=Array.prototype.map,JM=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Mwe(e){var t=e.grouping===void 0||e.thousands===void 0?YM:Awe(XM.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?YM:Ewe(XM.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=wp(h);var p=h.fill,v=h.align,j=h.sign,g=h.symbol,x=h.zero,w=h.width,N=h.comma,y=h.precision,A=h.trim,P=h.type;P==="n"?(N=!0,P="g"):QM[P]||(y===void 0&&(y=12),A=!0,P="g"),(x||p==="0"&&v==="=")&&(x=!0,p="0",v="=");var E=g==="$"?n:g==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",C=g==="$"?s:/[%p]/.test(P)?o:"",S=QM[P],k=/[defgprs%]/.test(P);y=y===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function I(R){var D=E,z=C,V,K,H;if(P==="c")z=S(R)+z,R="";else{R=+R;var W=R<0||1/R<0;if(R=isNaN(R)?c:S(Math.abs(R),y),A&&(R=kwe(R)),W&&+R==0&&j!=="+"&&(W=!1),D=(W?j==="("?j:l:j==="-"||j==="("?"":j)+D,z=(P==="s"?JM[8+hU/3]:"")+z+(W&&j==="("?")":""),k){for(V=-1,K=R.length;++V<K;)if(H=R.charCodeAt(V),48>H||H>57){z=(H===46?i+R.slice(V+1):R.slice(V))+z,R=R.slice(0,V);break}}}N&&!x&&(R=t(R,1/0));var B=D.length+R.length+z.length,$=B<w?new Array(w-B+1).join(p):"";switch(N&&x&&(R=t($+R,$.length?w-z.length:1/0),$=""),v){case"<":R=D+R+z+$;break;case"=":R=D+$+R+z;break;case"^":R=$.slice(0,B=$.length>>1)+D+R+z+$.slice(B);break;default:R=$+D+R+z;break}return a(R)}return I.toString=function(){return h+""},I}function f(h,p){var v=d((h=wp(h),h.type="f",h)),j=Math.max(-8,Math.min(8,Math.floor(Tf(p)/3)))*3,g=Math.pow(10,-j),x=JM[8+j/3];return function(w){return v(g*w)+x}}return{format:d,formatPrefix:f}}var Qx,R2,mU;Iwe({thousands:",",grouping:[3],currency:["$",""]});function Iwe(e){return Qx=Mwe(e),R2=Qx.format,mU=Qx.formatPrefix,Qx}function Rwe(e){return Math.max(0,-Tf(Math.abs(e)))}function Lwe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Tf(t)/3)))*3-Tf(Math.abs(e)))}function Dwe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Tf(t)-Tf(e))+1}function pU(e,t,n,s){var i=L1(e,t,n),a;switch(s=wp(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(a=Lwe(i,o))&&(s.precision=a),mU(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(a=Dwe(i,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=a-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(a=Rwe(i))&&(s.precision=a-(s.type==="%")*2);break}}return R2(s)}function pc(e){var t=e.domain;return e.ticks=function(n){var s=t();return I1(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var i=t();return pU(i[0],i[i.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),i=0,a=s.length-1,o=s[i],l=s[a],c,d,f=10;for(l<o&&(d=o,o=l,l=d,d=i,i=a,a=d);f-- >0;){if(d=R1(o,l,n),d===c)return s[i]=o,s[a]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function Uy(){var e=M2();return e.copy=function(){return Rg(e,Uy())},zi.apply(e,arguments),pc(e)}function gU(e){var t;function n(s){return s==null||isNaN(s=+s)?t:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(e=Array.from(s,Vy),n):e.slice()},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return gU(e).unknown(t)},e=arguments.length?Array.from(e,Vy):[0,1],pc(n)}function xU(e,t){e=e.slice();var n=0,s=e.length-1,i=e[n],a=e[s],o;return a<i&&(o=n,n=s,s=o,o=i,i=a,a=o),e[n]=t.floor(i),e[s]=t.ceil(a),e}function eI(e){return Math.log(e)}function tI(e){return Math.exp(e)}function $we(e){return-Math.log(-e)}function Fwe(e){return-Math.exp(-e)}function zwe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Bwe(e){return e===10?zwe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Vwe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function nI(e){return(t,n)=>-e(-t,n)}function L2(e){const t=e(eI,tI),n=t.domain;let s=10,i,a;function o(){return i=Vwe(s),a=Bwe(s),n()[0]<0?(i=nI(i),a=nI(a),e($we,Fwe)):e(eI,tI),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let d=c[0],f=c[c.length-1];const h=f<d;h&&([d,f]=[f,d]);let p=i(d),v=i(f),j,g;const x=l==null?10:+l;let w=[];if(!(s%1)&&v-p<x){if(p=Math.floor(p),v=Math.ceil(v),d>0){for(;p<=v;++p)for(j=1;j<s;++j)if(g=p<0?j/a(-p):j*a(p),!(g<d)){if(g>f)break;w.push(g)}}else for(;p<=v;++p)for(j=s-1;j>=1;--j)if(g=p>0?j/a(-p):j*a(p),!(g<d)){if(g>f)break;w.push(g)}w.length*2<x&&(w=I1(d,f,x))}else w=I1(p,v,Math.min(v-p,x)).map(a);return h?w.reverse():w},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=wp(c)).precision==null&&(c.trim=!0),c=R2(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*s<s-.5&&(h*=s),h<=d?c(f):""}},t.nice=()=>n(xU(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function vU(){const e=L2(t0()).domain([1,10]);return e.copy=()=>Rg(e,vU()).base(e.base()),zi.apply(e,arguments),e}function rI(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function sI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function D2(e){var t=1,n=e(rI(t),sI(t));return n.constant=function(s){return arguments.length?e(rI(t=+s),sI(t)):t},pc(n)}function yU(){var e=D2(t0());return e.copy=function(){return Rg(e,yU()).constant(e.constant())},zi.apply(e,arguments)}function iI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function qwe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Uwe(e){return e<0?-e*e:e*e}function $2(e){var t=e(_s,_s),n=1;function s(){return n===1?e(_s,_s):n===.5?e(qwe,Uwe):e(iI(n),iI(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,s()):n},pc(t)}function F2(){var e=$2(t0());return e.copy=function(){return Rg(e,F2()).exponent(e.exponent())},zi.apply(e,arguments),e}function Hwe(){return F2.apply(null,arguments).exponent(.5)}function aI(e){return Math.sign(e)*e*e}function Wwe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function bU(){var e=M2(),t=[0,1],n=!1,s;function i(a){var o=Wwe(e(a));return isNaN(o)?s:n?Math.round(o):o}return i.invert=function(a){return e.invert(aI(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,Vy)).map(aI)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(s=a,i):s},i.copy=function(){return bU(e.domain(),t).round(n).clamp(e.clamp()).unknown(s)},zi.apply(i,arguments),pc(i)}function jU(){var e=[],t=[],n=[],s;function i(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=Y_e(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?s:t[Mg(n,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Hl),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(s=o,a):s},a.quantiles=function(){return n.slice()},a.copy=function(){return jU().domain(e).range(t).unknown(s)},zi.apply(a,arguments)}function _U(){var e=0,t=1,n=1,s=[.5],i=[0,1],a;function o(c){return c!=null&&c<=c?i[Mg(s,c,0,n)]:a}function l(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=n?[s[n-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return _U().domain([e,t]).range(i).unknown(a)},zi.apply(pc(o),arguments)}function wU(){var e=[.5],t=[0,1],n,s=1;function i(a){return a!=null&&a<=a?t[Mg(e,a,0,s)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),s=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),s=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return wU().domain(e).range(t).unknown(n)},zi.apply(i,arguments)}const dw=new Date,fw=new Date;function Rr(e,t,n,s){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let d;do c.push(d=new Date(+a)),t(a,l),e(a);while(d<a&&a<o);return c},i.filter=a=>Rr(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(dw.setTime(+a),fw.setTime(+o),e(dw),e(fw),Math.floor(n(dw,fw))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(s?o=>s(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Hy=Rr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Hy.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Rr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Hy);Hy.range;const Co=1e3,Ei=Co*60,Po=Ei*60,Ko=Po*24,z2=Ko*7,oI=Ko*30,hw=Ko*365,Vc=Rr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Co)},(e,t)=>(t-e)/Co,e=>e.getUTCSeconds());Vc.range;const B2=Rr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Co)},(e,t)=>{e.setTime(+e+t*Ei)},(e,t)=>(t-e)/Ei,e=>e.getMinutes());B2.range;const V2=Rr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ei)},(e,t)=>(t-e)/Ei,e=>e.getUTCMinutes());V2.range;const q2=Rr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Co-e.getMinutes()*Ei)},(e,t)=>{e.setTime(+e+t*Po)},(e,t)=>(t-e)/Po,e=>e.getHours());q2.range;const U2=Rr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Po)},(e,t)=>(t-e)/Po,e=>e.getUTCHours());U2.range;const Lg=Rr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ei)/Ko,e=>e.getDate()-1);Lg.range;const n0=Rr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ko,e=>e.getUTCDate()-1);n0.range;const NU=Rr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ko,e=>Math.floor(e/Ko));NU.range;function Ou(e){return Rr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ei)/z2)}const r0=Ou(0),Wy=Ou(1),Kwe=Ou(2),Gwe=Ou(3),kf=Ou(4),Zwe=Ou(5),Qwe=Ou(6);r0.range;Wy.range;Kwe.range;Gwe.range;kf.range;Zwe.range;Qwe.range;function Mu(e){return Rr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/z2)}const s0=Mu(0),Ky=Mu(1),Ywe=Mu(2),Xwe=Mu(3),Of=Mu(4),Jwe=Mu(5),eNe=Mu(6);s0.range;Ky.range;Ywe.range;Xwe.range;Of.range;Jwe.range;eNe.range;const H2=Rr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());H2.range;const W2=Rr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());W2.range;const Go=Rr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Go.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Rr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Go.range;const Zo=Rr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Zo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Rr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Zo.range;function SU(e,t,n,s,i,a){const o=[[Vc,1,Co],[Vc,5,5*Co],[Vc,15,15*Co],[Vc,30,30*Co],[a,1,Ei],[a,5,5*Ei],[a,15,15*Ei],[a,30,30*Ei],[i,1,Po],[i,3,3*Po],[i,6,6*Po],[i,12,12*Po],[s,1,Ko],[s,2,2*Ko],[n,1,z2],[t,1,oI],[t,3,3*oI],[e,1,hw]];function l(d,f,h){const p=f<d;p&&([d,f]=[f,d]);const v=h&&typeof h.range=="function"?h:c(d,f,h),j=v?v.range(d,+f+1):[];return p?j.reverse():j}function c(d,f,h){const p=Math.abs(f-d)/h,v=A2(([,,x])=>x).right(o,p);if(v===o.length)return e.every(L1(d/hw,f/hw,h));if(v===0)return Hy.every(Math.max(L1(d,f,h),1));const[j,g]=o[p/o[v-1][2]<o[v][2]/p?v-1:v];return j.every(g)}return[l,c]}const[tNe,nNe]=SU(Zo,W2,s0,NU,U2,V2),[rNe,sNe]=SU(Go,H2,r0,Lg,q2,B2);function mw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function pw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function rm(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function iNe(e){var t=e.dateTime,n=e.date,s=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=sm(i),f=im(i),h=sm(a),p=im(a),v=sm(o),j=im(o),g=sm(l),x=im(l),w=sm(c),N=im(c),y={a:W,A:B,b:$,B:G,c:null,d:hI,e:hI,f:ANe,g:$Ne,G:zNe,H:SNe,I:CNe,j:PNe,L:CU,m:ENe,M:TNe,p:ee,q:oe,Q:gI,s:xI,S:kNe,u:ONe,U:MNe,V:INe,w:RNe,W:LNe,x:null,X:null,y:DNe,Y:FNe,Z:BNe,"%":pI},A={a:fe,A:Ee,b:J,B:Pe,c:null,d:mI,e:mI,f:HNe,g:t1e,G:r1e,H:VNe,I:qNe,j:UNe,L:AU,m:WNe,M:KNe,p:ze,q:$e,Q:gI,s:xI,S:GNe,u:ZNe,U:QNe,V:YNe,w:XNe,W:JNe,x:null,X:null,y:e1e,Y:n1e,Z:s1e,"%":pI},P={a:I,A:R,b:D,B:z,c:V,d:dI,e:dI,f:jNe,g:uI,G:cI,H:fI,I:fI,j:xNe,L:bNe,m:gNe,M:vNe,p:k,q:pNe,Q:wNe,s:NNe,S:yNe,u:uNe,U:dNe,V:fNe,w:cNe,W:hNe,x:K,X:H,y:uI,Y:cI,Z:mNe,"%":_Ne};y.x=E(n,y),y.X=E(s,y),y.c=E(t,y),A.x=E(n,A),A.X=E(s,A),A.c=E(t,A);function E(me,Te){return function(je){var ue=[],ct=-1,Ge=0,ut=me.length,Xe,qe,lt;for(je instanceof Date||(je=new Date(+je));++ct<ut;)me.charCodeAt(ct)===37&&(ue.push(me.slice(Ge,ct)),(qe=lI[Xe=me.charAt(++ct)])!=null?Xe=me.charAt(++ct):qe=Xe==="e"?" ":"0",(lt=Te[Xe])&&(Xe=lt(je,qe)),ue.push(Xe),Ge=ct+1);return ue.push(me.slice(Ge,ct)),ue.join("")}}function C(me,Te){return function(je){var ue=rm(1900,void 0,1),ct=S(ue,me,je+="",0),Ge,ut;if(ct!=je.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(Te&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(Ge=pw(rm(ue.y,0,1)),ut=Ge.getUTCDay(),Ge=ut>4||ut===0?Ky.ceil(Ge):Ky(Ge),Ge=n0.offset(Ge,(ue.V-1)*7),ue.y=Ge.getUTCFullYear(),ue.m=Ge.getUTCMonth(),ue.d=Ge.getUTCDate()+(ue.w+6)%7):(Ge=mw(rm(ue.y,0,1)),ut=Ge.getDay(),Ge=ut>4||ut===0?Wy.ceil(Ge):Wy(Ge),Ge=Lg.offset(Ge,(ue.V-1)*7),ue.y=Ge.getFullYear(),ue.m=Ge.getMonth(),ue.d=Ge.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),ut="Z"in ue?pw(rm(ue.y,0,1)).getUTCDay():mw(rm(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(ut+5)%7:ue.w+ue.U*7-(ut+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,pw(ue)):mw(ue)}}function S(me,Te,je,ue){for(var ct=0,Ge=Te.length,ut=je.length,Xe,qe;ct<Ge;){if(ue>=ut)return-1;if(Xe=Te.charCodeAt(ct++),Xe===37){if(Xe=Te.charAt(ct++),qe=P[Xe in lI?Te.charAt(ct++):Xe],!qe||(ue=qe(me,je,ue))<0)return-1}else if(Xe!=je.charCodeAt(ue++))return-1}return ue}function k(me,Te,je){var ue=d.exec(Te.slice(je));return ue?(me.p=f.get(ue[0].toLowerCase()),je+ue[0].length):-1}function I(me,Te,je){var ue=v.exec(Te.slice(je));return ue?(me.w=j.get(ue[0].toLowerCase()),je+ue[0].length):-1}function R(me,Te,je){var ue=h.exec(Te.slice(je));return ue?(me.w=p.get(ue[0].toLowerCase()),je+ue[0].length):-1}function D(me,Te,je){var ue=w.exec(Te.slice(je));return ue?(me.m=N.get(ue[0].toLowerCase()),je+ue[0].length):-1}function z(me,Te,je){var ue=g.exec(Te.slice(je));return ue?(me.m=x.get(ue[0].toLowerCase()),je+ue[0].length):-1}function V(me,Te,je){return S(me,t,Te,je)}function K(me,Te,je){return S(me,n,Te,je)}function H(me,Te,je){return S(me,s,Te,je)}function W(me){return o[me.getDay()]}function B(me){return a[me.getDay()]}function $(me){return c[me.getMonth()]}function G(me){return l[me.getMonth()]}function ee(me){return i[+(me.getHours()>=12)]}function oe(me){return 1+~~(me.getMonth()/3)}function fe(me){return o[me.getUTCDay()]}function Ee(me){return a[me.getUTCDay()]}function J(me){return c[me.getUTCMonth()]}function Pe(me){return l[me.getUTCMonth()]}function ze(me){return i[+(me.getUTCHours()>=12)]}function $e(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var Te=E(me+="",y);return Te.toString=function(){return me},Te},parse:function(me){var Te=C(me+="",!1);return Te.toString=function(){return me},Te},utcFormat:function(me){var Te=E(me+="",A);return Te.toString=function(){return me},Te},utcParse:function(me){var Te=C(me+="",!0);return Te.toString=function(){return me},Te}}}var lI={"-":"",_:" ",0:"0"},qr=/^\s*\d+/,aNe=/^%/,oNe=/[\\^$*+?|[\]().{}]/g;function an(e,t,n){var s=e<0?"-":"",i=(s?-e:e)+"",a=i.length;return s+(a<n?new Array(n-a+1).join(t)+i:i)}function lNe(e){return e.replace(oNe,"\\$&")}function sm(e){return new RegExp("^(?:"+e.map(lNe).join("|")+")","i")}function im(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function cNe(e,t,n){var s=qr.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function uNe(e,t,n){var s=qr.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function dNe(e,t,n){var s=qr.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function fNe(e,t,n){var s=qr.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function hNe(e,t,n){var s=qr.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function cI(e,t,n){var s=qr.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function uI(e,t,n){var s=qr.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function mNe(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function pNe(e,t,n){var s=qr.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function gNe(e,t,n){var s=qr.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function dI(e,t,n){var s=qr.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function xNe(e,t,n){var s=qr.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function fI(e,t,n){var s=qr.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function vNe(e,t,n){var s=qr.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function yNe(e,t,n){var s=qr.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function bNe(e,t,n){var s=qr.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function jNe(e,t,n){var s=qr.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function _Ne(e,t,n){var s=aNe.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function wNe(e,t,n){var s=qr.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function NNe(e,t,n){var s=qr.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function hI(e,t){return an(e.getDate(),t,2)}function SNe(e,t){return an(e.getHours(),t,2)}function CNe(e,t){return an(e.getHours()%12||12,t,2)}function PNe(e,t){return an(1+Lg.count(Go(e),e),t,3)}function CU(e,t){return an(e.getMilliseconds(),t,3)}function ANe(e,t){return CU(e,t)+"000"}function ENe(e,t){return an(e.getMonth()+1,t,2)}function TNe(e,t){return an(e.getMinutes(),t,2)}function kNe(e,t){return an(e.getSeconds(),t,2)}function ONe(e){var t=e.getDay();return t===0?7:t}function MNe(e,t){return an(r0.count(Go(e)-1,e),t,2)}function PU(e){var t=e.getDay();return t>=4||t===0?kf(e):kf.ceil(e)}function INe(e,t){return e=PU(e),an(kf.count(Go(e),e)+(Go(e).getDay()===4),t,2)}function RNe(e){return e.getDay()}function LNe(e,t){return an(Wy.count(Go(e)-1,e),t,2)}function DNe(e,t){return an(e.getFullYear()%100,t,2)}function $Ne(e,t){return e=PU(e),an(e.getFullYear()%100,t,2)}function FNe(e,t){return an(e.getFullYear()%1e4,t,4)}function zNe(e,t){var n=e.getDay();return e=n>=4||n===0?kf(e):kf.ceil(e),an(e.getFullYear()%1e4,t,4)}function BNe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+an(t/60|0,"0",2)+an(t%60,"0",2)}function mI(e,t){return an(e.getUTCDate(),t,2)}function VNe(e,t){return an(e.getUTCHours(),t,2)}function qNe(e,t){return an(e.getUTCHours()%12||12,t,2)}function UNe(e,t){return an(1+n0.count(Zo(e),e),t,3)}function AU(e,t){return an(e.getUTCMilliseconds(),t,3)}function HNe(e,t){return AU(e,t)+"000"}function WNe(e,t){return an(e.getUTCMonth()+1,t,2)}function KNe(e,t){return an(e.getUTCMinutes(),t,2)}function GNe(e,t){return an(e.getUTCSeconds(),t,2)}function ZNe(e){var t=e.getUTCDay();return t===0?7:t}function QNe(e,t){return an(s0.count(Zo(e)-1,e),t,2)}function EU(e){var t=e.getUTCDay();return t>=4||t===0?Of(e):Of.ceil(e)}function YNe(e,t){return e=EU(e),an(Of.count(Zo(e),e)+(Zo(e).getUTCDay()===4),t,2)}function XNe(e){return e.getUTCDay()}function JNe(e,t){return an(Ky.count(Zo(e)-1,e),t,2)}function e1e(e,t){return an(e.getUTCFullYear()%100,t,2)}function t1e(e,t){return e=EU(e),an(e.getUTCFullYear()%100,t,2)}function n1e(e,t){return an(e.getUTCFullYear()%1e4,t,4)}function r1e(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Of(e):Of.ceil(e),an(e.getUTCFullYear()%1e4,t,4)}function s1e(){return"+0000"}function pI(){return"%"}function gI(e){return+e}function xI(e){return Math.floor(+e/1e3)}var sd,TU,kU;i1e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function i1e(e){return sd=iNe(e),TU=sd.format,sd.parse,kU=sd.utcFormat,sd.utcParse,sd}function a1e(e){return new Date(e)}function o1e(e){return e instanceof Date?+e:+new Date(+e)}function K2(e,t,n,s,i,a,o,l,c,d){var f=M2(),h=f.invert,p=f.domain,v=d(".%L"),j=d(":%S"),g=d("%I:%M"),x=d("%I %p"),w=d("%a %d"),N=d("%b %d"),y=d("%B"),A=d("%Y");function P(E){return(c(E)<E?v:l(E)<E?j:o(E)<E?g:a(E)<E?x:s(E)<E?i(E)<E?w:N:n(E)<E?y:A)(E)}return f.invert=function(E){return new Date(h(E))},f.domain=function(E){return arguments.length?p(Array.from(E,o1e)):p().map(a1e)},f.ticks=function(E){var C=p();return e(C[0],C[C.length-1],E??10)},f.tickFormat=function(E,C){return C==null?P:d(C)},f.nice=function(E){var C=p();return(!E||typeof E.range!="function")&&(E=t(C[0],C[C.length-1],E??10)),E?p(xU(C,E)):f},f.copy=function(){return Rg(f,K2(e,t,n,s,i,a,o,l,c,d))},f}function l1e(){return zi.apply(K2(rNe,sNe,Go,H2,r0,Lg,q2,B2,Vc,TU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function c1e(){return zi.apply(K2(tNe,nNe,Zo,W2,s0,n0,U2,V2,Vc,kU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function i0(){var e=0,t=1,n,s,i,a,o=_s,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(i===0?.5:(h=(a(h)-n)*i,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),s=a(t=+t),i=n===s?0:1/(s-n),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function f(h){return function(p){var v,j;return arguments.length?([v,j]=p,o=h(v,j),d):[o(0),o(1)]}}return d.range=f(wh),d.rangeRound=f(O2),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return a=h,n=h(e),s=h(t),i=n===s?0:1/(s-n),d}}function gc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function OU(){var e=pc(i0()(_s));return e.copy=function(){return gc(e,OU())},rl.apply(e,arguments)}function MU(){var e=L2(i0()).domain([1,10]);return e.copy=function(){return gc(e,MU()).base(e.base())},rl.apply(e,arguments)}function IU(){var e=D2(i0());return e.copy=function(){return gc(e,IU()).constant(e.constant())},rl.apply(e,arguments)}function G2(){var e=$2(i0());return e.copy=function(){return gc(e,G2()).exponent(e.exponent())},rl.apply(e,arguments)}function u1e(){return G2.apply(null,arguments).exponent(.5)}function RU(){var e=[],t=_s;function n(s){if(s!=null&&!isNaN(s=+s))return t((Mg(e,s,1)-1)/(e.length-1))}return n.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let i of s)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Hl),n},n.interpolator=function(s){return arguments.length?(t=s,n):t},n.range=function(){return e.map((s,i)=>t(i/(e.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(i,a)=>Q_e(e,a/s))},n.copy=function(){return RU(t).domain(e)},rl.apply(n,arguments)}function a0(){var e=0,t=.5,n=1,s=1,i,a,o,l,c,d=_s,f,h=!1,p;function v(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-a)*(s*g<s*a?l:c),d(h?Math.max(0,Math.min(1,g)):g))}v.domain=function(g){return arguments.length?([e,t,n]=g,i=f(e=+e),a=f(t=+t),o=f(n=+n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),s=a<i?-1:1,v):[e,t,n]},v.clamp=function(g){return arguments.length?(h=!!g,v):h},v.interpolator=function(g){return arguments.length?(d=g,v):d};function j(g){return function(x){var w,N,y;return arguments.length?([w,N,y]=x,d=_we(g,[w,N,y]),v):[d(0),d(.5),d(1)]}}return v.range=j(wh),v.rangeRound=j(O2),v.unknown=function(g){return arguments.length?(p=g,v):p},function(g){return f=g,i=g(e),a=g(t),o=g(n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),s=a<i?-1:1,v}}function LU(){var e=pc(a0()(_s));return e.copy=function(){return gc(e,LU())},rl.apply(e,arguments)}function DU(){var e=L2(a0()).domain([.1,1,10]);return e.copy=function(){return gc(e,DU()).base(e.base())},rl.apply(e,arguments)}function $U(){var e=D2(a0());return e.copy=function(){return gc(e,$U()).constant(e.constant())},rl.apply(e,arguments)}function Z2(){var e=$2(a0());return e.copy=function(){return gc(e,Z2()).exponent(e.exponent())},rl.apply(e,arguments)}function d1e(){return Z2.apply(null,arguments).exponent(.5)}const vI=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:yp,scaleDiverging:LU,scaleDivergingLog:DU,scaleDivergingPow:Z2,scaleDivergingSqrt:d1e,scaleDivergingSymlog:$U,scaleIdentity:gU,scaleImplicit:D1,scaleLinear:Uy,scaleLog:vU,scaleOrdinal:E2,scalePoint:Mm,scalePow:F2,scaleQuantile:jU,scaleQuantize:_U,scaleRadial:bU,scaleSequential:OU,scaleSequentialLog:MU,scaleSequentialPow:G2,scaleSequentialQuantile:RU,scaleSequentialSqrt:u1e,scaleSequentialSymlog:IU,scaleSqrt:Hwe,scaleSymlog:yU,scaleThreshold:wU,scaleTime:l1e,scaleUtc:c1e,tickFormat:pU},Symbol.toStringTag,{value:"Module"}));var f1e=hh;function h1e(e,t,n){for(var s=-1,i=e.length;++s<i;){var a=e[s],o=t(a);if(o!=null&&(l===void 0?o===o&&!f1e(o):n(o,l)))var l=o,c=a}return c}var o0=h1e;function m1e(e,t){return e>t}var FU=m1e,p1e=o0,g1e=FU,x1e=jh;function v1e(e){return e&&e.length?p1e(e,x1e,g1e):void 0}var y1e=v1e;const l0=on(y1e);function b1e(e,t){return e<t}var zU=b1e,j1e=o0,_1e=zU,w1e=jh;function N1e(e){return e&&e.length?j1e(e,w1e,_1e):void 0}var S1e=N1e;const c0=on(S1e);var C1e=c2,P1e=ao,A1e=Gq,E1e=Us;function T1e(e,t){var n=E1e(e)?C1e:A1e;return n(e,P1e(t))}var k1e=T1e,O1e=Wq,M1e=k1e;function I1e(e,t){return O1e(M1e(e,t),1)}var R1e=I1e;const L1e=on(R1e);var D1e=N2;function $1e(e,t){return D1e(e,t)}var F1e=$1e;const Dg=on(F1e);var Nh=1e9,z1e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Y2,Hn=!0,Li="[DecimalError] ",tu=Li+"Invalid argument: ",Q2=Li+"Exponent out of range: ",Sh=Math.floor,Ic=Math.pow,B1e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Js,Dr=1e7,Ln=7,BU=9007199254740991,Gy=Sh(BU/Ln),ot={};ot.absoluteValue=ot.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ot.comparedTo=ot.cmp=function(e){var t,n,s,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(s=a.d.length,i=e.d.length,t=0,n=s<i?s:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return s===i?0:s>i^a.s<0?1:-1};ot.decimalPlaces=ot.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Ln;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};ot.dividedBy=ot.div=function(e){return Ro(this,new this.constructor(e))};ot.dividedToIntegerBy=ot.idiv=function(e){var t=this,n=t.constructor;return _n(Ro(t,new n(e),0,1),n.precision)};ot.equals=ot.eq=function(e){return!this.cmp(e)};ot.exponent=function(){return wr(this)};ot.greaterThan=ot.gt=function(e){return this.cmp(e)>0};ot.greaterThanOrEqualTo=ot.gte=function(e){return this.cmp(e)>=0};ot.isInteger=ot.isint=function(){return this.e>this.d.length-2};ot.isNegative=ot.isneg=function(){return this.s<0};ot.isPositive=ot.ispos=function(){return this.s>0};ot.isZero=function(){return this.s===0};ot.lessThan=ot.lt=function(e){return this.cmp(e)<0};ot.lessThanOrEqualTo=ot.lte=function(e){return this.cmp(e)<1};ot.logarithm=ot.log=function(e){var t,n=this,s=n.constructor,i=s.precision,a=i+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Js))throw Error(Li+"NaN");if(n.s<1)throw Error(Li+(n.s?"NaN":"-Infinity"));return n.eq(Js)?new s(0):(Hn=!1,t=Ro(Np(n,a),Np(e,a),a),Hn=!0,_n(t,i))};ot.minus=ot.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?UU(t,e):VU(t,(e.s=-e.s,e))};ot.modulo=ot.mod=function(e){var t,n=this,s=n.constructor,i=s.precision;if(e=new s(e),!e.s)throw Error(Li+"NaN");return n.s?(Hn=!1,t=Ro(n,e,0,1).times(e),Hn=!0,n.minus(t)):_n(new s(n),i)};ot.naturalExponential=ot.exp=function(){return qU(this)};ot.naturalLogarithm=ot.ln=function(){return Np(this)};ot.negated=ot.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ot.plus=ot.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?VU(t,e):UU(t,(e.s=-e.s,e))};ot.precision=ot.sd=function(e){var t,n,s,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(tu+e);if(t=wr(i)+1,s=i.d.length-1,n=s*Ln+1,s=i.d[s],s){for(;s%10==0;s/=10)n--;for(s=i.d[0];s>=10;s/=10)n++}return e&&t>n?t:n};ot.squareRoot=ot.sqrt=function(){var e,t,n,s,i,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Li+"NaN")}for(e=wr(l),Hn=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=$a(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Sh((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(i.toString()),n=c.precision,i=o=n+3;;)if(a=s,s=a.plus(Ro(l,a,o+2)).times(.5),$a(a.d).slice(0,o)===(t=$a(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(_n(a,n+1,0),a.times(a).eq(l)){s=a;break}}else if(t!="9999")break;o+=4}return Hn=!0,_n(s,n)};ot.times=ot.mul=function(e){var t,n,s,i,a,o,l,c,d,f=this,h=f.constructor,p=f.d,v=(e=new h(e)).d;if(!f.s||!e.s)return new h(0);for(e.s*=f.s,n=f.e+e.e,c=p.length,d=v.length,c<d&&(a=p,p=v,v=a,o=c,c=d,d=o),a=[],o=c+d,s=o;s--;)a.push(0);for(s=d;--s>=0;){for(t=0,i=c+s;i>s;)l=a[i]+v[s]*p[i-s-1]+t,a[i--]=l%Dr|0,t=l/Dr|0;a[i]=(a[i]+t)%Dr|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,Hn?_n(e,h.precision):e};ot.toDecimalPlaces=ot.todp=function(e,t){var n=this,s=n.constructor;return n=new s(n),e===void 0?n:(Ja(e,0,Nh),t===void 0?t=s.rounding:Ja(t,0,8),_n(n,e+wr(n)+1,t))};ot.toExponential=function(e,t){var n,s=this,i=s.constructor;return e===void 0?n=yu(s,!0):(Ja(e,0,Nh),t===void 0?t=i.rounding:Ja(t,0,8),s=_n(new i(s),e+1,t),n=yu(s,!0,e+1)),n};ot.toFixed=function(e,t){var n,s,i=this,a=i.constructor;return e===void 0?yu(i):(Ja(e,0,Nh),t===void 0?t=a.rounding:Ja(t,0,8),s=_n(new a(i),e+wr(i)+1,t),n=yu(s.abs(),!1,e+wr(s)+1),i.isneg()&&!i.isZero()?"-"+n:n)};ot.toInteger=ot.toint=function(){var e=this,t=e.constructor;return _n(new t(e),wr(e)+1,t.rounding)};ot.toNumber=function(){return+this};ot.toPower=ot.pow=function(e){var t,n,s,i,a,o,l=this,c=l.constructor,d=12,f=+(e=new c(e));if(!e.s)return new c(Js);if(l=new c(l),!l.s){if(e.s<1)throw Error(Li+"Infinity");return l}if(l.eq(Js))return l;if(s=c.precision,e.eq(Js))return _n(l,s);if(t=e.e,n=e.d.length-1,o=t>=n,a=l.s,o){if((n=f<0?-f:f)<=BU){for(i=new c(Js),t=Math.ceil(s/Ln+4),Hn=!1;n%2&&(i=i.times(l),bI(i.d,t)),n=Sh(n/2),n!==0;)l=l.times(l),bI(l.d,t);return Hn=!0,e.s<0?new c(Js).div(i):_n(i,s)}}else if(a<0)throw Error(Li+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Hn=!1,i=e.times(Np(l,s+d)),Hn=!0,i=qU(i),i.s=a,i};ot.toPrecision=function(e,t){var n,s,i=this,a=i.constructor;return e===void 0?(n=wr(i),s=yu(i,n<=a.toExpNeg||n>=a.toExpPos)):(Ja(e,1,Nh),t===void 0?t=a.rounding:Ja(t,0,8),i=_n(new a(i),e,t),n=wr(i),s=yu(i,e<=n||n<=a.toExpNeg,e)),s};ot.toSignificantDigits=ot.tosd=function(e,t){var n=this,s=n.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Ja(e,1,Nh),t===void 0?t=s.rounding:Ja(t,0,8)),_n(new s(n),e,t)};ot.toString=ot.valueOf=ot.val=ot.toJSON=ot[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=wr(e),n=e.constructor;return yu(e,t<=n.toExpNeg||t>=n.toExpPos)};function VU(e,t){var n,s,i,a,o,l,c,d,f=e.constructor,h=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Hn?_n(t,h):t;if(c=e.d,d=t.d,o=e.e,i=t.e,c=c.slice(),a=o-i,a){for(a<0?(s=c,a=-a,l=d.length):(s=d,i=o,l=c.length),o=Math.ceil(h/Ln),l=o>l?o+1:l+1,a>l&&(a=l,s.length=1),s.reverse();a--;)s.push(0);s.reverse()}for(l=c.length,a=d.length,l-a<0&&(a=l,s=d,d=c,c=s),n=0;a;)n=(c[--a]=c[a]+d[a]+n)/Dr|0,c[a]%=Dr;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,Hn?_n(t,h):t}function Ja(e,t,n){if(e!==~~e||e<t||e>n)throw Error(tu+e)}function $a(e){var t,n,s,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)s=e[t]+"",n=Ln-s.length,n&&(a+=xl(n)),a+=s;o=e[t],s=o+"",n=Ln-s.length,n&&(a+=xl(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Ro=function(){function e(s,i){var a,o=0,l=s.length;for(s=s.slice();l--;)a=s[l]*i+o,s[l]=a%Dr|0,o=a/Dr|0;return o&&s.unshift(o),s}function t(s,i,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(s[l]!=i[l]){c=s[l]>i[l]?1:-1;break}return c}function n(s,i,a){for(var o=0;a--;)s[a]-=o,o=s[a]<i[a]?1:0,s[a]=o*Dr+s[a]-i[a];for(;!s[0]&&s.length>1;)s.shift()}return function(s,i,a,o){var l,c,d,f,h,p,v,j,g,x,w,N,y,A,P,E,C,S,k=s.constructor,I=s.s==i.s?1:-1,R=s.d,D=i.d;if(!s.s)return new k(s);if(!i.s)throw Error(Li+"Division by zero");for(c=s.e-i.e,C=D.length,P=R.length,v=new k(I),j=v.d=[],d=0;D[d]==(R[d]||0);)++d;if(D[d]>(R[d]||0)&&--c,a==null?N=a=k.precision:o?N=a+(wr(s)-wr(i))+1:N=a,N<0)return new k(0);if(N=N/Ln+2|0,d=0,C==1)for(f=0,D=D[0],N++;(d<P||f)&&N--;d++)y=f*Dr+(R[d]||0),j[d]=y/D|0,f=y%D|0;else{for(f=Dr/(D[0]+1)|0,f>1&&(D=e(D,f),R=e(R,f),C=D.length,P=R.length),A=C,g=R.slice(0,C),x=g.length;x<C;)g[x++]=0;S=D.slice(),S.unshift(0),E=D[0],D[1]>=Dr/2&&++E;do f=0,l=t(D,g,C,x),l<0?(w=g[0],C!=x&&(w=w*Dr+(g[1]||0)),f=w/E|0,f>1?(f>=Dr&&(f=Dr-1),h=e(D,f),p=h.length,x=g.length,l=t(h,g,p,x),l==1&&(f--,n(h,C<p?S:D,p))):(f==0&&(l=f=1),h=D.slice()),p=h.length,p<x&&h.unshift(0),n(g,h,x),l==-1&&(x=g.length,l=t(D,g,C,x),l<1&&(f++,n(g,C<x?S:D,x))),x=g.length):l===0&&(f++,g=[0]),j[d++]=f,l&&g[0]?g[x++]=R[A]||0:(g=[R[A]],x=1);while((A++<P||g[0]!==void 0)&&N--)}return j[0]||j.shift(),v.e=c,_n(v,o?a+wr(v)+1:a)}}();function qU(e,t){var n,s,i,a,o,l,c=0,d=0,f=e.constructor,h=f.precision;if(wr(e)>16)throw Error(Q2+wr(e));if(!e.s)return new f(Js);for(Hn=!1,l=h,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(Ic(2,d))/Math.LN10*2+5|0,l+=s,n=i=a=new f(Js),f.precision=l;;){if(i=_n(i.times(e),l),n=n.times(++c),o=a.plus(Ro(i,n,l)),$a(o.d).slice(0,l)===$a(a.d).slice(0,l)){for(;d--;)a=_n(a.times(a),l);return f.precision=h,t==null?(Hn=!0,_n(a,h)):a}a=o}}function wr(e){for(var t=e.e*Ln,n=e.d[0];n>=10;n/=10)t++;return t}function gw(e,t,n){if(t>e.LN10.sd())throw Hn=!0,n&&(e.precision=n),Error(Li+"LN10 precision limit exceeded");return _n(new e(e.LN10),t)}function xl(e){for(var t="";e--;)t+="0";return t}function Np(e,t){var n,s,i,a,o,l,c,d,f,h=1,p=10,v=e,j=v.d,g=v.constructor,x=g.precision;if(v.s<1)throw Error(Li+(v.s?"NaN":"-Infinity"));if(v.eq(Js))return new g(0);if(t==null?(Hn=!1,d=x):d=t,v.eq(10))return t==null&&(Hn=!0),gw(g,d);if(d+=p,g.precision=d,n=$a(j),s=n.charAt(0),a=wr(v),Math.abs(a)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)v=v.times(e),n=$a(v.d),s=n.charAt(0),h++;a=wr(v),s>1?(v=new g("0."+n),a++):v=new g(s+"."+n.slice(1))}else return c=gw(g,d+2,x).times(a+""),v=Np(new g(s+"."+n.slice(1)),d-p).plus(c),g.precision=x,t==null?(Hn=!0,_n(v,x)):v;for(l=o=v=Ro(v.minus(Js),v.plus(Js),d),f=_n(v.times(v),d),i=3;;){if(o=_n(o.times(f),d),c=l.plus(Ro(o,new g(i),d)),$a(c.d).slice(0,d)===$a(l.d).slice(0,d))return l=l.times(2),a!==0&&(l=l.plus(gw(g,d+2,x).times(a+""))),l=Ro(l,new g(h),d),g.precision=x,t==null?(Hn=!0,_n(l,x)):l;l=c,i+=2}}function yI(e,t){var n,s,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),s=0;t.charCodeAt(s)===48;)++s;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(s,i),t){if(i-=s,n=n-s-1,e.e=Sh(n/Ln),e.d=[],s=(n+1)%Ln,n<0&&(s+=Ln),s<i){for(s&&e.d.push(+t.slice(0,s)),i-=Ln;s<i;)e.d.push(+t.slice(s,s+=Ln));t=t.slice(s),s=Ln-t.length}else s-=i;for(;s--;)t+="0";if(e.d.push(+t),Hn&&(e.e>Gy||e.e<-Gy))throw Error(Q2+n)}else e.s=0,e.e=0,e.d=[0];return e}function _n(e,t,n){var s,i,a,o,l,c,d,f,h=e.d;for(o=1,a=h[0];a>=10;a/=10)o++;if(s=t-o,s<0)s+=Ln,i=t,d=h[f=0];else{if(f=Math.ceil((s+1)/Ln),a=h.length,f>=a)return e;for(d=a=h[f],o=1;a>=10;a/=10)o++;s%=Ln,i=s-Ln+o}if(n!==void 0&&(a=Ic(10,o-i-1),l=d/a%10|0,c=t<0||h[f+1]!==void 0||d%a,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(s>0?i>0?d/Ic(10,o-i):0:h[f-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(a=wr(e),h.length=1,t=t-a-1,h[0]=Ic(10,(Ln-t%Ln)%Ln),e.e=Sh(-t/Ln)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(s==0?(h.length=f,a=1,f--):(h.length=f+1,a=Ic(10,Ln-s),h[f]=i>0?(d/Ic(10,o-i)%Ic(10,i)|0)*a:0),c)for(;;)if(f==0){(h[0]+=a)==Dr&&(h[0]=1,++e.e);break}else{if(h[f]+=a,h[f]!=Dr)break;h[f--]=0,a=1}for(s=h.length;h[--s]===0;)h.pop();if(Hn&&(e.e>Gy||e.e<-Gy))throw Error(Q2+wr(e));return e}function UU(e,t){var n,s,i,a,o,l,c,d,f,h,p=e.constructor,v=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Hn?_n(t,v):t;if(c=e.d,h=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(f=o<0,f?(n=c,o=-o,l=h.length):(n=h,s=d,l=c.length),i=Math.max(Math.ceil(v/Ln),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=h.length,f=i<l,f&&(l=i),i=0;i<l;i++)if(c[i]!=h[i]){f=c[i]<h[i];break}o=0}for(f&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,i=h.length-l;i>0;--i)c[l++]=0;for(i=h.length;i>o;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=Dr-1;--c[a],c[i]+=Dr}c[i]-=h[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,Hn?_n(t,v):t):new p(0)}function yu(e,t,n){var s,i=wr(e),a=$a(e.d),o=a.length;return t?(n&&(s=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+xl(s):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+xl(-i-1)+a,n&&(s=n-o)>0&&(a+=xl(s))):i>=o?(a+=xl(i+1-o),n&&(s=n-i-1)>0&&(a=a+"."+xl(s))):((s=i+1)<o&&(a=a.slice(0,s)+"."+a.slice(s)),n&&(s=n-o)>0&&(i+1===o&&(a+="."),a+=xl(s))),e.s<0?"-"+a:a}function bI(e,t){if(e.length>t)return e.length=t,!0}function HU(e){var t,n,s;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(tu+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return yI(o,a.toString())}else if(typeof a!="string")throw Error(tu+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,B1e.test(a))yI(o,a);else throw Error(tu+a)}if(i.prototype=ot,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=HU,i.config=i.set=V1e,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(n=s[t++])||(e[n]=this[n]);return i.config(e),i}function V1e(e){if(!e||typeof e!="object")throw Error(Li+"Object expected");var t,n,s,i=["precision",1,Nh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((s=e[n=i[t]])!==void 0)if(Sh(s)===s&&s>=i[t+1]&&s<=i[t+2])this[n]=s;else throw Error(tu+n+": "+s);if((s=e[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(tu+n+": "+s);return this}var Y2=HU(z1e);Js=new Y2(1);const yn=Y2;function q1e(e){return K1e(e)||W1e(e)||H1e(e)||U1e()}function U1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H1e(e,t){if(e){if(typeof e=="string")return B1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B1(e,t)}}function W1e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function K1e(e){if(Array.isArray(e))return B1(e)}function B1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var G1e=function(t){return t},WU={},KU=function(t){return t===WU},jI=function(t){return function n(){return arguments.length===0||arguments.length===1&&KU(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},Z1e=function e(t,n){return t===1?n:jI(function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];var o=i.filter(function(l){return l!==WU}).length;return o>=t?n.apply(void 0,i):e(t-o,jI(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var f=i.map(function(h){return KU(h)?c.shift():h});return n.apply(void 0,q1e(f).concat(c))}))})},u0=function(t){return Z1e(t.length,t)},V1=function(t,n){for(var s=[],i=t;i<n;++i)s[i-t]=i;return s},Q1e=u0(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),Y1e=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.length)return G1e;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},q1=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},GU=function(t){var n=null,s=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n&&a.every(function(l,c){return l===n[c]})||(n=a,s=t.apply(void 0,a)),s}};function X1e(e){var t;return e===0?t=1:t=Math.floor(new yn(e).abs().log(10).toNumber())+1,t}function J1e(e,t,n){for(var s=new yn(e),i=0,a=[];s.lt(t)&&i<1e5;)a.push(s.toNumber()),s=s.add(n),i++;return a}var eSe=u0(function(e,t,n){var s=+e,i=+t;return s+n*(i-s)}),tSe=u0(function(e,t,n){var s=t-+e;return s=s||1/0,(n-e)/s}),nSe=u0(function(e,t,n){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(n-e)/s))});const d0={rangeStep:J1e,getDigitCount:X1e,interpolateNumber:eSe,uninterpolateNumber:tSe,uninterpolateTruncation:nSe};function U1(e){return iSe(e)||sSe(e)||ZU(e)||rSe()}function rSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sSe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function iSe(e){if(Array.isArray(e))return H1(e)}function Sp(e,t){return lSe(e)||oSe(e,t)||ZU(e,t)||aSe()}function aSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZU(e,t){if(e){if(typeof e=="string")return H1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H1(e,t)}}function H1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function oSe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],s=!0,i=!1,a=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));s=!0);}catch(c){i=!0,a=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function lSe(e){if(Array.isArray(e))return e}function QU(e){var t=Sp(e,2),n=t[0],s=t[1],i=n,a=s;return n>s&&(i=s,a=n),[i,a]}function YU(e,t,n){if(e.lte(0))return new yn(0);var s=d0.getDigitCount(e.toNumber()),i=new yn(10).pow(s),a=e.div(i),o=s!==1?.05:.1,l=new yn(Math.ceil(a.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return t?c:new yn(Math.ceil(c))}function cSe(e,t,n){var s=1,i=new yn(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(s=new yn(10).pow(d0.getDigitCount(e)-1),i=new yn(Math.floor(i.div(s).toNumber())).mul(s)):a>1&&(i=new yn(Math.floor(e)))}else e===0?i=new yn(Math.floor((t-1)/2)):n||(i=new yn(Math.floor(e)));var o=Math.floor((t-1)/2),l=Y1e(Q1e(function(c){return i.add(new yn(c-o).mul(s)).toNumber()}),V1);return l(0,t)}function XU(e,t,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new yn(0),tickMin:new yn(0),tickMax:new yn(0)};var a=YU(new yn(t).sub(e).div(n-1),s,i),o;e<=0&&t>=0?o=new yn(0):(o=new yn(e).add(t).div(2),o=o.sub(new yn(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new yn(t).sub(o).div(a).toNumber()),d=l+c+1;return d>n?XU(e,t,n,s,i+1):(d<n&&(c=t>0?c+(n-d):c,l=t>0?l:l+(n-d)),{step:a,tickMin:o.sub(new yn(l).mul(a)),tickMax:o.add(new yn(c).mul(a))})}function uSe(e){var t=Sp(e,2),n=t[0],s=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=QU([n,s]),c=Sp(l,2),d=c[0],f=c[1];if(d===-1/0||f===1/0){var h=f===1/0?[d].concat(U1(V1(0,i-1).map(function(){return 1/0}))):[].concat(U1(V1(0,i-1).map(function(){return-1/0})),[f]);return n>s?q1(h):h}if(d===f)return cSe(d,i,a);var p=XU(d,f,o,a),v=p.step,j=p.tickMin,g=p.tickMax,x=d0.rangeStep(j,g.add(new yn(.1).mul(v)),v);return n>s?q1(x):x}function dSe(e,t){var n=Sp(e,2),s=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=QU([s,i]),l=Sp(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,i];if(c===d)return[c];var f=Math.max(t,2),h=YU(new yn(d).sub(c).div(f-1),a,0),p=[].concat(U1(d0.rangeStep(new yn(c),new yn(d).sub(new yn(.99).mul(h)),h)),[d]);return s>i?q1(p):p}var fSe=GU(uSe),hSe=GU(dSe),mSe="Invariant failed";function bu(e,t){throw new Error(mSe)}var pSe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Mf(e){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mf(e)}function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Zy.apply(this,arguments)}function gSe(e,t){return bSe(e)||ySe(e,t)||vSe(e,t)||xSe()}function xSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vSe(e,t){if(e){if(typeof e=="string")return _I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _I(e,t)}}function _I(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function ySe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function bSe(e){if(Array.isArray(e))return e}function jSe(e,t){if(e==null)return{};var n=_Se(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function _Se(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function wSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NSe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,t9(s.key),s)}}function SSe(e,t,n){return t&&NSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function CSe(e,t,n){return t=Qy(t),PSe(e,JU()?Reflect.construct(t,n||[],Qy(e).constructor):t.apply(e,n))}function PSe(e,t){if(t&&(Mf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ASe(e)}function ASe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JU=function(){return!!e})()}function Qy(e){return Qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qy(e)}function ESe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W1(e,t)}function W1(e,t){return W1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},W1(e,t)}function e9(e,t,n){return t=t9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t9(e){var t=TSe(e,"string");return Mf(t)=="symbol"?t:t+""}function TSe(e,t){if(Mf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Mf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $g=function(e){function t(){return wSe(this,t),CSe(this,t,arguments)}return ESe(t,e),SSe(t,[{key:"render",value:function(){var s=this.props,i=s.offset,a=s.layout,o=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,f=s.xAxis,h=s.yAxis,p=jSe(s,pSe),v=wt(p,!1);this.props.direction==="x"&&f.type!=="number"&&bu();var j=c.map(function(g){var x=d(g,l),w=x.x,N=x.y,y=x.value,A=x.errorVal;if(!A)return null;var P=[],E,C;if(Array.isArray(A)){var S=gSe(A,2);E=S[0],C=S[1]}else E=C=A;if(a==="vertical"){var k=f.scale,I=N+i,R=I+o,D=I-o,z=k(y-E),V=k(y+C);P.push({x1:V,y1:R,x2:V,y2:D}),P.push({x1:z,y1:I,x2:V,y2:I}),P.push({x1:z,y1:R,x2:z,y2:D})}else if(a==="horizontal"){var K=h.scale,H=w+i,W=H-o,B=H+o,$=K(y-E),G=K(y+C);P.push({x1:W,y1:G,x2:B,y2:G}),P.push({x1:H,y1:$,x2:H,y2:G}),P.push({x1:W,y1:$,x2:B,y2:$})}return q.createElement(sn,Zy({className:"recharts-errorBar",key:"bar-".concat(P.map(function(ee){return"".concat(ee.x1,"-").concat(ee.x2,"-").concat(ee.y1,"-").concat(ee.y2)}))},v),P.map(function(ee){return q.createElement("line",Zy({},ee,{key:"line-".concat(ee.x1,"-").concat(ee.x2,"-").concat(ee.y1,"-").concat(ee.y2)}))}))});return q.createElement(sn,{className:"recharts-errorBars"},j)}}])}(q.Component);e9($g,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});e9($g,"displayName","ErrorBar");function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function wI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Sc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wI(Object(n),!0).forEach(function(s){kSe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function kSe(e,t,n){return t=OSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OSe(e){var t=MSe(e,"string");return Cp(t)=="symbol"?t:t+""}function MSe(e,t){if(Cp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Cp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n9=function(t){var n=t.children,s=t.formattedGraphicalItems,i=t.legendWidth,a=t.legendContent,o=Zs(n,Bs);if(!o)return null;var l=Bs.defaultProps,c=l!==void 0?Sc(Sc({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:a==="children"?d=(s||[]).reduce(function(f,h){var p=h.item,v=h.props,j=v.sectors||v.data||[];return f.concat(j.map(function(g){return{type:o.props.iconType||p.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):d=(s||[]).map(function(f){var h=f.item,p=h.type.defaultProps,v=p!==void 0?Sc(Sc({},p),h.props):{},j=v.dataKey,g=v.name,x=v.legendType,w=v.hide;return{inactive:w,dataKey:j,type:c.iconType||x||"square",color:X2(h),value:g||j,payload:v}}),Sc(Sc(Sc({},c),Bs.getWithHeight(o,i)),{},{payload:d,item:o})};function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function NI(e){return DSe(e)||LSe(e)||RSe(e)||ISe()}function ISe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RSe(e,t){if(e){if(typeof e=="string")return K1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K1(e,t)}}function LSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DSe(e){if(Array.isArray(e))return K1(e)}function K1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function SI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SI(Object(n),!0).forEach(function(s){Hd(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Hd(e,t,n){return t=$Se(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $Se(e){var t=FSe(e,"string");return Pp(t)=="symbol"?t:t+""}function FSe(e,t){if(Pp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Pp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kr(e,t,n){return Dt(e)||Dt(t)?n:Mr(t)?ii(e,t,n):Mt(t)?t(e):n}function Im(e,t,n,s){var i=L1e(e,function(l){return kr(l,t)});if(n==="number"){var a=i.filter(function(l){return We(l)||parseFloat(l)});return a.length?[c0(a),l0(a)]:[1/0,-1/0]}var o=s?i.filter(function(l){return!Dt(l)}):i;return o.map(function(l){return Mr(l)||l instanceof Date?l:""})}var zSe=function(t){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=s==null?void 0:s.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,d=0;d<l;d++){var f=d>0?i[d-1].coordinate:i[l-1].coordinate,h=i[d].coordinate,p=d>=l-1?i[0].coordinate:i[d+1].coordinate,v=void 0;if(bs(h-f)!==bs(p-h)){var j=[];if(bs(p-h)===bs(c[1]-c[0])){v=p;var g=h+c[1]-c[0];j[0]=Math.min(g,(g+f)/2),j[1]=Math.max(g,(g+f)/2)}else{v=f;var x=p+c[1]-c[0];j[0]=Math.min(h,(x+h)/2),j[1]=Math.max(h,(x+h)/2)}var w=[Math.min(h,(v+h)/2),Math.max(h,(v+h)/2)];if(t>w[0]&&t<=w[1]||t>=j[0]&&t<=j[1]){o=i[d].index;break}}else{var N=Math.min(f,p),y=Math.max(f,p);if(t>(N+h)/2&&t<=(y+h)/2){o=i[d].index;break}}}else for(var A=0;A<l;A++)if(A===0&&t<=(s[A].coordinate+s[A+1].coordinate)/2||A>0&&A<l-1&&t>(s[A].coordinate+s[A-1].coordinate)/2&&t<=(s[A].coordinate+s[A+1].coordinate)/2||A===l-1&&t>(s[A].coordinate+s[A-1].coordinate)/2){o=s[A].index;break}return o},X2=function(t){var n,s=t,i=s.type.displayName,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?nr(nr({},t.type.defaultProps),t.props):t.props,o=a.stroke,l=a.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},BSe=function(t){var n=t.barSize,s=t.totalSize,i=t.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},l=Object.keys(a),c=0,d=l.length;c<d;c++)for(var f=a[l[c]].stackGroups,h=Object.keys(f),p=0,v=h.length;p<v;p++){var j=f[h[p]],g=j.items,x=j.cateAxisId,w=g.filter(function(C){return Io(C.type).indexOf("Bar")>=0});if(w&&w.length){var N=w[0].type.defaultProps,y=N!==void 0?nr(nr({},N),w[0].props):w[0].props,A=y.barSize,P=y[x];o[P]||(o[P]=[]);var E=Dt(A)?n:A;o[P].push({item:w[0],stackList:w.slice(1),barSize:Dt(E)?void 0:js(E,s,0)})}}return o},VSe=function(t){var n=t.barGap,s=t.barCategoryGap,i=t.bandSize,a=t.sizeList,o=a===void 0?[]:a,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=js(n,i,0,!0),f,h=[];if(o[0].barSize===+o[0].barSize){var p=!1,v=i/c,j=o.reduce(function(A,P){return A+P.barSize||0},0);j+=(c-1)*d,j>=i&&(j-=(c-1)*d,d=0),j>=i&&v>0&&(p=!0,v*=.9,j=c*v);var g=(i-j)/2>>0,x={offset:g-d,size:0};f=o.reduce(function(A,P){var E={item:P.item,position:{offset:x.offset+x.size+d,size:p?v:P.barSize}},C=[].concat(NI(A),[E]);return x=C[C.length-1].position,P.stackList&&P.stackList.length&&P.stackList.forEach(function(S){C.push({item:S,position:x})}),C},h)}else{var w=js(s,i,0,!0);i-2*w-(c-1)*d<=0&&(d=0);var N=(i-2*w-(c-1)*d)/c;N>1&&(N>>=0);var y=l===+l?Math.min(N,l):N;f=o.reduce(function(A,P,E){var C=[].concat(NI(A),[{item:P.item,position:{offset:w+(N+d)*E+(N-y)/2,size:y}}]);return P.stackList&&P.stackList.length&&P.stackList.forEach(function(S){C.push({item:S,position:C[C.length-1].position})}),C},h)}return f},qSe=function(t,n,s,i){var a=s.children,o=s.width,l=s.margin,c=o-(l.left||0)-(l.right||0),d=n9({children:a,legendWidth:c});if(d){var f=i||{},h=f.width,p=f.height,v=d.align,j=d.verticalAlign,g=d.layout;if((g==="vertical"||g==="horizontal"&&j==="middle")&&v!=="center"&&We(t[v]))return nr(nr({},t),{},Hd({},v,t[v]+(h||0)));if((g==="horizontal"||g==="vertical"&&v==="center")&&j!=="middle"&&We(t[j]))return nr(nr({},t),{},Hd({},j,t[j]+(p||0)))}return t},USe=function(t,n,s){return Dt(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||s==="x"?n==="xAxis":s==="y"?n==="yAxis":!0},r9=function(t,n,s,i,a){var o=n.props.children,l=ai(o,$g).filter(function(d){return USe(i,a,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,f){var h=kr(f,s);if(Dt(h))return d;var p=Array.isArray(h)?[c0(h),l0(h)]:[h,h],v=c.reduce(function(j,g){var x=kr(f,g,0),w=p[0]-Math.abs(Array.isArray(x)?x[0]:x),N=p[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(w,j[0]),Math.max(N,j[1])]},[1/0,-1/0]);return[Math.min(v[0],d[0]),Math.max(v[1],d[1])]},[1/0,-1/0])}return null},HSe=function(t,n,s,i,a){var o=n.map(function(l){return r9(t,l,s,a,i)}).filter(function(l){return!Dt(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},s9=function(t,n,s,i,a){var o=n.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&r9(t,c,d,i)||Im(t,d,s,a)});if(s==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var f=0,h=d.length;f<h;f++)l[d[f]]||(l[d[f]]=!0,c.push(d[f]));return c},[])},i9=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},a9=function(t,n,s,i){if(i)return t.map(function(c){return c.coordinate});var a,o,l=t.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===s&&(o=!0),c.coordinate});return a||l.push(n),o||l.push(s),l},Ao=function(t,n,s){if(!t)return null;var i=t.scale,a=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(n||s)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?bs(l[0]-l[1])*2*d:d,n&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(h){var p=a?a.indexOf(h):h;return{coordinate:i(p)+d,value:h,offset:d}});return f.filter(function(h){return!kg(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,p){return{coordinate:i(h)+d,value:h,index:p,offset:d}}):i.ticks&&!s?i.ticks(t.tickCount).map(function(h){return{coordinate:i(h)+d,value:h,offset:d}}):i.domain().map(function(h,p){return{coordinate:i(h)+d,value:a?a[h]:h,index:p,offset:d}})},xw=new WeakMap,Yx=function(t,n){if(typeof n!="function")return t;xw.has(t)||xw.set(t,new WeakMap);var s=xw.get(t);if(s.has(n))return s.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return s.set(n,i),i},o9=function(t,n,s){var i=t.scale,a=t.type,o=t.layout,l=t.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:yp(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Uy(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!s)?{scale:Mm(),realScaleType:"point"}:a==="category"?{scale:yp(),realScaleType:"band"}:{scale:Uy(),realScaleType:"linear"};if(Tg(i)){var c="scale".concat(Gj(i));return{scale:(vI[c]||Mm)(),realScaleType:vI[c]?c:"point"}}return Mt(i)?{scale:i}:{scale:Mm(),realScaleType:"point"}},CI=1e-4,l9=function(t){var n=t.domain();if(!(!n||n.length<=2)){var s=n.length,i=t.range(),a=Math.min(i[0],i[1])-CI,o=Math.max(i[0],i[1])+CI,l=t(n[0]),c=t(n[s-1]);(l<a||l>o||c<a||c>o)&&t.domain([n[0],n[s-1]])}},WSe=function(t,n){if(!t)return null;for(var s=0,i=t.length;s<i;s++)if(t[s].item===n)return t[s].position;return null},KSe=function(t,n){if(!n||n.length!==2||!We(n[0])||!We(n[1]))return t;var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[t[0],t[1]];return(!We(t[0])||t[0]<s)&&(a[0]=s),(!We(t[1])||t[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<s&&(a[1]=s),a},GSe=function(t){var n=t.length;if(!(n<=0))for(var s=0,i=t[0].length;s<i;++s)for(var a=0,o=0,l=0;l<n;++l){var c=kg(t[l][s][1])?t[l][s][0]:t[l][s][1];c>=0?(t[l][s][0]=a,t[l][s][1]=a+c,a=t[l][s][1]):(t[l][s][0]=o,t[l][s][1]=o+c,o=t[l][s][1])}},ZSe=function(t){var n=t.length;if(!(n<=0))for(var s=0,i=t[0].length;s<i;++s)for(var a=0,o=0;o<n;++o){var l=kg(t[o][s][1])?t[o][s][0]:t[o][s][1];l>=0?(t[o][s][0]=a,t[o][s][1]=a+l,a=t[o][s][1]):(t[o][s][0]=0,t[o][s][1]=0)}},QSe={sign:GSe,expand:pme,none:Sf,silhouette:gme,wiggle:xme,positive:ZSe},YSe=function(t,n,s){var i=n.map(function(l){return l.props.dataKey}),a=QSe[s],o=mme().keys(i).value(function(l,c){return+kr(l,c,0)}).order(v1).offset(a);return o(t)},XSe=function(t,n,s,i,a,o){if(!t)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(h,p){var v,j=(v=p.type)!==null&&v!==void 0&&v.defaultProps?nr(nr({},p.type.defaultProps),p.props):p.props,g=j.stackId,x=j.hide;if(x)return h;var w=j[s],N=h[w]||{hasStack:!1,stackGroups:{}};if(Mr(g)){var y=N.stackGroups[g]||{numericAxisId:s,cateAxisId:i,items:[]};y.items.push(p),N.hasStack=!0,N.stackGroups[g]=y}else N.stackGroups[vh("_stackId_")]={numericAxisId:s,cateAxisId:i,items:[p]};return nr(nr({},h),{},Hd({},w,N))},c),f={};return Object.keys(d).reduce(function(h,p){var v=d[p];if(v.hasStack){var j={};v.stackGroups=Object.keys(v.stackGroups).reduce(function(g,x){var w=v.stackGroups[x];return nr(nr({},g),{},Hd({},x,{numericAxisId:s,cateAxisId:i,items:w.items,stackedData:YSe(t,w.items,a)}))},j)}return nr(nr({},h),{},Hd({},p,v))},f)},c9=function(t,n){var s=n.realScaleType,i=n.type,a=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=s||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var f=fSe(d,a,l);return t.domain([c0(f),l0(f)]),{niceTicks:f}}if(a&&i==="number"){var h=t.domain(),p=hSe(h,a,l);return{niceTicks:p}}return null};function PI(e){var t=e.axis,n=e.ticks,s=e.bandSize,i=e.entry,a=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Dt(i[t.dataKey])){var l=wy(n,"value",i[t.dataKey]);if(l)return l.coordinate+s/2}return n[a]?n[a].coordinate+s/2:null}var c=kr(i,Dt(o)?t.dataKey:o);return Dt(c)?null:t.scale(c)}var AI=function(t){var n=t.axis,s=t.ticks,i=t.offset,a=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return s[l]?s[l].coordinate+i:null;var c=kr(o,n.dataKey,n.domain[l]);return Dt(c)?null:n.scale(c)-a/2+i},JSe=function(t){var n=t.numericAxis,s=n.scale.domain();if(n.type==="number"){var i=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]);return i<=0&&a>=0?0:a<0?a:i}return s[0]},eCe=function(t,n){var s,i=(s=t.type)!==null&&s!==void 0&&s.defaultProps?nr(nr({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(Mr(a)){var o=n[a];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},tCe=function(t){return t.reduce(function(n,s){return[c0(s.concat([n[0]]).filter(We)),l0(s.concat([n[1]]).filter(We))]},[1/0,-1/0])},u9=function(t,n,s){return Object.keys(t).reduce(function(i,a){var o=t[a],l=o.stackedData,c=l.reduce(function(d,f){var h=tCe(f.slice(n,s+1));return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},EI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,TI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,G1=function(t,n,s){if(Mt(t))return t(n,s);if(!Array.isArray(t))return n;var i=[];if(We(t[0]))i[0]=s?t[0]:Math.min(t[0],n[0]);else if(EI.test(t[0])){var a=+EI.exec(t[0])[1];i[0]=n[0]-a}else Mt(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(We(t[1]))i[1]=s?t[1]:Math.max(t[1],n[1]);else if(TI.test(t[1])){var o=+TI.exec(t[1])[1];i[1]=n[1]+o}else Mt(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},Yy=function(t,n,s){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!s||i>0)return i}if(t&&n&&n.length>=2){for(var a=C2(n,function(h){return h.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var d=a[l],f=a[l-1];o=Math.min((d.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},kI=function(t,n,s){return!t||!t.length||Dg(t,ii(s,"type.defaultProps.domain"))?n:t},d9=function(t,n){var s=t.type.defaultProps?nr(nr({},t.type.defaultProps),t.props):t.props,i=s.dataKey,a=s.name,o=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,f=s.hide;return nr(nr({},wt(t,!1)),{},{dataKey:i,unit:o,formatter:l,name:a||i,color:X2(t),value:kr(n,i),type:c,payload:n,chartType:d,hide:f})};function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}function OI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function bo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OI(Object(n),!0).forEach(function(s){f9(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function f9(e,t,n){return t=nCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nCe(e){var t=rCe(e,"string");return Ap(t)=="symbol"?t:t+""}function rCe(e,t){if(Ap(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ap(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sCe(e,t){return lCe(e)||oCe(e,t)||aCe(e,t)||iCe()}function iCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aCe(e,t){if(e){if(typeof e=="string")return MI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MI(e,t)}}function MI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function oCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function lCe(e){if(Array.isArray(e))return e}var Xy=Math.PI/180,cCe=function(t){return t*180/Math.PI},kn=function(t,n,s,i){return{x:t+Math.cos(-Xy*i)*s,y:n+Math.sin(-Xy*i)*s}},h9=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(n-(s.top||0)-(s.bottom||0)))/2},uCe=function(t,n,s,i,a){var o=t.width,l=t.height,c=t.startAngle,d=t.endAngle,f=js(t.cx,o,o/2),h=js(t.cy,l,l/2),p=h9(o,l,s),v=js(t.innerRadius,p,0),j=js(t.outerRadius,p,p*.8),g=Object.keys(n);return g.reduce(function(x,w){var N=n[w],y=N.domain,A=N.reversed,P;if(Dt(N.range))i==="angleAxis"?P=[c,d]:i==="radiusAxis"&&(P=[v,j]),A&&(P=[P[1],P[0]]);else{P=N.range;var E=P,C=sCe(E,2);c=C[0],d=C[1]}var S=o9(N,a),k=S.realScaleType,I=S.scale;I.domain(y).range(P),l9(I);var R=c9(I,bo(bo({},N),{},{realScaleType:k})),D=bo(bo(bo({},N),R),{},{range:P,radius:j,realScaleType:k,scale:I,cx:f,cy:h,innerRadius:v,outerRadius:j,startAngle:c,endAngle:d});return bo(bo({},x),{},f9({},w,D))},{})},dCe=function(t,n){var s=t.x,i=t.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(s-a,2)+Math.pow(i-o,2))},fCe=function(t,n){var s=t.x,i=t.y,a=n.cx,o=n.cy,l=dCe({x:s,y:i},{x:a,y:o});if(l<=0)return{radius:l};var c=(s-a)/l,d=Math.acos(c);return i>o&&(d=2*Math.PI-d),{radius:l,angle:cCe(d),angleInRadian:d}},hCe=function(t){var n=t.startAngle,s=t.endAngle,i=Math.floor(n/360),a=Math.floor(s/360),o=Math.min(i,a);return{startAngle:n-o*360,endAngle:s-o*360}},mCe=function(t,n){var s=n.startAngle,i=n.endAngle,a=Math.floor(s/360),o=Math.floor(i/360),l=Math.min(a,o);return t+l*360},II=function(t,n){var s=t.x,i=t.y,a=fCe({x:s,y:i},n),o=a.radius,l=a.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var f=hCe(n),h=f.startAngle,p=f.endAngle,v=l,j;if(h<=p){for(;v>p;)v-=360;for(;v<h;)v+=360;j=v>=h&&v<=p}else{for(;v>h;)v-=360;for(;v<p;)v+=360;j=v>=p&&v<=h}return j?bo(bo({},n),{},{radius:o,angle:mCe(v,n)}):null},m9=function(t){return!_.isValidElement(t)&&!Mt(t)&&typeof t!="boolean"?t.className:""};function Ep(e){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}var pCe=["offset"];function gCe(e){return bCe(e)||yCe(e)||vCe(e)||xCe()}function xCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vCe(e,t){if(e){if(typeof e=="string")return Z1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z1(e,t)}}function yCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bCe(e){if(Array.isArray(e))return Z1(e)}function Z1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function jCe(e,t){if(e==null)return{};var n=_Ce(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function _Ce(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function RI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RI(Object(n),!0).forEach(function(s){wCe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function wCe(e,t,n){return t=NCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NCe(e){var t=SCe(e,"string");return Ep(t)=="symbol"?t:t+""}function SCe(e,t){if(Ep(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ep(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tp(){return Tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Tp.apply(this,arguments)}var CCe=function(t){var n=t.value,s=t.formatter,i=Dt(t.children)?n:t.children;return Mt(s)?s(i):i},PCe=function(t,n){var s=bs(n-t),i=Math.min(Math.abs(n-t),360);return s*i},ACe=function(t,n,s){var i=t.position,a=t.viewBox,o=t.offset,l=t.className,c=a,d=c.cx,f=c.cy,h=c.innerRadius,p=c.outerRadius,v=c.startAngle,j=c.endAngle,g=c.clockWise,x=(h+p)/2,w=PCe(v,j),N=w>=0?1:-1,y,A;i==="insideStart"?(y=v+N*o,A=g):i==="insideEnd"?(y=j-N*o,A=!g):i==="end"&&(y=j+N*o,A=g),A=w<=0?A:!A;var P=kn(d,f,x,y),E=kn(d,f,x,y+(A?1:-1)*359),C="M".concat(P.x,",").concat(P.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(A?0:1,`,
    `).concat(E.x,",").concat(E.y),S=Dt(t.id)?vh("recharts-radial-line-"):t.id;return q.createElement("text",Tp({},s,{dominantBaseline:"central",className:zt("recharts-radial-bar-label",l)}),q.createElement("defs",null,q.createElement("path",{id:S,d:C})),q.createElement("textPath",{xlinkHref:"#".concat(S)},n))},ECe=function(t){var n=t.viewBox,s=t.offset,i=t.position,a=n,o=a.cx,l=a.cy,c=a.innerRadius,d=a.outerRadius,f=a.startAngle,h=a.endAngle,p=(f+h)/2;if(i==="outside"){var v=kn(o,l,d+s,p),j=v.x,g=v.y;return{x:j,y:g,textAnchor:j>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+d)/2,w=kn(o,l,x,p),N=w.x,y=w.y;return{x:N,y,textAnchor:"middle",verticalAnchor:"middle"}},TCe=function(t){var n=t.viewBox,s=t.parentViewBox,i=t.offset,a=t.position,o=n,l=o.x,c=o.y,d=o.width,f=o.height,h=f>=0?1:-1,p=h*i,v=h>0?"end":"start",j=h>0?"start":"end",g=d>=0?1:-1,x=g*i,w=g>0?"end":"start",N=g>0?"start":"end";if(a==="top"){var y={x:l+d/2,y:c-h*i,textAnchor:"middle",verticalAnchor:v};return Sr(Sr({},y),s?{height:Math.max(c-s.y,0),width:d}:{})}if(a==="bottom"){var A={x:l+d/2,y:c+f+p,textAnchor:"middle",verticalAnchor:j};return Sr(Sr({},A),s?{height:Math.max(s.y+s.height-(c+f),0),width:d}:{})}if(a==="left"){var P={x:l-x,y:c+f/2,textAnchor:w,verticalAnchor:"middle"};return Sr(Sr({},P),s?{width:Math.max(P.x-s.x,0),height:f}:{})}if(a==="right"){var E={x:l+d+x,y:c+f/2,textAnchor:N,verticalAnchor:"middle"};return Sr(Sr({},E),s?{width:Math.max(s.x+s.width-E.x,0),height:f}:{})}var C=s?{width:d,height:f}:{};return a==="insideLeft"?Sr({x:l+x,y:c+f/2,textAnchor:N,verticalAnchor:"middle"},C):a==="insideRight"?Sr({x:l+d-x,y:c+f/2,textAnchor:w,verticalAnchor:"middle"},C):a==="insideTop"?Sr({x:l+d/2,y:c+p,textAnchor:"middle",verticalAnchor:j},C):a==="insideBottom"?Sr({x:l+d/2,y:c+f-p,textAnchor:"middle",verticalAnchor:v},C):a==="insideTopLeft"?Sr({x:l+x,y:c+p,textAnchor:N,verticalAnchor:j},C):a==="insideTopRight"?Sr({x:l+d-x,y:c+p,textAnchor:w,verticalAnchor:j},C):a==="insideBottomLeft"?Sr({x:l+x,y:c+f-p,textAnchor:N,verticalAnchor:v},C):a==="insideBottomRight"?Sr({x:l+d-x,y:c+f-p,textAnchor:w,verticalAnchor:v},C):mh(a)&&(We(a.x)||zc(a.x))&&(We(a.y)||zc(a.y))?Sr({x:l+js(a.x,d),y:c+js(a.y,f),textAnchor:"end",verticalAnchor:"end"},C):Sr({x:l+d/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},C)},kCe=function(t){return"cx"in t&&We(t.cx)};function Fr(e){var t=e.offset,n=t===void 0?5:t,s=jCe(e,pCe),i=Sr({offset:n},s),a=i.viewBox,o=i.position,l=i.value,c=i.children,d=i.content,f=i.className,h=f===void 0?"":f,p=i.textBreakAll;if(!a||Dt(l)&&Dt(c)&&!_.isValidElement(d)&&!Mt(d))return null;if(_.isValidElement(d))return _.cloneElement(d,i);var v;if(Mt(d)){if(v=_.createElement(d,i),_.isValidElement(v))return v}else v=CCe(i);var j=kCe(a),g=wt(i,!0);if(j&&(o==="insideStart"||o==="insideEnd"||o==="end"))return ACe(i,v,g);var x=j?ECe(i):TCe(i);return q.createElement(vu,Tp({className:zt("recharts-label",h)},g,x,{breakAll:p}),v)}Fr.displayName="Label";var p9=function(t){var n=t.cx,s=t.cy,i=t.angle,a=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,f=t.outerRadius,h=t.x,p=t.y,v=t.top,j=t.left,g=t.width,x=t.height,w=t.clockWise,N=t.labelViewBox;if(N)return N;if(We(g)&&We(x)){if(We(h)&&We(p))return{x:h,y:p,width:g,height:x};if(We(v)&&We(j))return{x:v,y:j,width:g,height:x}}return We(h)&&We(p)?{x:h,y:p,width:0,height:0}:We(n)&&We(s)?{cx:n,cy:s,startAngle:a||i||0,endAngle:o||i||0,innerRadius:d||0,outerRadius:f||c||l||0,clockWise:w}:t.viewBox?t.viewBox:{}},OCe=function(t,n){return t?t===!0?q.createElement(Fr,{key:"label-implicit",viewBox:n}):Mr(t)?q.createElement(Fr,{key:"label-implicit",viewBox:n,value:t}):_.isValidElement(t)?t.type===Fr?_.cloneElement(t,{key:"label-implicit",viewBox:n}):q.createElement(Fr,{key:"label-implicit",content:t,viewBox:n}):Mt(t)?q.createElement(Fr,{key:"label-implicit",content:t,viewBox:n}):mh(t)?q.createElement(Fr,Tp({viewBox:n},t,{key:"label-implicit"})):null:null},MCe=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var i=t.children,a=p9(t),o=ai(i,Fr).map(function(c,d){return _.cloneElement(c,{viewBox:n||a,key:"label-".concat(d)})});if(!s)return o;var l=OCe(t.label,n||a);return[l].concat(gCe(o))};Fr.parseViewBox=p9;Fr.renderCallByParent=MCe;function ICe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var RCe=ICe;const LCe=on(RCe);function kp(e){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(e)}var DCe=["valueAccessor"],$Ce=["data","dataKey","clockWise","id","textBreakAll"];function FCe(e){return qCe(e)||VCe(e)||BCe(e)||zCe()}function zCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BCe(e,t){if(e){if(typeof e=="string")return Q1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q1(e,t)}}function VCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qCe(e){if(Array.isArray(e))return Q1(e)}function Q1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Jy(){return Jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Jy.apply(this,arguments)}function LI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function DI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LI(Object(n),!0).forEach(function(s){UCe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function UCe(e,t,n){return t=HCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HCe(e){var t=WCe(e,"string");return kp(t)=="symbol"?t:t+""}function WCe(e,t){if(kp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(kp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $I(e,t){if(e==null)return{};var n=KCe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function KCe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var GCe=function(t){return Array.isArray(t.value)?LCe(t.value):t.value};function Lo(e){var t=e.valueAccessor,n=t===void 0?GCe:t,s=$I(e,DCe),i=s.data,a=s.dataKey,o=s.clockWise,l=s.id,c=s.textBreakAll,d=$I(s,$Ce);return!i||!i.length?null:q.createElement(sn,{className:"recharts-label-list"},i.map(function(f,h){var p=Dt(a)?n(f,h):kr(f&&f.payload,a),v=Dt(l)?{}:{id:"".concat(l,"-").concat(h)};return q.createElement(Fr,Jy({},wt(f,!0),d,v,{parentViewBox:f.parentViewBox,value:p,textBreakAll:c,viewBox:Fr.parseViewBox(Dt(o)?f:DI(DI({},f),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}Lo.displayName="LabelList";function ZCe(e,t){return e?e===!0?q.createElement(Lo,{key:"labelList-implicit",data:t}):q.isValidElement(e)||Mt(e)?q.createElement(Lo,{key:"labelList-implicit",data:t,content:e}):mh(e)?q.createElement(Lo,Jy({data:t},e,{key:"labelList-implicit"})):null:null}function QCe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,i=ai(s,Lo).map(function(o,l){return _.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return i;var a=ZCe(e.label,t);return[a].concat(FCe(i))}Lo.renderCallByParent=QCe;function Op(e){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}function Y1(){return Y1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Y1.apply(this,arguments)}function FI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function zI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FI(Object(n),!0).forEach(function(s){YCe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function YCe(e,t,n){return t=XCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XCe(e){var t=JCe(e,"string");return Op(t)=="symbol"?t:t+""}function JCe(e,t){if(Op(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Op(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ePe=function(t,n){var s=bs(n-t),i=Math.min(Math.abs(n-t),359.999);return s*i},Xx=function(t){var n=t.cx,s=t.cy,i=t.radius,a=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,f=c*(l?1:-1)+i,h=Math.asin(c/f)/Xy,p=d?a:a+o*h,v=kn(n,s,f,p),j=kn(n,s,i,p),g=d?a-o*h:a,x=kn(n,s,f*Math.cos(h*Xy),g);return{center:v,circleTangency:j,lineTangency:x,theta:h}},g9=function(t){var n=t.cx,s=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.startAngle,l=t.endAngle,c=ePe(o,l),d=o+c,f=kn(n,s,a,o),h=kn(n,s,a,d),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var v=kn(n,s,i,o),j=kn(n,s,i,d);p+="L ".concat(j.x,",").concat(j.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(v.x,",").concat(v.y," Z")}else p+="L ".concat(n,",").concat(s," Z");return p},tPe=function(t){var n=t.cx,s=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,f=t.endAngle,h=bs(f-d),p=Xx({cx:n,cy:s,radius:a,angle:d,sign:h,cornerRadius:o,cornerIsExternal:c}),v=p.circleTangency,j=p.lineTangency,g=p.theta,x=Xx({cx:n,cy:s,radius:a,angle:f,sign:-h,cornerRadius:o,cornerIsExternal:c}),w=x.circleTangency,N=x.lineTangency,y=x.theta,A=c?Math.abs(d-f):Math.abs(d-f)-g-y;if(A<0)return l?"M ".concat(j.x,",").concat(j.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):g9({cx:n,cy:s,innerRadius:i,outerRadius:a,startAngle:d,endAngle:f});var P="M ".concat(j.x,",").concat(j.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(A>180),",").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(N.x,",").concat(N.y,`
  `);if(i>0){var E=Xx({cx:n,cy:s,radius:i,angle:d,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=E.circleTangency,S=E.lineTangency,k=E.theta,I=Xx({cx:n,cy:s,radius:i,angle:f,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),R=I.circleTangency,D=I.lineTangency,z=I.theta,V=c?Math.abs(d-f):Math.abs(d-f)-k-z;if(V<0&&o===0)return"".concat(P,"L").concat(n,",").concat(s,"Z");P+="L".concat(D.x,",").concat(D.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(V>180),",").concat(+(h>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(S.x,",").concat(S.y,"Z")}else P+="L".concat(n,",").concat(s,"Z");return P},nPe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},x9=function(t){var n=zI(zI({},nPe),t),s=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,f=n.startAngle,h=n.endAngle,p=n.className;if(o<a||f===h)return null;var v=zt("recharts-sector",p),j=o-a,g=js(l,j,0,!0),x;return g>0&&Math.abs(f-h)<360?x=tPe({cx:s,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(g,j/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:h}):x=g9({cx:s,cy:i,innerRadius:a,outerRadius:o,startAngle:f,endAngle:h}),q.createElement("path",Y1({},wt(n,!0),{className:v,d:x,role:"img"}))};function Mp(e){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(e)}function X1(){return X1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},X1.apply(this,arguments)}function BI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function VI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BI(Object(n),!0).forEach(function(s){rPe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function rPe(e,t,n){return t=sPe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sPe(e){var t=iPe(e,"string");return Mp(t)=="symbol"?t:t+""}function iPe(e,t){if(Mp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Mp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qI={curveBasisClosed:rme,curveBasisOpen:sme,curveBasis:nme,curveBumpX:Vhe,curveBumpY:qhe,curveLinearClosed:ime,curveLinear:Qj,curveMonotoneX:ame,curveMonotoneY:ome,curveNatural:lme,curveStep:cme,curveStepAfter:dme,curveStepBefore:ume},Jx=function(t){return t.x===+t.x&&t.y===+t.y},am=function(t){return t.x},om=function(t){return t.y},aPe=function(t,n){if(Mt(t))return t;var s="curve".concat(Gj(t));return(s==="curveMonotone"||s==="curveBump")&&n?qI["".concat(s).concat(n==="vertical"?"Y":"X")]:qI[s]||Qj},oPe=function(t){var n=t.type,s=n===void 0?"linear":n,i=t.points,a=i===void 0?[]:i,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,f=aPe(s,l),h=d?a.filter(function(g){return Jx(g)}):a,p;if(Array.isArray(o)){var v=d?o.filter(function(g){return Jx(g)}):o,j=h.map(function(g,x){return VI(VI({},g),{},{base:v[x]})});return l==="vertical"?p=qx().y(om).x1(am).x0(function(g){return g.base.x}):p=qx().x(am).y1(om).y0(function(g){return g.base.y}),p.defined(Jx).curve(f),p(j)}return l==="vertical"&&We(o)?p=qx().y(om).x1(am).x0(o):We(o)?p=qx().x(am).y1(om).y0(o):p=dq().x(am).y(om),p.defined(Jx).curve(f),p(h)},eb=function(t){var n=t.className,s=t.points,i=t.path,a=t.pathRef;if((!s||!s.length)&&!i)return null;var o=s&&s.length?oPe(t):i;return q.createElement("path",X1({},wt(t,!1),Ny(t),{className:zt("recharts-curve",n),d:o,ref:a}))},v9={exports:{}},lPe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",cPe=lPe,uPe=cPe;function y9(){}function b9(){}b9.resetWarningCache=y9;var dPe=function(){function e(s,i,a,o,l,c){if(c!==uPe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:b9,resetWarningCache:y9};return n.PropTypes=n,n};v9.exports=dPe();var fPe=v9.exports;const ln=on(fPe);var hPe=Object.getOwnPropertyNames,mPe=Object.getOwnPropertySymbols,pPe=Object.prototype.hasOwnProperty;function UI(e,t){return function(s,i,a){return e(s,i,a)&&t(s,i,a)}}function ev(e){return function(n,s,i){if(!n||!s||typeof n!="object"||typeof s!="object")return e(n,s,i);var a=i.cache,o=a.get(n),l=a.get(s);if(o&&l)return o===s&&l===n;a.set(n,s),a.set(s,n);var c=e(n,s,i);return a.delete(n),a.delete(s),c}}function HI(e){return hPe(e).concat(mPe(e))}var gPe=Object.hasOwn||function(e,t){return pPe.call(e,t)};function Iu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var xPe="__v",vPe="__o",yPe="_owner",WI=Object.getOwnPropertyDescriptor,KI=Object.keys;function bPe(e,t,n){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!n.equals(e[s],t[s],s,s,e,t,n))return!1;return!0}function jPe(e,t){return Iu(e.getTime(),t.getTime())}function _Pe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function wPe(e,t){return e===t}function GI(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var i=new Array(s),a=e.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var d=t.entries(),f=!1,h=0;(l=d.next())&&!l.done;){if(i[h]){h++;continue}var p=o.value,v=l.value;if(n.equals(p[0],v[0],c,h,e,t,n)&&n.equals(p[1],v[1],p[0],v[0],e,t,n)){f=i[h]=!0;break}h++}if(!f)return!1;c++}return!0}var NPe=Iu;function SPe(e,t,n){var s=KI(e),i=s.length;if(KI(t).length!==i)return!1;for(;i-- >0;)if(!j9(e,t,n,s[i]))return!1;return!0}function lm(e,t,n){var s=HI(e),i=s.length;if(HI(t).length!==i)return!1;for(var a,o,l;i-- >0;)if(a=s[i],!j9(e,t,n,a)||(o=WI(e,a),l=WI(t,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function CPe(e,t){return Iu(e.valueOf(),t.valueOf())}function PPe(e,t){return e.source===t.source&&e.flags===t.flags}function ZI(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var i=new Array(s),a=e.values(),o,l;(o=a.next())&&!o.done;){for(var c=t.values(),d=!1,f=0;(l=c.next())&&!l.done;){if(!i[f]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){d=i[f]=!0;break}f++}if(!d)return!1}return!0}function APe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function EPe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function j9(e,t,n,s){return(s===yPe||s===vPe||s===xPe)&&(e.$$typeof||t.$$typeof)?!0:gPe(t,s)&&n.equals(e[s],t[s],s,s,e,t,n)}var TPe="[object Arguments]",kPe="[object Boolean]",OPe="[object Date]",MPe="[object Error]",IPe="[object Map]",RPe="[object Number]",LPe="[object Object]",DPe="[object RegExp]",$Pe="[object Set]",FPe="[object String]",zPe="[object URL]",BPe=Array.isArray,QI=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,YI=Object.assign,VPe=Object.prototype.toString.call.bind(Object.prototype.toString);function qPe(e){var t=e.areArraysEqual,n=e.areDatesEqual,s=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,f=e.areSetsEqual,h=e.areTypedArraysEqual,p=e.areUrlsEqual;return function(j,g,x){if(j===g)return!0;if(j==null||g==null)return!1;var w=typeof j;if(w!==typeof g)return!1;if(w!=="object")return w==="number"?o(j,g,x):w==="function"?i(j,g,x):!1;var N=j.constructor;if(N!==g.constructor)return!1;if(N===Object)return l(j,g,x);if(BPe(j))return t(j,g,x);if(QI!=null&&QI(j))return h(j,g,x);if(N===Date)return n(j,g,x);if(N===RegExp)return d(j,g,x);if(N===Map)return a(j,g,x);if(N===Set)return f(j,g,x);var y=VPe(j);return y===OPe?n(j,g,x):y===DPe?d(j,g,x):y===IPe?a(j,g,x):y===$Pe?f(j,g,x):y===LPe?typeof j.then!="function"&&typeof g.then!="function"&&l(j,g,x):y===zPe?p(j,g,x):y===MPe?s(j,g,x):y===TPe?l(j,g,x):y===kPe||y===RPe||y===FPe?c(j,g,x):!1}}function UPe(e){var t=e.circular,n=e.createCustomConfig,s=e.strict,i={areArraysEqual:s?lm:bPe,areDatesEqual:jPe,areErrorsEqual:_Pe,areFunctionsEqual:wPe,areMapsEqual:s?UI(GI,lm):GI,areNumbersEqual:NPe,areObjectsEqual:s?lm:SPe,arePrimitiveWrappersEqual:CPe,areRegExpsEqual:PPe,areSetsEqual:s?UI(ZI,lm):ZI,areTypedArraysEqual:s?lm:APe,areUrlsEqual:EPe};if(n&&(i=YI({},i,n(i))),t){var a=ev(i.areArraysEqual),o=ev(i.areMapsEqual),l=ev(i.areObjectsEqual),c=ev(i.areSetsEqual);i=YI({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function HPe(e){return function(t,n,s,i,a,o,l){return e(t,n,l)}}function WPe(e){var t=e.circular,n=e.comparator,s=e.createState,i=e.equals,a=e.strict;if(s)return function(c,d){var f=s(),h=f.cache,p=h===void 0?t?new WeakMap:void 0:h,v=f.meta;return n(c,d,{cache:p,equals:i,meta:v,strict:a})};if(t)return function(c,d){return n(c,d,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,d){return n(c,d,o)}}var KPe=xc();xc({strict:!0});xc({circular:!0});xc({circular:!0,strict:!0});xc({createInternalComparator:function(){return Iu}});xc({strict:!0,createInternalComparator:function(){return Iu}});xc({circular:!0,createInternalComparator:function(){return Iu}});xc({circular:!0,createInternalComparator:function(){return Iu},strict:!0});function xc(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,s=e.createInternalComparator,i=e.createState,a=e.strict,o=a===void 0?!1:a,l=UPe(e),c=qPe(l),d=s?s(c):HPe(c);return WPe({circular:n,comparator:c,createState:i,equals:d,strict:o})}function GPe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function XI(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,s=function i(a){n<0&&(n=a),a-n>t?(e(a),n=-1):GPe(i)};requestAnimationFrame(s)}function J1(e){"@babel/helpers - typeof";return J1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J1(e)}function ZPe(e){return JPe(e)||XPe(e)||YPe(e)||QPe()}function QPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YPe(e,t){if(e){if(typeof e=="string")return JI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JI(e,t)}}function JI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function XPe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function JPe(e){if(Array.isArray(e))return e}function e2e(){var e={},t=function(){return null},n=!1,s=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,l=ZPe(o),c=l[0],d=l.slice(1);if(typeof c=="number"){XI(i.bind(null,d),c);return}i(c),XI(i.bind(null,d));return}J1(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,s(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function Ip(e){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}function eR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function tR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eR(Object(n),!0).forEach(function(s){_9(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function _9(e,t,n){return t=t2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t2e(e){var t=n2e(e,"string");return Ip(t)==="symbol"?t:String(t)}function n2e(e,t){if(Ip(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ip(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r2e=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(s,i){return s.filter(function(a){return i.includes(a)})})},s2e=function(t){return t},i2e=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Rm=function(t,n){return Object.keys(n).reduce(function(s,i){return tR(tR({},s),{},_9({},i,t(i,n[i])))},{})},nR=function(t,n,s){return t.map(function(i){return"".concat(i2e(i)," ").concat(n,"ms ").concat(s)}).join(",")};function a2e(e,t){return c2e(e)||l2e(e,t)||w9(e,t)||o2e()}function o2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l2e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function c2e(e){if(Array.isArray(e))return e}function u2e(e){return h2e(e)||f2e(e)||w9(e)||d2e()}function d2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w9(e,t){if(e){if(typeof e=="string")return eS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eS(e,t)}}function f2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function h2e(e){if(Array.isArray(e))return eS(e)}function eS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var tb=1e-4,N9=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},S9=function(t,n){return t.map(function(s,i){return s*Math.pow(n,i)}).reduce(function(s,i){return s+i})},rR=function(t,n){return function(s){var i=N9(t,n);return S9(i,s)}},m2e=function(t,n){return function(s){var i=N9(t,n),a=[].concat(u2e(i.map(function(o,l){return o*l}).slice(1)),[0]);return S9(a,s)}},sR=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=n[0],a=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,o=1,l=1;break;case"ease":i=.25,a=.1,o=.25,l=1;break;case"ease-in":i=.42,a=0,o=1,l=1;break;case"ease-out":i=.42,a=0,o=.58,l=1;break;case"ease-in-out":i=0,a=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),f=a2e(d,4);i=f[0],a=f[1],o=f[2],l=f[3]}}}var h=rR(i,o),p=rR(a,l),v=m2e(i,o),j=function(w){return w>1?1:w<0?0:w},g=function(w){for(var N=w>1?1:w,y=N,A=0;A<8;++A){var P=h(y)-N,E=v(y);if(Math.abs(P-N)<tb||E<tb)return p(y);y=j(y-P/E)}return p(y)};return g.isStepper=!1,g},p2e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,s=n===void 0?100:n,i=t.damping,a=i===void 0?8:i,o=t.dt,l=o===void 0?17:o,c=function(f,h,p){var v=-(f-h)*s,j=p*a,g=p+(v-j)*l/1e3,x=p*l/1e3+f;return Math.abs(x-h)<tb&&Math.abs(g)<tb?[h,0]:[x,g]};return c.isStepper=!0,c.dt=l,c},g2e=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return sR(i);case"spring":return p2e();default:if(i.split("(")[0]==="cubic-bezier")return sR(i)}return typeof i=="function"?i:null};function Rp(e){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(e)}function iR(e){return y2e(e)||v2e(e)||C9(e)||x2e()}function x2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function y2e(e){if(Array.isArray(e))return nS(e)}function aR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Kr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aR(Object(n),!0).forEach(function(s){tS(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function tS(e,t,n){return t=b2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b2e(e){var t=j2e(e,"string");return Rp(t)==="symbol"?t:String(t)}function j2e(e,t){if(Rp(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Rp(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _2e(e,t){return S2e(e)||N2e(e,t)||C9(e,t)||w2e()}function w2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C9(e,t){if(e){if(typeof e=="string")return nS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nS(e,t)}}function nS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function N2e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function S2e(e){if(Array.isArray(e))return e}var nb=function(t,n,s){return t+(n-t)*s},rS=function(t){var n=t.from,s=t.to;return n!==s},C2e=function e(t,n,s){var i=Rm(function(a,o){if(rS(o)){var l=t(o.from,o.to,o.velocity),c=_2e(l,2),d=c[0],f=c[1];return Kr(Kr({},o),{},{from:d,velocity:f})}return o},n);return s<1?Rm(function(a,o){return rS(o)?Kr(Kr({},o),{},{velocity:nb(o.velocity,i[a].velocity,s),from:nb(o.from,i[a].from,s)}):o},n):e(t,i,s-1)};const P2e=function(e,t,n,s,i){var a=r2e(e,t),o=a.reduce(function(x,w){return Kr(Kr({},x),{},tS({},w,[e[w],t[w]]))},{}),l=a.reduce(function(x,w){return Kr(Kr({},x),{},tS({},w,{from:e[w],velocity:0,to:t[w]}))},{}),c=-1,d,f,h=function(){return null},p=function(){return Rm(function(w,N){return N.from},l)},v=function(){return!Object.values(l).filter(rS).length},j=function(w){d||(d=w);var N=w-d,y=N/n.dt;l=C2e(n,l,y),i(Kr(Kr(Kr({},e),t),p())),d=w,v()||(c=requestAnimationFrame(h))},g=function(w){f||(f=w);var N=(w-f)/s,y=Rm(function(P,E){return nb.apply(void 0,iR(E).concat([n(N)]))},o);if(i(Kr(Kr(Kr({},e),t),y)),N<1)c=requestAnimationFrame(h);else{var A=Rm(function(P,E){return nb.apply(void 0,iR(E).concat([n(1)]))},o);i(Kr(Kr(Kr({},e),t),A))}};return h=n.isStepper?j:g,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function If(e){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(e)}var A2e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function E2e(e,t){if(e==null)return{};var n=T2e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function T2e(e,t){if(e==null)return{};var n={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function vw(e){return I2e(e)||M2e(e)||O2e(e)||k2e()}function k2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O2e(e,t){if(e){if(typeof e=="string")return sS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sS(e,t)}}function M2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function I2e(e){if(Array.isArray(e))return sS(e)}function sS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function oR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oR(Object(n),!0).forEach(function(s){bm(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function bm(e,t,n){return t=P9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L2e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,P9(s.key),s)}}function D2e(e,t,n){return t&&L2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function P9(e){var t=$2e(e,"string");return If(t)==="symbol"?t:String(t)}function $2e(e,t){if(If(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(If(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iS(e,t)}function iS(e,t){return iS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},iS(e,t)}function z2e(e){var t=B2e();return function(){var s=rb(e),i;if(t){var a=rb(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return aS(this,i)}}function aS(e,t){if(t&&(If(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oS(e)}function oS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rb(e){return rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rb(e)}var eo=function(e){F2e(n,e);var t=z2e(n);function n(s,i){var a;R2e(this,n),a=t.call(this,s,i);var o=a.props,l=o.isActive,c=o.attributeName,d=o.from,f=o.to,h=o.steps,p=o.children,v=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(oS(a)),a.changeStyle=a.changeStyle.bind(oS(a)),!l||v<=0)return a.state={style:{}},typeof p=="function"&&(a.state={style:f}),aS(a);if(h&&h.length)a.state={style:h[0].style};else if(d){if(typeof p=="function")return a.state={style:d},aS(a);a.state={style:c?bm({},c,d):d}}else a.state={style:{}};return a}return D2e(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,d=a.shouldReAnimate,f=a.to,h=a.from,p=this.state.style;if(l){if(!o){var v={style:c?bm({},c,f):f};this.state&&p&&(c&&p[c]!==f||!c&&p!==f)&&this.setState(v);return}if(!(KPe(i.to,f)&&i.canBegin&&i.isActive)){var j=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=j||d?h:i.to;if(this.state&&p){var x={style:c?bm({},c,g):g};(c&&p[c]!==g||!c&&p!==g)&&this.setState(x)}this.runAnimation(Ui(Ui({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,l=i.to,c=i.duration,d=i.easing,f=i.begin,h=i.onAnimationEnd,p=i.onAnimationStart,v=P2e(o,l,g2e(d),c,this.changeStyle),j=function(){a.stopJSAnimation=v()};this.manager.start([p,f,j,c,h])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,l=i.begin,c=i.onAnimationStart,d=o[0],f=d.style,h=d.duration,p=h===void 0?0:h,v=function(g,x,w){if(w===0)return g;var N=x.duration,y=x.easing,A=y===void 0?"ease":y,P=x.style,E=x.properties,C=x.onAnimationEnd,S=w>0?o[w-1]:x,k=E||Object.keys(P);if(typeof A=="function"||A==="spring")return[].concat(vw(g),[a.runJSAnimation.bind(a,{from:S.style,to:P,duration:N,easing:A}),N]);var I=nR(k,N,A),R=Ui(Ui(Ui({},S.style),P),{},{transition:I});return[].concat(vw(g),[R,N,C]).filter(s2e)};return this.manager.start([c].concat(vw(o.reduce(v,[f,Math.max(p,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=e2e());var a=i.begin,o=i.duration,l=i.attributeName,c=i.to,d=i.easing,f=i.onAnimationStart,h=i.onAnimationEnd,p=i.steps,v=i.children,j=this.manager;if(this.unSubscribe=j.subscribe(this.handleStyleChange),typeof d=="function"||typeof v=="function"||d==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var g=l?bm({},l,c):c,x=nR(Object.keys(g),o,d);j.start([f,a,Ui(Ui({},g),{},{transition:x}),o,h])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=E2e(i,A2e),d=_.Children.count(a),f=this.state.style;if(typeof a=="function")return a(f);if(!l||d===0||o<=0)return a;var h=function(v){var j=v.props,g=j.style,x=g===void 0?{}:g,w=j.className,N=_.cloneElement(v,Ui(Ui({},c),{},{style:Ui(Ui({},x),f),className:w}));return N};return d===1?h(_.Children.only(a)):q.createElement("div",null,_.Children.map(a,function(p){return h(p)}))}}]),n}(_.PureComponent);eo.displayName="Animate";eo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};eo.propTypes={from:ln.oneOfType([ln.object,ln.string]),to:ln.oneOfType([ln.object,ln.string]),attributeName:ln.string,duration:ln.number,begin:ln.number,easing:ln.oneOfType([ln.string,ln.func]),steps:ln.arrayOf(ln.shape({duration:ln.number.isRequired,style:ln.object.isRequired,easing:ln.oneOfType([ln.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ln.func]),properties:ln.arrayOf("string"),onAnimationEnd:ln.func})),children:ln.oneOfType([ln.node,ln.func]),isActive:ln.bool,canBegin:ln.bool,onAnimationEnd:ln.func,shouldReAnimate:ln.bool,onAnimationStart:ln.func,onAnimationReStart:ln.func};function Lp(e){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lp(e)}function sb(){return sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},sb.apply(this,arguments)}function V2e(e,t){return W2e(e)||H2e(e,t)||U2e(e,t)||q2e()}function q2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U2e(e,t){if(e){if(typeof e=="string")return lR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lR(e,t)}}function lR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function H2e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function W2e(e){if(Array.isArray(e))return e}function cR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function uR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cR(Object(n),!0).forEach(function(s){K2e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function K2e(e,t,n){return t=G2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G2e(e){var t=Z2e(e,"string");return Lp(t)=="symbol"?t:t+""}function Z2e(e,t){if(Lp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Lp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dR=function(t,n,s,i,a){var o=Math.min(Math.abs(s)/2,Math.abs(i)/2),l=i>=0?1:-1,c=s>=0?1:-1,d=i>=0&&s>=0||i<0&&s<0?1:0,f;if(o>0&&a instanceof Array){for(var h=[0,0,0,0],p=0,v=4;p<v;p++)h[p]=a[p]>o?o:a[p];f="M".concat(t,",").concat(n+l*h[0]),h[0]>0&&(f+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(t+c*h[0],",").concat(n)),f+="L ".concat(t+s-c*h[1],",").concat(n),h[1]>0&&(f+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(n+l*h[1])),f+="L ".concat(t+s,",").concat(n+i-l*h[2]),h[2]>0&&(f+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(t+s-c*h[2],",").concat(n+i)),f+="L ".concat(t+c*h[3],",").concat(n+i),h[3]>0&&(f+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+i-l*h[3])),f+="Z"}else if(o>0&&a===+a&&a>0){var j=Math.min(o,a);f="M ".concat(t,",").concat(n+l*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(d,",").concat(t+c*j,",").concat(n,`
            L `).concat(t+s-c*j,",").concat(n,`
            A `).concat(j,",").concat(j,",0,0,").concat(d,",").concat(t+s,",").concat(n+l*j,`
            L `).concat(t+s,",").concat(n+i-l*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(d,",").concat(t+s-c*j,",").concat(n+i,`
            L `).concat(t+c*j,",").concat(n+i,`
            A `).concat(j,",").concat(j,",0,0,").concat(d,",").concat(t,",").concat(n+i-l*j," Z")}else f="M ".concat(t,",").concat(n," h ").concat(s," v ").concat(i," h ").concat(-s," Z");return f},Q2e=function(t,n){if(!t||!n)return!1;var s=t.x,i=t.y,a=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(a,a+l),f=Math.max(a,a+l),h=Math.min(o,o+c),p=Math.max(o,o+c);return s>=d&&s<=f&&i>=h&&i<=p}return!1},Y2e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},J2=function(t){var n=uR(uR({},Y2e),t),s=_.useRef(),i=_.useState(-1),a=V2e(i,2),o=a[0],l=a[1];_.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var A=s.current.getTotalLength();A&&l(A)}catch{}},[]);var c=n.x,d=n.y,f=n.width,h=n.height,p=n.radius,v=n.className,j=n.animationEasing,g=n.animationDuration,x=n.animationBegin,w=n.isAnimationActive,N=n.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||h!==+h||f===0||h===0)return null;var y=zt("recharts-rectangle",v);return N?q.createElement(eo,{canBegin:o>0,from:{width:f,height:h,x:c,y:d},to:{width:f,height:h,x:c,y:d},duration:g,animationEasing:j,isActive:N},function(A){var P=A.width,E=A.height,C=A.x,S=A.y;return q.createElement(eo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,isActive:w,easing:j},q.createElement("path",sb({},wt(n,!0),{className:y,d:dR(C,S,P,E,p),ref:s})))}):q.createElement("path",sb({},wt(n,!0),{className:y,d:dR(c,d,f,h,p)}))},X2e=["points","className","baseLinePoints","connectNulls"];function Cd(){return Cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Cd.apply(this,arguments)}function J2e(e,t){if(e==null)return{};var n=eAe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function eAe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function fR(e){return sAe(e)||rAe(e)||nAe(e)||tAe()}function tAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nAe(e,t){if(e){if(typeof e=="string")return lS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lS(e,t)}}function rAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sAe(e){if(Array.isArray(e))return lS(e)}function lS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var hR=function(t){return t&&t.x===+t.x&&t.y===+t.y},iAe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(s){hR(s)?n[n.length-1].push(s):n[n.length-1].length>0&&n.push([])}),hR(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Lm=function(t,n){var s=iAe(t);n&&(s=[s.reduce(function(a,o){return[].concat(fR(a),fR(o))},[])]);var i=s.map(function(a){return a.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return s.length===1?"".concat(i,"Z"):i},aAe=function(t,n,s){var i=Lm(t,s);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Lm(n.reverse(),s).slice(1))},oAe=function(t){var n=t.points,s=t.className,i=t.baseLinePoints,a=t.connectNulls,o=J2e(t,X2e);if(!n||!n.length)return null;var l=zt("recharts-polygon",s);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",d=aAe(n,i,a);return q.createElement("g",{className:l},q.createElement("path",Cd({},wt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?q.createElement("path",Cd({},wt(o,!0),{fill:"none",d:Lm(n,a)})):null,c?q.createElement("path",Cd({},wt(o,!0),{fill:"none",d:Lm(i,a)})):null)}var f=Lm(n,a);return q.createElement("path",Cd({},wt(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function cS(){return cS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cS.apply(this,arguments)}var f0=function(t){var n=t.cx,s=t.cy,i=t.r,a=t.className,o=zt("recharts-dot",a);return n===+n&&s===+s&&i===+i?q.createElement("circle",cS({},wt(t,!1),Ny(t),{className:o,cx:n,cy:s,r:i})):null};function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}var lAe=["x","y","top","left","width","height","className"];function uS(){return uS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},uS.apply(this,arguments)}function mR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function cAe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mR(Object(n),!0).forEach(function(s){uAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uAe(e,t,n){return t=dAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dAe(e){var t=fAe(e,"string");return Dp(t)=="symbol"?t:t+""}function fAe(e,t){if(Dp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Dp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hAe(e,t){if(e==null)return{};var n=mAe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function mAe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var pAe=function(t,n,s,i,a,o){return"M".concat(t,",").concat(a,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(s)},gAe=function(t){var n=t.x,s=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,f=t.width,h=f===void 0?0:f,p=t.height,v=p===void 0?0:p,j=t.className,g=hAe(t,lAe),x=cAe({x:s,y:a,top:l,left:d,width:h,height:v},g);return!We(s)||!We(a)||!We(h)||!We(v)||!We(l)||!We(d)?null:q.createElement("path",uS({},wt(x,!0),{className:zt("recharts-cross",j),d:pAe(s,a,h,v,l,d)}))},xAe=o0,vAe=FU,yAe=ao;function bAe(e,t){return e&&e.length?xAe(e,yAe(t),vAe):void 0}var jAe=bAe;const _Ae=on(jAe);var wAe=o0,NAe=ao,SAe=zU;function CAe(e,t){return e&&e.length?wAe(e,NAe(t),SAe):void 0}var PAe=CAe;const AAe=on(PAe);var EAe=["cx","cy","angle","ticks","axisLine"],TAe=["ticks","tick","angle","tickFormatter","stroke"];function Rf(e){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rf(e)}function Dm(){return Dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Dm.apply(this,arguments)}function pR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Cc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pR(Object(n),!0).forEach(function(s){h0(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function gR(e,t){if(e==null)return{};var n=kAe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function kAe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function OAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xR(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,E9(s.key),s)}}function MAe(e,t,n){return t&&xR(e.prototype,t),n&&xR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function IAe(e,t,n){return t=ib(t),RAe(e,A9()?Reflect.construct(t,n||[],ib(e).constructor):t.apply(e,n))}function RAe(e,t){if(t&&(Rf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LAe(e)}function LAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A9=function(){return!!e})()}function ib(e){return ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ib(e)}function DAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dS(e,t)}function dS(e,t){return dS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},dS(e,t)}function h0(e,t,n){return t=E9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E9(e){var t=$Ae(e,"string");return Rf(t)=="symbol"?t:t+""}function $Ae(e,t){if(Rf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Rf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var m0=function(e){function t(){return OAe(this,t),IAe(this,t,arguments)}return DAe(t,e),MAe(t,[{key:"getTickValueCoord",value:function(s){var i=s.coordinate,a=this.props,o=a.angle,l=a.cx,c=a.cy;return kn(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,i;switch(s){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var s=this.props,i=s.cx,a=s.cy,o=s.angle,l=s.ticks,c=_Ae(l,function(f){return f.coordinate||0}),d=AAe(l,function(f){return f.coordinate||0});return{cx:i,cy:a,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.cx,a=s.cy,o=s.angle,l=s.ticks,c=s.axisLine,d=gR(s,EAe),f=l.reduce(function(j,g){return[Math.min(j[0],g.coordinate),Math.max(j[1],g.coordinate)]},[1/0,-1/0]),h=kn(i,a,f[0],o),p=kn(i,a,f[1],o),v=Cc(Cc(Cc({},wt(d,!1)),{},{fill:"none"},wt(c,!1)),{},{x1:h.x,y1:h.y,x2:p.x,y2:p.y});return q.createElement("line",Dm({className:"recharts-polar-radius-axis-line"},v))}},{key:"renderTicks",value:function(){var s=this,i=this.props,a=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,d=i.stroke,f=gR(i,TAe),h=this.getTickTextAnchor(),p=wt(f,!1),v=wt(o,!1),j=a.map(function(g,x){var w=s.getTickValueCoord(g),N=Cc(Cc(Cc(Cc({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(w.x,", ").concat(w.y,")")},p),{},{stroke:"none",fill:d},v),{},{index:x},w),{},{payload:g});return q.createElement(sn,Dm({className:zt("recharts-polar-radius-axis-tick",m9(o)),key:"tick-".concat(g.coordinate)},xu(s.props,g,x)),t.renderTickItem(o,N,c?c(g.value,x):g.value))});return q.createElement(sn,{className:"recharts-polar-radius-axis-ticks"},j)}},{key:"render",value:function(){var s=this.props,i=s.ticks,a=s.axisLine,o=s.tick;return!i||!i.length?null:q.createElement(sn,{className:zt("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),Fr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,i,a){var o;return q.isValidElement(s)?o=q.cloneElement(s,i):Mt(s)?o=s(i):o=q.createElement(vu,Dm({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])}(_.PureComponent);h0(m0,"displayName","PolarRadiusAxis");h0(m0,"axisType","radiusAxis");h0(m0,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}function Rc(){return Rc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Rc.apply(this,arguments)}function vR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Pc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vR(Object(n),!0).forEach(function(s){p0(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function FAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yR(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,k9(s.key),s)}}function zAe(e,t,n){return t&&yR(e.prototype,t),n&&yR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function BAe(e,t,n){return t=ab(t),VAe(e,T9()?Reflect.construct(t,n||[],ab(e).constructor):t.apply(e,n))}function VAe(e,t){if(t&&(Lf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qAe(e)}function qAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T9=function(){return!!e})()}function ab(e){return ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ab(e)}function UAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fS(e,t)}function fS(e,t){return fS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},fS(e,t)}function p0(e,t,n){return t=k9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k9(e){var t=HAe(e,"string");return Lf(t)=="symbol"?t:t+""}function HAe(e,t){if(Lf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Lf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var WAe=Math.PI/180,bR=1e-5,g0=function(e){function t(){return FAe(this,t),BAe(this,t,arguments)}return UAe(t,e),zAe(t,[{key:"getTickLineCoord",value:function(s){var i=this.props,a=i.cx,o=i.cy,l=i.radius,c=i.orientation,d=i.tickSize,f=d||8,h=kn(a,o,l,s.coordinate),p=kn(a,o,l+(c==="inner"?-1:1)*f,s.coordinate);return{x1:h.x,y1:h.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(s){var i=this.props.orientation,a=Math.cos(-s.coordinate*WAe),o;return a>bR?o=i==="outer"?"start":"end":a<-bR?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.cx,a=s.cy,o=s.radius,l=s.axisLine,c=s.axisLineType,d=Pc(Pc({},wt(this.props,!1)),{},{fill:"none"},wt(l,!1));if(c==="circle")return q.createElement(f0,Rc({className:"recharts-polar-angle-axis-line"},d,{cx:i,cy:a,r:o}));var f=this.props.ticks,h=f.map(function(p){return kn(i,a,o,p.coordinate)});return q.createElement(oAe,Rc({className:"recharts-polar-angle-axis-line"},d,{points:h}))}},{key:"renderTicks",value:function(){var s=this,i=this.props,a=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,d=i.stroke,f=wt(this.props,!1),h=wt(o,!1),p=Pc(Pc({},f),{},{fill:"none"},wt(l,!1)),v=a.map(function(j,g){var x=s.getTickLineCoord(j),w=s.getTickTextAnchor(j),N=Pc(Pc(Pc({textAnchor:w},f),{},{stroke:"none",fill:d},h),{},{index:g,payload:j,x:x.x2,y:x.y2});return q.createElement(sn,Rc({className:zt("recharts-polar-angle-axis-tick",m9(o)),key:"tick-".concat(j.coordinate)},xu(s.props,j,g)),l&&q.createElement("line",Rc({className:"recharts-polar-angle-axis-tick-line"},p,x)),o&&t.renderTickItem(o,N,c?c(j.value,g):j.value))});return q.createElement(sn,{className:"recharts-polar-angle-axis-ticks"},v)}},{key:"render",value:function(){var s=this.props,i=s.ticks,a=s.radius,o=s.axisLine;return a<=0||!i||!i.length?null:q.createElement(sn,{className:zt("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,i,a){var o;return q.isValidElement(s)?o=q.cloneElement(s,i):Mt(s)?o=s(i):o=q.createElement(vu,Rc({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])}(_.PureComponent);p0(g0,"displayName","PolarAngleAxis");p0(g0,"axisType","angleAxis");p0(g0,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var KAe=Rq,GAe=KAe(Object.getPrototypeOf,Object),ZAe=GAe,QAe=tl,YAe=ZAe,XAe=nl,JAe="[object Object]",eEe=Function.prototype,tEe=Object.prototype,O9=eEe.toString,nEe=tEe.hasOwnProperty,rEe=O9.call(Object);function sEe(e){if(!XAe(e)||QAe(e)!=JAe)return!1;var t=YAe(e);if(t===null)return!0;var n=nEe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&O9.call(n)==rEe}var iEe=sEe;const aEe=on(iEe);var oEe=tl,lEe=nl,cEe="[object Boolean]";function uEe(e){return e===!0||e===!1||lEe(e)&&oEe(e)==cEe}var dEe=uEe;const fEe=on(dEe);function $p(e){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$p(e)}function ob(){return ob=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ob.apply(this,arguments)}function hEe(e,t){return xEe(e)||gEe(e,t)||pEe(e,t)||mEe()}function mEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pEe(e,t){if(e){if(typeof e=="string")return jR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jR(e,t)}}function jR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function gEe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function xEe(e){if(Array.isArray(e))return e}function _R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function wR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_R(Object(n),!0).forEach(function(s){vEe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_R(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function vEe(e,t,n){return t=yEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yEe(e){var t=bEe(e,"string");return $p(t)=="symbol"?t:t+""}function bEe(e,t){if($p(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if($p(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NR=function(t,n,s,i,a){var o=s-i,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+s,",").concat(n),l+="L ".concat(t+s-o/2,",").concat(n+a),l+="L ".concat(t+s-o/2-i,",").concat(n+a),l+="L ".concat(t,",").concat(n," Z"),l},jEe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_Ee=function(t){var n=wR(wR({},jEe),t),s=_.useRef(),i=_.useState(-1),a=hEe(i,2),o=a[0],l=a[1];_.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var y=s.current.getTotalLength();y&&l(y)}catch{}},[]);var c=n.x,d=n.y,f=n.upperWidth,h=n.lowerWidth,p=n.height,v=n.className,j=n.animationEasing,g=n.animationDuration,x=n.animationBegin,w=n.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||h!==+h||p!==+p||f===0&&h===0||p===0)return null;var N=zt("recharts-trapezoid",v);return w?q.createElement(eo,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:d},to:{upperWidth:f,lowerWidth:h,height:p,x:c,y:d},duration:g,animationEasing:j,isActive:w},function(y){var A=y.upperWidth,P=y.lowerWidth,E=y.height,C=y.x,S=y.y;return q.createElement(eo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,easing:j},q.createElement("path",ob({},wt(n,!0),{className:N,d:NR(C,S,A,P,E),ref:s})))}):q.createElement("g",null,q.createElement("path",ob({},wt(n,!0),{className:N,d:NR(c,d,f,h,p)})))},wEe=["option","shapeType","propTransformer","activeClassName","isActive"];function Fp(e){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(e)}function NEe(e,t){if(e==null)return{};var n=SEe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function SEe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function SR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function lb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SR(Object(n),!0).forEach(function(s){CEe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function CEe(e,t,n){return t=PEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PEe(e){var t=AEe(e,"string");return Fp(t)=="symbol"?t:t+""}function AEe(e,t){if(Fp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Fp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EEe(e,t){return lb(lb({},t),e)}function TEe(e,t){return e==="symbols"}function CR(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return q.createElement(J2,n);case"trapezoid":return q.createElement(_Ee,n);case"sector":return q.createElement(x9,n);case"symbols":if(TEe(t))return q.createElement(v2,n);break;default:return null}}function kEe(e){return _.isValidElement(e)?e.props:e}function M9(e){var t=e.option,n=e.shapeType,s=e.propTransformer,i=s===void 0?EEe:s,a=e.activeClassName,o=a===void 0?"recharts-active-shape":a,l=e.isActive,c=NEe(e,wEe),d;if(_.isValidElement(t))d=_.cloneElement(t,lb(lb({},c),kEe(t)));else if(Mt(t))d=t(c);else if(aEe(t)&&!fEe(t)){var f=i(t,c);d=q.createElement(CR,{shapeType:n,elementProps:f})}else{var h=c;d=q.createElement(CR,{shapeType:n,elementProps:h})}return l?q.createElement(sn,{className:o},d):d}function x0(e,t){return t!=null&&"trapezoids"in e.props}function v0(e,t){return t!=null&&"sectors"in e.props}function zp(e,t){return t!=null&&"points"in e.props}function OEe(e,t){var n,s,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return i&&a}function MEe(e,t){var n=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return n&&s}function IEe(e,t){var n=e.x===t.x,s=e.y===t.y,i=e.z===t.z;return n&&s&&i}function REe(e,t){var n;return x0(e,t)?n=OEe:v0(e,t)?n=MEe:zp(e,t)&&(n=IEe),n}function LEe(e,t){var n;return x0(e,t)?n="trapezoids":v0(e,t)?n="sectors":zp(e,t)&&(n="points"),n}function DEe(e,t){if(x0(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(v0(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return zp(e,t)?t.payload:{}}function $Ee(e){var t=e.activeTooltipItem,n=e.graphicalItem,s=e.itemData,i=LEe(n,t),a=DEe(n,t),o=s.filter(function(c,d){var f=Dg(a,c),h=n.props[i].filter(function(j){var g=REe(n,t);return g(j,t)}),p=n.props[i].indexOf(h[h.length-1]),v=d===p;return f&&v}),l=s.indexOf(o[o.length-1]);return l}var Av;function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}function Pd(){return Pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Pd.apply(this,arguments)}function PR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PR(Object(n),!0).forEach(function(s){Pi(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function FEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AR(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,R9(s.key),s)}}function zEe(e,t,n){return t&&AR(e.prototype,t),n&&AR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function BEe(e,t,n){return t=cb(t),VEe(e,I9()?Reflect.construct(t,n||[],cb(e).constructor):t.apply(e,n))}function VEe(e,t){if(t&&(Df(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qEe(e)}function qEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I9=function(){return!!e})()}function cb(e){return cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cb(e)}function UEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hS(e,t)}function hS(e,t){return hS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},hS(e,t)}function Pi(e,t,n){return t=R9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R9(e){var t=HEe(e,"string");return Df(t)=="symbol"?t:t+""}function HEe(e,t){if(Df(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Df(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var oo=function(e){function t(n){var s;return FEe(this,t),s=BEe(this,t,[n]),Pi(s,"pieRef",null),Pi(s,"sectorRefs",[]),Pi(s,"id",vh("recharts-pie-")),Pi(s,"handleAnimationEnd",function(){var i=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),Mt(i)&&i()}),Pi(s,"handleAnimationStart",function(){var i=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),Mt(i)&&i()}),s.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},s}return UEe(t,e),zEe(t,[{key:"isActiveIndex",value:function(s){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(s)!==-1:s===i}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,l=a.labelLine,c=a.dataKey,d=a.valueKey,f=wt(this.props,!1),h=wt(o,!1),p=wt(l,!1),v=o&&o.offsetRadius||20,j=s.map(function(g,x){var w=(g.startAngle+g.endAngle)/2,N=kn(g.cx,g.cy,g.outerRadius+v,w),y=An(An(An(An({},f),g),{},{stroke:"none"},h),{},{index:x,textAnchor:t.getTextAnchor(N.x,g.cx)},N),A=An(An(An(An({},f),g),{},{fill:"none",stroke:g.fill},p),{},{index:x,points:[kn(g.cx,g.cy,g.outerRadius,w),N]}),P=c;return Dt(c)&&Dt(d)?P="value":Dt(c)&&(P=d),q.createElement(sn,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(x)},l&&t.renderLabelLineItem(l,A,"line"),t.renderLabelItem(o,y,kr(g,P)))});return q.createElement(sn,{className:"recharts-pie-labels"},j)}},{key:"renderSectorsStatically",value:function(s){var i=this,a=this.props,o=a.activeShape,l=a.blendStroke,c=a.inactiveShape;return s.map(function(d,f){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&s.length!==1)return null;var h=i.isActiveIndex(f),p=c&&i.hasActiveIndex()?c:null,v=h?o:p,j=An(An({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return q.createElement(sn,Pd({ref:function(x){x&&!i.sectorRefs.includes(x)&&i.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},xu(i.props,d,f),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(f)}),q.createElement(M9,Pd({option:v,isActive:h,shapeType:"sector"},j)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,i=this.props,a=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,d=i.animationEasing,f=i.animationId,h=this.state,p=h.prevSectors,v=h.prevIsAnimationActive;return q.createElement(eo,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(v),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(j){var g=j.t,x=[],w=a&&a[0],N=w.startAngle;return a.forEach(function(y,A){var P=p&&p[A],E=A>0?ii(y,"paddingAngle",0):0;if(P){var C=Xs(P.endAngle-P.startAngle,y.endAngle-y.startAngle),S=An(An({},y),{},{startAngle:N+E,endAngle:N+C(g)+E});x.push(S),N=S.endAngle}else{var k=y.endAngle,I=y.startAngle,R=Xs(0,k-I),D=R(g),z=An(An({},y),{},{startAngle:N+E,endAngle:N+D+E});x.push(z),N=z.endAngle}}),q.createElement(sn,null,s.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(s){var i=this;s.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,i=s.sectors,a=s.isAnimationActive,o=this.state.prevSectors;return a&&i&&i.length&&(!o||!Dg(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,i=this.props,a=i.hide,o=i.sectors,l=i.className,c=i.label,d=i.cx,f=i.cy,h=i.innerRadius,p=i.outerRadius,v=i.isAnimationActive,j=this.state.isAnimationFinished;if(a||!o||!o.length||!We(d)||!We(f)||!We(h)||!We(p))return null;var g=zt("recharts-pie",l);return q.createElement(sn,{tabIndex:this.props.rootTabIndex,className:g,ref:function(w){s.pieRef=w}},this.renderSectors(),c&&this.renderLabels(o),Fr.renderCallByParent(this.props,null,!1),(!v||j)&&Lo.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return i.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:s.sectors!==i.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,i){return s>i?"start":s<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,i,a){if(q.isValidElement(s))return q.cloneElement(s,i);if(Mt(s))return s(i);var o=zt("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return q.createElement(eb,Pd({},i,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(s,i,a){if(q.isValidElement(s))return q.cloneElement(s,i);var o=a;if(Mt(s)&&(o=s(i),q.isValidElement(o)))return o;var l=zt("recharts-pie-label-text",typeof s!="boolean"&&!Mt(s)?s.className:"");return q.createElement(vu,Pd({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(_.PureComponent);Av=oo;Pi(oo,"displayName","Pie");Pi(oo,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ku.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Pi(oo,"parseDeltaAngle",function(e,t){var n=bs(t-e),s=Math.min(Math.abs(t-e),360);return n*s});Pi(oo,"getRealPieData",function(e){var t=e.data,n=e.children,s=wt(e,!1),i=ai(n,_h);return t&&t.length?t.map(function(a,o){return An(An(An({payload:a},s),a),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(a){return An(An({},s),a.props)}):[]});Pi(oo,"parseCoordinateOfPie",function(e,t){var n=t.top,s=t.left,i=t.width,a=t.height,o=h9(i,a),l=s+js(e.cx,i,i/2),c=n+js(e.cy,a,a/2),d=js(e.innerRadius,o,0),f=js(e.outerRadius,o,o*.8),h=e.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:f,maxRadius:h}});Pi(oo,"getComposedData",function(e){var t=e.item,n=e.offset,s=t.type.defaultProps!==void 0?An(An({},t.type.defaultProps),t.props):t.props,i=Av.getRealPieData(s);if(!i||!i.length)return null;var a=s.cornerRadius,o=s.startAngle,l=s.endAngle,c=s.paddingAngle,d=s.dataKey,f=s.nameKey,h=s.valueKey,p=s.tooltipType,v=Math.abs(s.minAngle),j=Av.parseCoordinateOfPie(s,n),g=Av.parseDeltaAngle(o,l),x=Math.abs(g),w=d;Dt(d)&&Dt(h)?(aa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w="value"):Dt(d)&&(aa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w=h);var N=i.filter(function(S){return kr(S,w,0)!==0}).length,y=(x>=360?N:N-1)*c,A=x-N*v-y,P=i.reduce(function(S,k){var I=kr(k,w,0);return S+(We(I)?I:0)},0),E;if(P>0){var C;E=i.map(function(S,k){var I=kr(S,w,0),R=kr(S,f,k),D=(We(I)?I:0)/P,z;k?z=C.endAngle+bs(g)*c*(I!==0?1:0):z=o;var V=z+bs(g)*((I!==0?v:0)+D*A),K=(z+V)/2,H=(j.innerRadius+j.outerRadius)/2,W=[{name:R,value:I,payload:S,dataKey:w,type:p}],B=kn(j.cx,j.cy,H,K);return C=An(An(An({percent:D,cornerRadius:a,name:R,tooltipPayload:W,midAngle:K,middleRadius:H,tooltipPosition:B},S),j),{},{value:kr(S,w),startAngle:z,endAngle:V,payload:S,paddingAngle:bs(g)*c}),C})}return An(An({},j),{},{sectors:E,data:i})});var WEe=Math.ceil,KEe=Math.max;function GEe(e,t,n,s){for(var i=-1,a=KEe(WEe((t-e)/(n||1)),0),o=Array(a);a--;)o[s?a:++i]=e,e+=n;return o}var ZEe=GEe,QEe=eU,ER=1/0,YEe=17976931348623157e292;function XEe(e){if(!e)return e===0?e:0;if(e=QEe(e),e===ER||e===-ER){var t=e<0?-1:1;return t*YEe}return e===e?e:0}var L9=XEe,JEe=ZEe,eTe=e0,yw=L9;function tTe(e){return function(t,n,s){return s&&typeof s!="number"&&eTe(t,n,s)&&(n=s=void 0),t=yw(t),n===void 0?(n=t,t=0):n=yw(n),s=s===void 0?t<n?1:-1:yw(s),JEe(t,n,s,e)}}var nTe=tTe,rTe=nTe,sTe=rTe(),iTe=sTe;const ub=on(iTe);function Bp(e){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bp(e)}function TR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function kR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TR(Object(n),!0).forEach(function(s){D9(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function D9(e,t,n){return t=aTe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aTe(e){var t=oTe(e,"string");return Bp(t)=="symbol"?t:t+""}function oTe(e,t){if(Bp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Bp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lTe=["Webkit","Moz","O","ms"],cTe=function(t,n){var s=t.replace(/(\w)/,function(a){return a.toUpperCase()}),i=lTe.reduce(function(a,o){return kR(kR({},a),{},D9({},o+s,n))},{});return i[t]=n,i};function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}function db(){return db=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},db.apply(this,arguments)}function OR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function bw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OR(Object(n),!0).forEach(function(s){Ws(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MR(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,F9(s.key),s)}}function dTe(e,t,n){return t&&MR(e.prototype,t),n&&MR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fTe(e,t,n){return t=fb(t),hTe(e,$9()?Reflect.construct(t,n||[],fb(e).constructor):t.apply(e,n))}function hTe(e,t){if(t&&($f(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mTe(e)}function mTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($9=function(){return!!e})()}function fb(e){return fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fb(e)}function pTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mS(e,t)}function mS(e,t){return mS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},mS(e,t)}function Ws(e,t,n){return t=F9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F9(e){var t=gTe(e,"string");return $f(t)=="symbol"?t:t+""}function gTe(e,t){if($f(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if($f(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var xTe=function(t){var n=t.data,s=t.startIndex,i=t.endIndex,a=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=Mm().domain(ub(0,c)).range([a,a+o-l]),f=d.domain().map(function(h){return d(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(i),scale:d,scaleValues:f}},IR=function(t){return t.changedTouches&&!!t.changedTouches.length},Ff=function(e){function t(n){var s;return uTe(this,t),s=fTe(this,t,[n]),Ws(s,"handleDrag",function(i){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(i):s.state.isSlideMoving&&s.handleSlideDrag(i)}),Ws(s,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&s.handleDrag(i.changedTouches[0])}),Ws(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=s.props,a=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:a,startIndex:l})}),s.detachDragEndListener()}),Ws(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Ws(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Ws(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Ws(s,"handleSlideDragStart",function(i){var a=IR(i)?i.changedTouches[0]:i;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return pTe(t,e),dTe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var i=s.startX,a=s.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,f=d.length-1,h=Math.min(i,a),p=Math.max(i,a),v=t.getIndexInRange(o,h),j=t.getIndexInRange(o,p);return{startIndex:v-v%c,endIndex:j===f?f:j-j%c}}},{key:"getTextOfTick",value:function(s){var i=this.props,a=i.data,o=i.tickFormatter,l=i.dataKey,c=kr(a[s],l,s);return Mt(o)?o(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var i=this.state,a=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,d=c.x,f=c.width,h=c.travellerWidth,p=c.startIndex,v=c.endIndex,j=c.onChange,g=s.pageX-a;g>0?g=Math.min(g,d+f-h-l,d+f-h-o):g<0&&(g=Math.max(g,d-o,d-l));var x=this.getIndex({startX:o+g,endX:l+g});(x.startIndex!==p||x.endIndex!==v)&&j&&j(x),this.setState({startX:o+g,endX:l+g,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,i){var a=IR(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,d=this.state[o],f=this.props,h=f.x,p=f.width,v=f.travellerWidth,j=f.onChange,g=f.gap,x=f.data,w={startX:this.state.startX,endX:this.state.endX},N=s.pageX-a;N>0?N=Math.min(N,h+p-v-d):N<0&&(N=Math.max(N,h-d)),w[o]=d+N;var y=this.getIndex(w),A=y.startIndex,P=y.endIndex,E=function(){var S=x.length-1;return o==="startX"&&(l>c?A%g===0:P%g===0)||l<c&&P===S||o==="endX"&&(l>c?P%g===0:A%g===0)||l>c&&P===S};this.setState(Ws(Ws({},o,d+N),"brushMoveStartX",s.pageX),function(){j&&E()&&j(y)})}},{key:"handleTravellerMoveKeyboard",value:function(s,i){var a=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,f=this.state[i],h=l.indexOf(f);if(h!==-1){var p=h+s;if(!(p===-1||p>=l.length)){var v=l[p];i==="startX"&&v>=d||i==="endX"&&v<=c||this.setState(Ws({},i,v),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.fill,d=s.stroke;return q.createElement("rect",{stroke:d,fill:c,x:i,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.data,d=s.children,f=s.padding,h=_.Children.only(d);return h?q.cloneElement(h,{x:i,y:a,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,i){var a,o,l=this,c=this.props,d=c.y,f=c.travellerWidth,h=c.height,p=c.traveller,v=c.ariaLabel,j=c.data,g=c.startIndex,x=c.endIndex,w=Math.max(s,this.props.x),N=bw(bw({},wt(this.props,!1)),{},{x:w,y:d,width:f,height:h}),y=v||"Min value: ".concat((a=j[g])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=j[x])===null||o===void 0?void 0:o.name);return q.createElement(sn,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(P){["ArrowLeft","ArrowRight"].includes(P.key)&&(P.preventDefault(),P.stopPropagation(),l.handleTravellerMoveKeyboard(P.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,N))}},{key:"renderSlide",value:function(s,i){var a=this.props,o=a.y,l=a.height,c=a.stroke,d=a.travellerWidth,f=Math.min(s,i)+d,h=Math.max(Math.abs(i-s)-d,0);return q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:h,height:l})}},{key:"renderText",value:function(){var s=this.props,i=s.startIndex,a=s.endIndex,o=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,f=this.state,h=f.startX,p=f.endX,v=5,j={pointerEvents:"none",fill:d};return q.createElement(sn,{className:"recharts-brush-texts"},q.createElement(vu,db({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,p)-v,y:o+l/2},j),this.getTextOfTick(i)),q.createElement(vu,db({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,p)+c+v,y:o+l/2},j),this.getTextOfTick(a)))}},{key:"render",value:function(){var s=this.props,i=s.data,a=s.className,o=s.children,l=s.x,c=s.y,d=s.width,f=s.height,h=s.alwaysShowText,p=this.state,v=p.startX,j=p.endX,g=p.isTextActive,x=p.isSlideMoving,w=p.isTravellerMoving,N=p.isTravellerFocused;if(!i||!i.length||!We(l)||!We(c)||!We(d)||!We(f)||d<=0||f<=0)return null;var y=zt("recharts-brush",a),A=q.Children.count(o)===1,P=cTe("userSelect","none");return q.createElement(sn,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:P},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(v,j),this.renderTravellerLayer(v,"startX"),this.renderTravellerLayer(j,"endX"),(g||x||w||N||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var i=s.x,a=s.y,o=s.width,l=s.height,c=s.stroke,d=Math.floor(a+l/2)-1;return q.createElement(q.Fragment,null,q.createElement("rect",{x:i,y:a,width:o,height:l,fill:c,stroke:"none"}),q.createElement("line",{x1:i+1,y1:d,x2:i+o-1,y2:d,fill:"none",stroke:"#fff"}),q.createElement("line",{x1:i+1,y1:d+2,x2:i+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,i){var a;return q.isValidElement(s)?a=q.cloneElement(s,i):Mt(s)?a=s(i):a=t.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(s,i){var a=s.data,o=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,f=s.startIndex,h=s.endIndex;if(a!==i.prevData||d!==i.prevUpdateId)return bw({prevData:a,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},a&&a.length?xTe({data:a,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var p=i.scale.domain().map(function(v){return i.scale(v)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:i.scale(s.startIndex),endX:i.scale(s.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(s,i){for(var a=s.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);s[c]>i?l=c:o=c}return i>=s[l]?l:o}}])}(_.PureComponent);Ws(Ff,"displayName","Brush");Ws(Ff,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var vTe=S2;function yTe(e,t){var n;return vTe(e,function(s,i,a){return n=t(s,i,a),!n}),!!n}var bTe=yTe,jTe=Pq,_Te=ao,wTe=bTe,NTe=Us,STe=e0;function CTe(e,t,n){var s=NTe(e)?jTe:wTe;return n&&STe(e,t,n)&&(t=void 0),s(e,_Te(t))}var PTe=CTe;const ATe=on(PTe);var Wa=function(t,n){var s=t.alwaysShow,i=t.ifOverflow;return s&&(i="extendDomain"),i===n},RR=Zq;function ETe(e,t,n){t=="__proto__"&&RR?RR(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var TTe=ETe,kTe=TTe,OTe=Kq,MTe=ao;function ITe(e,t){var n={};return t=MTe(t),OTe(e,function(s,i,a){kTe(n,i,t(s,i,a))}),n}var RTe=ITe;const LTe=on(RTe);function DTe(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(!t(e[n],n,e))return!1;return!0}var $Te=DTe,FTe=S2;function zTe(e,t){var n=!0;return FTe(e,function(s,i,a){return n=!!t(s,i,a),n}),n}var BTe=zTe,VTe=$Te,qTe=BTe,UTe=ao,HTe=Us,WTe=e0;function KTe(e,t,n){var s=HTe(e)?VTe:qTe;return n&&WTe(e,t,n)&&(t=void 0),s(e,UTe(t))}var GTe=KTe;const z9=on(GTe);var ZTe=["x","y"];function Vp(e){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vp(e)}function pS(){return pS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pS.apply(this,arguments)}function LR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function cm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LR(Object(n),!0).forEach(function(s){QTe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function QTe(e,t,n){return t=YTe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YTe(e){var t=XTe(e,"string");return Vp(t)=="symbol"?t:t+""}function XTe(e,t){if(Vp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Vp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JTe(e,t){if(e==null)return{};var n=eke(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function eke(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function tke(e,t){var n=e.x,s=e.y,i=JTe(e,ZTe),a="".concat(n),o=parseInt(a,10),l="".concat(s),c=parseInt(l,10),d="".concat(t.height||i.height),f=parseInt(d,10),h="".concat(t.width||i.width),p=parseInt(h,10);return cm(cm(cm(cm(cm({},t),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:p,name:t.name,radius:t.radius})}function DR(e){return q.createElement(M9,pS({shapeType:"rectangle",propTransformer:tke,activeClassName:"recharts-active-bar"},e))}var nke=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,i){if(typeof t=="number")return t;var a=typeof s=="number";return a?t(s,i):(a||bu(),n)}},rke=["value","background"],B9;function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(e)}function ske(e,t){if(e==null)return{};var n=ike(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function ike(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function hb(){return hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hb.apply(this,arguments)}function $R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$R(Object(n),!0).forEach(function(s){Il(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$R(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ake(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FR(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,q9(s.key),s)}}function oke(e,t,n){return t&&FR(e.prototype,t),n&&FR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lke(e,t,n){return t=mb(t),cke(e,V9()?Reflect.construct(t,n||[],mb(e).constructor):t.apply(e,n))}function cke(e,t){if(t&&(zf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uke(e)}function uke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V9=function(){return!!e})()}function mb(e){return mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mb(e)}function dke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gS(e,t)}function gS(e,t){return gS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},gS(e,t)}function Il(e,t,n){return t=q9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q9(e){var t=fke(e,"string");return zf(t)=="symbol"?t:t+""}function fke(e,t){if(zf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(zf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var us=function(e){function t(){var n;ake(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=lke(this,t,[].concat(i)),Il(n,"state",{isAnimationFinished:!1}),Il(n,"id",vh("recharts-bar-")),Il(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Il(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return dke(t,e),oke(t,[{key:"renderRectanglesStatically",value:function(s){var i=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,d=a.activeBar,f=wt(this.props,!1);return s&&s.map(function(h,p){var v=p===c,j=v?d:o,g=xr(xr(xr({},f),h),{},{isActive:v,option:j,index:p,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return q.createElement(sn,hb({className:"recharts-bar-rectangle"},xu(i.props,h,p),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(p)}),q.createElement(DR,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,i=this.props,a=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,f=i.animationEasing,h=i.animationId,p=this.state.prevData;return q.createElement(eo,{begin:c,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var j=v.t,g=a.map(function(x,w){var N=p&&p[w];if(N){var y=Xs(N.x,x.x),A=Xs(N.y,x.y),P=Xs(N.width,x.width),E=Xs(N.height,x.height);return xr(xr({},x),{},{x:y(j),y:A(j),width:P(j),height:E(j)})}if(o==="horizontal"){var C=Xs(0,x.height),S=C(j);return xr(xr({},x),{},{y:x.y+x.height-S,height:S})}var k=Xs(0,x.width),I=k(j);return xr(xr({},x),{},{width:I})});return q.createElement(sn,null,s.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var s=this.props,i=s.data,a=s.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!Dg(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var s=this,i=this.props,a=i.data,o=i.dataKey,l=i.activeIndex,c=wt(this.props.background,!1);return a.map(function(d,f){d.value;var h=d.background,p=ske(d,rke);if(!h)return null;var v=xr(xr(xr(xr(xr({},p),{},{fill:"#eee"},h),c),xu(s.props,d,f)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return q.createElement(DR,hb({key:"background-bar-".concat(f),option:s.props.background,isActive:f===l},v))})}},{key:"renderErrorBar",value:function(s,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,d=a.layout,f=a.children,h=ai(f,$g);if(!h)return null;var p=d==="vertical"?o[0].height/2:o[0].width/2,v=function(x,w){var N=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:N,errorVal:kr(x,w)}},j={clipPath:s?"url(#clipPath-".concat(i,")"):null};return q.createElement(sn,j,h.map(function(g){return q.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:p,dataPointFormatter:v})}))}},{key:"render",value:function(){var s=this.props,i=s.hide,a=s.data,o=s.className,l=s.xAxis,c=s.yAxis,d=s.left,f=s.top,h=s.width,p=s.height,v=s.isAnimationActive,j=s.background,g=s.id;if(i||!a||!a.length)return null;var x=this.state.isAnimationFinished,w=zt("recharts-bar",o),N=l&&l.allowDataOverflow,y=c&&c.allowDataOverflow,A=N||y,P=Dt(g)?this.id:g;return q.createElement(sn,{className:w},N||y?q.createElement("defs",null,q.createElement("clipPath",{id:"clipPath-".concat(P)},q.createElement("rect",{x:N?d:d-h/2,y:y?f:f-p/2,width:N?h:h*2,height:y?p:p*2}))):null,q.createElement(sn,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(P,")"):null},j?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,P),(!v||x)&&Lo.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:i.curData}:s.data!==i.curData?{curData:s.data}:null}}])}(_.PureComponent);B9=us;Il(us,"displayName","Bar");Il(us,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ku.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Il(us,"getComposedData",function(e){var t=e.props,n=e.item,s=e.barPosition,i=e.bandSize,a=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,f=e.dataStartIndex,h=e.displayedData,p=e.offset,v=WSe(s,n);if(!v)return null;var j=t.layout,g=n.type.defaultProps,x=g!==void 0?xr(xr({},g),n.props):n.props,w=x.dataKey,N=x.children,y=x.minPointSize,A=j==="horizontal"?o:a,P=d?A.scale.domain():null,E=JSe({numericAxis:A}),C=ai(N,_h),S=h.map(function(k,I){var R,D,z,V,K,H;d?R=KSe(d[f+I],P):(R=kr(k,w),Array.isArray(R)||(R=[E,R]));var W=nke(y,B9.defaultProps.minPointSize)(R[1],I);if(j==="horizontal"){var B,$=[o.scale(R[0]),o.scale(R[1])],G=$[0],ee=$[1];D=AI({axis:a,ticks:l,bandSize:i,offset:v.offset,entry:k,index:I}),z=(B=ee??G)!==null&&B!==void 0?B:void 0,V=v.size;var oe=G-ee;if(K=Number.isNaN(oe)?0:oe,H={x:D,y:o.y,width:V,height:o.height},Math.abs(W)>0&&Math.abs(K)<Math.abs(W)){var fe=bs(K||W)*(Math.abs(W)-Math.abs(K));z-=fe,K+=fe}}else{var Ee=[a.scale(R[0]),a.scale(R[1])],J=Ee[0],Pe=Ee[1];if(D=J,z=AI({axis:o,ticks:c,bandSize:i,offset:v.offset,entry:k,index:I}),V=Pe-J,K=v.size,H={x:a.x,y:z,width:a.width,height:K},Math.abs(W)>0&&Math.abs(V)<Math.abs(W)){var ze=bs(V||W)*(Math.abs(W)-Math.abs(V));V+=ze}}return xr(xr(xr({},k),{},{x:D,y:z,width:V,height:K,value:d?R:R[1],payload:k,background:H},C&&C[I]&&C[I].props),{},{tooltipPayload:[d9(n,k)],tooltipPosition:{x:D+V/2,y:z+K/2}})});return xr({data:S,layout:j},p)});function qp(e){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qp(e)}function hke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zR(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,U9(s.key),s)}}function mke(e,t,n){return t&&zR(e.prototype,t),n&&zR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function BR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Zi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BR(Object(n),!0).forEach(function(s){y0(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function y0(e,t,n){return t=U9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U9(e){var t=pke(e,"string");return qp(t)=="symbol"?t:t+""}function pke(e,t){if(qp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(qp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H9=function(t,n,s,i,a){var o=t.width,l=t.height,c=t.layout,d=t.children,f=Object.keys(n),h={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},p=!!Zs(d,us);return f.reduce(function(v,j){var g=n[j],x=g.orientation,w=g.domain,N=g.padding,y=N===void 0?{}:N,A=g.mirror,P=g.reversed,E="".concat(x).concat(A?"Mirror":""),C,S,k,I,R;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var D=w[1]-w[0],z=1/0,V=g.categoricalDomain.sort();if(V.forEach(function(Ee,J){J>0&&(z=Math.min((Ee||0)-(V[J-1]||0),z))}),Number.isFinite(z)){var K=z/D,H=g.layout==="vertical"?s.height:s.width;if(g.padding==="gap"&&(C=K*H/2),g.padding==="no-gap"){var W=js(t.barCategoryGap,K*H),B=K*H/2;C=B-W-(B-W)/H*W}}}i==="xAxis"?S=[s.left+(y.left||0)+(C||0),s.left+s.width-(y.right||0)-(C||0)]:i==="yAxis"?S=c==="horizontal"?[s.top+s.height-(y.bottom||0),s.top+(y.top||0)]:[s.top+(y.top||0)+(C||0),s.top+s.height-(y.bottom||0)-(C||0)]:S=g.range,P&&(S=[S[1],S[0]]);var $=o9(g,a,p),G=$.scale,ee=$.realScaleType;G.domain(w).range(S),l9(G);var oe=c9(G,Zi(Zi({},g),{},{realScaleType:ee}));i==="xAxis"?(R=x==="top"&&!A||x==="bottom"&&A,k=s.left,I=h[E]-R*g.height):i==="yAxis"&&(R=x==="left"&&!A||x==="right"&&A,k=h[E]-R*g.width,I=s.top);var fe=Zi(Zi(Zi({},g),oe),{},{realScaleType:ee,x:k,y:I,scale:G,width:i==="xAxis"?s.width:g.width,height:i==="yAxis"?s.height:g.height});return fe.bandSize=Yy(fe,oe),!g.hide&&i==="xAxis"?h[E]+=(R?-1:1)*fe.height:g.hide||(h[E]+=(R?-1:1)*fe.width),Zi(Zi({},v),{},y0({},j,fe))},{})},W9=function(t,n){var s=t.x,i=t.y,a=n.x,o=n.y;return{x:Math.min(s,a),y:Math.min(i,o),width:Math.abs(a-s),height:Math.abs(o-i)}},gke=function(t){var n=t.x1,s=t.y1,i=t.x2,a=t.y2;return W9({x:n,y:s},{x:i,y:a})},K9=function(){function e(t){hke(this,e),this.scale=t}return mke(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.bandAware,a=s.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var s=this.range(),i=s[0],a=s[s.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}])}();y0(K9,"EPS",1e-4);var eA=function(t){var n=Object.keys(t).reduce(function(s,i){return Zi(Zi({},s),{},y0({},i,K9.create(t[i])))},{});return Zi(Zi({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return LTe(i,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return z9(i,function(a,o){return n[o].isInRange(a)})}})};function xke(e){return(e%180+180)%180}var vke=function(t){var n=t.width,s=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=xke(i),o=a*Math.PI/180,l=Math.atan(s/n),c=o>l&&o<Math.PI-l?s/Math.sin(o):n/Math.cos(o);return Math.abs(c)},yke=ao,bke=Og,jke=Xj;function _ke(e){return function(t,n,s){var i=Object(t);if(!bke(t)){var a=yke(n);t=jke(t),n=function(l){return a(i[l],l,i)}}var o=e(t,n,s);return o>-1?i[a?t[o]:o]:void 0}}var wke=_ke,Nke=L9;function Ske(e){var t=Nke(e),n=t%1;return t===t?n?t-n:t:0}var Cke=Ske,Pke=Bq,Ake=ao,Eke=Cke,Tke=Math.max;function kke(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var i=n==null?0:Eke(n);return i<0&&(i=Tke(s+i,0)),Pke(e,Ake(t),i)}var Oke=kke,Mke=wke,Ike=Oke,Rke=Mke(Ike),Lke=Rke;const Dke=on(Lke);var $ke=Rde(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),tA=_.createContext(void 0),nA=_.createContext(void 0),G9=_.createContext(void 0),Z9=_.createContext({}),Q9=_.createContext(void 0),Y9=_.createContext(0),X9=_.createContext(0),VR=function(t){var n=t.state,s=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,f=$ke(a);return q.createElement(tA.Provider,{value:s},q.createElement(nA.Provider,{value:i},q.createElement(Z9.Provider,{value:a},q.createElement(G9.Provider,{value:f},q.createElement(Q9.Provider,{value:o},q.createElement(Y9.Provider,{value:d},q.createElement(X9.Provider,{value:c},l)))))))},Fke=function(){return _.useContext(Q9)},J9=function(t){var n=_.useContext(tA);n==null&&bu();var s=n[t];return s==null&&bu(),s},zke=function(){var t=_.useContext(tA);return jl(t)},Bke=function(){var t=_.useContext(nA),n=Dke(t,function(s){return z9(s.domain,Number.isFinite)});return n||jl(t)},eH=function(t){var n=_.useContext(nA);n==null&&bu();var s=n[t];return s==null&&bu(),s},Vke=function(){var t=_.useContext(G9);return t},qke=function(){return _.useContext(Z9)},rA=function(){return _.useContext(X9)},sA=function(){return _.useContext(Y9)};function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}function Uke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hke(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,nH(s.key),s)}}function Wke(e,t,n){return t&&Hke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kke(e,t,n){return t=pb(t),Gke(e,tH()?Reflect.construct(t,n||[],pb(e).constructor):t.apply(e,n))}function Gke(e,t){if(t&&(Bf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zke(e)}function Zke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tH=function(){return!!e})()}function pb(e){return pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pb(e)}function Qke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xS(e,t)}function xS(e,t){return xS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},xS(e,t)}function qR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function UR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qR(Object(n),!0).forEach(function(s){iA(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function iA(e,t,n){return t=nH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nH(e){var t=Yke(e,"string");return Bf(t)=="symbol"?t:t+""}function Yke(e,t){if(Bf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Bf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Xke(e,t){return nOe(e)||tOe(e,t)||eOe(e,t)||Jke()}function Jke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eOe(e,t){if(e){if(typeof e=="string")return HR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HR(e,t)}}function HR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function tOe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function nOe(e){if(Array.isArray(e))return e}function vS(){return vS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vS.apply(this,arguments)}var rOe=function(t,n){var s;return q.isValidElement(t)?s=q.cloneElement(t,n):Mt(t)?s=t(n):s=q.createElement("line",vS({},n,{className:"recharts-reference-line-line"})),s},sOe=function(t,n,s,i,a,o,l,c,d){var f=a.x,h=a.y,p=a.width,v=a.height;if(s){var j=d.y,g=t.y.apply(j,{position:o});if(Wa(d,"discard")&&!t.y.isInRange(g))return null;var x=[{x:f+p,y:g},{x:f,y:g}];return c==="left"?x.reverse():x}if(n){var w=d.x,N=t.x.apply(w,{position:o});if(Wa(d,"discard")&&!t.x.isInRange(N))return null;var y=[{x:N,y:h+v},{x:N,y:h}];return l==="top"?y.reverse():y}if(i){var A=d.segment,P=A.map(function(E){return t.apply(E,{position:o})});return Wa(d,"discard")&&ATe(P,function(E){return!t.isInRange(E)})?null:P}return null};function iOe(e){var t=e.x,n=e.y,s=e.segment,i=e.xAxisId,a=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=Fke(),f=J9(i),h=eH(a),p=Vke();if(!d||!p)return null;aa(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var v=eA({x:f.scale,y:h.scale}),j=Mr(t),g=Mr(n),x=s&&s.length===2,w=sOe(v,j,g,x,p,e.position,f.orientation,h.orientation,e);if(!w)return null;var N=Xke(w,2),y=N[0],A=y.x,P=y.y,E=N[1],C=E.x,S=E.y,k=Wa(e,"hidden")?"url(#".concat(d,")"):void 0,I=UR(UR({clipPath:k},wt(e,!0)),{},{x1:A,y1:P,x2:C,y2:S});return q.createElement(sn,{className:zt("recharts-reference-line",l)},rOe(o,I),Fr.renderCallByParent(e,gke({x1:A,y1:P,x2:C,y2:S})))}var aA=function(e){function t(){return Uke(this,t),Kke(this,t,arguments)}return Qke(t,e),Wke(t,[{key:"render",value:function(){return q.createElement(iOe,this.props)}}])}(q.Component);iA(aA,"displayName","ReferenceLine");iA(aA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function yS(){return yS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yS.apply(this,arguments)}function Vf(e){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vf(e)}function WR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function KR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WR(Object(n),!0).forEach(function(s){b0(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function aOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oOe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,sH(s.key),s)}}function lOe(e,t,n){return t&&oOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cOe(e,t,n){return t=gb(t),uOe(e,rH()?Reflect.construct(t,n||[],gb(e).constructor):t.apply(e,n))}function uOe(e,t){if(t&&(Vf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dOe(e)}function dOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rH=function(){return!!e})()}function gb(e){return gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gb(e)}function fOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bS(e,t)}function bS(e,t){return bS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},bS(e,t)}function b0(e,t,n){return t=sH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sH(e){var t=hOe(e,"string");return Vf(t)=="symbol"?t:t+""}function hOe(e,t){if(Vf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Vf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mOe=function(t){var n=t.x,s=t.y,i=t.xAxis,a=t.yAxis,o=eA({x:i.scale,y:a.scale}),l=o.apply({x:n,y:s},{bandAware:!0});return Wa(t,"discard")&&!o.isInRange(l)?null:l},j0=function(e){function t(){return aOe(this,t),cOe(this,t,arguments)}return fOe(t,e),lOe(t,[{key:"render",value:function(){var s=this.props,i=s.x,a=s.y,o=s.r,l=s.alwaysShow,c=s.clipPathId,d=Mr(i),f=Mr(a);if(aa(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var h=mOe(this.props);if(!h)return null;var p=h.x,v=h.y,j=this.props,g=j.shape,x=j.className,w=Wa(this.props,"hidden")?"url(#".concat(c,")"):void 0,N=KR(KR({clipPath:w},wt(this.props,!0)),{},{cx:p,cy:v});return q.createElement(sn,{className:zt("recharts-reference-dot",x)},t.renderDot(g,N),Fr.renderCallByParent(this.props,{x:p-o,y:v-o,width:2*o,height:2*o}))}}])}(q.Component);b0(j0,"displayName","ReferenceDot");b0(j0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});b0(j0,"renderDot",function(e,t){var n;return q.isValidElement(e)?n=q.cloneElement(e,t):Mt(e)?n=e(t):n=q.createElement(f0,yS({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function jS(){return jS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},jS.apply(this,arguments)}function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}function GR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function ZR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GR(Object(n),!0).forEach(function(s){_0(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function pOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gOe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,aH(s.key),s)}}function xOe(e,t,n){return t&&gOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vOe(e,t,n){return t=xb(t),yOe(e,iH()?Reflect.construct(t,n||[],xb(e).constructor):t.apply(e,n))}function yOe(e,t){if(t&&(qf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bOe(e)}function bOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iH=function(){return!!e})()}function xb(e){return xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xb(e)}function jOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_S(e,t)}function _S(e,t){return _S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},_S(e,t)}function _0(e,t,n){return t=aH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aH(e){var t=_Oe(e,"string");return qf(t)=="symbol"?t:t+""}function _Oe(e,t){if(qf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(qf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wOe=function(t,n,s,i,a){var o=a.x1,l=a.x2,c=a.y1,d=a.y2,f=a.xAxis,h=a.yAxis;if(!f||!h)return null;var p=eA({x:f.scale,y:h.scale}),v={x:t?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:s?p.y.apply(c,{position:"start"}):p.y.rangeMin},j={x:n?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(d,{position:"end"}):p.y.rangeMax};return Wa(a,"discard")&&(!p.isInRange(v)||!p.isInRange(j))?null:W9(v,j)},w0=function(e){function t(){return pOe(this,t),vOe(this,t,arguments)}return jOe(t,e),xOe(t,[{key:"render",value:function(){var s=this.props,i=s.x1,a=s.x2,o=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,f=s.clipPathId;aa(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Mr(i),p=Mr(a),v=Mr(o),j=Mr(l),g=this.props.shape;if(!h&&!p&&!v&&!j&&!g)return null;var x=wOe(h,p,v,j,this.props);if(!x&&!g)return null;var w=Wa(this.props,"hidden")?"url(#".concat(f,")"):void 0;return q.createElement(sn,{className:zt("recharts-reference-area",c)},t.renderRect(g,ZR(ZR({clipPath:w},wt(this.props,!0)),x)),Fr.renderCallByParent(this.props,x))}}])}(q.Component);_0(w0,"displayName","ReferenceArea");_0(w0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});_0(w0,"renderRect",function(e,t){var n;return q.isValidElement(e)?n=q.cloneElement(e,t):Mt(e)?n=e(t):n=q.createElement(J2,jS({},t,{className:"recharts-reference-area-rect"})),n});function oH(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var s=[],i=0;i<e.length;i+=t)s.push(e[i]);return s}function NOe(e,t,n){var s={width:e.width+t.width,height:e.height+t.height};return vke(s,n)}function SOe(e,t,n){var s=n==="width",i=e.x,a=e.y,o=e.width,l=e.height;return t===1?{start:s?i:a,end:s?i+o:a+l}:{start:s?i+o:a+l,end:s?i:a}}function vb(e,t,n,s,i){if(e*t<e*s||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-s)>=0&&e*(t+e*a/2-i)<=0}function COe(e,t){return oH(e,t+1)}function POe(e,t,n,s,i){for(var a=(s||[]).slice(),o=t.start,l=t.end,c=0,d=1,f=o,h=function(){var j=s==null?void 0:s[c];if(j===void 0)return{v:oH(s,d)};var g=c,x,w=function(){return x===void 0&&(x=n(j,g)),x},N=j.coordinate,y=c===0||vb(e,N,w,f,l);y||(c=0,f=o,d+=1),y&&(f=N+e*(w()/2+i),c+=d)},p;d<=a.length;)if(p=h(),p)return p.v;return[]}function Up(e){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Up(e)}function QR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function ss(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QR(Object(n),!0).forEach(function(s){AOe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function AOe(e,t,n){return t=EOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EOe(e){var t=TOe(e,"string");return Up(t)=="symbol"?t:t+""}function TOe(e,t){if(Up(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Up(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kOe(e,t,n,s,i){for(var a=(s||[]).slice(),o=a.length,l=t.start,c=t.end,d=function(p){var v=a[p],j,g=function(){return j===void 0&&(j=n(v,p)),j};if(p===o-1){var x=e*(v.coordinate+e*g()/2-c);a[p]=v=ss(ss({},v),{},{tickCoord:x>0?v.coordinate-x*e:v.coordinate})}else a[p]=v=ss(ss({},v),{},{tickCoord:v.coordinate});var w=vb(e,v.tickCoord,g,l,c);w&&(c=v.tickCoord-e*(g()/2+i),a[p]=ss(ss({},v),{},{isShow:!0}))},f=o-1;f>=0;f--)d(f);return a}function OOe(e,t,n,s,i,a){var o=(s||[]).slice(),l=o.length,c=t.start,d=t.end;if(a){var f=s[l-1],h=n(f,l-1),p=e*(f.coordinate+e*h/2-d);o[l-1]=f=ss(ss({},f),{},{tickCoord:p>0?f.coordinate-p*e:f.coordinate});var v=vb(e,f.tickCoord,function(){return h},c,d);v&&(d=f.tickCoord-e*(h/2+i),o[l-1]=ss(ss({},f),{},{isShow:!0}))}for(var j=a?l-1:l,g=function(N){var y=o[N],A,P=function(){return A===void 0&&(A=n(y,N)),A};if(N===0){var E=e*(y.coordinate-e*P()/2-c);o[N]=y=ss(ss({},y),{},{tickCoord:E<0?y.coordinate-E*e:y.coordinate})}else o[N]=y=ss(ss({},y),{},{tickCoord:y.coordinate});var C=vb(e,y.tickCoord,P,c,d);C&&(c=y.tickCoord+e*(P()/2+i),o[N]=ss(ss({},y),{},{isShow:!0}))},x=0;x<j;x++)g(x);return o}function oA(e,t,n){var s=e.tick,i=e.ticks,a=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,f=e.unit,h=e.angle;if(!i||!i.length||!s)return[];if(We(c)||ku.isSsr)return COe(i,typeof c=="number"&&We(c)?c:0);var p=[],v=l==="top"||l==="bottom"?"width":"height",j=f&&v==="width"?Om(f,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=function(y,A){var P=Mt(d)?d(y.value,A):y.value;return v==="width"?NOe(Om(P,{fontSize:t,letterSpacing:n}),j,h):Om(P,{fontSize:t,letterSpacing:n})[v]},x=i.length>=2?bs(i[1].coordinate-i[0].coordinate):1,w=SOe(a,x,v);return c==="equidistantPreserveStart"?POe(x,w,g,i,o):(c==="preserveStart"||c==="preserveStartEnd"?p=OOe(x,w,g,i,o,c==="preserveStartEnd"):p=kOe(x,w,g,i,o),p.filter(function(N){return N.isShow}))}var MOe=["viewBox"],IOe=["viewBox"],ROe=["ticks"];function Uf(e){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(e)}function Ad(){return Ad=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ad.apply(this,arguments)}function YR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function hs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YR(Object(n),!0).forEach(function(s){lA(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function jw(e,t){if(e==null)return{};var n=LOe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function LOe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function DOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XR(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,cH(s.key),s)}}function $Oe(e,t,n){return t&&XR(e.prototype,t),n&&XR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function FOe(e,t,n){return t=yb(t),zOe(e,lH()?Reflect.construct(t,n||[],yb(e).constructor):t.apply(e,n))}function zOe(e,t){if(t&&(Uf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BOe(e)}function BOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lH=function(){return!!e})()}function yb(e){return yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yb(e)}function VOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wS(e,t)}function wS(e,t){return wS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},wS(e,t)}function lA(e,t,n){return t=cH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cH(e){var t=qOe(e,"string");return Uf(t)=="symbol"?t:t+""}function qOe(e,t){if(Uf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Uf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ch=function(e){function t(n){var s;return DOe(this,t),s=FOe(this,t,[n]),s.state={fontSize:"",letterSpacing:""},s}return VOe(t,e),$Oe(t,[{key:"shouldComponentUpdate",value:function(s,i){var a=s.viewBox,o=jw(s,MOe),l=this.props,c=l.viewBox,d=jw(l,IOe);return!qd(a,c)||!qd(o,d)||!qd(i,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var i=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var i=this.props,a=i.x,o=i.y,l=i.width,c=i.height,d=i.orientation,f=i.tickSize,h=i.mirror,p=i.tickMargin,v,j,g,x,w,N,y=h?-1:1,A=s.tickSize||f,P=We(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":v=j=s.coordinate,x=o+ +!h*c,g=x-y*A,N=g-y*p,w=P;break;case"left":g=x=s.coordinate,j=a+ +!h*l,v=j-y*A,w=v-y*p,N=P;break;case"right":g=x=s.coordinate,j=a+ +h*l,v=j+y*A,w=v+y*p,N=P;break;default:v=j=s.coordinate,x=o+ +h*c,g=x+y*A,N=g+y*p,w=P;break}return{line:{x1:v,y1:g,x2:j,y2:x},tick:{x:w,y:N}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,i=s.orientation,a=s.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,i=s.orientation,a=s.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.orientation,d=s.mirror,f=s.axisLine,h=hs(hs(hs({},wt(this.props,!1)),wt(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!d||c==="bottom"&&d);h=hs(hs({},h),{},{x1:i,y1:a+p*l,x2:i+o,y2:a+p*l})}else{var v=+(c==="left"&&!d||c==="right"&&d);h=hs(hs({},h),{},{x1:i+v*o,y1:a,x2:i+v*o,y2:a+l})}return q.createElement("line",Ad({},h,{className:zt("recharts-cartesian-axis-line",ii(f,"className"))}))}},{key:"renderTicks",value:function(s,i,a){var o=this,l=this.props,c=l.tickLine,d=l.stroke,f=l.tick,h=l.tickFormatter,p=l.unit,v=oA(hs(hs({},this.props),{},{ticks:s}),i,a),j=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),x=wt(this.props,!1),w=wt(f,!1),N=hs(hs({},x),{},{fill:"none"},wt(c,!1)),y=v.map(function(A,P){var E=o.getTickLineCoord(A),C=E.line,S=E.tick,k=hs(hs(hs(hs({textAnchor:j,verticalAnchor:g},x),{},{stroke:"none",fill:d},w),S),{},{index:P,payload:A,visibleTicksCount:v.length,tickFormatter:h});return q.createElement(sn,Ad({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},xu(o.props,A,P)),c&&q.createElement("line",Ad({},N,C,{className:zt("recharts-cartesian-axis-tick-line",ii(c,"className"))})),f&&t.renderTickItem(f,k,"".concat(Mt(h)?h(A.value,P):A.value).concat(p||"")))});return q.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var s=this,i=this.props,a=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,d=i.className,f=i.hide;if(f)return null;var h=this.props,p=h.ticks,v=jw(h,ROe),j=p;return Mt(c)&&(j=p&&p.length>0?c(this.props):c(v)),o<=0||l<=0||!j||!j.length?null:q.createElement(sn,{className:zt("recharts-cartesian-axis",d),ref:function(x){s.layerReference=x}},a&&this.renderAxisLine(),this.renderTicks(j,this.state.fontSize,this.state.letterSpacing),Fr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,i,a){var o;return q.isValidElement(s)?o=q.cloneElement(s,i):Mt(s)?o=s(i):o=q.createElement(vu,Ad({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(_.Component);lA(Ch,"displayName","CartesianAxis");lA(Ch,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var UOe=["x1","y1","x2","y2","key"],HOe=["offset"];function ju(e){"@babel/helpers - typeof";return ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ju(e)}function JR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JR(Object(n),!0).forEach(function(s){WOe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function WOe(e,t,n){return t=KOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KOe(e){var t=GOe(e,"string");return ju(t)=="symbol"?t:t+""}function GOe(e,t){if(ju(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(ju(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qc(){return qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qc.apply(this,arguments)}function eL(e,t){if(e==null)return{};var n=ZOe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function ZOe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var QOe=function(t){var n=t.fill;if(!n||n==="none")return null;var s=t.fillOpacity,i=t.x,a=t.y,o=t.width,l=t.height,c=t.ry;return q.createElement("rect",{x:i,y:a,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function uH(e,t){var n;if(q.isValidElement(e))n=q.cloneElement(e,t);else if(Mt(e))n=e(t);else{var s=t.x1,i=t.y1,a=t.x2,o=t.y2,l=t.key,c=eL(t,UOe),d=wt(c,!1);d.offset;var f=eL(d,HOe);n=q.createElement("line",qc({},f,{x1:s,y1:i,x2:a,y2:o,fill:"none",key:l}))}return n}function YOe(e){var t=e.x,n=e.width,s=e.horizontal,i=s===void 0?!0:s,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var d=as(as({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return uH(i,d)});return q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function XOe(e){var t=e.y,n=e.height,s=e.vertical,i=s===void 0?!0:s,a=e.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var d=as(as({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return uH(i,d)});return q.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function JOe(e){var t=e.horizontalFill,n=e.fillOpacity,s=e.x,i=e.y,a=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var f=l.map(function(p){return Math.round(p+i-i)}).sort(function(p,v){return p-v});i!==f[0]&&f.unshift(0);var h=f.map(function(p,v){var j=!f[v+1],g=j?i+o-p:f[v+1]-p;if(g<=0)return null;var x=v%t.length;return q.createElement("rect",{key:"react-".concat(v),y:p,x:s,height:g,width:a,stroke:"none",fill:t[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function eMe(e){var t=e.vertical,n=t===void 0?!0:t,s=e.verticalFill,i=e.fillOpacity,a=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!n||!s||!s.length)return null;var f=d.map(function(p){return Math.round(p+a-a)}).sort(function(p,v){return p-v});a!==f[0]&&f.unshift(0);var h=f.map(function(p,v){var j=!f[v+1],g=j?a+l-p:f[v+1]-p;if(g<=0)return null;var x=v%s.length;return q.createElement("rect",{key:"react-".concat(v),x:p,y:o,width:g,height:c,stroke:"none",fill:s[x],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var tMe=function(t,n){var s=t.xAxis,i=t.width,a=t.height,o=t.offset;return a9(oA(as(as(as({},Ch.defaultProps),s),{},{ticks:Ao(s,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},nMe=function(t,n){var s=t.yAxis,i=t.width,a=t.height,o=t.offset;return a9(oA(as(as(as({},Ch.defaultProps),s),{},{ticks:Ao(s,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},id={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Qo(e){var t,n,s,i,a,o,l=rA(),c=sA(),d=qke(),f=as(as({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:id.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:id.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:id.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:id.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:id.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:id.verticalFill,x:We(e.x)?e.x:d.left,y:We(e.y)?e.y:d.top,width:We(e.width)?e.width:d.width,height:We(e.height)?e.height:d.height}),h=f.x,p=f.y,v=f.width,j=f.height,g=f.syncWithTicks,x=f.horizontalValues,w=f.verticalValues,N=zke(),y=Bke();if(!We(v)||v<=0||!We(j)||j<=0||!We(h)||h!==+h||!We(p)||p!==+p)return null;var A=f.verticalCoordinatesGenerator||tMe,P=f.horizontalCoordinatesGenerator||nMe,E=f.horizontalPoints,C=f.verticalPoints;if((!E||!E.length)&&Mt(P)){var S=x&&x.length,k=P({yAxis:y?as(as({},y),{},{ticks:S?x:y.ticks}):void 0,width:l,height:c,offset:d},S?!0:g);aa(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ju(k),"]")),Array.isArray(k)&&(E=k)}if((!C||!C.length)&&Mt(A)){var I=w&&w.length,R=A({xAxis:N?as(as({},N),{},{ticks:I?w:N.ticks}):void 0,width:l,height:c,offset:d},I?!0:g);aa(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ju(R),"]")),Array.isArray(R)&&(C=R)}return q.createElement("g",{className:"recharts-cartesian-grid"},q.createElement(QOe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),q.createElement(YOe,qc({},f,{offset:d,horizontalPoints:E,xAxis:N,yAxis:y})),q.createElement(XOe,qc({},f,{offset:d,verticalPoints:C,xAxis:N,yAxis:y})),q.createElement(JOe,qc({},f,{horizontalPoints:E})),q.createElement(eMe,qc({},f,{verticalPoints:C})))}Qo.displayName="CartesianGrid";var rMe=["type","layout","connectNulls","ref"],sMe=["key"];function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}function tL(e,t){if(e==null)return{};var n=iMe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function iMe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function $m(){return $m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$m.apply(this,arguments)}function nL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Hs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nL(Object(n),!0).forEach(function(s){Qi(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nL(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ad(e){return cMe(e)||lMe(e)||oMe(e)||aMe()}function aMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oMe(e,t){if(e){if(typeof e=="string")return NS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NS(e,t)}}function lMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cMe(e){if(Array.isArray(e))return NS(e)}function NS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function uMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rL(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,fH(s.key),s)}}function dMe(e,t,n){return t&&rL(e.prototype,t),n&&rL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fMe(e,t,n){return t=bb(t),hMe(e,dH()?Reflect.construct(t,n||[],bb(e).constructor):t.apply(e,n))}function hMe(e,t){if(t&&(Hf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mMe(e)}function mMe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dH=function(){return!!e})()}function bb(e){return bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bb(e)}function pMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SS(e,t)}function SS(e,t){return SS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},SS(e,t)}function Qi(e,t,n){return t=fH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fH(e){var t=gMe(e,"string");return Hf(t)=="symbol"?t:t+""}function gMe(e,t){if(Hf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Hf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _u=function(e){function t(){var n;uMe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=fMe(this,t,[].concat(i)),Qi(n,"state",{isAnimationFinished:!0,totalLength:0}),Qi(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Qi(n,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(w,N){return w+N});if(!d)return n.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/d),h=o%d,p=l-o,v=[],j=0,g=0;j<c.length;g+=c[j],++j)if(g+c[j]>h){v=[].concat(ad(c.slice(0,j)),[h-g]);break}var x=v.length%2===0?[0,p]:[p];return[].concat(ad(t.repeat(c,f)),ad(v),x).map(function(w){return"".concat(w,"px")}).join(", ")}),Qi(n,"id",vh("recharts-line-")),Qi(n,"pathRef",function(o){n.mainCurve=o}),Qi(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Qi(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return pMe(t,e),dMe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,l=a.xAxis,c=a.yAxis,d=a.layout,f=a.children,h=ai(f,$g);if(!h)return null;var p=function(g,x){return{x:g.x,y:g.y,value:g.value,errorVal:kr(g.payload,x)}},v={clipPath:s?"url(#clipPath-".concat(i,")"):null};return q.createElement(sn,v,h.map(function(j){return q.cloneElement(j,{key:"bar-".concat(j.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:p})}))}},{key:"renderDots",value:function(s,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,f=l.dataKey,h=wt(this.props,!1),p=wt(c,!0),v=d.map(function(g,x){var w=Hs(Hs(Hs({key:"dot-".concat(x),r:3},h),p),{},{index:x,cx:g.x,cy:g.y,value:g.value,dataKey:f,payload:g.payload,points:d});return t.renderDotItem(c,w)}),j={clipPath:s?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return q.createElement(sn,$m({className:"recharts-line-dots",key:"dots"},j),v)}},{key:"renderCurveStatically",value:function(s,i,a,o){var l=this.props,c=l.type,d=l.layout,f=l.connectNulls;l.ref;var h=tL(l,rMe),p=Hs(Hs(Hs({},wt(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:s},o),{},{type:c,layout:d,connectNulls:f});return q.createElement(eb,$m({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,i){var a=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,f=o.animationBegin,h=o.animationDuration,p=o.animationEasing,v=o.animationId,j=o.animateNewValues,g=o.width,x=o.height,w=this.state,N=w.prevPoints,y=w.totalLength;return q.createElement(eo,{begin:f,duration:h,isActive:d,easing:p,from:{t:0},to:{t:1},key:"line-".concat(v),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var P=A.t;if(N){var E=N.length/l.length,C=l.map(function(D,z){var V=Math.floor(z*E);if(N[V]){var K=N[V],H=Xs(K.x,D.x),W=Xs(K.y,D.y);return Hs(Hs({},D),{},{x:H(P),y:W(P)})}if(j){var B=Xs(g*2,D.x),$=Xs(x/2,D.y);return Hs(Hs({},D),{},{x:B(P),y:$(P)})}return Hs(Hs({},D),{},{x:D.x,y:D.y})});return a.renderCurveStatically(C,s,i)}var S=Xs(0,y),k=S(P),I;if(c){var R="".concat(c).split(/[,\s]+/gim).map(function(D){return parseFloat(D)});I=a.getStrokeDasharray(k,y,R)}else I=a.generateSimpleStrokeDasharray(y,k);return a.renderCurveStatically(l,s,i,{strokeDasharray:I})})}},{key:"renderCurve",value:function(s,i){var a=this.props,o=a.points,l=a.isAnimationActive,c=this.state,d=c.prevPoints,f=c.totalLength;return l&&o&&o.length&&(!d&&f>0||!Dg(d,o))?this.renderCurveWithAnimation(s,i):this.renderCurveStatically(o,s,i)}},{key:"render",value:function(){var s,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,d=i.xAxis,f=i.yAxis,h=i.top,p=i.left,v=i.width,j=i.height,g=i.isAnimationActive,x=i.id;if(a||!l||!l.length)return null;var w=this.state.isAnimationFinished,N=l.length===1,y=zt("recharts-line",c),A=d&&d.allowDataOverflow,P=f&&f.allowDataOverflow,E=A||P,C=Dt(x)?this.id:x,S=(s=wt(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},k=S.r,I=k===void 0?3:k,R=S.strokeWidth,D=R===void 0?2:R,z=Ffe(o)?o:{},V=z.clipDot,K=V===void 0?!0:V,H=I*2+D;return q.createElement(sn,{className:y},A||P?q.createElement("defs",null,q.createElement("clipPath",{id:"clipPath-".concat(C)},q.createElement("rect",{x:A?p:p-v/2,y:P?h:h-j/2,width:A?v:v*2,height:P?j:j*2})),!K&&q.createElement("clipPath",{id:"clipPath-dots-".concat(C)},q.createElement("rect",{x:p-H/2,y:h-H/2,width:v+H,height:j+H}))):null,!N&&this.renderCurve(E,C),this.renderErrorBar(E,C),(N||o)&&this.renderDots(E,K,C),(!g||w)&&Lo.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:i.curPoints}:s.points!==i.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,i){for(var a=s.length%2!==0?[].concat(ad(s),[0]):s,o=[],l=0;l<i;++l)o=[].concat(ad(o),ad(a));return o}},{key:"renderDotItem",value:function(s,i){var a;if(q.isValidElement(s))a=q.cloneElement(s,i);else if(Mt(s))a=s(i);else{var o=i.key,l=tL(i,sMe),c=zt("recharts-line-dot",typeof s!="boolean"?s.className:"");a=q.createElement(f0,$m({key:o},l,{className:c}))}return a}}])}(_.PureComponent);Qi(_u,"displayName","Line");Qi(_u,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ku.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Qi(_u,"getComposedData",function(e){var t=e.props,n=e.xAxis,s=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,f=t.layout,h=c.map(function(p,v){var j=kr(p,o);return f==="horizontal"?{x:PI({axis:n,ticks:i,bandSize:l,entry:p,index:v}),y:Dt(j)?null:s.scale(j),value:j,payload:p}:{x:Dt(j)?null:n.scale(j),y:PI({axis:s,ticks:a,bandSize:l,entry:p,index:v}),value:j,payload:p}});return Hs({points:h,layout:f},d)});function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(e)}function xMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vMe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,pH(s.key),s)}}function yMe(e,t,n){return t&&vMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bMe(e,t,n){return t=jb(t),jMe(e,hH()?Reflect.construct(t,n||[],jb(e).constructor):t.apply(e,n))}function jMe(e,t){if(t&&(Wf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Me(e)}function _Me(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hH=function(){return!!e})()}function jb(e){return jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jb(e)}function wMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CS(e,t)}function CS(e,t){return CS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},CS(e,t)}function mH(e,t,n){return t=pH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pH(e){var t=NMe(e,"string");return Wf(t)=="symbol"?t:t+""}function NMe(e,t){if(Wf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Wf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function PS(){return PS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},PS.apply(this,arguments)}function SMe(e){var t=e.xAxisId,n=rA(),s=sA(),i=J9(t);return i==null?null:q.createElement(Ch,PS({},i,{className:zt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(o){return Ao(o,!0)}}))}var Di=function(e){function t(){return xMe(this,t),bMe(this,t,arguments)}return wMe(t,e),yMe(t,[{key:"render",value:function(){return q.createElement(SMe,this.props)}}])}(q.Component);mH(Di,"displayName","XAxis");mH(Di,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(e)}function CMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PMe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,vH(s.key),s)}}function AMe(e,t,n){return t&&PMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function EMe(e,t,n){return t=_b(t),TMe(e,gH()?Reflect.construct(t,n||[],_b(e).constructor):t.apply(e,n))}function TMe(e,t){if(t&&(Kf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kMe(e)}function kMe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gH=function(){return!!e})()}function _b(e){return _b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_b(e)}function OMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AS(e,t)}function AS(e,t){return AS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},AS(e,t)}function xH(e,t,n){return t=vH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vH(e){var t=MMe(e,"string");return Kf(t)=="symbol"?t:t+""}function MMe(e,t){if(Kf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Kf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ES(){return ES=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ES.apply(this,arguments)}var IMe=function(t){var n=t.yAxisId,s=rA(),i=sA(),a=eH(n);return a==null?null:q.createElement(Ch,ES({},a,{className:zt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:s,height:i},ticksGenerator:function(l){return Ao(l,!0)}}))},oi=function(e){function t(){return CMe(this,t),EMe(this,t,arguments)}return OMe(t,e),AMe(t,[{key:"render",value:function(){return q.createElement(IMe,this.props)}}])}(q.Component);xH(oi,"displayName","YAxis");xH(oi,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function sL(e){return $Me(e)||DMe(e)||LMe(e)||RMe()}function RMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LMe(e,t){if(e){if(typeof e=="string")return TS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TS(e,t)}}function DMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $Me(e){if(Array.isArray(e))return TS(e)}function TS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var kS=function(t,n,s,i,a){var o=ai(t,aA),l=ai(t,j0),c=[].concat(sL(o),sL(l)),d=ai(t,w0),f="".concat(i,"Id"),h=i[0],p=n;if(c.length&&(p=c.reduce(function(g,x){if(x.props[f]===s&&Wa(x.props,"extendDomain")&&We(x.props[h])){var w=x.props[h];return[Math.min(g[0],w),Math.max(g[1],w)]}return g},p)),d.length){var v="".concat(h,"1"),j="".concat(h,"2");p=d.reduce(function(g,x){if(x.props[f]===s&&Wa(x.props,"extendDomain")&&We(x.props[v])&&We(x.props[j])){var w=x.props[v],N=x.props[j];return[Math.min(g[0],w,N),Math.max(g[1],w,N)]}return g},p)}return a&&a.length&&(p=a.reduce(function(g,x){return We(x)?[Math.min(g[0],x),Math.max(g[1],x)]:g},p)),p},yH={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function i(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function a(c,d,f,h,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new i(f,h||c,p),j=n?n+d:d;return c._events[j]?c._events[j].fn?c._events[j]=[c._events[j],v]:c._events[j].push(v):(c._events[j]=v,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,h;if(this._eventsCount===0)return d;for(h in f=this._events)t.call(f,h)&&d.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,v=h.length,j=new Array(v);p<v;p++)j[p]=h[p].fn;return j},l.prototype.listenerCount=function(d){var f=n?n+d:d,h=this._events[f];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,f,h,p,v,j){var g=n?n+d:d;if(!this._events[g])return!1;var x=this._events[g],w=arguments.length,N,y;if(x.fn){switch(x.once&&this.removeListener(d,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,h),!0;case 4:return x.fn.call(x.context,f,h,p),!0;case 5:return x.fn.call(x.context,f,h,p,v),!0;case 6:return x.fn.call(x.context,f,h,p,v,j),!0}for(y=1,N=new Array(w-1);y<w;y++)N[y-1]=arguments[y];x.fn.apply(x.context,N)}else{var A=x.length,P;for(y=0;y<A;y++)switch(x[y].once&&this.removeListener(d,x[y].fn,void 0,!0),w){case 1:x[y].fn.call(x[y].context);break;case 2:x[y].fn.call(x[y].context,f);break;case 3:x[y].fn.call(x[y].context,f,h);break;case 4:x[y].fn.call(x[y].context,f,h,p);break;default:if(!N)for(P=1,N=new Array(w-1);P<w;P++)N[P-1]=arguments[P];x[y].fn.apply(x[y].context,N)}}return!0},l.prototype.on=function(d,f,h){return a(this,d,f,h,!1)},l.prototype.once=function(d,f,h){return a(this,d,f,h,!0)},l.prototype.removeListener=function(d,f,h,p){var v=n?n+d:d;if(!this._events[v])return this;if(!f)return o(this,v),this;var j=this._events[v];if(j.fn)j.fn===f&&(!p||j.once)&&(!h||j.context===h)&&o(this,v);else{for(var g=0,x=[],w=j.length;g<w;g++)(j[g].fn!==f||p&&!j[g].once||h&&j[g].context!==h)&&x.push(j[g]);x.length?this._events[v]=x.length===1?x[0]:x:o(this,v)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&o(this,f)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(yH);var FMe=yH.exports;const zMe=on(FMe);var _w=new zMe,ww="recharts.syncMouseEvents";function Hp(e){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(e)}function BMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VMe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,bH(s.key),s)}}function qMe(e,t,n){return t&&VMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nw(e,t,n){return t=bH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bH(e){var t=UMe(e,"string");return Hp(t)=="symbol"?t:t+""}function UMe(e,t){if(Hp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Hp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var HMe=function(){function e(){BMe(this,e),Nw(this,"activeIndex",0),Nw(this,"coordinateList",[]),Nw(this,"layout","horizontal")}return qMe(e,[{key:"setDetails",value:function(n){var s,i=n.coordinateList,a=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,f=n.offset,h=f===void 0?null:f,p=n.mouseHandlerCallback,v=p===void 0?null:p;this.coordinateList=(s=a??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=v??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((s=window)===null||s===void 0?void 0:s.scrollY)||0,h=a+c+d,p=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:h,pageY:p})}}}])}();function WMe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],i=e==null?void 0:e[1];if(s&&i&&We(s)&&We(i))return!0}return!1}function KMe(e,t,n,s){var i=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?s:n.width-1,height:e==="horizontal"?n.height-1:s}}function jH(e){var t=e.cx,n=e.cy,s=e.radius,i=e.startAngle,a=e.endAngle,o=kn(t,n,s,i),l=kn(t,n,s,a);return{points:[o,l],cx:t,cy:n,radius:s,startAngle:i,endAngle:a}}function GMe(e,t,n){var s,i,a,o;if(e==="horizontal")s=t.x,a=s,i=n.top,o=n.top+n.height;else if(e==="vertical")i=t.y,o=i,s=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,f=t.outerRadius,h=t.angle,p=kn(l,c,d,h),v=kn(l,c,f,h);s=p.x,i=p.y,a=v.x,o=v.y}else return jH(t);return[{x:s,y:i},{x:a,y:o}]}function Wp(e){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function iL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function tv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iL(Object(n),!0).forEach(function(s){ZMe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iL(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ZMe(e,t,n){return t=QMe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QMe(e){var t=YMe(e,"string");return Wp(t)=="symbol"?t:t+""}function YMe(e,t){if(Wp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Wp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XMe(e){var t,n,s=e.element,i=e.tooltipEventType,a=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,f=e.tooltipAxisBandSize,h=e.layout,p=e.chartName,v=(t=s.props.cursor)!==null&&t!==void 0?t:(n=s.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!s||!v||!a||!o||p!=="ScatterChart"&&i!=="axis")return null;var j,g=eb;if(p==="ScatterChart")j=o,g=gAe;else if(p==="BarChart")j=KMe(h,o,c,f),g=J2;else if(h==="radial"){var x=jH(o),w=x.cx,N=x.cy,y=x.radius,A=x.startAngle,P=x.endAngle;j={cx:w,cy:N,startAngle:A,endAngle:P,innerRadius:y,outerRadius:y},g=x9}else j={points:GMe(h,o,c)},g=eb;var E=tv(tv(tv(tv({stroke:"#ccc",pointerEvents:"none"},c),j),wt(v,!1)),{},{payload:l,payloadIndex:d,className:zt("recharts-tooltip-cursor",v.className)});return _.isValidElement(v)?_.cloneElement(v,E):_.createElement(g,E)}var JMe=["item"],eIe=["children","className","width","height","style","compact","title","desc"];function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(e)}function Ed(){return Ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ed.apply(this,arguments)}function aL(e,t){return rIe(e)||nIe(e,t)||wH(e,t)||tIe()}function tIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nIe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function rIe(e){if(Array.isArray(e))return e}function oL(e,t){if(e==null)return{};var n=sIe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function sIe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function iIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aIe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,NH(s.key),s)}}function oIe(e,t,n){return t&&aIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lIe(e,t,n){return t=wb(t),cIe(e,_H()?Reflect.construct(t,n||[],wb(e).constructor):t.apply(e,n))}function cIe(e,t){if(t&&(Gf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uIe(e)}function uIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_H=function(){return!!e})()}function wb(e){return wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wb(e)}function dIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OS(e,t)}function OS(e,t){return OS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},OS(e,t)}function Zf(e){return mIe(e)||hIe(e)||wH(e)||fIe()}function fIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wH(e,t){if(e){if(typeof e=="string")return MS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MS(e,t)}}function hIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mIe(e){if(Array.isArray(e))return MS(e)}function MS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function lL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lL(Object(n),!0).forEach(function(s){St(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lL(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function St(e,t,n){return t=NH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NH(e){var t=pIe(e,"string");return Gf(t)=="symbol"?t:t+""}function pIe(e,t){if(Gf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Gf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gIe={xAxis:["bottom","top"],yAxis:["left","right"]},xIe={width:"100%",height:"100%"},SH={x:0,y:0};function nv(e){return e}var vIe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},yIe=function(t,n,s,i){var a=n.find(function(f){return f&&f.index===s});if(a){if(t==="horizontal")return{x:a.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:a.coordinate};if(t==="centric"){var o=a.coordinate,l=i.radius;return ye(ye(ye({},i),kn(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,d=i.angle;return ye(ye(ye({},i),kn(i.cx,i.cy,c,d)),{},{angle:d,radius:c})}return SH},N0=function(t,n){var s=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,o=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Zf(l),Zf(d)):l},[]);return o.length>0?o:t&&t.length&&We(i)&&We(a)?t.slice(i,a+1):[]};function CH(e){return e==="number"?[0,"auto"]:void 0}var IS=function(t,n,s,i){var a=t.graphicalItems,o=t.tooltipAxis,l=N0(n,t);return s<0||!a||!a.length||s>=l.length?null:a.reduce(function(c,d){var f,h=(f=d.props.data)!==null&&f!==void 0?f:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var v=h===void 0?l:h;p=wy(v,o.dataKey,i)}else p=h&&h[s]||l[s];return p?[].concat(Zf(c),[d9(d,p)]):c},[])},cL=function(t,n,s,i){var a=i||{x:t.chartX,y:t.chartY},o=vIe(a,s),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,f=zSe(o,l,d,c);if(f>=0&&d){var h=d[f]&&d[f].value,p=IS(t,n,f,h),v=yIe(s,l,f,a);return{activeTooltipIndex:f,activeLabel:h,activePayload:p,activeCoordinate:v}}return null},bIe=function(t,n){var s=n.axes,i=n.graphicalItems,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=t.layout,h=t.children,p=t.stackOffset,v=i9(f,a);return s.reduce(function(j,g){var x,w=g.type.defaultProps!==void 0?ye(ye({},g.type.defaultProps),g.props):g.props,N=w.type,y=w.dataKey,A=w.allowDataOverflow,P=w.allowDuplicatedCategory,E=w.scale,C=w.ticks,S=w.includeHidden,k=w[o];if(j[k])return j;var I=N0(t.data,{graphicalItems:i.filter(function(oe){var fe,Ee=o in oe.props?oe.props[o]:(fe=oe.type.defaultProps)===null||fe===void 0?void 0:fe[o];return Ee===k}),dataStartIndex:c,dataEndIndex:d}),R=I.length,D,z,V;WMe(w.domain,A,N)&&(D=G1(w.domain,null,A),v&&(N==="number"||E!=="auto")&&(V=Im(I,y,"category")));var K=CH(N);if(!D||D.length===0){var H,W=(H=w.domain)!==null&&H!==void 0?H:K;if(y){if(D=Im(I,y,N),N==="category"&&v){var B=Tfe(D);P&&B?(z=D,D=ub(0,R)):P||(D=kI(W,D,g).reduce(function(oe,fe){return oe.indexOf(fe)>=0?oe:[].concat(Zf(oe),[fe])},[]))}else if(N==="category")P?D=D.filter(function(oe){return oe!==""&&!Dt(oe)}):D=kI(W,D,g).reduce(function(oe,fe){return oe.indexOf(fe)>=0||fe===""||Dt(fe)?oe:[].concat(Zf(oe),[fe])},[]);else if(N==="number"){var $=HSe(I,i.filter(function(oe){var fe,Ee,J=o in oe.props?oe.props[o]:(fe=oe.type.defaultProps)===null||fe===void 0?void 0:fe[o],Pe="hide"in oe.props?oe.props.hide:(Ee=oe.type.defaultProps)===null||Ee===void 0?void 0:Ee.hide;return J===k&&(S||!Pe)}),y,a,f);$&&(D=$)}v&&(N==="number"||E!=="auto")&&(V=Im(I,y,"category"))}else v?D=ub(0,R):l&&l[k]&&l[k].hasStack&&N==="number"?D=p==="expand"?[0,1]:u9(l[k].stackGroups,c,d):D=s9(I,i.filter(function(oe){var fe=o in oe.props?oe.props[o]:oe.type.defaultProps[o],Ee="hide"in oe.props?oe.props.hide:oe.type.defaultProps.hide;return fe===k&&(S||!Ee)}),N,f,!0);if(N==="number")D=kS(h,D,k,a,C),W&&(D=G1(W,D,A));else if(N==="category"&&W){var G=W,ee=D.every(function(oe){return G.indexOf(oe)>=0});ee&&(D=G)}}return ye(ye({},j),{},St({},k,ye(ye({},w),{},{axisType:a,domain:D,categoricalDomain:V,duplicateDomain:z,originalDomain:(x=w.domain)!==null&&x!==void 0?x:K,isCategorical:v,layout:f})))},{})},jIe=function(t,n){var s=n.graphicalItems,i=n.Axis,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=t.layout,h=t.children,p=N0(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),v=p.length,j=i9(f,a),g=-1;return s.reduce(function(x,w){var N=w.type.defaultProps!==void 0?ye(ye({},w.type.defaultProps),w.props):w.props,y=N[o],A=CH("number");if(!x[y]){g++;var P;return j?P=ub(0,v):l&&l[y]&&l[y].hasStack?(P=u9(l[y].stackGroups,c,d),P=kS(h,P,y,a)):(P=G1(A,s9(p,s.filter(function(E){var C,S,k=o in E.props?E.props[o]:(C=E.type.defaultProps)===null||C===void 0?void 0:C[o],I="hide"in E.props?E.props.hide:(S=E.type.defaultProps)===null||S===void 0?void 0:S.hide;return k===y&&!I}),"number",f),i.defaultProps.allowDataOverflow),P=kS(h,P,y,a)),ye(ye({},x),{},St({},y,ye(ye({axisType:a},i.defaultProps),{},{hide:!0,orientation:ii(gIe,"".concat(a,".").concat(g%2),null),domain:P,originalDomain:A,isCategorical:j,layout:f})))}return x},{})},_Ie=function(t,n){var s=n.axisType,i=s===void 0?"xAxis":s,a=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=t.children,h="".concat(i,"Id"),p=ai(f,a),v={};return p&&p.length?v=bIe(t,{axes:p,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(v=jIe(t,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),v},wIe=function(t){var n=jl(t),s=Ao(n,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:C2(s,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Yy(n,s)}},uL=function(t){var n=t.children,s=t.defaultShowTooltip,i=Zs(n,Ff),a=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},NIe=function(t){return!t||!t.length?!1:t.some(function(n){var s=Io(n&&n.type);return s&&s.indexOf("Bar")>=0})},dL=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},SIe=function(t,n){var s=t.props,i=t.graphicalItems,a=t.xAxisMap,o=a===void 0?{}:a,l=t.yAxisMap,c=l===void 0?{}:l,d=s.width,f=s.height,h=s.children,p=s.margin||{},v=Zs(h,Ff),j=Zs(h,Bs),g=Object.keys(c).reduce(function(P,E){var C=c[E],S=C.orientation;return!C.mirror&&!C.hide?ye(ye({},P),{},St({},S,P[S]+C.width)):P},{left:p.left||0,right:p.right||0}),x=Object.keys(o).reduce(function(P,E){var C=o[E],S=C.orientation;return!C.mirror&&!C.hide?ye(ye({},P),{},St({},S,ii(P,"".concat(S))+C.height)):P},{top:p.top||0,bottom:p.bottom||0}),w=ye(ye({},x),g),N=w.bottom;v&&(w.bottom+=v.props.height||Ff.defaultProps.height),j&&n&&(w=qSe(w,i,s,n));var y=d-w.left-w.right,A=f-w.top-w.bottom;return ye(ye({brushBottom:N},w),{},{width:Math.max(y,0),height:Math.max(A,0)})},CIe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},cA=function(t){var n=t.chartName,s=t.GraphicalChild,i=t.defaultTooltipEventType,a=i===void 0?"axis":i,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,f=t.formatAxisMap,h=t.defaultProps,p=function(w,N){var y=N.graphicalItems,A=N.stackGroups,P=N.offset,E=N.updateId,C=N.dataStartIndex,S=N.dataEndIndex,k=w.barSize,I=w.layout,R=w.barGap,D=w.barCategoryGap,z=w.maxBarSize,V=dL(I),K=V.numericAxisName,H=V.cateAxisName,W=NIe(y),B=[];return y.forEach(function($,G){var ee=N0(w.data,{graphicalItems:[$],dataStartIndex:C,dataEndIndex:S}),oe=$.type.defaultProps!==void 0?ye(ye({},$.type.defaultProps),$.props):$.props,fe=oe.dataKey,Ee=oe.maxBarSize,J=oe["".concat(K,"Id")],Pe=oe["".concat(H,"Id")],ze={},$e=c.reduce(function(Kn,Q){var de=N["".concat(Q.axisType,"Map")],pe=oe["".concat(Q.axisType,"Id")];de&&de[pe]||Q.axisType==="zAxis"||bu();var He=de[pe];return ye(ye({},Kn),{},St(St({},Q.axisType,He),"".concat(Q.axisType,"Ticks"),Ao(He)))},ze),me=$e[H],Te=$e["".concat(H,"Ticks")],je=A&&A[J]&&A[J].hasStack&&eCe($,A[J].stackGroups),ue=Io($.type).indexOf("Bar")>=0,ct=Yy(me,Te),Ge=[],ut=W&&BSe({barSize:k,stackGroups:A,totalSize:CIe($e,H)});if(ue){var Xe,qe,lt=Dt(Ee)?z:Ee,It=(Xe=(qe=Yy(me,Te,!0))!==null&&qe!==void 0?qe:lt)!==null&&Xe!==void 0?Xe:0;Ge=VSe({barGap:R,barCategoryGap:D,bandSize:It!==ct?It:ct,sizeList:ut[Pe],maxBarSize:lt}),It!==ct&&(Ge=Ge.map(function(Kn){return ye(ye({},Kn),{},{position:ye(ye({},Kn.position),{},{offset:Kn.position.offset-It/2})})}))}var hn=$&&$.type&&$.type.getComposedData;hn&&B.push({props:ye(ye({},hn(ye(ye({},$e),{},{displayedData:ee,props:w,dataKey:fe,item:$,bandSize:ct,barPosition:Ge,offset:P,stackedData:je,layout:I,dataStartIndex:C,dataEndIndex:S}))),{},St(St(St({key:$.key||"item-".concat(G)},K,$e[K]),H,$e[H]),"animationId",E)),childIndex:Vfe($,w.children),item:$})}),B},v=function(w,N){var y=w.props,A=w.dataStartIndex,P=w.dataEndIndex,E=w.updateId;if(!NO({props:y}))return null;var C=y.children,S=y.layout,k=y.stackOffset,I=y.data,R=y.reverseStackOrder,D=dL(S),z=D.numericAxisName,V=D.cateAxisName,K=ai(C,s),H=XSe(I,K,"".concat(z,"Id"),"".concat(V,"Id"),k,R),W=c.reduce(function(oe,fe){var Ee="".concat(fe.axisType,"Map");return ye(ye({},oe),{},St({},Ee,_Ie(y,ye(ye({},fe),{},{graphicalItems:K,stackGroups:fe.axisType===z&&H,dataStartIndex:A,dataEndIndex:P}))))},{}),B=SIe(ye(ye({},W),{},{props:y,graphicalItems:K}),N==null?void 0:N.legendBBox);Object.keys(W).forEach(function(oe){W[oe]=f(y,W[oe],B,oe.replace("Map",""),n)});var $=W["".concat(V,"Map")],G=wIe($),ee=p(y,ye(ye({},W),{},{dataStartIndex:A,dataEndIndex:P,updateId:E,graphicalItems:K,stackGroups:H,offset:B}));return ye(ye({formattedGraphicalItems:ee,graphicalItems:K,offset:B,stackGroups:H},G),W)},j=function(x){function w(N){var y,A,P;return iIe(this,w),P=lIe(this,w,[N]),St(P,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),St(P,"accessibilityManager",new HMe),St(P,"handleLegendBBoxUpdate",function(E){if(E){var C=P.state,S=C.dataStartIndex,k=C.dataEndIndex,I=C.updateId;P.setState(ye({legendBBox:E},v({props:P.props,dataStartIndex:S,dataEndIndex:k,updateId:I},ye(ye({},P.state),{},{legendBBox:E}))))}}),St(P,"handleReceiveSyncEvent",function(E,C,S){if(P.props.syncId===E){if(S===P.eventEmitterSymbol&&typeof P.props.syncMethod!="function")return;P.applySyncEvent(C)}}),St(P,"handleBrushChange",function(E){var C=E.startIndex,S=E.endIndex;if(C!==P.state.dataStartIndex||S!==P.state.dataEndIndex){var k=P.state.updateId;P.setState(function(){return ye({dataStartIndex:C,dataEndIndex:S},v({props:P.props,dataStartIndex:C,dataEndIndex:S,updateId:k},P.state))}),P.triggerSyncEvent({dataStartIndex:C,dataEndIndex:S})}}),St(P,"handleMouseEnter",function(E){var C=P.getMouseInfo(E);if(C){var S=ye(ye({},C),{},{isTooltipActive:!0});P.setState(S),P.triggerSyncEvent(S);var k=P.props.onMouseEnter;Mt(k)&&k(S,E)}}),St(P,"triggeredAfterMouseMove",function(E){var C=P.getMouseInfo(E),S=C?ye(ye({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};P.setState(S),P.triggerSyncEvent(S);var k=P.props.onMouseMove;Mt(k)&&k(S,E)}),St(P,"handleItemMouseEnter",function(E){P.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),St(P,"handleItemMouseLeave",function(){P.setState(function(){return{isTooltipActive:!1}})}),St(P,"handleMouseMove",function(E){E.persist(),P.throttleTriggeredAfterMouseMove(E)}),St(P,"handleMouseLeave",function(E){P.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};P.setState(C),P.triggerSyncEvent(C);var S=P.props.onMouseLeave;Mt(S)&&S(C,E)}),St(P,"handleOuterEvent",function(E){var C=Bfe(E),S=ii(P.props,"".concat(C));if(C&&Mt(S)){var k,I;/.*touch.*/i.test(C)?I=P.getMouseInfo(E.changedTouches[0]):I=P.getMouseInfo(E),S((k=I)!==null&&k!==void 0?k:{},E)}}),St(P,"handleClick",function(E){var C=P.getMouseInfo(E);if(C){var S=ye(ye({},C),{},{isTooltipActive:!0});P.setState(S),P.triggerSyncEvent(S);var k=P.props.onClick;Mt(k)&&k(S,E)}}),St(P,"handleMouseDown",function(E){var C=P.props.onMouseDown;if(Mt(C)){var S=P.getMouseInfo(E);C(S,E)}}),St(P,"handleMouseUp",function(E){var C=P.props.onMouseUp;if(Mt(C)){var S=P.getMouseInfo(E);C(S,E)}}),St(P,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&P.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),St(P,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&P.handleMouseDown(E.changedTouches[0])}),St(P,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&P.handleMouseUp(E.changedTouches[0])}),St(P,"handleDoubleClick",function(E){var C=P.props.onDoubleClick;if(Mt(C)){var S=P.getMouseInfo(E);C(S,E)}}),St(P,"handleContextMenu",function(E){var C=P.props.onContextMenu;if(Mt(C)){var S=P.getMouseInfo(E);C(S,E)}}),St(P,"triggerSyncEvent",function(E){P.props.syncId!==void 0&&_w.emit(ww,P.props.syncId,E,P.eventEmitterSymbol)}),St(P,"applySyncEvent",function(E){var C=P.props,S=C.layout,k=C.syncMethod,I=P.state.updateId,R=E.dataStartIndex,D=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)P.setState(ye({dataStartIndex:R,dataEndIndex:D},v({props:P.props,dataStartIndex:R,dataEndIndex:D,updateId:I},P.state)));else if(E.activeTooltipIndex!==void 0){var z=E.chartX,V=E.chartY,K=E.activeTooltipIndex,H=P.state,W=H.offset,B=H.tooltipTicks;if(!W)return;if(typeof k=="function")K=k(B,E);else if(k==="value"){K=-1;for(var $=0;$<B.length;$++)if(B[$].value===E.activeLabel){K=$;break}}var G=ye(ye({},W),{},{x:W.left,y:W.top}),ee=Math.min(z,G.x+G.width),oe=Math.min(V,G.y+G.height),fe=B[K]&&B[K].value,Ee=IS(P.state,P.props.data,K),J=B[K]?{x:S==="horizontal"?B[K].coordinate:ee,y:S==="horizontal"?oe:B[K].coordinate}:SH;P.setState(ye(ye({},E),{},{activeLabel:fe,activeCoordinate:J,activePayload:Ee,activeTooltipIndex:K}))}else P.setState(E)}),St(P,"renderCursor",function(E){var C,S=P.state,k=S.isTooltipActive,I=S.activeCoordinate,R=S.activePayload,D=S.offset,z=S.activeTooltipIndex,V=S.tooltipAxisBandSize,K=P.getTooltipEventType(),H=(C=E.props.active)!==null&&C!==void 0?C:k,W=P.props.layout,B=E.key||"_recharts-cursor";return q.createElement(XMe,{key:B,activeCoordinate:I,activePayload:R,activeTooltipIndex:z,chartName:n,element:E,isActive:H,layout:W,offset:D,tooltipAxisBandSize:V,tooltipEventType:K})}),St(P,"renderPolarAxis",function(E,C,S){var k=ii(E,"type.axisType"),I=ii(P.state,"".concat(k,"Map")),R=E.type.defaultProps,D=R!==void 0?ye(ye({},R),E.props):E.props,z=I&&I[D["".concat(k,"Id")]];return _.cloneElement(E,ye(ye({},z),{},{className:zt(k,z.className),key:E.key||"".concat(C,"-").concat(S),ticks:Ao(z,!0)}))}),St(P,"renderPolarGrid",function(E){var C=E.props,S=C.radialLines,k=C.polarAngles,I=C.polarRadius,R=P.state,D=R.radiusAxisMap,z=R.angleAxisMap,V=jl(D),K=jl(z),H=K.cx,W=K.cy,B=K.innerRadius,$=K.outerRadius;return _.cloneElement(E,{polarAngles:Array.isArray(k)?k:Ao(K,!0).map(function(G){return G.coordinate}),polarRadius:Array.isArray(I)?I:Ao(V,!0).map(function(G){return G.coordinate}),cx:H,cy:W,innerRadius:B,outerRadius:$,key:E.key||"polar-grid",radialLines:S})}),St(P,"renderLegend",function(){var E=P.state.formattedGraphicalItems,C=P.props,S=C.children,k=C.width,I=C.height,R=P.props.margin||{},D=k-(R.left||0)-(R.right||0),z=n9({children:S,formattedGraphicalItems:E,legendWidth:D,legendContent:d});if(!z)return null;var V=z.item,K=oL(z,JMe);return _.cloneElement(V,ye(ye({},K),{},{chartWidth:k,chartHeight:I,margin:R,onBBoxUpdate:P.handleLegendBBoxUpdate}))}),St(P,"renderTooltip",function(){var E,C=P.props,S=C.children,k=C.accessibilityLayer,I=Zs(S,Ar);if(!I)return null;var R=P.state,D=R.isTooltipActive,z=R.activeCoordinate,V=R.activePayload,K=R.activeLabel,H=R.offset,W=(E=I.props.active)!==null&&E!==void 0?E:D;return _.cloneElement(I,{viewBox:ye(ye({},H),{},{x:H.left,y:H.top}),active:W,label:K,payload:W?V:[],coordinate:z,accessibilityLayer:k})}),St(P,"renderBrush",function(E){var C=P.props,S=C.margin,k=C.data,I=P.state,R=I.offset,D=I.dataStartIndex,z=I.dataEndIndex,V=I.updateId;return _.cloneElement(E,{key:E.key||"_recharts-brush",onChange:Yx(P.handleBrushChange,E.props.onChange),data:k,x:We(E.props.x)?E.props.x:R.left,y:We(E.props.y)?E.props.y:R.top+R.height+R.brushBottom-(S.bottom||0),width:We(E.props.width)?E.props.width:R.width,startIndex:D,endIndex:z,updateId:"brush-".concat(V)})}),St(P,"renderReferenceElement",function(E,C,S){if(!E)return null;var k=P,I=k.clipPathId,R=P.state,D=R.xAxisMap,z=R.yAxisMap,V=R.offset,K=E.type.defaultProps||{},H=E.props,W=H.xAxisId,B=W===void 0?K.xAxisId:W,$=H.yAxisId,G=$===void 0?K.yAxisId:$;return _.cloneElement(E,{key:E.key||"".concat(C,"-").concat(S),xAxis:D[B],yAxis:z[G],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:I})}),St(P,"renderActivePoints",function(E){var C=E.item,S=E.activePoint,k=E.basePoint,I=E.childIndex,R=E.isRange,D=[],z=C.props.key,V=C.item.type.defaultProps!==void 0?ye(ye({},C.item.type.defaultProps),C.item.props):C.item.props,K=V.activeDot,H=V.dataKey,W=ye(ye({index:I,dataKey:H,cx:S.x,cy:S.y,r:4,fill:X2(C.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},wt(K,!1)),Ny(K));return D.push(w.renderActiveDot(K,W,"".concat(z,"-activePoint-").concat(I))),k?D.push(w.renderActiveDot(K,ye(ye({},W),{},{cx:k.x,cy:k.y}),"".concat(z,"-basePoint-").concat(I))):R&&D.push(null),D}),St(P,"renderGraphicChild",function(E,C,S){var k=P.filterFormatItem(E,C,S);if(!k)return null;var I=P.getTooltipEventType(),R=P.state,D=R.isTooltipActive,z=R.tooltipAxis,V=R.activeTooltipIndex,K=R.activeLabel,H=P.props.children,W=Zs(H,Ar),B=k.props,$=B.points,G=B.isRange,ee=B.baseLine,oe=k.item.type.defaultProps!==void 0?ye(ye({},k.item.type.defaultProps),k.item.props):k.item.props,fe=oe.activeDot,Ee=oe.hide,J=oe.activeBar,Pe=oe.activeShape,ze=!!(!Ee&&D&&W&&(fe||J||Pe)),$e={};I!=="axis"&&W&&W.props.trigger==="click"?$e={onClick:Yx(P.handleItemMouseEnter,E.props.onClick)}:I!=="axis"&&($e={onMouseLeave:Yx(P.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:Yx(P.handleItemMouseEnter,E.props.onMouseEnter)});var me=_.cloneElement(E,ye(ye({},k.props),$e));function Te(Q){return typeof z.dataKey=="function"?z.dataKey(Q.payload):null}if(ze)if(V>=0){var je,ue;if(z.dataKey&&!z.allowDuplicatedCategory){var ct=typeof z.dataKey=="function"?Te:"payload.".concat(z.dataKey.toString());je=wy($,ct,K),ue=G&&ee&&wy(ee,ct,K)}else je=$==null?void 0:$[V],ue=G&&ee&&ee[V];if(Pe||J){var Ge=E.props.activeIndex!==void 0?E.props.activeIndex:V;return[_.cloneElement(E,ye(ye(ye({},k.props),$e),{},{activeIndex:Ge})),null,null]}if(!Dt(je))return[me].concat(Zf(P.renderActivePoints({item:k,activePoint:je,basePoint:ue,childIndex:V,isRange:G})))}else{var ut,Xe=(ut=P.getItemByXY(P.state.activeCoordinate))!==null&&ut!==void 0?ut:{graphicalItem:me},qe=Xe.graphicalItem,lt=qe.item,It=lt===void 0?E:lt,hn=qe.childIndex,Kn=ye(ye(ye({},k.props),$e),{},{activeIndex:hn});return[_.cloneElement(It,Kn),null,null]}return G?[me,null,null]:[me,null]}),St(P,"renderCustomized",function(E,C,S){return _.cloneElement(E,ye(ye({key:"recharts-customized-".concat(S)},P.props),P.state))}),St(P,"renderMap",{CartesianGrid:{handler:nv,once:!0},ReferenceArea:{handler:P.renderReferenceElement},ReferenceLine:{handler:nv},ReferenceDot:{handler:P.renderReferenceElement},XAxis:{handler:nv},YAxis:{handler:nv},Brush:{handler:P.renderBrush,once:!0},Bar:{handler:P.renderGraphicChild},Line:{handler:P.renderGraphicChild},Area:{handler:P.renderGraphicChild},Radar:{handler:P.renderGraphicChild},RadialBar:{handler:P.renderGraphicChild},Scatter:{handler:P.renderGraphicChild},Pie:{handler:P.renderGraphicChild},Funnel:{handler:P.renderGraphicChild},Tooltip:{handler:P.renderCursor,once:!0},PolarGrid:{handler:P.renderPolarGrid,once:!0},PolarAngleAxis:{handler:P.renderPolarAxis},PolarRadiusAxis:{handler:P.renderPolarAxis},Customized:{handler:P.renderCustomized}}),P.clipPathId="".concat((y=N.id)!==null&&y!==void 0?y:vh("recharts"),"-clip"),P.throttleTriggeredAfterMouseMove=tU(P.triggeredAfterMouseMove,(A=N.throttleDelay)!==null&&A!==void 0?A:1e3/60),P.state={},P}return dIe(w,x),oIe(w,[{key:"componentDidMount",value:function(){var y,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,A=y.children,P=y.data,E=y.height,C=y.layout,S=Zs(A,Ar);if(S){var k=S.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,R=IS(this.state,P,k,I),D=this.state.tooltipTicks[k].coordinate,z=(this.state.offset.top+E)/2,V=C==="horizontal",K=V?{x:D,y:z}:{y:D,x:z},H=this.state.formattedGraphicalItems.find(function(B){var $=B.item;return $.type.name==="Scatter"});H&&(K=ye(ye({},K),H.props.points[k].tooltipPosition),R=H.props.points[k].tooltipPayload);var W={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:I,activePayload:R,activeCoordinate:K};this.setState(W),this.renderCursor(S),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var P,E;this.accessibilityManager.setDetails({offset:{left:(P=this.props.margin.left)!==null&&P!==void 0?P:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(y){c1([Zs(y.children,Ar)],[Zs(this.props.children,Ar)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=Zs(this.props.children,Ar);if(y&&typeof y.props.shared=="boolean"){var A=y.props.shared?"axis":"item";return l.indexOf(A)>=0?A:a}return a}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var A=this.container,P=A.getBoundingClientRect(),E=m_e(P),C={chartX:Math.round(y.pageX-E.left),chartY:Math.round(y.pageY-E.top)},S=P.width/A.offsetWidth||1,k=this.inRange(C.chartX,C.chartY,S);if(!k)return null;var I=this.state,R=I.xAxisMap,D=I.yAxisMap,z=this.getTooltipEventType(),V=cL(this.state,this.props.data,this.props.layout,k);if(z!=="axis"&&R&&D){var K=jl(R).scale,H=jl(D).scale,W=K&&K.invert?K.invert(C.chartX):null,B=H&&H.invert?H.invert(C.chartY):null;return ye(ye({},C),{},{xValue:W,yValue:B},V)}return V?ye(ye({},C),V):null}},{key:"inRange",value:function(y,A){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,C=y/P,S=A/P;if(E==="horizontal"||E==="vertical"){var k=this.state.offset,I=C>=k.left&&C<=k.left+k.width&&S>=k.top&&S<=k.top+k.height;return I?{x:C,y:S}:null}var R=this.state,D=R.angleAxisMap,z=R.radiusAxisMap;if(D&&z){var V=jl(D);return II({x:C,y:S},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,A=this.getTooltipEventType(),P=Zs(y,Ar),E={};P&&A==="axis"&&(P.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=Ny(this.props,this.handleOuterEvent);return ye(ye({},C),E)}},{key:"addListener",value:function(){_w.on(ww,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){_w.removeListener(ww,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,A,P){for(var E=this.state.formattedGraphicalItems,C=0,S=E.length;C<S;C++){var k=E[C];if(k.item===y||k.props.key===y.key||A===Io(k.item.type)&&P===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,A=this.state.offset,P=A.left,E=A.top,C=A.height,S=A.width;return q.createElement("defs",null,q.createElement("clipPath",{id:y},q.createElement("rect",{x:P,y:E,height:C,width:S})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(A,P){var E=aL(P,2),C=E[0],S=E[1];return ye(ye({},A),{},St({},C,S.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(A,P){var E=aL(P,2),C=E[0],S=E[1];return ye(ye({},A),{},St({},C,S.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[y])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(y){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[y])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(y){var A=this.state,P=A.formattedGraphicalItems,E=A.activeItem;if(P&&P.length)for(var C=0,S=P.length;C<S;C++){var k=P[C],I=k.props,R=k.item,D=R.type.defaultProps!==void 0?ye(ye({},R.type.defaultProps),R.props):R.props,z=Io(R.type);if(z==="Bar"){var V=(I.data||[]).find(function(B){return Q2e(y,B)});if(V)return{graphicalItem:k,payload:V}}else if(z==="RadialBar"){var K=(I.data||[]).find(function(B){return II(y,B)});if(K)return{graphicalItem:k,payload:K}}else if(x0(k,E)||v0(k,E)||zp(k,E)){var H=$Ee({graphicalItem:k,activeTooltipItem:E,itemData:D.data}),W=D.activeIndex===void 0?H:D.activeIndex;return{graphicalItem:ye(ye({},k),{},{childIndex:W}),payload:zp(k,E)?D.data[H]:k.props.data[H]}}}return null}},{key:"render",value:function(){var y=this;if(!NO(this))return null;var A=this.props,P=A.children,E=A.className,C=A.width,S=A.height,k=A.style,I=A.compact,R=A.title,D=A.desc,z=oL(A,eIe),V=wt(z,!1);if(I)return q.createElement(VR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},q.createElement(d1,Ed({},V,{width:C,height:S,title:R,desc:D}),this.renderClipPath(),CO(P,this.renderMap)));if(this.props.accessibilityLayer){var K,H;V.tabIndex=(K=this.props.tabIndex)!==null&&K!==void 0?K:0,V.role=(H=this.props.role)!==null&&H!==void 0?H:"application",V.onKeyDown=function(B){y.accessibilityManager.keyboardEvent(B)},V.onFocus=function(){y.accessibilityManager.focus()}}var W=this.parseEventsOfWrapper();return q.createElement(VR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},q.createElement("div",Ed({className:zt("recharts-wrapper",E),style:ye({position:"relative",cursor:"default",width:C,height:S},k)},W,{ref:function($){y.container=$}}),q.createElement(d1,Ed({},V,{width:C,height:S,title:R,desc:D,style:xIe}),this.renderClipPath(),CO(P,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(_.Component);St(j,"displayName",n),St(j,"defaultProps",ye({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),St(j,"getDerivedStateFromProps",function(x,w){var N=x.dataKey,y=x.data,A=x.children,P=x.width,E=x.height,C=x.layout,S=x.stackOffset,k=x.margin,I=w.dataStartIndex,R=w.dataEndIndex;if(w.updateId===void 0){var D=uL(x);return ye(ye(ye({},D),{},{updateId:0},v(ye(ye({props:x},D),{},{updateId:0}),w)),{},{prevDataKey:N,prevData:y,prevWidth:P,prevHeight:E,prevLayout:C,prevStackOffset:S,prevMargin:k,prevChildren:A})}if(N!==w.prevDataKey||y!==w.prevData||P!==w.prevWidth||E!==w.prevHeight||C!==w.prevLayout||S!==w.prevStackOffset||!qd(k,w.prevMargin)){var z=uL(x),V={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},K=ye(ye({},cL(w,y,C)),{},{updateId:w.updateId+1}),H=ye(ye(ye({},z),V),K);return ye(ye(ye({},H),v(ye({props:x},H),w)),{},{prevDataKey:N,prevData:y,prevWidth:P,prevHeight:E,prevLayout:C,prevStackOffset:S,prevMargin:k,prevChildren:A})}if(!c1(A,w.prevChildren)){var W,B,$,G,ee=Zs(A,Ff),oe=ee&&(W=(B=ee.props)===null||B===void 0?void 0:B.startIndex)!==null&&W!==void 0?W:I,fe=ee&&($=(G=ee.props)===null||G===void 0?void 0:G.endIndex)!==null&&$!==void 0?$:R,Ee=oe!==I||fe!==R,J=!Dt(y),Pe=J&&!Ee?w.updateId:w.updateId+1;return ye(ye({updateId:Pe},v(ye(ye({props:x},w),{},{updateId:Pe,dataStartIndex:oe,dataEndIndex:fe}),w)),{},{prevChildren:A,dataStartIndex:oe,dataEndIndex:fe})}return null}),St(j,"renderActiveDot",function(x,w,N){var y;return _.isValidElement(x)?y=_.cloneElement(x,w):Mt(x)?y=x(w):y=q.createElement(f0,w),q.createElement(sn,{className:"recharts-active-dot",key:N},y)});var g=_.forwardRef(function(w,N){return q.createElement(j,Ed({},w,{ref:N}))});return g.displayName=j.displayName,g},PH=cA({chartName:"LineChart",GraphicalChild:_u,axisComponents:[{axisType:"xAxis",AxisComp:Di},{axisType:"yAxis",AxisComp:oi}],formatAxisMap:H9}),Ph=cA({chartName:"BarChart",GraphicalChild:us,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Di},{axisType:"yAxis",AxisComp:oi}],formatAxisMap:H9}),AH=cA({chartName:"PieChart",GraphicalChild:oo,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:g0},{axisType:"radiusAxis",AxisComp:m0}],formatAxisMap:uCe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function PIe({data:e}){return!e||e.length===0?r.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"Aucune donne disponible"}):r.jsx("div",{className:"h-64","data-testid":"activity-chart",children:r.jsx(Ua,{width:"100%",height:"100%",children:r.jsxs(Ph,{data:e,children:[r.jsx(Qo,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),r.jsx(Di,{dataKey:"date",stroke:"#6B7280",fontSize:12}),r.jsx(oi,{stroke:"#6B7280",fontSize:12}),r.jsx(Ar,{contentStyle:{backgroundColor:"#fff",border:"1px solid #E5E7EB",borderRadius:"8px"}}),r.jsx(Bs,{}),r.jsx(us,{dataKey:"actions",fill:"#4F46E5",radius:[4,4,0,0],name:"Actions"}),r.jsx(us,{dataKey:"users",fill:"#10B981",radius:[4,4,0,0],name:"Utilisateurs actifs"})]})})})}function AIe({data:e}){return!e||e.length===0?r.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"Aucune donne disponible"}):r.jsx("div",{className:"h-64","data-testid":"users-chart",children:r.jsx(Ua,{width:"100%",height:"100%",children:r.jsxs(Ph,{data:e,children:[r.jsx(Qo,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),r.jsx(Di,{dataKey:"entity",stroke:"#6B7280",fontSize:12}),r.jsx(oi,{stroke:"#6B7280",fontSize:12}),r.jsx(Ar,{contentStyle:{backgroundColor:"#fff",border:"1px solid #E5E7EB",borderRadius:"8px"}}),r.jsx(Bs,{}),r.jsx(us,{dataKey:"active",fill:"#10B981",radius:[4,4,0,0],name:"Utilisateurs actifs",stackId:"a"}),r.jsx(us,{dataKey:"inactive",fill:"#EF4444",radius:[4,4,0,0],name:"Utilisateurs inactifs",stackId:"a"})]})})})}const EIe={create_team:dr,update_team:Ii,delete_team:Ns,create_organization:dr,update_organization:Ii,delete_organization:Ns,add_team_member:Nn,remove_team_member:Ns},TIe={create_team:"a cr l'quipe",update_team:"a modifi l'quipe",delete_team:"a supprim l'quipe",create_organization:"a cr l'organisation",update_organization:"a modifi l'organisation",delete_organization:"a supprim l'organisation",add_team_member:"a ajout un membre ",remove_team_member:"a retir un membre de",update_organization_entity:"a mis  jour l'entit"};function kIe({logs:e}){const t=Array.isArray(e)?e:(e==null?void 0:e.logs)||[];return t.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500","data-testid":"no-activities",children:"Aucune activit rcente"}):r.jsx("div",{className:"space-y-3","data-testid":"recent-activities-list",children:t.map(n=>{const s=EIe[n.action]||du,i=TIe[n.action]||n.action;return r.jsxs("div",{className:"flex items-start gap-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors","data-testid":`activity-log-${n.id}`,children:[r.jsx("div",{className:"flex-shrink-0 p-2 bg-white rounded-lg border border-gray-200",children:r.jsx(s,{className:"w-5 h-5 text-indigo-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("p",{className:"text-sm text-gray-900",children:[r.jsx("span",{className:"font-medium",children:n.userEmail||n.userName||"Utilisateur"})," ",i," ",r.jsx("span",{className:"font-medium",children:n.entityName||n.entityType})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.createdAt?PP(new Date(n.createdAt),{addSuffix:!0,locale:jr}):"Date inconnue"})]}),r.jsx("div",{className:"flex-shrink-0",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${n.status==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.status==="success"?"Russi":"chou"})})]},n.id)})})}function OIe({size:e="md",className:t=""}){const n={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"};return r.jsx("div",{className:`flex items-center justify-center ${t}`,children:r.jsx(On,{className:`${n[e]} animate-spin text-indigo-600`,"data-testid":"loading-spinner"})})}function MIe({title:e,message:t,onRetry:n}){return r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6","data-testid":"error-alert",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(Br,{className:"w-6 h-6 text-red-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-red-900","data-testid":"error-title",children:e}),r.jsx("p",{className:"mt-2 text-sm text-red-700","data-testid":"error-message",children:t}),n&&r.jsxs("button",{onClick:n,className:"mt-4 inline-flex items-center gap-2 px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors","data-testid":"button-retry",children:[r.jsx(Da,{className:"w-4 h-4"}),"Ressayer"]})]})]})})}function IIe(){const{data:e,isLoading:t,error:n,refetch:s}=Ke({queryKey:["admin-analytics"],queryFn:()=>uO.getAnalytics(),refetchInterval:3e4}),{data:i}=Ke({queryKey:["admin-recent-logs"],queryFn:()=>uO.getRecentAuditLogs(10),refetchInterval:1e4});if(t)return r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx(OIe,{size:"lg"})});if(n)return r.jsx("div",{className:"p-8",children:r.jsx(MIe,{title:"Erreur de chargement",message:"Impossible de charger les analytics du dashboard.",onRetry:()=>s()})});const a=[{title:"Organisations",value:(e==null?void 0:e.totalOrganizations)||0,icon:Ir,color:"blue",trend:"+12%",trendUp:!0},{title:"quipes",value:(e==null?void 0:e.totalTeams)||0,icon:Nn,color:"green",trend:"+8%",trendUp:!0},{title:"Utilisateurs Actifs",value:(e==null?void 0:e.activeUsers)||0,icon:du,color:"purple",trend:"+15%",trendUp:!0},{title:"Actions (7j)",value:(e==null?void 0:e.actionsLast7Days)||0,icon:Zl,color:"orange",trend:"-5%",trendUp:!1}];return r.jsxs("div",{className:"p-8 space-y-8 bg-gray-50 min-h-screen",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900","data-testid":"text-dashboard-title",children:"Tableau de bord Admin"}),r.jsx("p",{className:"text-gray-600 mt-2","data-testid":"text-dashboard-subtitle",children:"Vue d'ensemble de votre plateforme HectorSalesAI"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map(o=>r.jsx(Xle,{...o},o.title))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Activit sur 30 jours"}),r.jsx(PIe,{data:(e==null?void 0:e.activityChart)||[]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Utilisateurs par entit"}),r.jsx(AIe,{data:(e==null?void 0:e.usersByEntity)||[]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Activits rcentes"}),r.jsx(un,{href:"/admin/audit-logs",className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium","data-testid":"link-view-all-activities",children:"Voir tout "})]}),r.jsx(kIe,{logs:i||[]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(un,{href:"/admin/organizations",className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow block","data-testid":"link-quick-organizations",children:[r.jsx(Ir,{className:"w-8 h-8 text-blue-600 mb-3"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Grer les Organisations"}),r.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Crer, modifier et grer vos organisations"})]}),r.jsxs(un,{href:"/admin/teams",className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow block","data-testid":"link-quick-teams",children:[r.jsx(Nn,{className:"w-8 h-8 text-green-600 mb-3"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Grer les quipes"}),r.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Crer et grer les quipes commerciales"})]}),r.jsxs(un,{href:"/admin/audit-logs",className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow block","data-testid":"link-quick-audit",children:[r.jsx(du,{className:"w-8 h-8 text-purple-600 mb-3"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Historique d'Audit"}),r.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Consulter toutes les actions effectues"})]})]})]})}const um="/api/admin",rv={async getAll(){const e=await fetch(`${um}/organizations`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch organizations");return e.json()},async getById(e){const t=await fetch(`${um}/organizations/${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch organization");return t.json()},async create(e){const t=await fetch(`${um}/organizations`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw new Error(n||"Failed to create organization")}return t.json()},async update(e,t){const n=await fetch(`${um}/organizations/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!n.ok){const s=await n.text();throw new Error(s||"Failed to update organization")}return n.json()},async delete(e){const t=await fetch(`${um}/organizations/${e}`,{method:"DELETE",credentials:"include"});if(!t.ok){const n=await t.text();throw new Error(n||"Failed to delete organization")}}};function RIe(){const{toast:e}=At(),t=ih(),{data:n,isLoading:s,error:i}=Ke({queryKey:["admin-organizations"],queryFn:()=>rv.getAll()}),a=dt({mutationFn:c=>rv.create(c),onSuccess:()=>{t.invalidateQueries({queryKey:["admin-organizations"]}),t.invalidateQueries({queryKey:["admin-analytics"]}),e({title:"Organisation cre",description:"L'organisation a t cre avec succs."})},onError:c=>{e({title:"Erreur",description:c.message||"Impossible de crer l'organisation.",variant:"destructive"})}}),o=dt({mutationFn:({id:c,data:d})=>rv.update(c,d),onSuccess:()=>{t.invalidateQueries({queryKey:["admin-organizations"]}),t.invalidateQueries({queryKey:["admin-analytics"]}),e({title:"Organisation modifie",description:"L'organisation a t modifie avec succs."})},onError:c=>{e({title:"Erreur",description:c.message||"Impossible de modifier l'organisation.",variant:"destructive"})}}),l=dt({mutationFn:c=>rv.delete(c),onSuccess:()=>{t.invalidateQueries({queryKey:["admin-organizations"]}),t.invalidateQueries({queryKey:["admin-analytics"]}),e({title:"Organisation supprime",description:"L'organisation a t supprime avec succs."})},onError:c=>{e({title:"Erreur",description:c.message||"Impossible de supprimer l'organisation.",variant:"destructive"})}});return{organizations:n||[],isLoading:s,error:i,createOrganization:a.mutate,updateOrganization:o.mutate,deleteOrganization:l.mutate,isCreating:a.isPending,isUpdating:o.isPending,isDeleting:l.isPending}}var RS=["Enter"," "],LIe=["ArrowDown","PageUp","Home"],EH=["ArrowUp","PageDown","End"],DIe=[...LIe,...EH],$Ie={ltr:[...RS,"ArrowRight"],rtl:[...RS,"ArrowLeft"]},FIe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Fg="Menu",[Kp,zIe,BIe]=vg(Fg),[Ru,TH]=Nr(Fg,[BIe,uh,dh]),S0=uh(),kH=dh(),[VIe,Lu]=Ru(Fg),[qIe,zg]=Ru(Fg),OH=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:i,onOpenChange:a,modal:o=!0}=e,l=S0(t),[c,d]=_.useState(null),f=_.useRef(!1),h=Un(a),p=Eu(i);return _.useEffect(()=>{const v=()=>{f.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>f.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),r.jsx(bP,{...l,children:r.jsx(VIe,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:d,children:r.jsx(qIe,{scope:t,onClose:_.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:p,modal:o,children:s})})})};OH.displayName=Fg;var UIe="MenuAnchor",uA=_.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,i=S0(n);return r.jsx(jP,{...i,...s,ref:t})});uA.displayName=UIe;var dA="MenuPortal",[HIe,MH]=Ru(dA,{forceMount:void 0}),IH=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:i}=e,a=Lu(dA,t);return r.jsx(HIe,{scope:t,forceMount:n,children:r.jsx(Vr,{present:n||a.open,children:r.jsx(yg,{asChild:!0,container:i,children:s})})})};IH.displayName=dA;var ki="MenuContent",[WIe,fA]=Ru(ki),RH=_.forwardRef((e,t)=>{const n=MH(ki,e.__scopeMenu),{forceMount:s=n.forceMount,...i}=e,a=Lu(ki,e.__scopeMenu),o=zg(ki,e.__scopeMenu);return r.jsx(Kp.Provider,{scope:e.__scopeMenu,children:r.jsx(Vr,{present:s||a.open,children:r.jsx(Kp.Slot,{scope:e.__scopeMenu,children:o.modal?r.jsx(KIe,{...i,ref:t}):r.jsx(GIe,{...i,ref:t})})})})}),KIe=_.forwardRef((e,t)=>{const n=Lu(ki,e.__scopeMenu),s=_.useRef(null),i=Rt(t,s);return _.useEffect(()=>{const a=s.current;if(a)return EP(a)},[]),r.jsx(hA,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ve(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),GIe=_.forwardRef((e,t)=>{const n=Lu(ki,e.__scopeMenu);return r.jsx(hA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ZIe=uu("MenuContent.ScrollLock"),hA=_.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,onDismiss:v,disableOutsideScroll:j,...g}=e,x=Lu(ki,n),w=zg(ki,n),N=S0(n),y=kH(n),A=zIe(n),[P,E]=_.useState(null),C=_.useRef(null),S=Rt(t,C,x.onContentChange),k=_.useRef(0),I=_.useRef(""),R=_.useRef(0),D=_.useRef(null),z=_.useRef("right"),V=_.useRef(0),K=j?_j:_.Fragment,H=j?{as:ZIe,allowPinchZoom:!0}:void 0,W=$=>{var ze,$e;const G=I.current+$,ee=A().filter(me=>!me.disabled),oe=document.activeElement,fe=(ze=ee.find(me=>me.ref.current===oe))==null?void 0:ze.textValue,Ee=ee.map(me=>me.textValue),J=oRe(Ee,G,fe),Pe=($e=ee.find(me=>me.textValue===J))==null?void 0:$e.ref.current;(function me(Te){I.current=Te,window.clearTimeout(k.current),Te!==""&&(k.current=window.setTimeout(()=>me(""),1e3))})(G),Pe&&setTimeout(()=>Pe.focus())};_.useEffect(()=>()=>window.clearTimeout(k.current),[]),AP();const B=_.useCallback($=>{var ee,oe;return z.current===((ee=D.current)==null?void 0:ee.side)&&cRe($,(oe=D.current)==null?void 0:oe.area)},[]);return r.jsx(WIe,{scope:n,searchRef:I,onItemEnter:_.useCallback($=>{B($)&&$.preventDefault()},[B]),onItemLeave:_.useCallback($=>{var G;B($)||((G=C.current)==null||G.focus(),E(null))},[B]),onTriggerLeave:_.useCallback($=>{B($)&&$.preventDefault()},[B]),pointerGraceTimerRef:R,onPointerGraceIntentChange:_.useCallback($=>{D.current=$},[]),children:r.jsx(K,{...H,children:r.jsx(bj,{asChild:!0,trapped:i,onMountAutoFocus:Ve(a,$=>{var G;$.preventDefault(),(G=C.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:r.jsx(ah,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,onDismiss:v,children:r.jsx(FP,{asChild:!0,...y,dir:w.dir,orientation:"vertical",loop:s,currentTabStopId:P,onCurrentTabStopIdChange:E,onEntryFocus:Ve(c,$=>{w.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(_P,{role:"menu","aria-orientation":"vertical","data-state":YH(x.open),"data-radix-menu-content":"",dir:w.dir,...N,...g,ref:S,style:{outline:"none",...g.style},onKeyDown:Ve(g.onKeyDown,$=>{const ee=$.target.closest("[data-radix-menu-content]")===$.currentTarget,oe=$.ctrlKey||$.altKey||$.metaKey,fe=$.key.length===1;ee&&($.key==="Tab"&&$.preventDefault(),!oe&&fe&&W($.key));const Ee=C.current;if($.target!==Ee||!DIe.includes($.key))return;$.preventDefault();const Pe=A().filter(ze=>!ze.disabled).map(ze=>ze.ref.current);EH.includes($.key)&&Pe.reverse(),iRe(Pe)}),onBlur:Ve(e.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(k.current),I.current="")}),onPointerMove:Ve(e.onPointerMove,Gp($=>{const G=$.target,ee=V.current!==$.clientX;if($.currentTarget.contains(G)&&ee){const oe=$.clientX>V.current?"right":"left";z.current=oe,V.current=$.clientX}}))})})})})})})});RH.displayName=ki;var QIe="MenuGroup",mA=_.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(st.div,{role:"group",...s,ref:t})});mA.displayName=QIe;var YIe="MenuLabel",LH=_.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(st.div,{...s,ref:t})});LH.displayName=YIe;var Nb="MenuItem",fL="menu.itemSelect",C0=_.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...i}=e,a=_.useRef(null),o=zg(Nb,e.__scopeMenu),l=fA(Nb,e.__scopeMenu),c=Rt(t,a),d=_.useRef(!1),f=()=>{const h=a.current;if(!n&&h){const p=new CustomEvent(fL,{bubbles:!0,cancelable:!0});h.addEventListener(fL,v=>s==null?void 0:s(v),{once:!0}),ZC(h,p),p.defaultPrevented?d.current=!1:o.onClose()}};return r.jsx(DH,{...i,ref:c,disabled:n,onClick:Ve(e.onClick,f),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),d.current=!0},onPointerUp:Ve(e.onPointerUp,h=>{var p;d.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:Ve(e.onKeyDown,h=>{const p=l.searchRef.current!=="";n||p&&h.key===" "||RS.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});C0.displayName=Nb;var DH=_.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:i,...a}=e,o=fA(Nb,n),l=kH(n),c=_.useRef(null),d=Rt(t,c),[f,h]=_.useState(!1),[p,v]=_.useState("");return _.useEffect(()=>{const j=c.current;j&&v((j.textContent??"").trim())},[a.children]),r.jsx(Kp.ItemSlot,{scope:n,disabled:s,textValue:i??p,children:r.jsx(zP,{asChild:!0,...l,focusable:!s,children:r.jsx(st.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...a,ref:d,onPointerMove:Ve(e.onPointerMove,Gp(j=>{s?o.onItemLeave(j):(o.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ve(e.onPointerLeave,Gp(j=>o.onItemLeave(j))),onFocus:Ve(e.onFocus,()=>h(!0)),onBlur:Ve(e.onBlur,()=>h(!1))})})})}),XIe="MenuCheckboxItem",$H=_.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...i}=e;return r.jsx(qH,{scope:e.__scopeMenu,checked:n,children:r.jsx(C0,{role:"menuitemcheckbox","aria-checked":Sb(n)?"mixed":n,...i,ref:t,"data-state":gA(n),onSelect:Ve(i.onSelect,()=>s==null?void 0:s(Sb(n)?!0:!n),{checkForDefaultPrevented:!1})})})});$H.displayName=XIe;var FH="MenuRadioGroup",[JIe,eRe]=Ru(FH,{value:void 0,onValueChange:()=>{}}),zH=_.forwardRef((e,t)=>{const{value:n,onValueChange:s,...i}=e,a=Un(s);return r.jsx(JIe,{scope:e.__scopeMenu,value:n,onValueChange:a,children:r.jsx(mA,{...i,ref:t})})});zH.displayName=FH;var BH="MenuRadioItem",VH=_.forwardRef((e,t)=>{const{value:n,...s}=e,i=eRe(BH,e.__scopeMenu),a=n===i.value;return r.jsx(qH,{scope:e.__scopeMenu,checked:a,children:r.jsx(C0,{role:"menuitemradio","aria-checked":a,...s,ref:t,"data-state":gA(a),onSelect:Ve(s.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});VH.displayName=BH;var pA="MenuItemIndicator",[qH,tRe]=Ru(pA,{checked:!1}),UH=_.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...i}=e,a=tRe(pA,n);return r.jsx(Vr,{present:s||Sb(a.checked)||a.checked===!0,children:r.jsx(st.span,{...i,ref:t,"data-state":gA(a.checked)})})});UH.displayName=pA;var nRe="MenuSeparator",HH=_.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(st.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});HH.displayName=nRe;var rRe="MenuArrow",WH=_.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,i=S0(n);return r.jsx(wP,{...i,...s,ref:t})});WH.displayName=rRe;var sRe="MenuSub",[U5e,KH]=Ru(sRe),jm="MenuSubTrigger",GH=_.forwardRef((e,t)=>{const n=Lu(jm,e.__scopeMenu),s=zg(jm,e.__scopeMenu),i=KH(jm,e.__scopeMenu),a=fA(jm,e.__scopeMenu),o=_.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:e.__scopeMenu},f=_.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return _.useEffect(()=>f,[f]),_.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),r.jsx(uA,{asChild:!0,...d,children:r.jsx(DH,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":YH(n.open),...e,ref:aj(t,i.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ve(e.onPointerMove,Gp(h=>{a.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ve(e.onPointerLeave,Gp(h=>{var v,j;f();const p=(v=n.content)==null?void 0:v.getBoundingClientRect();if(p){const g=(j=n.content)==null?void 0:j.dataset.side,x=g==="right",w=x?-5:5,N=p[x?"left":"right"],y=p[x?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x:N,y:p.top},{x:y,y:p.top},{x:y,y:p.bottom},{x:N,y:p.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Ve(e.onKeyDown,h=>{var v;const p=a.searchRef.current!=="";e.disabled||p&&h.key===" "||$Ie[s.dir].includes(h.key)&&(n.onOpenChange(!0),(v=n.content)==null||v.focus(),h.preventDefault())})})})});GH.displayName=jm;var ZH="MenuSubContent",QH=_.forwardRef((e,t)=>{const n=MH(ki,e.__scopeMenu),{forceMount:s=n.forceMount,...i}=e,a=Lu(ki,e.__scopeMenu),o=zg(ki,e.__scopeMenu),l=KH(ZH,e.__scopeMenu),c=_.useRef(null),d=Rt(t,c);return r.jsx(Kp.Provider,{scope:e.__scopeMenu,children:r.jsx(Vr,{present:s||a.open,children:r.jsx(Kp.Slot,{scope:e.__scopeMenu,children:r.jsx(hA,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ve(e.onFocusOutside,f=>{f.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Ve(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ve(e.onKeyDown,f=>{var v;const h=f.currentTarget.contains(f.target),p=FIe[o.dir].includes(f.key);h&&p&&(a.onOpenChange(!1),(v=l.trigger)==null||v.focus(),f.preventDefault())})})})})})});QH.displayName=ZH;function YH(e){return e?"open":"closed"}function Sb(e){return e==="indeterminate"}function gA(e){return Sb(e)?"indeterminate":e?"checked":"unchecked"}function iRe(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function aRe(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function oRe(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=aRe(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function lRe(e,t){const{x:n,y:s}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,f=t[o].y;c>s!=f>s&&n<(d-l)*(s-c)/(f-c)+l&&(i=!i)}return i}function cRe(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return lRe(n,t)}function Gp(e){return t=>t.pointerType==="mouse"?e(t):void 0}var uRe=OH,dRe=uA,fRe=IH,hRe=RH,mRe=mA,pRe=LH,gRe=C0,xRe=$H,vRe=zH,yRe=VH,bRe=UH,jRe=HH,_Re=WH,wRe=GH,NRe=QH,xA="DropdownMenu",[SRe]=Nr(xA,[TH]),As=TH(),[CRe,XH]=SRe(xA),JH=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=As(t),d=_.useRef(null),[f=!1,h]=Vs({prop:i,defaultProp:a,onChange:o});return r.jsx(CRe,{scope:t,triggerId:ri(),triggerRef:d,contentId:ri(),open:f,onOpenChange:h,onOpenToggle:_.useCallback(()=>h(p=>!p),[h]),modal:l,children:r.jsx(uRe,{...c,open:f,onOpenChange:h,dir:s,modal:l,children:n})})};JH.displayName=xA;var eW="DropdownMenuTrigger",tW=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...i}=e,a=XH(eW,n),o=As(n);return r.jsx(dRe,{asChild:!0,...o,children:r.jsx(st.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...i,ref:aj(t,a.triggerRef),onPointerDown:Ve(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Ve(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});tW.displayName=eW;var PRe="DropdownMenuPortal",nW=e=>{const{__scopeDropdownMenu:t,...n}=e,s=As(t);return r.jsx(fRe,{...s,...n})};nW.displayName=PRe;var rW="DropdownMenuContent",sW=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=XH(rW,n),a=As(n),o=_.useRef(!1);return r.jsx(hRe,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...s,ref:t,onCloseAutoFocus:Ve(e.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ve(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,f=c.button===2||d;(!i.modal||f)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});sW.displayName=rW;var ARe="DropdownMenuGroup",ERe=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=As(n);return r.jsx(mRe,{...i,...s,ref:t})});ERe.displayName=ARe;var TRe="DropdownMenuLabel",iW=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=As(n);return r.jsx(pRe,{...i,...s,ref:t})});iW.displayName=TRe;var kRe="DropdownMenuItem",aW=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=As(n);return r.jsx(gRe,{...i,...s,ref:t})});aW.displayName=kRe;var ORe="DropdownMenuCheckboxItem",oW=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=As(n);return r.jsx(xRe,{...i,...s,ref:t})});oW.displayName=ORe;var MRe="DropdownMenuRadioGroup",IRe=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=As(n);return r.jsx(vRe,{...i,...s,ref:t})});IRe.displayName=MRe;var RRe="DropdownMenuRadioItem",lW=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=As(n);return r.jsx(yRe,{...i,...s,ref:t})});lW.displayName=RRe;var LRe="DropdownMenuItemIndicator",cW=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=As(n);return r.jsx(bRe,{...i,...s,ref:t})});cW.displayName=LRe;var DRe="DropdownMenuSeparator",uW=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=As(n);return r.jsx(jRe,{...i,...s,ref:t})});uW.displayName=DRe;var $Re="DropdownMenuArrow",FRe=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=As(n);return r.jsx(_Re,{...i,...s,ref:t})});FRe.displayName=$Re;var zRe="DropdownMenuSubTrigger",dW=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=As(n);return r.jsx(wRe,{...i,...s,ref:t})});dW.displayName=zRe;var BRe="DropdownMenuSubContent",fW=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=As(n);return r.jsx(NRe,{...i,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fW.displayName=BRe;var VRe=JH,qRe=tW,URe=nW,hW=sW,mW=iW,pW=aW,gW=oW,xW=lW,vW=cW,yW=uW,bW=dW,jW=fW;const HRe=VRe,WRe=qRe,KRe=_.forwardRef(({className:e,inset:t,children:n,...s},i)=>r.jsxs(bW,{ref:i,className:Oe("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...s,children:[n,r.jsx(Xee,{className:"ml-auto"})]}));KRe.displayName=bW.displayName;const GRe=_.forwardRef(({className:e,...t},n)=>r.jsx(jW,{ref:n,className:Oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));GRe.displayName=jW.displayName;const _W=_.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(URe,{children:r.jsx(hW,{ref:s,sideOffset:t,className:Oe("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));_W.displayName=hW.displayName;const LS=_.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(pW,{ref:s,className:Oe("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));LS.displayName=pW.displayName;const ZRe=_.forwardRef(({className:e,children:t,checked:n,...s},i)=>r.jsxs(gW,{ref:i,className:Oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(vW,{children:r.jsx(Ql,{className:"h-4 w-4"})})}),t]}));ZRe.displayName=gW.displayName;const QRe=_.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(xW,{ref:s,className:Oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(vW,{children:r.jsx(tP,{className:"h-2 w-2 fill-current"})})}),t]}));QRe.displayName=xW.displayName;const YRe=_.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(mW,{ref:s,className:Oe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));YRe.displayName=mW.displayName;const XRe=_.forwardRef(({className:e,...t},n)=>r.jsx(yW,{ref:n,className:Oe("-mx-1 my-1 h-px bg-muted",e),...t}));XRe.displayName=yW.displayName;function JRe({organization:e,onEdit:t,onDelete:n}){const i=(a=>{const o={0:{label:"Holding",color:"bg-purple-100 text-purple-800"},1:{label:"Filiale",color:"bg-blue-100 text-blue-800"},2:{label:"Sous-filiale",color:"bg-green-100 text-green-800"}};return o[a]||o[1]})(e.level);return r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow","data-testid":`organization-card-${e.id}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[r.jsx("div",{className:"flex-shrink-0",children:e.flagEmoji?r.jsx("span",{className:"text-4xl",role:"img","aria-label":e.countryName||"flag",children:e.flagEmoji}):r.jsx("div",{className:"w-12 h-12 rounded-lg bg-indigo-100 flex items-center justify-center",children:r.jsx(Ir,{className:"w-6 h-6 text-indigo-600"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate","data-testid":"text-organization-name",children:e.entityName}),r.jsx(ve,{className:`${i.color} border-0`,"data-testid":"badge-level",children:i.label}),r.jsx(ve,{variant:e.isActive?"default":"secondary",className:e.isActive?"bg-green-100 text-green-800 border-0":"","data-testid":"badge-status",children:e.isActive?"Actif":"Inactif"})]}),e.entityNameFull&&r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.entityNameFull}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("strong",{children:"Code:"})," ",e.entityCode]}),e.countryName&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("strong",{children:"Pays:"})," ",e.countryName]}),e.parentEntityCode&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("strong",{children:"Parent:"})," ",e.parentEntityCode]})]})]})]}),r.jsxs(HRe,{children:[r.jsx(WRe,{asChild:!0,children:r.jsx(re,{variant:"ghost",size:"icon","data-testid":"button-menu",children:r.jsx(rte,{className:"w-4 h-4"})})}),r.jsxs(_W,{align:"end",children:[r.jsxs(LS,{onClick:()=>t(e),"data-testid":"menu-edit",children:[r.jsx(Ii,{className:"w-4 h-4 mr-2"}),"Modifier"]}),r.jsxs(LS,{onClick:()=>n(e),className:"text-red-600","data-testid":"menu-delete",children:[r.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})})}var Bg=e=>e.type==="checkbox",Uc=e=>e instanceof Date,vs=e=>e==null;const wW=e=>typeof e=="object";var fr=e=>!vs(e)&&!Array.isArray(e)&&wW(e)&&!Uc(e),NW=e=>fr(e)&&e.target?Bg(e.target)?e.target.checked:e.target.value:e,eLe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,SW=(e,t)=>e.has(eLe(t)),tLe=e=>{const t=e.constructor&&e.constructor.prototype;return fr(t)&&t.hasOwnProperty("isPrototypeOf")},vA=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Wr(e){let t;const n=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(vA&&(e instanceof Blob||s))&&(n||fr(e)))if(t=n?[]:{},!n&&!tLe(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=Wr(e[i]));else return e;return t}var P0=e=>Array.isArray(e)?e.filter(Boolean):[],cr=e=>e===void 0,Ze=(e,t,n)=>{if(!t||!fr(e))return n;const s=P0(t.split(/[,[\].]+?/)).reduce((i,a)=>vs(i)?i:i[a],e);return cr(s)||s===e?cr(e[t])?n:e[t]:s},Qs=e=>typeof e=="boolean",yA=e=>/^\w*$/.test(e),CW=e=>P0(e.replace(/["|']|\]/g,"").split(/\.|\[/)),cn=(e,t,n)=>{let s=-1;const i=yA(t)?[t]:CW(t),a=i.length,o=a-1;for(;++s<a;){const l=i[s];let c=n;if(s!==o){const d=e[l];c=fr(d)||Array.isArray(d)?d:isNaN(+i[s+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const Cb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ea={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},po={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},PW=q.createContext(null),A0=()=>q.useContext(PW),nLe=e=>{const{children:t,...n}=e;return q.createElement(PW.Provider,{value:n},t)};var AW=(e,t,n,s=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const o=a;return t._proxyFormState[o]!==ea.all&&(t._proxyFormState[o]=!s||ea.all),n&&(n[o]=!0),e[o]}});return i};function rLe(e){const t=A0(),{control:n=t.control,disabled:s,name:i,exact:a}=e||{},[o,l]=q.useState(n._formState),c=q.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=q.useRef(i);return d.current=i,q.useEffect(()=>n._subscribe({name:d.current,formState:c.current,exact:a,callback:f=>{!s&&l({...n._formState,...f})}}),[n,s,a]),q.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),q.useMemo(()=>AW(o,n,c.current,!1),[o,n])}var Fa=e=>typeof e=="string",EW=(e,t,n,s,i)=>Fa(e)?(s&&t.watch.add(e),Ze(n,e,i)):Array.isArray(e)?e.map(a=>(s&&t.watch.add(a),Ze(n,a))):(s&&(t.watchAll=!0),n);function sLe(e){const t=A0(),{control:n=t.control,name:s,defaultValue:i,disabled:a,exact:o}=e||{},l=q.useRef(s),c=q.useRef(i);l.current=s,q.useEffect(()=>n._subscribe({name:l.current,formState:{values:!0},exact:o,callback:h=>!a&&f(EW(l.current,n._names,h.values||n._formValues,!1,c.current))}),[n,a,o]);const[d,f]=q.useState(n._getWatch(s,i));return q.useEffect(()=>n._removeUnmounted()),d}function iLe(e){const t=A0(),{name:n,disabled:s,control:i=t.control,shouldUnregister:a}=e,o=SW(i._names.array,n),l=sLe({control:i,name:n,defaultValue:Ze(i._formValues,n,Ze(i._defaultValues,n,e.defaultValue)),exact:!0}),c=rLe({control:i,name:n,exact:!0}),d=q.useRef(e),f=q.useRef(i.register(n,{...e.rules,value:l,...Qs(e.disabled)?{disabled:e.disabled}:{}})),h=q.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ze(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ze(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ze(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ze(c.validatingFields,n)},error:{enumerable:!0,get:()=>Ze(c.errors,n)}}),[c,n]),p=q.useCallback(x=>f.current.onChange({target:{value:NW(x),name:n},type:Cb.CHANGE}),[n]),v=q.useCallback(()=>f.current.onBlur({target:{value:Ze(i._formValues,n),name:n},type:Cb.BLUR}),[n,i._formValues]),j=q.useCallback(x=>{const w=Ze(i._fields,n);w&&x&&(w._f.ref={focus:()=>x.focus(),select:()=>x.select(),setCustomValidity:N=>x.setCustomValidity(N),reportValidity:()=>x.reportValidity()})},[i._fields,n]),g=q.useMemo(()=>({name:n,value:l,...Qs(s)||c.disabled?{disabled:c.disabled||s}:{},onChange:p,onBlur:v,ref:j}),[n,s,c.disabled,p,v,j,l]);return q.useEffect(()=>{const x=i._options.shouldUnregister||a;i.register(n,{...d.current.rules,...Qs(d.current.disabled)?{disabled:d.current.disabled}:{}});const w=(N,y)=>{const A=Ze(i._fields,N);A&&A._f&&(A._f.mount=y)};if(w(n,!0),x){const N=Wr(Ze(i._options.defaultValues,n));cn(i._defaultValues,n,N),cr(Ze(i._formValues,n))&&cn(i._formValues,n,N)}return!o&&i.register(n),()=>{(o?x&&!i._state.action:x)?i.unregister(n):w(n,!1)}},[n,i,o,a]),q.useEffect(()=>{i._setDisabledField({disabled:s,name:n})},[s,n,i]),q.useMemo(()=>({field:g,formState:c,fieldState:h}),[g,c,h])}const aLe=e=>e.render(iLe(e));var TW=(e,t,n,s,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:i||!0}}:{},Fm=e=>Array.isArray(e)?e:[e],hL=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}},DS=e=>vs(e)||!wW(e);function _l(e,t){if(DS(e)||DS(t))return e===t;if(Uc(e)&&Uc(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(const i of n){const a=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const o=t[i];if(Uc(a)&&Uc(o)||fr(a)&&fr(o)||Array.isArray(a)&&Array.isArray(o)?!_l(a,o):a!==o)return!1}}return!0}var gs=e=>fr(e)&&!Object.keys(e).length,bA=e=>e.type==="file",ta=e=>typeof e=="function",Pb=e=>{if(!vA)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},kW=e=>e.type==="select-multiple",jA=e=>e.type==="radio",oLe=e=>jA(e)||Bg(e),Sw=e=>Pb(e)&&e.isConnected;function lLe(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=cr(e)?s++:e[t[s++]];return e}function cLe(e){for(const t in e)if(e.hasOwnProperty(t)&&!cr(e[t]))return!1;return!0}function Cr(e,t){const n=Array.isArray(t)?t:yA(t)?[t]:CW(t),s=n.length===1?e:lLe(e,n),i=n.length-1,a=n[i];return s&&delete s[a],i!==0&&(fr(s)&&gs(s)||Array.isArray(s)&&cLe(s))&&Cr(e,n.slice(0,-1)),e}var OW=e=>{for(const t in e)if(ta(e[t]))return!0;return!1};function Ab(e,t={}){const n=Array.isArray(e);if(fr(e)||n)for(const s in e)Array.isArray(e[s])||fr(e[s])&&!OW(e[s])?(t[s]=Array.isArray(e[s])?[]:{},Ab(e[s],t[s])):vs(e[s])||(t[s]=!0);return t}function MW(e,t,n){const s=Array.isArray(e);if(fr(e)||s)for(const i in e)Array.isArray(e[i])||fr(e[i])&&!OW(e[i])?cr(t)||DS(n[i])?n[i]=Array.isArray(e[i])?Ab(e[i],[]):{...Ab(e[i])}:MW(e[i],vs(t)?{}:t[i],n[i]):n[i]=!_l(e[i],t[i]);return n}var dm=(e,t)=>MW(e,t,Ab(t));const mL={value:!1,isValid:!1},pL={value:!0,isValid:!0};var IW=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!cr(e[0].attributes.value)?cr(e[0].value)||e[0].value===""?pL:{value:e[0].value,isValid:!0}:pL:mL}return mL},RW=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>cr(e)?e:t?e===""?NaN:e&&+e:n&&Fa(e)?new Date(e):s?s(e):e;const gL={isValid:!1,value:null};var LW=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,gL):gL;function xL(e){const t=e.ref;return bA(t)?t.files:jA(t)?LW(e.refs).value:kW(t)?[...t.selectedOptions].map(({value:n})=>n):Bg(t)?IW(e.refs).value:RW(cr(t.value)?e.ref.value:t.value,e)}var uLe=(e,t,n,s)=>{const i={};for(const a of e){const o=Ze(t,a);o&&cn(i,a,o._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:s}},Eb=e=>e instanceof RegExp,fm=e=>cr(e)?e:Eb(e)?e.source:fr(e)?Eb(e.value)?e.value.source:e.value:e,vL=e=>({isOnSubmit:!e||e===ea.onSubmit,isOnBlur:e===ea.onBlur,isOnChange:e===ea.onChange,isOnAll:e===ea.all,isOnTouch:e===ea.onTouched});const yL="AsyncFunction";var dLe=e=>!!e&&!!e.validate&&!!(ta(e.validate)&&e.validate.constructor.name===yL||fr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===yL)),fLe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),bL=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const zm=(e,t,n,s)=>{for(const i of n||Object.keys(e)){const a=Ze(e,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!s)return!0;if(o.ref&&t(o.ref,o.name)&&!s)return!0;if(zm(l,t))break}else if(fr(l)&&zm(l,t))break}}};function jL(e,t,n){const s=Ze(e,n);if(s||yA(n))return{error:s,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=Ze(t,a),l=Ze(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};i.pop()}return{name:n}}var hLe=(e,t,n,s)=>{n(e);const{name:i,...a}=e;return gs(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!s||ea.all))},mLe=(e,t,n)=>!e||!t||e===t||Fm(e).some(s=>s&&(n?s===t:s.startsWith(t)||t.startsWith(s))),pLe=(e,t,n,s,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?s.isOnBlur:i.isOnBlur)?!e:(n?s.isOnChange:i.isOnChange)?e:!0,gLe=(e,t)=>!P0(Ze(e,t)).length&&Cr(e,t),xLe=(e,t,n)=>{const s=Fm(Ze(e,n));return cn(s,"root",t[n]),cn(e,n,s),e},Ev=e=>Fa(e);function _L(e,t,n="validate"){if(Ev(e)||Array.isArray(e)&&e.every(Ev)||Qs(e)&&!e)return{type:n,message:Ev(e)?e:"",ref:t}}var od=e=>fr(e)&&!Eb(e)?e:{value:e,message:""},wL=async(e,t,n,s,i,a)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:f,min:h,max:p,pattern:v,validate:j,name:g,valueAsNumber:x,mount:w}=e._f,N=Ze(n,g);if(!w||t.has(g))return{};const y=l?l[0]:o,A=D=>{i&&y.reportValidity&&(y.setCustomValidity(Qs(D)?"":D||""),y.reportValidity())},P={},E=jA(o),C=Bg(o),S=E||C,k=(x||bA(o))&&cr(o.value)&&cr(N)||Pb(o)&&o.value===""||N===""||Array.isArray(N)&&!N.length,I=TW.bind(null,g,s,P),R=(D,z,V,K=po.maxLength,H=po.minLength)=>{const W=D?z:V;P[g]={type:D?K:H,message:W,ref:o,...I(D?K:H,W)}};if(a?!Array.isArray(N)||!N.length:c&&(!S&&(k||vs(N))||Qs(N)&&!N||C&&!IW(l).isValid||E&&!LW(l).isValid)){const{value:D,message:z}=Ev(c)?{value:!!c,message:c}:od(c);if(D&&(P[g]={type:po.required,message:z,ref:y,...I(po.required,z)},!s))return A(z),P}if(!k&&(!vs(h)||!vs(p))){let D,z;const V=od(p),K=od(h);if(!vs(N)&&!isNaN(N)){const H=o.valueAsNumber||N&&+N;vs(V.value)||(D=H>V.value),vs(K.value)||(z=H<K.value)}else{const H=o.valueAsDate||new Date(N),W=G=>new Date(new Date().toDateString()+" "+G),B=o.type=="time",$=o.type=="week";Fa(V.value)&&N&&(D=B?W(N)>W(V.value):$?N>V.value:H>new Date(V.value)),Fa(K.value)&&N&&(z=B?W(N)<W(K.value):$?N<K.value:H<new Date(K.value))}if((D||z)&&(R(!!D,V.message,K.message,po.max,po.min),!s))return A(P[g].message),P}if((d||f)&&!k&&(Fa(N)||a&&Array.isArray(N))){const D=od(d),z=od(f),V=!vs(D.value)&&N.length>+D.value,K=!vs(z.value)&&N.length<+z.value;if((V||K)&&(R(V,D.message,z.message),!s))return A(P[g].message),P}if(v&&!k&&Fa(N)){const{value:D,message:z}=od(v);if(Eb(D)&&!N.match(D)&&(P[g]={type:po.pattern,message:z,ref:o,...I(po.pattern,z)},!s))return A(z),P}if(j){if(ta(j)){const D=await j(N,n),z=_L(D,y);if(z&&(P[g]={...z,...I(po.validate,z.message)},!s))return A(z.message),P}else if(fr(j)){let D={};for(const z in j){if(!gs(D)&&!s)break;const V=_L(await j[z](N,n),y,z);V&&(D={...V,...I(z,V.message)},A(V.message),s&&(P[g]=D))}if(!gs(D)&&(P[g]={ref:y,...D},!s))return P}}return A(!0),P};const vLe={mode:ea.onSubmit,reValidateMode:ea.onChange,shouldFocusError:!0};function yLe(e={}){let t={...vLe,...e},n={submitCount:0,isDirty:!1,isLoading:ta(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const s={};let i=fr(t.defaultValues)||fr(t.values)?Wr(t.values||t.defaultValues)||{}:{},a=t.shouldUnregister?{}:Wr(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...f};const p={array:hL(),state:hL()},v=vL(t.mode),j=vL(t.reValidateMode),g=t.criteriaMode===ea.all,x=Q=>de=>{clearTimeout(d),d=setTimeout(Q,de)},w=async Q=>{if(!t.disabled&&(f.isValid||h.isValid||Q)){const de=t.resolver?gs((await k()).errors):await R(s,!0);de!==n.isValid&&p.state.next({isValid:de})}},N=(Q,de)=>{!t.disabled&&(f.isValidating||f.validatingFields||h.isValidating||h.validatingFields)&&((Q||Array.from(l.mount)).forEach(pe=>{pe&&(de?cn(n.validatingFields,pe,de):Cr(n.validatingFields,pe))}),p.state.next({validatingFields:n.validatingFields,isValidating:!gs(n.validatingFields)}))},y=(Q,de=[],pe,He,De=!0,Ie=!0)=>{if(He&&pe&&!t.disabled){if(o.action=!0,Ie&&Array.isArray(Ze(s,Q))){const Qe=pe(Ze(s,Q),He.argA,He.argB);De&&cn(s,Q,Qe)}if(Ie&&Array.isArray(Ze(n.errors,Q))){const Qe=pe(Ze(n.errors,Q),He.argA,He.argB);De&&cn(n.errors,Q,Qe),gLe(n.errors,Q)}if((f.touchedFields||h.touchedFields)&&Ie&&Array.isArray(Ze(n.touchedFields,Q))){const Qe=pe(Ze(n.touchedFields,Q),He.argA,He.argB);De&&cn(n.touchedFields,Q,Qe)}(f.dirtyFields||h.dirtyFields)&&(n.dirtyFields=dm(i,a)),p.state.next({name:Q,isDirty:z(Q,de),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else cn(a,Q,de)},A=(Q,de)=>{cn(n.errors,Q,de),p.state.next({errors:n.errors})},P=Q=>{n.errors=Q,p.state.next({errors:n.errors,isValid:!1})},E=(Q,de,pe,He)=>{const De=Ze(s,Q);if(De){const Ie=Ze(a,Q,cr(pe)?Ze(i,Q):pe);cr(Ie)||He&&He.defaultChecked||de?cn(a,Q,de?Ie:xL(De._f)):H(Q,Ie),o.mount&&w()}},C=(Q,de,pe,He,De)=>{let Ie=!1,Qe=!1;const Kt={name:Q};if(!t.disabled){if(!pe||He){(f.isDirty||h.isDirty)&&(Qe=n.isDirty,n.isDirty=Kt.isDirty=z(),Ie=Qe!==Kt.isDirty);const Sn=_l(Ze(i,Q),de);Qe=!!Ze(n.dirtyFields,Q),Sn?Cr(n.dirtyFields,Q):cn(n.dirtyFields,Q,!0),Kt.dirtyFields=n.dirtyFields,Ie=Ie||(f.dirtyFields||h.dirtyFields)&&Qe!==!Sn}if(pe){const Sn=Ze(n.touchedFields,Q);Sn||(cn(n.touchedFields,Q,pe),Kt.touchedFields=n.touchedFields,Ie=Ie||(f.touchedFields||h.touchedFields)&&Sn!==pe)}Ie&&De&&p.state.next(Kt)}return Ie?Kt:{}},S=(Q,de,pe,He)=>{const De=Ze(n.errors,Q),Ie=(f.isValid||h.isValid)&&Qs(de)&&n.isValid!==de;if(t.delayError&&pe?(c=x(()=>A(Q,pe)),c(t.delayError)):(clearTimeout(d),c=null,pe?cn(n.errors,Q,pe):Cr(n.errors,Q)),(pe?!_l(De,pe):De)||!gs(He)||Ie){const Qe={...He,...Ie&&Qs(de)?{isValid:de}:{},errors:n.errors,name:Q};n={...n,...Qe},p.state.next(Qe)}},k=async Q=>{N(Q,!0);const de=await t.resolver(a,t.context,uLe(Q||l.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return N(Q),de},I=async Q=>{const{errors:de}=await k(Q);if(Q)for(const pe of Q){const He=Ze(de,pe);He?cn(n.errors,pe,He):Cr(n.errors,pe)}else n.errors=de;return de},R=async(Q,de,pe={valid:!0})=>{for(const He in Q){const De=Q[He];if(De){const{_f:Ie,...Qe}=De;if(Ie){const Kt=l.array.has(Ie.name),Sn=De._f&&dLe(De._f);Sn&&f.validatingFields&&N([He],!0);const Cn=await wL(De,l.disabled,a,g,t.shouldUseNativeValidation&&!de,Kt);if(Sn&&f.validatingFields&&N([He]),Cn[Ie.name]&&(pe.valid=!1,de))break;!de&&(Ze(Cn,Ie.name)?Kt?xLe(n.errors,Cn,Ie.name):cn(n.errors,Ie.name,Cn[Ie.name]):Cr(n.errors,Ie.name))}!gs(Qe)&&await R(Qe,de,pe)}}return pe.valid},D=()=>{for(const Q of l.unMount){const de=Ze(s,Q);de&&(de._f.refs?de._f.refs.every(pe=>!Sw(pe)):!Sw(de._f.ref))&&me(Q)}l.unMount=new Set},z=(Q,de)=>!t.disabled&&(Q&&de&&cn(a,Q,de),!_l(oe(),i)),V=(Q,de,pe)=>EW(Q,l,{...o.mount?a:cr(de)?i:Fa(Q)?{[Q]:de}:de},pe,de),K=Q=>P0(Ze(o.mount?a:i,Q,t.shouldUnregister?Ze(i,Q,[]):[])),H=(Q,de,pe={})=>{const He=Ze(s,Q);let De=de;if(He){const Ie=He._f;Ie&&(!Ie.disabled&&cn(a,Q,RW(de,Ie)),De=Pb(Ie.ref)&&vs(de)?"":de,kW(Ie.ref)?[...Ie.ref.options].forEach(Qe=>Qe.selected=De.includes(Qe.value)):Ie.refs?Bg(Ie.ref)?Ie.refs.length>1?Ie.refs.forEach(Qe=>(!Qe.defaultChecked||!Qe.disabled)&&(Qe.checked=Array.isArray(De)?!!De.find(Kt=>Kt===Qe.value):De===Qe.value)):Ie.refs[0]&&(Ie.refs[0].checked=!!De):Ie.refs.forEach(Qe=>Qe.checked=Qe.value===De):bA(Ie.ref)?Ie.ref.value="":(Ie.ref.value=De,Ie.ref.type||p.state.next({name:Q,values:Wr(a)})))}(pe.shouldDirty||pe.shouldTouch)&&C(Q,De,pe.shouldTouch,pe.shouldDirty,!0),pe.shouldValidate&&ee(Q)},W=(Q,de,pe)=>{for(const He in de){const De=de[He],Ie=`${Q}.${He}`,Qe=Ze(s,Ie);(l.array.has(Q)||fr(De)||Qe&&!Qe._f)&&!Uc(De)?W(Ie,De,pe):H(Ie,De,pe)}},B=(Q,de,pe={})=>{const He=Ze(s,Q),De=l.array.has(Q),Ie=Wr(de);cn(a,Q,Ie),De?(p.array.next({name:Q,values:Wr(a)}),(f.isDirty||f.dirtyFields||h.isDirty||h.dirtyFields)&&pe.shouldDirty&&p.state.next({name:Q,dirtyFields:dm(i,a),isDirty:z(Q,Ie)})):He&&!He._f&&!vs(Ie)?W(Q,Ie,pe):H(Q,Ie,pe),bL(Q,l)&&p.state.next({...n}),p.state.next({name:o.mount?Q:void 0,values:Wr(a)})},$=async Q=>{o.mount=!0;const de=Q.target;let pe=de.name,He=!0;const De=Ze(s,pe),Ie=Qe=>{He=Number.isNaN(Qe)||Uc(Qe)&&isNaN(Qe.getTime())||_l(Qe,Ze(a,pe,Qe))};if(De){let Qe,Kt;const Sn=de.type?xL(De._f):NW(Q),Cn=Q.type===Cb.BLUR||Q.type===Cb.FOCUS_OUT,Ts=!fLe(De._f)&&!t.resolver&&!Ze(n.errors,pe)&&!De._f.deps||pLe(Cn,Ze(n.touchedFields,pe),n.isSubmitted,j,v),hi=bL(pe,l,Cn);cn(a,pe,Sn),Cn?(De._f.onBlur&&De._f.onBlur(Q),c&&c(0)):De._f.onChange&&De._f.onChange(Q);const ja=C(pe,Sn,Cn),Hg=!gs(ja)||hi;if(!Cn&&p.state.next({name:pe,type:Q.type,values:Wr(a)}),Ts)return(f.isValid||h.isValid)&&(t.mode==="onBlur"?Cn&&w():Cn||w()),Hg&&p.state.next({name:pe,...hi?{}:ja});if(!Cn&&hi&&p.state.next({...n}),t.resolver){const{errors:Wg}=await k([pe]);if(Ie(Sn),He){const yc=jL(n.errors,s,pe),Kg=jL(Wg,s,yc.name||pe);Qe=Kg.error,pe=Kg.name,Kt=gs(Wg)}}else N([pe],!0),Qe=(await wL(De,l.disabled,a,g,t.shouldUseNativeValidation))[pe],N([pe]),Ie(Sn),He&&(Qe?Kt=!1:(f.isValid||h.isValid)&&(Kt=await R(s,!0)));He&&(De._f.deps&&ee(De._f.deps),S(pe,Kt,Qe,ja))}},G=(Q,de)=>{if(Ze(n.errors,de)&&Q.focus)return Q.focus(),1},ee=async(Q,de={})=>{let pe,He;const De=Fm(Q);if(t.resolver){const Ie=await I(cr(Q)?Q:De);pe=gs(Ie),He=Q?!De.some(Qe=>Ze(Ie,Qe)):pe}else Q?(He=(await Promise.all(De.map(async Ie=>{const Qe=Ze(s,Ie);return await R(Qe&&Qe._f?{[Ie]:Qe}:Qe)}))).every(Boolean),!(!He&&!n.isValid)&&w()):He=pe=await R(s);return p.state.next({...!Fa(Q)||(f.isValid||h.isValid)&&pe!==n.isValid?{}:{name:Q},...t.resolver||!Q?{isValid:pe}:{},errors:n.errors}),de.shouldFocus&&!He&&zm(s,G,Q?De:l.mount),He},oe=Q=>{const de={...o.mount?a:i};return cr(Q)?de:Fa(Q)?Ze(de,Q):Q.map(pe=>Ze(de,pe))},fe=(Q,de)=>({invalid:!!Ze((de||n).errors,Q),isDirty:!!Ze((de||n).dirtyFields,Q),error:Ze((de||n).errors,Q),isValidating:!!Ze(n.validatingFields,Q),isTouched:!!Ze((de||n).touchedFields,Q)}),Ee=Q=>{Q&&Fm(Q).forEach(de=>Cr(n.errors,de)),p.state.next({errors:Q?n.errors:{}})},J=(Q,de,pe)=>{const He=(Ze(s,Q,{_f:{}})._f||{}).ref,De=Ze(n.errors,Q)||{},{ref:Ie,message:Qe,type:Kt,...Sn}=De;cn(n.errors,Q,{...Sn,...de,ref:He}),p.state.next({name:Q,errors:n.errors,isValid:!1}),pe&&pe.shouldFocus&&He&&He.focus&&He.focus()},Pe=(Q,de)=>ta(Q)?p.state.subscribe({next:pe=>Q(V(void 0,de),pe)}):V(Q,de,!0),ze=Q=>p.state.subscribe({next:de=>{mLe(Q.name,de.name,Q.exact)&&hLe(de,Q.formState||f,It,Q.reRenderRoot)&&Q.callback({values:{...a},...n,...de})}}).unsubscribe,$e=Q=>(o.mount=!0,h={...h,...Q.formState},ze({...Q,formState:h})),me=(Q,de={})=>{for(const pe of Q?Fm(Q):l.mount)l.mount.delete(pe),l.array.delete(pe),de.keepValue||(Cr(s,pe),Cr(a,pe)),!de.keepError&&Cr(n.errors,pe),!de.keepDirty&&Cr(n.dirtyFields,pe),!de.keepTouched&&Cr(n.touchedFields,pe),!de.keepIsValidating&&Cr(n.validatingFields,pe),!t.shouldUnregister&&!de.keepDefaultValue&&Cr(i,pe);p.state.next({values:Wr(a)}),p.state.next({...n,...de.keepDirty?{isDirty:z()}:{}}),!de.keepIsValid&&w()},Te=({disabled:Q,name:de})=>{(Qs(Q)&&o.mount||Q||l.disabled.has(de))&&(Q?l.disabled.add(de):l.disabled.delete(de))},je=(Q,de={})=>{let pe=Ze(s,Q);const He=Qs(de.disabled)||Qs(t.disabled);return cn(s,Q,{...pe||{},_f:{...pe&&pe._f?pe._f:{ref:{name:Q}},name:Q,mount:!0,...de}}),l.mount.add(Q),pe?Te({disabled:Qs(de.disabled)?de.disabled:t.disabled,name:Q}):E(Q,!0,de.value),{...He?{disabled:de.disabled||t.disabled}:{},...t.progressive?{required:!!de.required,min:fm(de.min),max:fm(de.max),minLength:fm(de.minLength),maxLength:fm(de.maxLength),pattern:fm(de.pattern)}:{},name:Q,onChange:$,onBlur:$,ref:De=>{if(De){je(Q,de),pe=Ze(s,Q);const Ie=cr(De.value)&&De.querySelectorAll&&De.querySelectorAll("input,select,textarea")[0]||De,Qe=oLe(Ie),Kt=pe._f.refs||[];if(Qe?Kt.find(Sn=>Sn===Ie):Ie===pe._f.ref)return;cn(s,Q,{_f:{...pe._f,...Qe?{refs:[...Kt.filter(Sw),Ie,...Array.isArray(Ze(i,Q))?[{}]:[]],ref:{type:Ie.type,name:Q}}:{ref:Ie}}}),E(Q,!1,void 0,Ie)}else pe=Ze(s,Q,{}),pe._f&&(pe._f.mount=!1),(t.shouldUnregister||de.shouldUnregister)&&!(SW(l.array,Q)&&o.action)&&l.unMount.add(Q)}}},ue=()=>t.shouldFocusError&&zm(s,G,l.mount),ct=Q=>{Qs(Q)&&(p.state.next({disabled:Q}),zm(s,(de,pe)=>{const He=Ze(s,pe);He&&(de.disabled=He._f.disabled||Q,Array.isArray(He._f.refs)&&He._f.refs.forEach(De=>{De.disabled=He._f.disabled||Q}))},0,!1))},Ge=(Q,de)=>async pe=>{let He;pe&&(pe.preventDefault&&pe.preventDefault(),pe.persist&&pe.persist());let De=Wr(a);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:Ie,values:Qe}=await k();n.errors=Ie,De=Qe}else await R(s);if(l.disabled.size)for(const Ie of l.disabled)cn(De,Ie,void 0);if(Cr(n.errors,"root"),gs(n.errors)){p.state.next({errors:{}});try{await Q(De,pe)}catch(Ie){He=Ie}}else de&&await de({...n.errors},pe),ue(),setTimeout(ue);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:gs(n.errors)&&!He,submitCount:n.submitCount+1,errors:n.errors}),He)throw He},ut=(Q,de={})=>{Ze(s,Q)&&(cr(de.defaultValue)?B(Q,Wr(Ze(i,Q))):(B(Q,de.defaultValue),cn(i,Q,Wr(de.defaultValue))),de.keepTouched||Cr(n.touchedFields,Q),de.keepDirty||(Cr(n.dirtyFields,Q),n.isDirty=de.defaultValue?z(Q,Wr(Ze(i,Q))):z()),de.keepError||(Cr(n.errors,Q),f.isValid&&w()),p.state.next({...n}))},Xe=(Q,de={})=>{const pe=Q?Wr(Q):i,He=Wr(pe),De=gs(Q),Ie=De?i:He;if(de.keepDefaultValues||(i=pe),!de.keepValues){if(de.keepDirtyValues){const Qe=new Set([...l.mount,...Object.keys(dm(i,a))]);for(const Kt of Array.from(Qe))Ze(n.dirtyFields,Kt)?cn(Ie,Kt,Ze(a,Kt)):B(Kt,Ze(Ie,Kt))}else{if(vA&&cr(Q))for(const Qe of l.mount){const Kt=Ze(s,Qe);if(Kt&&Kt._f){const Sn=Array.isArray(Kt._f.refs)?Kt._f.refs[0]:Kt._f.ref;if(Pb(Sn)){const Cn=Sn.closest("form");if(Cn){Cn.reset();break}}}}for(const Qe of l.mount)B(Qe,Ze(Ie,Qe))}a=Wr(Ie),p.array.next({values:{...Ie}}),p.state.next({values:{...Ie}})}l={mount:de.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!de.keepIsValid||!!de.keepDirtyValues,o.watch=!!t.shouldUnregister,p.state.next({submitCount:de.keepSubmitCount?n.submitCount:0,isDirty:De?!1:de.keepDirty?n.isDirty:!!(de.keepDefaultValues&&!_l(Q,i)),isSubmitted:de.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:De?{}:de.keepDirtyValues?de.keepDefaultValues&&a?dm(i,a):n.dirtyFields:de.keepDefaultValues&&Q?dm(i,Q):de.keepDirty?n.dirtyFields:{},touchedFields:de.keepTouched?n.touchedFields:{},errors:de.keepErrors?n.errors:{},isSubmitSuccessful:de.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},qe=(Q,de)=>Xe(ta(Q)?Q(a):Q,de),lt=(Q,de={})=>{const pe=Ze(s,Q),He=pe&&pe._f;if(He){const De=He.refs?He.refs[0]:He.ref;De.focus&&(De.focus(),de.shouldSelect&&ta(De.select)&&De.select())}},It=Q=>{n={...n,...Q}},Kn={control:{register:je,unregister:me,getFieldState:fe,handleSubmit:Ge,setError:J,_subscribe:ze,_runSchema:k,_getWatch:V,_getDirty:z,_setValid:w,_setFieldArray:y,_setDisabledField:Te,_setErrors:P,_getFieldArray:K,_reset:Xe,_resetDefaultValues:()=>ta(t.defaultValues)&&t.defaultValues().then(Q=>{qe(Q,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:ct,_subjects:p,_proxyFormState:f,get _fields(){return s},get _formValues(){return a},get _state(){return o},set _state(Q){o=Q},get _defaultValues(){return i},get _names(){return l},set _names(Q){l=Q},get _formState(){return n},get _options(){return t},set _options(Q){t={...t,...Q}}},subscribe:$e,trigger:ee,register:je,handleSubmit:Ge,watch:Pe,setValue:B,getValues:oe,reset:qe,resetField:ut,clearErrors:Ee,unregister:me,setError:J,setFocus:lt,getFieldState:fe};return{...Kn,formControl:Kn}}function Du(e={}){const t=q.useRef(void 0),n=q.useRef(void 0),[s,i]=q.useState({isDirty:!1,isValidating:!1,isLoading:ta(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:ta(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:yLe(e),formState:s},e.formControl&&e.defaultValues&&!ta(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const a=t.current.control;return a._options=e,q.useLayoutEffect(()=>a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0}),[a]),q.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),q.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==s.isDirty&&a._subjects.state.next({isDirty:o})}},[a,s.isDirty]),q.useEffect(()=>{e.values&&!_l(e.values,n.current)?(a._reset(e.values,a._options.resetOptions),n.current=e.values,i(o=>({...o}))):a._resetDefaultValues()},[e.values,a]),q.useEffect(()=>{e.errors&&!gs(e.errors)&&a._setErrors(e.errors)},[e.errors,a]),q.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),q.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[e.shouldUnregister,a]),t.current.formState=AW(s,a),t.current}const NL=(e,t,n)=>{if(e&&"reportValidity"in e){const s=Ze(n,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},DW=(e,t)=>{for(const n in t.fields){const s=t.fields[n];s&&s.ref&&"reportValidity"in s.ref?NL(s.ref,n,e):s.refs&&s.refs.forEach(i=>NL(i,n,e))}},bLe=(e,t)=>{t.shouldUseNativeValidation&&DW(e,t);const n={};for(const s in e){const i=Ze(t.fields,s),a=Object.assign(e[s]||{},{ref:i&&i.ref});if(jLe(t.names||Object.keys(e),s)){const o=Object.assign({},Ze(n,s));cn(o,"root",a),cn(n,s,o)}else cn(n,s,a)}return n},jLe=(e,t)=>e.some(n=>n.startsWith(t+"."));var _Le=function(e,t){for(var n={};e.length;){var s=e[0],i=s.code,a=s.message,o=s.path.join(".");if(!n[o])if("unionErrors"in s){var l=s.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:i};if("unionErrors"in s&&s.unionErrors.forEach(function(f){return f.errors.forEach(function(h){return e.push(h)})}),t){var c=n[o].types,d=c&&c[s.code];n[o]=TW(o,t,n,i,d?[].concat(d,s.message):s.message)}e.shift()}return n},$u=function(e,t,n){return n===void 0&&(n={}),function(s,i,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(d){return a.shouldUseNativeValidation&&DW({},a),{errors:{},values:n.raw?s:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:bLe(_Le(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},en;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},e.find=(i,a)=>{for(const o of i)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function s(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=s,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(en||(en={}));var $S;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})($S||($S={}));const nt=en.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),_o=e=>{switch(typeof e){case"undefined":return nt.undefined;case"string":return nt.string;case"number":return Number.isNaN(e)?nt.nan:nt.number;case"boolean":return nt.boolean;case"function":return nt.function;case"bigint":return nt.bigint;case"symbol":return nt.symbol;case"object":return Array.isArray(e)?nt.array:e===null?nt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?nt.promise:typeof Map<"u"&&e instanceof Map?nt.map:typeof Set<"u"&&e instanceof Set?nt.set:typeof Date<"u"&&e instanceof Date?nt.date:nt.object;default:return nt.unknown}},Fe=en.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),wLe=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class li extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(a){return a.message},s={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)s._errors.push(n(o));else{let l=s,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(n(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return i(this),s}static assert(t){if(!(t instanceof li))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,en.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},s=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];n[a]=n[a]||[],n[a].push(t(i))}else s.push(t(i));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}li.create=e=>new li(e);const Qf=(e,t)=>{let n;switch(e.code){case Fe.invalid_type:e.received===nt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Fe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,en.jsonStringifyReplacer)}`;break;case Fe.unrecognized_keys:n=`Unrecognized key(s) in object: ${en.joinValues(e.keys,", ")}`;break;case Fe.invalid_union:n="Invalid input";break;case Fe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${en.joinValues(e.options)}`;break;case Fe.invalid_enum_value:n=`Invalid enum value. Expected ${en.joinValues(e.options)}, received '${e.received}'`;break;case Fe.invalid_arguments:n="Invalid function arguments";break;case Fe.invalid_return_type:n="Invalid function return type";break;case Fe.invalid_date:n="Invalid date";break;case Fe.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:en.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Fe.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Fe.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Fe.custom:n="Invalid input";break;case Fe.invalid_intersection_types:n="Intersection results could not be merged";break;case Fe.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Fe.not_finite:n="Number must be finite";break;default:n=t.defaultError,en.assertNever(e)}return{message:n}};let $W=Qf;function NLe(e){$W=e}function Tb(){return $W}const kb=e=>{const{data:t,path:n,errorMaps:s,issueData:i}=e,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=s.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...i,path:a,message:l}},SLe=[];function Ye(e,t){const n=Tb(),s=kb({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Qf?void 0:Qf].filter(i=>!!i)});e.common.issues.push(s)}class ds{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const s=[];for(const i of n){if(i.status==="aborted")return Pt;i.status==="dirty"&&t.dirty(),s.push(i.value)}return{status:t.value,value:s}}static async mergeObjectAsync(t,n){const s=[];for(const i of n){const a=await i.key,o=await i.value;s.push({key:a,value:o})}return ds.mergeObjectSync(t,s)}static mergeObjectSync(t,n){const s={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return Pt;a.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(s[a.value]=o.value)}return{status:t.value,value:s}}}const Pt=Object.freeze({status:"aborted"}),Td=e=>({status:"dirty",value:e}),Ss=e=>({status:"valid",value:e}),FS=e=>e.status==="aborted",zS=e=>e.status==="dirty",wu=e=>e.status==="valid",Zp=e=>typeof Promise<"u"&&e instanceof Promise;var ht;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(ht||(ht={}));class to{constructor(t,n,s,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=s,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const SL=(e,t)=>{if(wu(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new li(e.common.issues);return this._error=n,this._error}}};function Ft(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:s,description:i}=e;if(t&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??s??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??n??l.defaultError}},description:i}}class Wt{get description(){return this._def.description}_getType(t){return _o(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:_o(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ds,ctx:{common:t.parent.common,data:t.data,parsedType:_o(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Zp(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const s=this.safeParse(t,n);if(s.success)return s.data;throw s.error}safeParse(t,n){const s={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_o(t)},i=this._parseSync({data:t,path:s.path,parent:s});return SL(s,i)}"~validate"(t){var s,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_o(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:n});return wu(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(s=a==null?void 0:a.message)==null?void 0:s.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(a=>wu(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(t,n){const s=await this.safeParseAsync(t,n);if(s.success)return s.data;throw s.error}async safeParseAsync(t,n){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_o(t)},i=this._parse({data:t,path:s.path,parent:s}),a=await(Zp(i)?i:Promise.resolve(i));return SL(s,a)}refine(t,n){const s=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=t(i),l=()=>a.addIssue({code:Fe.custom,...s(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,n){return this._refinement((s,i)=>t(s)?!0:(i.addIssue(typeof n=="function"?n(s,i):n),!1))}_refinement(t){return new ga({schema:this,typeName:Ot.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ka.create(this,this._def)}nullable(){return ac.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return oa.create(this)}promise(){return Xf.create(this,this._def)}or(t){return Jp.create([this,t],this._def)}and(t){return eg.create(this,t,this._def)}transform(t){return new ga({...Ft(this._def),schema:this,typeName:Ot.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new ig({...Ft(this._def),innerType:this,defaultValue:n,typeName:Ot.ZodDefault})}brand(){return new _A({typeName:Ot.ZodBranded,type:this,...Ft(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new ag({...Ft(this._def),innerType:this,catchValue:n,typeName:Ot.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Vg.create(this,t)}readonly(){return og.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const CLe=/^c[^\s-]{8,}$/i,PLe=/^[0-9a-z]+$/,ALe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ELe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,TLe=/^[a-z0-9_-]{21}$/i,kLe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,OLe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MLe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ILe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Cw;const RLe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,LLe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,DLe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,$Le=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,FLe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,zLe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,FW="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",BLe=new RegExp(`^${FW}$`);function zW(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function VLe(e){return new RegExp(`^${zW(e)}$`)}function BW(e){let t=`${FW}T${zW(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function qLe(e,t){return!!((t==="v4"||!t)&&RLe.test(e)||(t==="v6"||!t)&&DLe.test(e))}function ULe(e,t){if(!kLe.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(s));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function HLe(e,t){return!!((t==="v4"||!t)&&LLe.test(e)||(t==="v6"||!t)&&$Le.test(e))}class na extends Wt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==nt.string){const a=this._getOrReturnCtx(t);return Ye(a,{code:Fe.invalid_type,expected:nt.string,received:a.parsedType}),Pt}const s=new ds;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),Ye(i,{code:Fe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),Ye(i,{code:Fe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="length"){const o=t.data.length>a.value,l=t.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(t,i),o?Ye(i,{code:Fe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Ye(i,{code:Fe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),s.dirty())}else if(a.kind==="email")MLe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ye(i,{validation:"email",code:Fe.invalid_string,message:a.message}),s.dirty());else if(a.kind==="emoji")Cw||(Cw=new RegExp(ILe,"u")),Cw.test(t.data)||(i=this._getOrReturnCtx(t,i),Ye(i,{validation:"emoji",code:Fe.invalid_string,message:a.message}),s.dirty());else if(a.kind==="uuid")ELe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ye(i,{validation:"uuid",code:Fe.invalid_string,message:a.message}),s.dirty());else if(a.kind==="nanoid")TLe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ye(i,{validation:"nanoid",code:Fe.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid")CLe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ye(i,{validation:"cuid",code:Fe.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid2")PLe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ye(i,{validation:"cuid2",code:Fe.invalid_string,message:a.message}),s.dirty());else if(a.kind==="ulid")ALe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ye(i,{validation:"ulid",code:Fe.invalid_string,message:a.message}),s.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Ye(i,{validation:"url",code:Fe.invalid_string,message:a.message}),s.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Ye(i,{validation:"regex",code:Fe.invalid_string,message:a.message}),s.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),Ye(i,{code:Fe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),s.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ye(i,{code:Fe.invalid_string,validation:{startsWith:a.value},message:a.message}),s.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ye(i,{code:Fe.invalid_string,validation:{endsWith:a.value},message:a.message}),s.dirty()):a.kind==="datetime"?BW(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ye(i,{code:Fe.invalid_string,validation:"datetime",message:a.message}),s.dirty()):a.kind==="date"?BLe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ye(i,{code:Fe.invalid_string,validation:"date",message:a.message}),s.dirty()):a.kind==="time"?VLe(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ye(i,{code:Fe.invalid_string,validation:"time",message:a.message}),s.dirty()):a.kind==="duration"?OLe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ye(i,{validation:"duration",code:Fe.invalid_string,message:a.message}),s.dirty()):a.kind==="ip"?qLe(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ye(i,{validation:"ip",code:Fe.invalid_string,message:a.message}),s.dirty()):a.kind==="jwt"?ULe(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),Ye(i,{validation:"jwt",code:Fe.invalid_string,message:a.message}),s.dirty()):a.kind==="cidr"?HLe(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ye(i,{validation:"cidr",code:Fe.invalid_string,message:a.message}),s.dirty()):a.kind==="base64"?FLe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ye(i,{validation:"base64",code:Fe.invalid_string,message:a.message}),s.dirty()):a.kind==="base64url"?zLe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ye(i,{validation:"base64url",code:Fe.invalid_string,message:a.message}),s.dirty()):en.assertNever(a);return{status:s.value,value:t.data}}_regex(t,n,s){return this.refinement(i=>t.test(i),{validation:n,code:Fe.invalid_string,...ht.errToObj(s)})}_addCheck(t){return new na({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...ht.errToObj(t)})}url(t){return this._addCheck({kind:"url",...ht.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...ht.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...ht.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...ht.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...ht.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...ht.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...ht.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...ht.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...ht.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...ht.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...ht.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...ht.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...ht.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...ht.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...ht.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...ht.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...ht.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...ht.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...ht.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...ht.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...ht.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...ht.errToObj(n)})}nonempty(t){return this.min(1,ht.errToObj(t))}trim(){return new na({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new na({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new na({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}na.create=e=>new na({checks:[],typeName:Ot.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Ft(e)});function WLe(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,i=n>s?n:s,a=Number.parseInt(e.toFixed(i).replace(".","")),o=Number.parseInt(t.toFixed(i).replace(".",""));return a%o/10**i}class rc extends Wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==nt.number){const a=this._getOrReturnCtx(t);return Ye(a,{code:Fe.invalid_type,expected:nt.number,received:a.parsedType}),Pt}let s;const i=new ds;for(const a of this._def.checks)a.kind==="int"?en.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),Ye(s,{code:Fe.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(s=this._getOrReturnCtx(t,s),Ye(s,{code:Fe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(s=this._getOrReturnCtx(t,s),Ye(s,{code:Fe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?WLe(t.data,a.value)!==0&&(s=this._getOrReturnCtx(t,s),Ye(s,{code:Fe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),Ye(s,{code:Fe.not_finite,message:a.message}),i.dirty()):en.assertNever(a);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,ht.toString(n))}gt(t,n){return this.setLimit("min",t,!1,ht.toString(n))}lte(t,n){return this.setLimit("max",t,!0,ht.toString(n))}lt(t,n){return this.setLimit("max",t,!1,ht.toString(n))}setLimit(t,n,s,i){return new rc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:ht.toString(i)}]})}_addCheck(t){return new rc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:ht.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ht.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ht.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ht.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ht.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:ht.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:ht.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ht.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ht.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&en.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(n)&&Number.isFinite(t)}}rc.create=e=>new rc({checks:[],typeName:Ot.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ft(e)});class sc extends Wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==nt.bigint)return this._getInvalidInput(t);let s;const i=new ds;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(s=this._getOrReturnCtx(t,s),Ye(s,{code:Fe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(s=this._getOrReturnCtx(t,s),Ye(s,{code:Fe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),Ye(s,{code:Fe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):en.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Ye(n,{code:Fe.invalid_type,expected:nt.bigint,received:n.parsedType}),Pt}gte(t,n){return this.setLimit("min",t,!0,ht.toString(n))}gt(t,n){return this.setLimit("min",t,!1,ht.toString(n))}lte(t,n){return this.setLimit("max",t,!0,ht.toString(n))}lt(t,n){return this.setLimit("max",t,!1,ht.toString(n))}setLimit(t,n,s,i){return new sc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:ht.toString(i)}]})}_addCheck(t){return new sc({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ht.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ht.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ht.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ht.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:ht.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}sc.create=e=>new sc({checks:[],typeName:Ot.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Ft(e)});class Qp extends Wt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==nt.boolean){const s=this._getOrReturnCtx(t);return Ye(s,{code:Fe.invalid_type,expected:nt.boolean,received:s.parsedType}),Pt}return Ss(t.data)}}Qp.create=e=>new Qp({typeName:Ot.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ft(e)});class Nu extends Wt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==nt.date){const a=this._getOrReturnCtx(t);return Ye(a,{code:Fe.invalid_type,expected:nt.date,received:a.parsedType}),Pt}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Ye(a,{code:Fe.invalid_date}),Pt}const s=new ds;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),Ye(i,{code:Fe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),s.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),Ye(i,{code:Fe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),s.dirty()):en.assertNever(a);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Nu({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:ht.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:ht.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Nu.create=e=>new Nu({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Ot.ZodDate,...Ft(e)});class Ob extends Wt{_parse(t){if(this._getType(t)!==nt.symbol){const s=this._getOrReturnCtx(t);return Ye(s,{code:Fe.invalid_type,expected:nt.symbol,received:s.parsedType}),Pt}return Ss(t.data)}}Ob.create=e=>new Ob({typeName:Ot.ZodSymbol,...Ft(e)});class Yp extends Wt{_parse(t){if(this._getType(t)!==nt.undefined){const s=this._getOrReturnCtx(t);return Ye(s,{code:Fe.invalid_type,expected:nt.undefined,received:s.parsedType}),Pt}return Ss(t.data)}}Yp.create=e=>new Yp({typeName:Ot.ZodUndefined,...Ft(e)});class Xp extends Wt{_parse(t){if(this._getType(t)!==nt.null){const s=this._getOrReturnCtx(t);return Ye(s,{code:Fe.invalid_type,expected:nt.null,received:s.parsedType}),Pt}return Ss(t.data)}}Xp.create=e=>new Xp({typeName:Ot.ZodNull,...Ft(e)});class Yf extends Wt{constructor(){super(...arguments),this._any=!0}_parse(t){return Ss(t.data)}}Yf.create=e=>new Yf({typeName:Ot.ZodAny,...Ft(e)});class nu extends Wt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ss(t.data)}}nu.create=e=>new nu({typeName:Ot.ZodUnknown,...Ft(e)});class Yo extends Wt{_parse(t){const n=this._getOrReturnCtx(t);return Ye(n,{code:Fe.invalid_type,expected:nt.never,received:n.parsedType}),Pt}}Yo.create=e=>new Yo({typeName:Ot.ZodNever,...Ft(e)});class Mb extends Wt{_parse(t){if(this._getType(t)!==nt.undefined){const s=this._getOrReturnCtx(t);return Ye(s,{code:Fe.invalid_type,expected:nt.void,received:s.parsedType}),Pt}return Ss(t.data)}}Mb.create=e=>new Mb({typeName:Ot.ZodVoid,...Ft(e)});class oa extends Wt{_parse(t){const{ctx:n,status:s}=this._processInputParams(t),i=this._def;if(n.parsedType!==nt.array)return Ye(n,{code:Fe.invalid_type,expected:nt.array,received:n.parsedType}),Pt;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(Ye(n,{code:o?Fe.too_big:Fe.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Ye(n,{code:Fe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Ye(n,{code:Fe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new to(n,o,n.path,l)))).then(o=>ds.mergeArray(s,o));const a=[...n.data].map((o,l)=>i.type._parseSync(new to(n,o,n.path,l)));return ds.mergeArray(s,a)}get element(){return this._def.type}min(t,n){return new oa({...this._def,minLength:{value:t,message:ht.toString(n)}})}max(t,n){return new oa({...this._def,maxLength:{value:t,message:ht.toString(n)}})}length(t,n){return new oa({...this._def,exactLength:{value:t,message:ht.toString(n)}})}nonempty(t){return this.min(1,t)}}oa.create=(e,t)=>new oa({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ot.ZodArray,...Ft(t)});function dd(e){if(e instanceof Qn){const t={};for(const n in e.shape){const s=e.shape[n];t[n]=Ka.create(dd(s))}return new Qn({...e._def,shape:()=>t})}else return e instanceof oa?new oa({...e._def,type:dd(e.element)}):e instanceof Ka?Ka.create(dd(e.unwrap())):e instanceof ac?ac.create(dd(e.unwrap())):e instanceof no?no.create(e.items.map(t=>dd(t))):e}class Qn extends Wt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=en.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==nt.object){const d=this._getOrReturnCtx(t);return Ye(d,{code:Fe.invalid_type,expected:nt.object,received:d.parsedType}),Pt}const{status:s,ctx:i}=this._processInputParams(t),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Yo&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const f=a[d],h=i.data[d];c.push({key:{status:"valid",value:d},value:f._parse(new to(i,h,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof Yo){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of l)c.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(d==="strict")l.length>0&&(Ye(i,{code:Fe.unrecognized_keys,keys:l}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of l){const h=i.data[f];c.push({key:{status:"valid",value:f},value:d._parse(new to(i,h,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of c){const h=await f.key,p=await f.value;d.push({key:h,value:p,alwaysSet:f.alwaysSet})}return d}).then(d=>ds.mergeObjectSync(s,d)):ds.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(t){return ht.errToObj,new Qn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,s)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,s).message)??s.defaultError;return n.code==="unrecognized_keys"?{message:ht.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new Qn({...this._def,unknownKeys:"strip"})}passthrough(){return new Qn({...this._def,unknownKeys:"passthrough"})}extend(t){return new Qn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Qn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ot.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Qn({...this._def,catchall:t})}pick(t){const n={};for(const s of en.objectKeys(t))t[s]&&this.shape[s]&&(n[s]=this.shape[s]);return new Qn({...this._def,shape:()=>n})}omit(t){const n={};for(const s of en.objectKeys(this.shape))t[s]||(n[s]=this.shape[s]);return new Qn({...this._def,shape:()=>n})}deepPartial(){return dd(this)}partial(t){const n={};for(const s of en.objectKeys(this.shape)){const i=this.shape[s];t&&!t[s]?n[s]=i:n[s]=i.optional()}return new Qn({...this._def,shape:()=>n})}required(t){const n={};for(const s of en.objectKeys(this.shape))if(t&&!t[s])n[s]=this.shape[s];else{let a=this.shape[s];for(;a instanceof Ka;)a=a._def.innerType;n[s]=a}return new Qn({...this._def,shape:()=>n})}keyof(){return VW(en.objectKeys(this.shape))}}Qn.create=(e,t)=>new Qn({shape:()=>e,unknownKeys:"strip",catchall:Yo.create(),typeName:Ot.ZodObject,...Ft(t)});Qn.strictCreate=(e,t)=>new Qn({shape:()=>e,unknownKeys:"strict",catchall:Yo.create(),typeName:Ot.ZodObject,...Ft(t)});Qn.lazycreate=(e,t)=>new Qn({shape:e,unknownKeys:"strip",catchall:Yo.create(),typeName:Ot.ZodObject,...Ft(t)});class Jp extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t),s=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new li(l.ctx.common.issues));return Ye(n,{code:Fe.invalid_union,unionErrors:o}),Pt}if(n.common.async)return Promise.all(s.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of s){const d={...n,common:{...n.common,issues:[]},parent:null},f=c._parseSync({data:n.data,path:n.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new li(c));return Ye(n,{code:Fe.invalid_union,unionErrors:l}),Pt}}get options(){return this._def.options}}Jp.create=(e,t)=>new Jp({options:e,typeName:Ot.ZodUnion,...Ft(t)});const vo=e=>e instanceof ng?vo(e.schema):e instanceof ga?vo(e.innerType()):e instanceof rg?[e.value]:e instanceof ic?e.options:e instanceof sg?en.objectValues(e.enum):e instanceof ig?vo(e._def.innerType):e instanceof Yp?[void 0]:e instanceof Xp?[null]:e instanceof Ka?[void 0,...vo(e.unwrap())]:e instanceof ac?[null,...vo(e.unwrap())]:e instanceof _A||e instanceof og?vo(e.unwrap()):e instanceof ag?vo(e._def.innerType):[];class E0 extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==nt.object)return Ye(n,{code:Fe.invalid_type,expected:nt.object,received:n.parsedType}),Pt;const s=this.discriminator,i=n.data[s],a=this.optionsMap.get(i);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(Ye(n,{code:Fe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),Pt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,s){const i=new Map;for(const a of n){const o=vo(a.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);i.set(l,a)}}return new E0({typeName:Ot.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...Ft(s)})}}function BS(e,t){const n=_o(e),s=_o(t);if(e===t)return{valid:!0,data:e};if(n===nt.object&&s===nt.object){const i=en.objectKeys(t),a=en.objectKeys(e).filter(l=>i.indexOf(l)!==-1),o={...e,...t};for(const l of a){const c=BS(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===nt.array&&s===nt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const o=e[a],l=t[a],c=BS(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===nt.date&&s===nt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class eg extends Wt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t),i=(a,o)=>{if(FS(a)||FS(o))return Pt;const l=BS(a.value,o.value);return l.valid?((zS(a)||zS(o))&&n.dirty(),{status:n.value,value:l.data}):(Ye(s,{code:Fe.invalid_intersection_types}),Pt)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}eg.create=(e,t,n)=>new eg({left:e,right:t,typeName:Ot.ZodIntersection,...Ft(n)});class no extends Wt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==nt.array)return Ye(s,{code:Fe.invalid_type,expected:nt.array,received:s.parsedType}),Pt;if(s.data.length<this._def.items.length)return Ye(s,{code:Fe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Pt;!this._def.rest&&s.data.length>this._def.items.length&&(Ye(s,{code:Fe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...s.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new to(s,o,s.path,l)):null}).filter(o=>!!o);return s.common.async?Promise.all(a).then(o=>ds.mergeArray(n,o)):ds.mergeArray(n,a)}get items(){return this._def.items}rest(t){return new no({...this._def,rest:t})}}no.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new no({items:e,typeName:Ot.ZodTuple,rest:null,...Ft(t)})};class tg extends Wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==nt.object)return Ye(s,{code:Fe.invalid_type,expected:nt.object,received:s.parsedType}),Pt;const i=[],a=this._def.keyType,o=this._def.valueType;for(const l in s.data)i.push({key:a._parse(new to(s,l,s.path,l)),value:o._parse(new to(s,s.data[l],s.path,l)),alwaysSet:l in s.data});return s.common.async?ds.mergeObjectAsync(n,i):ds.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,s){return n instanceof Wt?new tg({keyType:t,valueType:n,typeName:Ot.ZodRecord,...Ft(s)}):new tg({keyType:na.create(),valueType:t,typeName:Ot.ZodRecord,...Ft(n)})}}class Ib extends Wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==nt.map)return Ye(s,{code:Fe.invalid_type,expected:nt.map,received:s.parsedType}),Pt;const i=this._def.keyType,a=this._def.valueType,o=[...s.data.entries()].map(([l,c],d)=>({key:i._parse(new to(s,l,s.path,[d,"key"])),value:a._parse(new to(s,c,s.path,[d,"value"]))}));if(s.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,f=await c.value;if(d.status==="aborted"||f.status==="aborted")return Pt;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),l.set(d.value,f.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,f=c.value;if(d.status==="aborted"||f.status==="aborted")return Pt;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),l.set(d.value,f.value)}return{status:n.value,value:l}}}}Ib.create=(e,t,n)=>new Ib({valueType:t,keyType:e,typeName:Ot.ZodMap,...Ft(n)});class Su extends Wt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==nt.set)return Ye(s,{code:Fe.invalid_type,expected:nt.set,received:s.parsedType}),Pt;const i=this._def;i.minSize!==null&&s.data.size<i.minSize.value&&(Ye(s,{code:Fe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&s.data.size>i.maxSize.value&&(Ye(s,{code:Fe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const d=new Set;for(const f of c){if(f.status==="aborted")return Pt;f.status==="dirty"&&n.dirty(),d.add(f.value)}return{status:n.value,value:d}}const l=[...s.data.values()].map((c,d)=>a._parse(new to(s,c,s.path,d)));return s.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,n){return new Su({...this._def,minSize:{value:t,message:ht.toString(n)}})}max(t,n){return new Su({...this._def,maxSize:{value:t,message:ht.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Su.create=(e,t)=>new Su({valueType:e,minSize:null,maxSize:null,typeName:Ot.ZodSet,...Ft(t)});class Wd extends Wt{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==nt.function)return Ye(n,{code:Fe.invalid_type,expected:nt.function,received:n.parsedType}),Pt;function s(l,c){return kb({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Tb(),Qf].filter(d=>!!d),issueData:{code:Fe.invalid_arguments,argumentsError:c}})}function i(l,c){return kb({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Tb(),Qf].filter(d=>!!d),issueData:{code:Fe.invalid_return_type,returnTypeError:c}})}const a={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Xf){const l=this;return Ss(async function(...c){const d=new li([]),f=await l._def.args.parseAsync(c,a).catch(v=>{throw d.addIssue(s(c,v)),d}),h=await Reflect.apply(o,this,f);return await l._def.returns._def.type.parseAsync(h,a).catch(v=>{throw d.addIssue(i(h,v)),d})})}else{const l=this;return Ss(function(...c){const d=l._def.args.safeParse(c,a);if(!d.success)throw new li([s(c,d.error)]);const f=Reflect.apply(o,this,d.data),h=l._def.returns.safeParse(f,a);if(!h.success)throw new li([i(f,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Wd({...this._def,args:no.create(t).rest(nu.create())})}returns(t){return new Wd({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,s){return new Wd({args:t||no.create([]).rest(nu.create()),returns:n||nu.create(),typeName:Ot.ZodFunction,...Ft(s)})}}class ng extends Wt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ng.create=(e,t)=>new ng({getter:e,typeName:Ot.ZodLazy,...Ft(t)});class rg extends Wt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Ye(n,{received:n.data,code:Fe.invalid_literal,expected:this._def.value}),Pt}return{status:"valid",value:t.data}}get value(){return this._def.value}}rg.create=(e,t)=>new rg({value:e,typeName:Ot.ZodLiteral,...Ft(t)});function VW(e,t){return new ic({values:e,typeName:Ot.ZodEnum,...Ft(t)})}class ic extends Wt{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),s=this._def.values;return Ye(n,{expected:en.joinValues(s),received:n.parsedType,code:Fe.invalid_type}),Pt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),s=this._def.values;return Ye(n,{received:n.data,code:Fe.invalid_enum_value,options:s}),Pt}return Ss(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return ic.create(t,{...this._def,...n})}exclude(t,n=this._def){return ic.create(this.options.filter(s=>!t.includes(s)),{...this._def,...n})}}ic.create=VW;class sg extends Wt{_parse(t){const n=en.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==nt.string&&s.parsedType!==nt.number){const i=en.objectValues(n);return Ye(s,{expected:en.joinValues(i),received:s.parsedType,code:Fe.invalid_type}),Pt}if(this._cache||(this._cache=new Set(en.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=en.objectValues(n);return Ye(s,{received:s.data,code:Fe.invalid_enum_value,options:i}),Pt}return Ss(t.data)}get enum(){return this._def.values}}sg.create=(e,t)=>new sg({values:e,typeName:Ot.ZodNativeEnum,...Ft(t)});class Xf extends Wt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==nt.promise&&n.common.async===!1)return Ye(n,{code:Fe.invalid_type,expected:nt.promise,received:n.parsedType}),Pt;const s=n.parsedType===nt.promise?n.data:Promise.resolve(n.data);return Ss(s.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Xf.create=(e,t)=>new Xf({type:e,typeName:Ot.ZodPromise,...Ft(t)});class ga extends Wt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ot.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:s}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:o=>{Ye(s,o),o.fatal?n.abort():n.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(s.data,a);if(s.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return Pt;const c=await this._def.schema._parseAsync({data:l,path:s.path,parent:s});return c.status==="aborted"?Pt:c.status==="dirty"||n.value==="dirty"?Td(c.value):c});{if(n.value==="aborted")return Pt;const l=this._def.schema._parseSync({data:o,path:s.path,parent:s});return l.status==="aborted"?Pt:l.status==="dirty"||n.value==="dirty"?Td(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?Pt:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>l.status==="aborted"?Pt:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!wu(o))return Pt;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>wu(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:n.value,value:l})):Pt);en.assertNever(i)}}ga.create=(e,t,n)=>new ga({schema:e,typeName:Ot.ZodEffects,effect:t,...Ft(n)});ga.createWithPreprocess=(e,t,n)=>new ga({schema:t,effect:{type:"preprocess",transform:e},typeName:Ot.ZodEffects,...Ft(n)});class Ka extends Wt{_parse(t){return this._getType(t)===nt.undefined?Ss(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ka.create=(e,t)=>new Ka({innerType:e,typeName:Ot.ZodOptional,...Ft(t)});class ac extends Wt{_parse(t){return this._getType(t)===nt.null?Ss(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ac.create=(e,t)=>new ac({innerType:e,typeName:Ot.ZodNullable,...Ft(t)});class ig extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t);let s=n.data;return n.parsedType===nt.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ig.create=(e,t)=>new ig({innerType:e,typeName:Ot.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ft(t)});class ag extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t),s={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Zp(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new li(s.common.issues)},input:s.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new li(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}ag.create=(e,t)=>new ag({innerType:e,typeName:Ot.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ft(t)});class Rb extends Wt{_parse(t){if(this._getType(t)!==nt.nan){const s=this._getOrReturnCtx(t);return Ye(s,{code:Fe.invalid_type,expected:nt.nan,received:s.parsedType}),Pt}return{status:"valid",value:t.data}}}Rb.create=e=>new Rb({typeName:Ot.ZodNaN,...Ft(e)});const KLe=Symbol("zod_brand");class _A extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class Vg extends Wt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?Pt:a.status==="dirty"?(n.dirty(),Td(a.value)):this._def.out._parseAsync({data:a.value,path:s.path,parent:s})})();{const i=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?Pt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:s.path,parent:s})}}static create(t,n){return new Vg({in:t,out:n,typeName:Ot.ZodPipeline})}}class og extends Wt{_parse(t){const n=this._def.innerType._parse(t),s=i=>(wu(i)&&(i.value=Object.freeze(i.value)),i);return Zp(n)?n.then(i=>s(i)):s(n)}unwrap(){return this._def.innerType}}og.create=(e,t)=>new og({innerType:e,typeName:Ot.ZodReadonly,...Ft(t)});function CL(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function wA(e,t={},n){return e?Yf.create().superRefine((s,i)=>{const a=e(s);if(a instanceof Promise)return a.then(o=>{if(!o){const l=CL(t,s),c=l.fatal??n??!0;i.addIssue({code:"custom",...l,fatal:c})}});if(!a){const o=CL(t,s),l=o.fatal??n??!0;i.addIssue({code:"custom",...o,fatal:l})}}):Yf.create()}const GLe={object:Qn.lazycreate};var Ot;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Ot||(Ot={}));const ZLe=(e,t={message:`Input not instance of ${e.name}`})=>wA(n=>n instanceof e,t),Ue=na.create,xa=rc.create,QLe=Rb.create,YLe=sc.create,Rs=Qp.create,XLe=Nu.create,JLe=Ob.create,e4e=Yp.create,qW=Xp.create,Lb=Yf.create,t4e=nu.create,n4e=Yo.create,r4e=Mb.create,Do=oa.create,sl=Qn.create,s4e=Qn.strictCreate,NA=Jp.create,i4e=E0.create,a4e=eg.create,o4e=no.create,UW=tg.create,l4e=Ib.create,c4e=Su.create,u4e=Wd.create,d4e=ng.create,HW=rg.create,ir=ic.create,f4e=sg.create,h4e=Xf.create,PL=ga.create,m4e=Ka.create,p4e=ac.create,SA=ga.createWithPreprocess,g4e=Vg.create,x4e=()=>Ue().optional(),v4e=()=>xa().optional(),y4e=()=>Rs().optional(),la={string:e=>na.create({...e,coerce:!0}),number:e=>rc.create({...e,coerce:!0}),boolean:e=>Qp.create({...e,coerce:!0}),bigint:e=>sc.create({...e,coerce:!0}),date:e=>Nu.create({...e,coerce:!0})},b4e=Pt,j4e=Object.freeze(Object.defineProperty({__proto__:null,BRAND:KLe,DIRTY:Td,EMPTY_PATH:SLe,INVALID:Pt,NEVER:b4e,OK:Ss,ParseStatus:ds,Schema:Wt,ZodAny:Yf,ZodArray:oa,ZodBigInt:sc,ZodBoolean:Qp,ZodBranded:_A,ZodCatch:ag,ZodDate:Nu,ZodDefault:ig,ZodDiscriminatedUnion:E0,ZodEffects:ga,ZodEnum:ic,ZodError:li,get ZodFirstPartyTypeKind(){return Ot},ZodFunction:Wd,ZodIntersection:eg,ZodIssueCode:Fe,ZodLazy:ng,ZodLiteral:rg,ZodMap:Ib,ZodNaN:Rb,ZodNativeEnum:sg,ZodNever:Yo,ZodNull:Xp,ZodNullable:ac,ZodNumber:rc,ZodObject:Qn,ZodOptional:Ka,ZodParsedType:nt,ZodPipeline:Vg,ZodPromise:Xf,ZodReadonly:og,ZodRecord:tg,ZodSchema:Wt,ZodSet:Su,ZodString:na,ZodSymbol:Ob,ZodTransformer:ga,ZodTuple:no,ZodType:Wt,ZodUndefined:Yp,ZodUnion:Jp,ZodUnknown:nu,ZodVoid:Mb,addIssueToContext:Ye,any:Lb,array:Do,bigint:YLe,boolean:Rs,coerce:la,custom:wA,date:XLe,datetimeRegex:BW,defaultErrorMap:Qf,discriminatedUnion:i4e,effect:PL,enum:ir,function:u4e,getErrorMap:Tb,getParsedType:_o,instanceof:ZLe,intersection:a4e,isAborted:FS,isAsync:Zp,isDirty:zS,isValid:wu,late:GLe,lazy:d4e,literal:HW,makeIssue:kb,map:l4e,nan:QLe,nativeEnum:f4e,never:n4e,null:qW,nullable:p4e,number:xa,object:sl,get objectUtil(){return $S},oboolean:y4e,onumber:v4e,optional:m4e,ostring:x4e,pipeline:g4e,preprocess:SA,promise:h4e,quotelessJson:wLe,record:UW,set:c4e,setErrorMap:NLe,strictObject:s4e,string:Ue,symbol:JLe,transformer:PL,tuple:o4e,undefined:e4e,union:NA,unknown:t4e,get util(){return en},void:r4e},Symbol.toStringTag,{value:"Module"})),Fu=nLe,WW=_.createContext({}),we=({...e})=>r.jsx(WW.Provider,{value:{name:e.name},children:r.jsx(aLe,{...e})}),T0=()=>{const e=_.useContext(WW),t=_.useContext(KW),{getFieldState:n,formState:s}=A0(),i=n(e.name,s);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:a}=t;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},KW=_.createContext({}),_e=_.forwardRef(({className:e,...t},n)=>{const s=_.useId();return r.jsx(KW.Provider,{value:{id:s},children:r.jsx("div",{ref:n,className:Oe("space-y-2",e),...t})})});_e.displayName="FormItem";const Ne=_.forwardRef(({className:e,...t},n)=>{const{error:s,formItemId:i}=T0();return r.jsx(Ce,{ref:n,className:Oe(s&&"text-destructive",e),htmlFor:i,...t})});Ne.displayName="FormLabel";const Se=_.forwardRef(({...e},t)=>{const{error:n,formItemId:s,formDescriptionId:i,formMessageId:a}=T0();return r.jsx(oj,{ref:t,id:s,"aria-describedby":n?`${i} ${a}`:`${i}`,"aria-invalid":!!n,...e})});Se.displayName="FormControl";const rr=_.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:s}=T0();return r.jsx("p",{ref:n,id:s,className:Oe("text-sm text-muted-foreground",e),...t})});rr.displayName="FormDescription";const ke=_.forwardRef(({className:e,children:t,...n},s)=>{const{error:i,formMessageId:a}=T0(),o=i?String((i==null?void 0:i.message)??""):t;return o?r.jsx("p",{ref:s,id:a,className:Oe("text-sm font-medium text-destructive",e),...n,children:o}):null});ke.displayName="FormMessage";var CA="Switch",[_4e]=Nr(CA),[w4e,N4e]=_4e(CA),GW=_.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:f,...h}=e,[p,v]=_.useState(null),j=Rt(t,y=>v(y)),g=_.useRef(!1),x=p?f||!!p.closest("form"):!0,[w=!1,N]=Vs({prop:i,defaultProp:a,onChange:d});return r.jsxs(w4e,{scope:n,checked:w,disabled:l,children:[r.jsx(st.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":YW(w),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:j,onClick:Ve(e.onClick,y=>{N(A=>!A),x&&(g.current=y.isPropagationStopped(),g.current||y.stopPropagation())})}),x&&r.jsx(S4e,{control:p,bubbles:!g.current,name:s,value:c,checked:w,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});GW.displayName=CA;var ZW="SwitchThumb",QW=_.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,i=N4e(ZW,n);return r.jsx(st.span,{"data-state":YW(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})});QW.displayName=ZW;var S4e=e=>{const{control:t,checked:n,bubbles:s=!0,...i}=e,a=_.useRef(null),o=Pj(n),l=mj(t);return _.useEffect(()=>{const c=a.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&h){const p=new Event("click",{bubbles:s});h.call(c,n),c.dispatchEvent(p)}},[o,n,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function YW(e){return e?"checked":"unchecked"}var XW=GW,C4e=QW;const ra=_.forwardRef(({className:e,...t},n)=>r.jsx(XW,{className:Oe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:r.jsx(C4e,{className:Oe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ra.displayName=XW.displayName;const P4e=sl({entityCode:Ue().min(2,"Le code doit contenir au moins 2 caractres"),entityName:Ue().min(2,"Le nom doit contenir au moins 2 caractres"),entityNameFull:Ue().optional(),level:xa().min(0).max(2),parentEntityCode:Ue().optional(),countryCode:Ue().length(2).optional(),countryName:Ue().optional(),flagEmoji:Ue().optional(),isActive:Rs().default(!0)});function AL({organization:e,onSubmit:t,onCancel:n,isSubmitting:s=!1}){const i=Du({resolver:$u(P4e),defaultValues:{entityCode:(e==null?void 0:e.entityCode)||"",entityName:(e==null?void 0:e.entityName)||"",entityNameFull:(e==null?void 0:e.entityNameFull)||"",level:(e==null?void 0:e.level)??1,parentEntityCode:(e==null?void 0:e.parentEntityCode)||"",countryCode:(e==null?void 0:e.countryCode)||"FR",countryName:(e==null?void 0:e.countryName)||"France",flagEmoji:(e==null?void 0:e.flagEmoji)||"",isActive:(e==null?void 0:e.isActive)??!0}});return r.jsx(Fu,{...i,children:r.jsxs("form",{onSubmit:i.handleSubmit(t),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(we,{control:i.control,name:"entityCode",render:({field:a})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Code Entit"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"Ex: FR_PARIS",...a,"data-testid":"input-entity-code"})}),r.jsx(rr,{children:"Code unique de l'entit"}),r.jsx(ke,{})]})}),r.jsx(we,{control:i.control,name:"entityName",render:({field:a})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Nom de l'entit"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"Ex: ADS France",...a,"data-testid":"input-entity-name"})}),r.jsx(ke,{})]})})]}),r.jsx(we,{control:i.control,name:"entityNameFull",render:({field:a})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Nom complet (optionnel)"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"Ex: ADS Group Security France",...a,"data-testid":"input-entity-name-full"})}),r.jsx(ke,{})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(we,{control:i.control,name:"level",render:({field:a})=>{var o;return r.jsxs(_e,{children:[r.jsx(Ne,{children:"Niveau hirarchique"}),r.jsxs(gt,{onValueChange:l=>a.onChange(parseInt(l)),defaultValue:(o=a.value)==null?void 0:o.toString(),children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-level",children:r.jsx(xt,{placeholder:"Slectionner le niveau"})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"0",children:"Holding"}),r.jsx(Y,{value:"1",children:"Filiale"}),r.jsx(Y,{value:"2",children:"Sous-filiale"})]})]}),r.jsx(ke,{})]})}}),r.jsx(we,{control:i.control,name:"countryCode",render:({field:a})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Code pays"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"Ex: FR",maxLength:2,...a,"data-testid":"input-country-code"})}),r.jsx(ke,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(we,{control:i.control,name:"countryName",render:({field:a})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Nom du pays"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"Ex: France",...a,"data-testid":"input-country-name"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:i.control,name:"flagEmoji",render:({field:a})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Emoji drapeau"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"",...a,"data-testid":"input-flag-emoji"})}),r.jsx(ke,{})]})})]}),r.jsx(we,{control:i.control,name:"isActive",render:({field:a})=>r.jsxs(_e,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(Ne,{className:"text-base",children:"Organisation active"}),r.jsx(rr,{children:"Activer ou dsactiver cette organisation"})]}),r.jsx(Se,{children:r.jsx(ra,{checked:a.value,onCheckedChange:a.onChange,"data-testid":"switch-active"})})]})}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(re,{type:"button",variant:"outline",onClick:n,disabled:s,"data-testid":"button-cancel",children:"Annuler"}),r.jsx(re,{type:"submit",disabled:s,"data-testid":"button-submit",children:s?"Enregistrement...":e?"Modifier":"Crer"})]})]})})}var JW="AlertDialog",[A4e]=Nr(JW,[MB]),il=MB(),e7=e=>{const{__scopeAlertDialog:t,...n}=e,s=il(t);return r.jsx(IP,{...s,...n,modal:!0})};e7.displayName=JW;var E4e="AlertDialogTrigger",T4e=_.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=il(n);return r.jsx(ZB,{...i,...s,ref:t})});T4e.displayName=E4e;var k4e="AlertDialogPortal",t7=e=>{const{__scopeAlertDialog:t,...n}=e,s=il(t);return r.jsx(RP,{...s,...n})};t7.displayName=k4e;var O4e="AlertDialogOverlay",n7=_.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=il(n);return r.jsx(Ng,{...i,...s,ref:t})});n7.displayName=O4e;var Kd="AlertDialogContent",[M4e,I4e]=A4e(Kd),R4e=M6("AlertDialogContent"),r7=_.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:s,...i}=e,a=il(n),o=_.useRef(null),l=Rt(t,o),c=_.useRef(null);return r.jsx(Cae,{contentName:Kd,titleName:s7,docsSlug:"alert-dialog",children:r.jsx(M4e,{scope:n,cancelRef:c,children:r.jsxs(Sg,{role:"alertdialog",...a,...i,ref:l,onOpenAutoFocus:Ve(i.onOpenAutoFocus,d=>{var f;d.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(R4e,{children:s}),r.jsx(D4e,{contentRef:o})]})})})});r7.displayName=Kd;var s7="AlertDialogTitle",i7=_.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=il(n);return r.jsx(Cg,{...i,...s,ref:t})});i7.displayName=s7;var a7="AlertDialogDescription",o7=_.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=il(n);return r.jsx(Pg,{...i,...s,ref:t})});o7.displayName=a7;var L4e="AlertDialogAction",l7=_.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=il(n);return r.jsx(wj,{...i,...s,ref:t})});l7.displayName=L4e;var c7="AlertDialogCancel",u7=_.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:i}=I4e(c7,n),a=il(n),o=Rt(t,i);return r.jsx(wj,{...a,...s,ref:o})});u7.displayName=c7;var D4e=({contentRef:e})=>{const t=`\`${Kd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Kd}\` by passing a \`${a7}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Kd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return _.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},$4e=e7,F4e=t7,d7=n7,f7=r7,h7=l7,m7=u7,p7=i7,g7=o7;const x7=$4e,z4e=F4e,v7=_.forwardRef(({className:e,...t},n)=>r.jsx(d7,{className:Oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));v7.displayName=d7.displayName;const PA=_.forwardRef(({className:e,...t},n)=>r.jsxs(z4e,{children:[r.jsx(v7,{}),r.jsx(f7,{ref:n,className:Oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));PA.displayName=f7.displayName;const AA=({className:e,...t})=>r.jsx("div",{className:Oe("flex flex-col space-y-2 text-center sm:text-left",e),...t});AA.displayName="AlertDialogHeader";const EA=({className:e,...t})=>r.jsx("div",{className:Oe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});EA.displayName="AlertDialogFooter";const TA=_.forwardRef(({className:e,...t},n)=>r.jsx(p7,{ref:n,className:Oe("text-lg font-semibold",e),...t}));TA.displayName=p7.displayName;const kA=_.forwardRef(({className:e,...t},n)=>r.jsx(g7,{ref:n,className:Oe("text-sm text-muted-foreground",e),...t}));kA.displayName=g7.displayName;const OA=_.forwardRef(({className:e,...t},n)=>r.jsx(h7,{ref:n,className:Oe(CP(),e),...t}));OA.displayName=h7.displayName;const MA=_.forwardRef(({className:e,...t},n)=>r.jsx(m7,{ref:n,className:Oe(CP({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));MA.displayName=m7.displayName;function y7({open:e,onOpenChange:t,onConfirm:n,title:s,description:i,confirmText:a="Confirmer",cancelText:o="Annuler",variant:l="default"}){const c=()=>{n(),t(!1)};return r.jsx(x7,{open:e,onOpenChange:t,children:r.jsxs(PA,{"data-testid":"confirm-dialog",children:[r.jsxs(AA,{children:[r.jsx(TA,{"data-testid":"confirm-dialog-title",children:s}),r.jsx(kA,{"data-testid":"confirm-dialog-description",children:i})]}),r.jsxs(EA,{children:[r.jsx(MA,{"data-testid":"button-cancel",children:o}),r.jsx(OA,{onClick:c,className:l==="destructive"?"bg-red-600 hover:bg-red-700":"","data-testid":"button-confirm",children:a})]})]})})}function B4e(){const{organizations:e,isLoading:t,createOrganization:n,updateOrganization:s,deleteOrganization:i,isCreating:a,isUpdating:o}=RIe(),[l,c]=_.useState(""),[d,f]=_.useState(!1),[h,p]=_.useState(null),[v,j]=_.useState(null),g=e.filter(y=>{var P,E;const A=l.toLowerCase();return y.entityName.toLowerCase().includes(A)||y.entityCode.toLowerCase().includes(A)||((P=y.entityNameFull)==null?void 0:P.toLowerCase().includes(A))||((E=y.countryName)==null?void 0:E.toLowerCase().includes(A))}),x=y=>{n(y),f(!1)},w=y=>{h&&(s({id:h.id,data:y}),p(null))},N=()=>{v&&(i(v.id),j(null))};return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2","data-testid":"page-title",children:"Gestion des Organisations"}),r.jsx("p",{className:"text-gray-600",children:"Grez les diffrentes entits et organisations d'ADS Group"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[r.jsxs("div",{className:"flex-1 min-w-[300px] relative",children:[r.jsx(ls,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx(ge,{placeholder:"Rechercher une organisation...",value:l,onChange:y=>c(y.target.value),className:"pl-10","data-testid":"input-search"})]}),r.jsxs(re,{onClick:()=>f(!0),"data-testid":"button-create-organization",children:[r.jsx(dr,{className:"w-4 h-4 mr-2"}),"Nouvelle organisation"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Total organisations"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900","data-testid":"stat-total",children:e.length})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Organisations actives"}),r.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"stat-active",children:e.filter(y=>y.isActive).length})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Rsultats de recherche"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900","data-testid":"stat-filtered",children:g.length})]})]}),t&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),r.jsx("p",{className:"text-gray-600 mt-4",children:"Chargement des organisations..."})]}),!t&&e.length===0&&r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Aucune organisation trouve"}),r.jsxs(re,{onClick:()=>f(!0),children:[r.jsx(dr,{className:"w-4 h-4 mr-2"}),"Crer la premire organisation"]})]}),!t&&e.length>0&&g.length===0&&r.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:r.jsxs("p",{className:"text-gray-600",children:['Aucune organisation ne correspond  votre recherche "',l,'"']})}),!t&&g.length>0&&r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6","data-testid":"organizations-grid",children:g.map(y=>r.jsx(JRe,{organization:y,onEdit:p,onDelete:j},y.id))}),r.jsx(Wn,{open:d,onOpenChange:f,children:r.jsxs(Fn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(zn,{children:[r.jsx(Bn,{children:"Nouvelle organisation"}),r.jsx(Za,{children:"Crez une nouvelle entit organisationnelle dans le systme"})]}),r.jsx(AL,{onSubmit:x,onCancel:()=>f(!1),isSubmitting:a})]})}),r.jsx(Wn,{open:!!h,onOpenChange:y=>!y&&p(null),children:r.jsxs(Fn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(zn,{children:[r.jsx(Bn,{children:"Modifier l'organisation"}),r.jsx(Za,{children:"Modifiez les informations de l'organisation"})]}),h&&r.jsx(AL,{organization:h,onSubmit:w,onCancel:()=>p(null),isSubmitting:o})]})}),r.jsx(y7,{open:!!v,onOpenChange:y=>!y&&j(null),onConfirm:N,title:"Supprimer l'organisation",description:`tes-vous sr de vouloir supprimer l'organisation "${v==null?void 0:v.entityName}" ? Cette action est irrversible.`,confirmText:"Supprimer",variant:"destructive"})]})}const go="/api/admin/teams",wi={async getAll(){const e=await fetch(go);if(!e.ok)throw new Error("Erreur lors du chargement des quipes");return e.json()},async getById(e){const t=await fetch(`${go}/${e}`);if(!t.ok)throw new Error("quipe non trouve");return t.json()},async create(e){const t=await fetch(go,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.error||"Erreur lors de la cration")}return t.json()},async update(e,t){const n=await fetch(`${go}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const s=await n.json();throw new Error(s.error||"Erreur lors de la mise  jour")}return n.json()},async delete(e){const t=await fetch(`${go}/${e}`,{method:"DELETE"});if(!t.ok){const n=await t.json();throw new Error(n.error||"Erreur lors de la suppression")}},async getStats(){const e=await fetch(`${go}/stats`);if(!e.ok)throw new Error("Erreur lors du chargement des statistiques");return e.json()},async addMember(e,t){const n=await fetch(`${go}/${e}/members`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,teamId:e})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Erreur lors de l'ajout du membre")}return n.json()},async removeMember(e,t){const n=await fetch(`${go}/${e}/members/${t}`,{method:"DELETE"});if(!n.ok){const s=await n.json();throw new Error(s.error||"Erreur lors du retrait du membre")}},async updateMemberRole(e,t,n){const s=await fetch(`${go}/${e}/members/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:n})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Erreur lors de la mise  jour du rle")}return s.json()}},fl="/api/admin/teams";function V4e(){const{toast:e}=At(),t=Ke({queryKey:[fl],queryFn:wi.getAll}),n=Ke({queryKey:[fl,"stats"],queryFn:wi.getStats}),s=dt({mutationFn:d=>wi.create(d),onSuccess:()=>{et.invalidateQueries({queryKey:[fl]}),e({title:"Succs",description:"quipe cre avec succs"})},onError:d=>{e({title:"Erreur",description:d.message,variant:"destructive"})}}),i=dt({mutationFn:({id:d,data:f})=>wi.update(d,f),onSuccess:()=>{et.invalidateQueries({queryKey:[fl]}),e({title:"Succs",description:"quipe mise  jour avec succs"})},onError:d=>{e({title:"Erreur",description:d.message,variant:"destructive"})}}),a=dt({mutationFn:d=>wi.delete(d),onSuccess:()=>{et.invalidateQueries({queryKey:[fl]}),e({title:"Succs",description:"quipe supprime avec succs"})},onError:d=>{e({title:"Erreur",description:d.message,variant:"destructive"})}}),o=dt({mutationFn:({teamId:d,data:f})=>wi.addMember(d,f),onSuccess:()=>{et.invalidateQueries({queryKey:[fl]}),e({title:"Succs",description:"Membre ajout avec succs"})},onError:d=>{e({title:"Erreur",description:d.message,variant:"destructive"})}}),l=dt({mutationFn:({teamId:d,memberId:f})=>wi.removeMember(d,f),onSuccess:()=>{et.invalidateQueries({queryKey:[fl]}),e({title:"Succs",description:"Membre retir avec succs"})},onError:d=>{e({title:"Erreur",description:d.message,variant:"destructive"})}}),c=dt({mutationFn:({teamId:d,memberId:f,role:h})=>wi.updateMemberRole(d,f,h),onSuccess:()=>{et.invalidateQueries({queryKey:[fl]}),e({title:"Succs",description:"Rle mis  jour avec succs"})},onError:d=>{e({title:"Erreur",description:d.message,variant:"destructive"})}});return{teams:t.data??[],stats:n.data,isLoading:t.isLoading,isStatsLoading:n.isLoading,createTeam:s.mutateAsync,updateTeam:i.mutateAsync,deleteTeam:a.mutateAsync,addMember:o.mutateAsync,removeMember:l.mutateAsync,updateMemberRole:c.mutateAsync,isCreating:s.isPending,isUpdating:i.isPending,isDeleting:a.isPending,isAddingMember:o.isPending,isRemovingMember:l.isPending,isUpdatingRole:c.isPending}}const Ae=Symbol.for("drizzle:entityKind");function vr(e,t){if(!e||typeof e!="object")return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,Ae))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(e).constructor;if(n)for(;n;){if(Ae in n&&n[Ae]===t[Ae])return!0;n=Object.getPrototypeOf(n)}return!1}var l4;l4=Ae;class Jf{constructor(t,n){ae(this,"name");ae(this,"keyAsName");ae(this,"primary");ae(this,"notNull");ae(this,"default");ae(this,"defaultFn");ae(this,"onUpdateFn");ae(this,"hasDefault");ae(this,"isUnique");ae(this,"uniqueName");ae(this,"uniqueType");ae(this,"dataType");ae(this,"columnType");ae(this,"enumValues");ae(this,"generated");ae(this,"generatedIdentity");ae(this,"config");this.table=t,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}ae(Jf,l4,"Column");var c4;c4=Ae;class b7{constructor(t,n,s){ae(this,"config");ae(this,"$default",this.$defaultFn);ae(this,"$onUpdate",this.$onUpdateFn);this.config={name:t,keyAsName:t==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:s,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){this.config.name===""&&(this.config.name=t)}}ae(b7,c4,"ColumnBuilder");const Gd=Symbol.for("drizzle:Name");var u4;u4=Ae;class j7{constructor(t,n){ae(this,"reference");ae(this,"_onUpdate","no action");ae(this,"_onDelete","no action");this.reference=()=>{const{name:s,columns:i,foreignColumns:a}=t();return{name:s,columns:i,foreignTable:a[0].table,foreignColumns:a}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(t){return this._onUpdate=t===void 0?"no action":t,this}onDelete(t){return this._onDelete=t===void 0?"no action":t,this}build(t){return new _7(t,this)}}ae(j7,u4,"PgForeignKeyBuilder");var d4;d4=Ae;class _7{constructor(t,n){ae(this,"reference");ae(this,"onUpdate");ae(this,"onDelete");this.table=t,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}getName(){const{name:t,columns:n,foreignColumns:s}=this.reference(),i=n.map(l=>l.name),a=s.map(l=>l.name),o=[this.table[Gd],...i,s[0].table[Gd],...a];return t??`${o.join("_")}_fk`}}ae(_7,d4,"PgForeignKey");function q4e(e,...t){return e(...t)}function U4e(e,t){return`${e[Gd]}_${t.join("_")}_unique`}function EL(e,t,n){for(let s=t;s<e.length;s++){const i=e[s];if(i==="\\"){s++;continue}if(i==='"')return[e.slice(t,s).replace(/\\/g,""),s+1];if(!n&&(i===","||i==="}"))return[e.slice(t,s).replace(/\\/g,""),s]}return[e.slice(t).replace(/\\/g,""),e.length]}function w7(e,t=0){const n=[];let s=t,i=!1;for(;s<e.length;){const a=e[s];if(a===","){(i||s===t)&&n.push(""),i=!0,s++;continue}if(i=!1,a==="\\"){s+=2;continue}if(a==='"'){const[c,d]=EL(e,s+1,!0);n.push(c),s=d;continue}if(a==="}")return[n,s+1];if(a==="{"){const[c,d]=w7(e,s+1);n.push(c),s=d;continue}const[o,l]=EL(e,s,!1);n.push(o),s=l}return[n,s]}function H4e(e){const[t]=w7(e,1);return t}function N7(e){return`{${e.map(t=>Array.isArray(t)?N7(t):typeof t=="string"?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}var f4,h4;class tn extends(h4=b7,f4=Ae,h4){constructor(){super(...arguments);ae(this,"foreignKeyConfigs",[])}array(n){return new C7(this.config.name,this,n)}references(n,s={}){return this.foreignKeyConfigs.push({ref:n,actions:s}),this}unique(n,s){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=s==null?void 0:s.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,s){return this.foreignKeyConfigs.map(({ref:i,actions:a})=>q4e((o,l)=>{const c=new j7(()=>{const d=o();return{columns:[n],foreignColumns:[d]}});return l.onUpdate&&c.onUpdate(l.onUpdate),l.onDelete&&c.onDelete(l.onDelete),c.build(s)},i,a))}buildExtraConfigColumn(n){return new S7(n,this.config)}}ae(tn,f4,"PgColumnBuilder");var m4,p4;class Bt extends(p4=Jf,m4=Ae,p4){constructor(t,n){n.uniqueName||(n.uniqueName=U4e(t,[n.name])),super(t,n),this.table=t}}ae(Bt,m4,"PgColumn");var g4,x4;class S7 extends(x4=Bt,g4=Ae,x4){constructor(){super(...arguments);ae(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});ae(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}ae(S7,g4,"ExtraConfigColumn");var v4;v4=Ae;class Tv{constructor(t,n,s,i){ae(this,"name");ae(this,"keyAsName");ae(this,"type");ae(this,"indexConfig");this.name=t,this.keyAsName=n,this.type=s,this.indexConfig=i}}ae(Tv,v4,"IndexedColumn");var y4,b4;class C7 extends(b4=tn,y4=Ae,b4){constructor(t,n,s){super(t,"array","PgArray"),this.config.baseBuilder=n,this.config.size=s}build(t){const n=this.config.baseBuilder.build(t);return new VS(t,this.config,n)}}ae(C7,y4,"PgArrayBuilder");var j4,_4;const Vb=class Vb extends(_4=Bt,j4=Ae,_4){constructor(n,s,i,a){super(n,s);ae(this,"size");this.baseColumn=i,this.range=a,this.size=s.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(n){return typeof n=="string"&&(n=H4e(n)),n.map(s=>this.baseColumn.mapFromDriverValue(s))}mapToDriverValue(n,s=!1){const i=n.map(a=>a===null?null:vr(this.baseColumn,Vb)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return s?i:N7(i)}};ae(Vb,j4,"PgArray");let VS=Vb;const TL=Symbol.for("drizzle:isPgEnum");function W4e(e){return!!e&&typeof e=="function"&&TL in e&&e[TL]===!0}var w4;w4=Ae;class IA{constructor(t,n,s,i=!1){this._={brand:"Subquery",sql:t,selectedFields:n,alias:s,isWith:i}}}ae(IA,w4,"Subquery");const K4e={startActiveSpan(e,t){return t()}},Zd=Symbol.for("drizzle:ViewBaseConfig"),Pw=Symbol.for("drizzle:Schema"),kL=Symbol.for("drizzle:Columns"),OL=Symbol.for("drizzle:ExtraConfigColumns"),Aw=Symbol.for("drizzle:OriginalName"),Ew=Symbol.for("drizzle:BaseName"),Db=Symbol.for("drizzle:IsAlias"),ML=Symbol.for("drizzle:ExtraConfigBuilder"),P7=Symbol.for("drizzle:IsDrizzleTable");var N4,S4,C4,P4,A4,E4,T4,k4,O4,M4;M4=Ae,O4=Gd,k4=Aw,T4=Pw,E4=kL,A4=OL,P4=Ew,C4=Db,S4=P7,N4=ML;class ys{constructor(t,n,s){ae(this,O4);ae(this,k4);ae(this,T4);ae(this,E4);ae(this,A4);ae(this,P4);ae(this,C4,!1);ae(this,S4,!0);ae(this,N4);this[Gd]=this[Aw]=t,this[Pw]=n,this[Ew]=s}}ae(ys,M4,"Table"),ae(ys,"Symbol",{Name:Gd,Schema:Pw,OriginalName:Aw,Columns:kL,ExtraConfigColumns:OL,BaseName:Ew,IsAlias:Db,ExtraConfigBuilder:ML});function A7(e){return typeof e=="object"&&e!==null&&P7 in e}function G4e(e){return e!=null&&typeof e.getSQL=="function"}function Z4e(e){var n;const t={sql:"",params:[]};for(const s of e)t.sql+=s.sql,t.params.push(...s.params),(n=s.typings)!=null&&n.length&&(t.typings||(t.typings=[]),t.typings.push(...s.typings));return t}var I4;I4=Ae;class Ni{constructor(t){ae(this,"value");this.value=Array.isArray(t)?t:[t]}getSQL(){return new ar([this])}}ae(Ni,I4,"StringChunk");var R4;R4=Ae;const Lc=class Lc{constructor(t){ae(this,"decoder",E7);ae(this,"shouldInlineParams",!1);this.queryChunks=t}append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return K4e.startActiveSpan("drizzle.buildSQL",n=>{const s=this.buildQueryFromSourceParams(this.queryChunks,t);return n==null||n.setAttributes({"drizzle.query.text":s.sql,"drizzle.query.params":JSON.stringify(s.params)}),s})}buildQueryFromSourceParams(t,n){const s=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:i,escapeName:a,escapeParam:o,prepareTyping:l,inlineParams:c,paramStartIndex:d}=s;return Z4e(t.map(f=>{var h;if(vr(f,Ni))return{sql:f.value.join(""),params:[]};if(vr(f,$b))return{sql:a(f.value),params:[]};if(f===void 0)return{sql:"",params:[]};if(Array.isArray(f)){const p=[new Ni("(")];for(const[v,j]of f.entries())p.push(j),v<f.length-1&&p.push(new Ni(", "));return p.push(new Ni(")")),this.buildQueryFromSourceParams(p,s)}if(vr(f,Lc))return this.buildQueryFromSourceParams(f.queryChunks,{...s,inlineParams:c||f.shouldInlineParams});if(vr(f,ys)){const p=f[ys.Symbol.Schema],v=f[ys.Symbol.Name];return{sql:p===void 0||f[Db]?a(v):a(p)+"."+a(v),params:[]}}if(vr(f,Jf)){const p=i.getColumnCasing(f);if(n.invokeSource==="indexes")return{sql:a(p),params:[]};const v=f.table[ys.Symbol.Schema];return{sql:f.table[Db]||v===void 0?a(f.table[ys.Symbol.Name])+"."+a(p):a(v)+"."+a(f.table[ys.Symbol.Name])+"."+a(p),params:[]}}if(vr(f,O7)){const p=f[Zd].schema,v=f[Zd].name;return{sql:p===void 0||f[Zd].isAlias?a(v):a(p)+"."+a(v),params:[]}}if(vr(f,RA)){if(vr(f.value,Fb))return{sql:o(d.value++,f),params:[f],typings:["none"]};const p=f.value===null?null:f.encoder.mapToDriverValue(f.value);if(vr(p,Lc))return this.buildQueryFromSourceParams([p],s);if(c)return{sql:this.mapInlineParam(p,s),params:[]};let v=["none"];return l&&(v=[l(f.encoder)]),{sql:o(d.value++,p),params:[p],typings:v}}return vr(f,Fb)?{sql:o(d.value++,f),params:[f],typings:["none"]}:vr(f,Lc.Aliased)&&f.fieldAlias!==void 0?{sql:a(f.fieldAlias),params:[]}:vr(f,IA)?f._.isWith?{sql:a(f._.alias),params:[]}:this.buildQueryFromSourceParams([new Ni("("),f._.sql,new Ni(") "),new $b(f._.alias)],s):W4e(f)?f.schema?{sql:a(f.schema)+"."+a(f.enumName),params:[]}:{sql:a(f.enumName),params:[]}:G4e(f)?(h=f.shouldOmitSQLParens)!=null&&h.call(f)?this.buildQueryFromSourceParams([f.getSQL()],s):this.buildQueryFromSourceParams([new Ni("("),f.getSQL(),new Ni(")")],s):c?{sql:this.mapInlineParam(f,s),params:[]}:{sql:o(d.value++,f),params:[f],typings:["none"]}}))}mapInlineParam(t,{escapeString:n}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return t.toString();if(typeof t=="string")return n(t);if(typeof t=="object"){const s=t.toString();return n(s==="[object Object]"?JSON.stringify(t):s)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new Lc.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}};ae(Lc,R4,"SQL");let ar=Lc;var L4;L4=Ae;class $b{constructor(t){ae(this,"brand");this.value=t}getSQL(){return new ar([this])}}ae($b,L4,"Name");const E7={mapFromDriverValue:e=>e},T7={mapToDriverValue:e=>e};({...E7,...T7});var D4;D4=Ae;class RA{constructor(t,n=T7){ae(this,"brand");this.value=t,this.encoder=n}getSQL(){return new ar([this])}}ae(RA,D4,"Param");function Le(e,...t){const n=[];(t.length>0||e.length>0&&e[0]!=="")&&n.push(new Ni(e[0]));for(const[s,i]of t.entries())n.push(i,new Ni(e[s+1]));return new ar(n)}(e=>{function t(){return new ar([])}e.empty=t;function n(c){return new ar(c)}e.fromList=n;function s(c){return new ar([new Ni(c)])}e.raw=s;function i(c,d){const f=[];for(const[h,p]of c.entries())h>0&&d!==void 0&&f.push(d),f.push(p);return new ar(f)}e.join=i;function a(c){return new $b(c)}e.identifier=a;function o(c){return new Fb(c)}e.placeholder=o;function l(c,d){return new RA(c,d)}e.param=l})(Le||(Le={}));(e=>{var n;n=Ae;const s=class s{constructor(a,o){ae(this,"isSelectionField",!1);this.sql=a,this.fieldAlias=o}getSQL(){return this.sql}clone(){return new s(this.sql,this.fieldAlias)}};ae(s,n,"SQL.Aliased");let t=s;e.Aliased=t})(ar||(ar={}));var $4;$4=Ae;class Fb{constructor(t){this.name=t}getSQL(){return new ar([this])}}ae(Fb,$4,"Placeholder");const k7=Symbol.for("drizzle:IsDrizzleView");var F4,z4,B4;B4=Ae,z4=Zd,F4=k7;class O7{constructor({name:t,schema:n,selectedFields:s,query:i}){ae(this,z4);ae(this,F4,!0);this[Zd]={name:t,originalName:t,schema:n,selectedFields:s,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new ar([this])}}ae(O7,B4,"View");function Q4e(e){return typeof e=="object"&&e!==null&&k7 in e}Jf.prototype.getSQL=function(){return new ar([this])};ys.prototype.getSQL=function(){return new ar([this])};IA.prototype.getSQL=function(){return new ar([this])};function Y4e(e){return e[ys.Symbol.Columns]}function X4e(e){return e[Zd].selectedFields}function Ur(e,t){return{name:typeof e=="string"&&e.length>0?e:"",config:typeof e=="object"?e:t}}var V4,q4;class qg extends(q4=tn,V4=Ae,q4){generatedAlwaysAsIdentity(t){if(t){const{name:n,...s}=t;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:s}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){const{name:n,...s}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:s}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}ae(qg,V4,"PgIntColumnBaseBuilder");var U4,H4;class M7 extends(H4=qg,U4=Ae,H4){constructor(t){super(t,"number","PgBigInt53")}build(t){return new I7(t,this.config)}}ae(M7,U4,"PgBigInt53Builder");var W4,K4;class I7 extends(K4=Bt,W4=Ae,K4){getSQLType(){return"bigint"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}ae(I7,W4,"PgBigInt53");var G4,Z4;class R7 extends(Z4=qg,G4=Ae,Z4){constructor(t){super(t,"bigint","PgBigInt64")}build(t){return new L7(t,this.config)}}ae(R7,G4,"PgBigInt64Builder");var Q4,Y4;class L7 extends(Y4=Bt,Q4=Ae,Y4){getSQLType(){return"bigint"}mapFromDriverValue(t){return BigInt(t)}}ae(L7,Q4,"PgBigInt64");function J4e(e,t){const{name:n,config:s}=Ur(e,t);return s.mode==="number"?new M7(n):new R7(n)}var X4,J4;class D7 extends(J4=tn,X4=Ae,J4){constructor(t){super(t,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new $7(t,this.config)}}ae(D7,X4,"PgBigSerial53Builder");var eD,tD;class $7 extends(tD=Bt,eD=Ae,tD){getSQLType(){return"bigserial"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}ae($7,eD,"PgBigSerial53");var nD,rD;class F7 extends(rD=tn,nD=Ae,rD){constructor(t){super(t,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(t){return new z7(t,this.config)}}ae(F7,nD,"PgBigSerial64Builder");var sD,iD;class z7 extends(iD=Bt,sD=Ae,iD){getSQLType(){return"bigserial"}mapFromDriverValue(t){return BigInt(t)}}ae(z7,sD,"PgBigSerial64");function eDe(e,t){const{name:n,config:s}=Ur(e,t);return s.mode==="number"?new D7(n):new F7(n)}var aD,oD;class B7 extends(oD=tn,aD=Ae,oD){constructor(t){super(t,"boolean","PgBoolean")}build(t){return new V7(t,this.config)}}ae(B7,aD,"PgBooleanBuilder");var lD,cD;class V7 extends(cD=Bt,lD=Ae,cD){getSQLType(){return"boolean"}}ae(V7,lD,"PgBoolean");function Lt(e){return new B7(e??"")}var uD,dD;class q7 extends(dD=tn,uD=Ae,dD){constructor(t,n){super(t,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new U7(t,this.config)}}ae(q7,uD,"PgCharBuilder");var fD,hD;class U7 extends(hD=Bt,fD=Ae,hD){constructor(){super(...arguments);ae(this,"length",this.config.length);ae(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}ae(U7,fD,"PgChar");function tDe(e,t={}){const{name:n,config:s}=Ur(e,t);return new q7(n,s)}var mD,pD;class H7 extends(pD=tn,mD=Ae,pD){constructor(t){super(t,"string","PgCidr")}build(t){return new W7(t,this.config)}}ae(H7,mD,"PgCidrBuilder");var gD,xD;class W7 extends(xD=Bt,gD=Ae,xD){getSQLType(){return"cidr"}}ae(W7,gD,"PgCidr");function nDe(e){return new H7(e??"")}var vD,yD;class K7 extends(yD=tn,vD=Ae,yD){constructor(t,n,s){super(t,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=s}build(t){return new G7(t,this.config)}}ae(K7,vD,"PgCustomColumnBuilder");var bD,jD;class G7 extends(jD=Bt,bD=Ae,jD){constructor(n,s){super(n,s);ae(this,"sqlName");ae(this,"mapTo");ae(this,"mapFrom");this.sqlName=s.customTypeParams.dataType(s.fieldConfig),this.mapTo=s.customTypeParams.toDriver,this.mapFrom=s.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(n){return typeof this.mapFrom=="function"?this.mapFrom(n):n}mapToDriverValue(n){return typeof this.mapTo=="function"?this.mapTo(n):n}}ae(G7,bD,"PgCustomColumn");function rDe(e){return(t,n)=>{const{name:s,config:i}=Ur(t,n);return new K7(s,i,e)}}var _D,wD;class Ah extends(wD=tn,_D=Ae,wD){defaultNow(){return this.default(Le`now()`)}}ae(Ah,_D,"PgDateColumnBaseBuilder");var ND,SD;class Z7 extends(SD=Ah,ND=Ae,SD){constructor(t){super(t,"date","PgDate")}build(t){return new Q7(t,this.config)}}ae(Z7,ND,"PgDateBuilder");var CD,PD;class Q7 extends(PD=Bt,CD=Ae,PD){getSQLType(){return"date"}mapFromDriverValue(t){return new Date(t)}mapToDriverValue(t){return t.toISOString()}}ae(Q7,CD,"PgDate");var AD,ED;class Y7 extends(ED=Ah,AD=Ae,ED){constructor(t){super(t,"string","PgDateString")}build(t){return new X7(t,this.config)}}ae(Y7,AD,"PgDateStringBuilder");var TD,kD;class X7 extends(kD=Bt,TD=Ae,kD){getSQLType(){return"date"}}ae(X7,TD,"PgDateString");function bn(e,t){const{name:n,config:s}=Ur(e,t);return(s==null?void 0:s.mode)==="date"?new Z7(n):new Y7(n)}var OD,MD;class J7 extends(MD=tn,OD=Ae,MD){constructor(t){super(t,"number","PgDoublePrecision")}build(t){return new eK(t,this.config)}}ae(J7,OD,"PgDoublePrecisionBuilder");var ID,RD;class eK extends(RD=Bt,ID=Ae,RD){getSQLType(){return"double precision"}mapFromDriverValue(t){return typeof t=="string"?Number.parseFloat(t):t}}ae(eK,ID,"PgDoublePrecision");function sDe(e){return new J7(e??"")}var LD,DD;class tK extends(DD=tn,LD=Ae,DD){constructor(t){super(t,"string","PgInet")}build(t){return new nK(t,this.config)}}ae(tK,LD,"PgInetBuilder");var $D,FD;class nK extends(FD=Bt,$D=Ae,FD){getSQLType(){return"inet"}}ae(nK,$D,"PgInet");function iDe(e){return new tK(e??"")}var zD,BD;class rK extends(BD=qg,zD=Ae,BD){constructor(t){super(t,"number","PgInteger")}build(t){return new sK(t,this.config)}}ae(rK,zD,"PgIntegerBuilder");var VD,qD;class sK extends(qD=Bt,VD=Ae,qD){getSQLType(){return"integer"}mapFromDriverValue(t){return typeof t=="string"?Number.parseInt(t):t}}ae(sK,VD,"PgInteger");function xe(e){return new rK(e??"")}var UD,HD;class iK extends(HD=tn,UD=Ae,HD){constructor(t,n){super(t,"string","PgInterval"),this.config.intervalConfig=n}build(t){return new aK(t,this.config)}}ae(iK,UD,"PgIntervalBuilder");var WD,KD;class aK extends(KD=Bt,WD=Ae,KD){constructor(){super(...arguments);ae(this,"fields",this.config.intervalConfig.fields);ae(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const n=this.fields?` ${this.fields}`:"",s=this.precision?`(${this.precision})`:"";return`interval${n}${s}`}}ae(aK,WD,"PgInterval");function aDe(e,t={}){const{name:n,config:s}=Ur(e,t);return new iK(n,s)}var GD,ZD;class oK extends(ZD=tn,GD=Ae,ZD){constructor(t){super(t,"json","PgJson")}build(t){return new lK(t,this.config)}}ae(oK,GD,"PgJsonBuilder");var QD,YD;class lK extends(YD=Bt,QD=Ae,YD){constructor(t,n){super(t,n)}getSQLType(){return"json"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}ae(lK,QD,"PgJson");function oDe(e){return new oK(e??"")}var XD,JD;class cK extends(JD=tn,XD=Ae,JD){constructor(t){super(t,"json","PgJsonb")}build(t){return new uK(t,this.config)}}ae(cK,XD,"PgJsonbBuilder");var e$,t$;class uK extends(t$=Bt,e$=Ae,t$){constructor(t,n){super(t,n)}getSQLType(){return"jsonb"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}ae(uK,e$,"PgJsonb");function vt(e){return new cK(e??"")}var n$,r$;class dK extends(r$=tn,n$=Ae,r$){constructor(t){super(t,"array","PgLine")}build(t){return new fK(t,this.config)}}ae(dK,n$,"PgLineBuilder");var s$,i$;class fK extends(i$=Bt,s$=Ae,i$){getSQLType(){return"line"}mapFromDriverValue(t){const[n,s,i]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(s),Number.parseFloat(i)]}mapToDriverValue(t){return`{${t[0]},${t[1]},${t[2]}}`}}ae(fK,s$,"PgLine");var a$,o$;class hK extends(o$=tn,a$=Ae,o$){constructor(t){super(t,"json","PgLineABC")}build(t){return new mK(t,this.config)}}ae(hK,a$,"PgLineABCBuilder");var l$,c$;class mK extends(c$=Bt,l$=Ae,c$){getSQLType(){return"line"}mapFromDriverValue(t){const[n,s,i]=t.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(s),c:Number.parseFloat(i)}}mapToDriverValue(t){return`{${t.a},${t.b},${t.c}}`}}ae(mK,l$,"PgLineABC");function lDe(e,t){const{name:n,config:s}=Ur(e,t);return!(s!=null&&s.mode)||s.mode==="tuple"?new dK(n):new hK(n)}var u$,d$;class pK extends(d$=tn,u$=Ae,d$){constructor(t){super(t,"string","PgMacaddr")}build(t){return new gK(t,this.config)}}ae(pK,u$,"PgMacaddrBuilder");var f$,h$;class gK extends(h$=Bt,f$=Ae,h$){getSQLType(){return"macaddr"}}ae(gK,f$,"PgMacaddr");function cDe(e){return new pK(e??"")}var m$,p$;class xK extends(p$=tn,m$=Ae,p$){constructor(t){super(t,"string","PgMacaddr8")}build(t){return new vK(t,this.config)}}ae(xK,m$,"PgMacaddr8Builder");var g$,x$;class vK extends(x$=Bt,g$=Ae,x$){getSQLType(){return"macaddr8"}}ae(vK,g$,"PgMacaddr8");function uDe(e){return new xK(e??"")}var v$,y$;class yK extends(y$=tn,v$=Ae,y$){constructor(t,n,s){super(t,"string","PgNumeric"),this.config.precision=n,this.config.scale=s}build(t){return new bK(t,this.config)}}ae(yK,v$,"PgNumericBuilder");var b$,j$;class bK extends(j$=Bt,b$=Ae,j$){constructor(n,s){super(n,s);ae(this,"precision");ae(this,"scale");this.precision=s.precision,this.scale=s.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}ae(bK,b$,"PgNumeric");function jK(e,t){const{name:n,config:s}=Ur(e,t);return new yK(n,s==null?void 0:s.precision,s==null?void 0:s.scale)}const _t=jK;var _$,w$;class _K extends(w$=tn,_$=Ae,w$){constructor(t){super(t,"array","PgPointTuple")}build(t){return new wK(t,this.config)}}ae(_K,_$,"PgPointTupleBuilder");var N$,S$;class wK extends(S$=Bt,N$=Ae,S$){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,s]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(s)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}}ae(wK,N$,"PgPointTuple");var C$,P$;class NK extends(P$=tn,C$=Ae,P$){constructor(t){super(t,"json","PgPointObject")}build(t){return new SK(t,this.config)}}ae(NK,C$,"PgPointObjectBuilder");var A$,E$;class SK extends(E$=Bt,A$=Ae,E$){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,s]=t.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(s)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}}ae(SK,A$,"PgPointObject");function dDe(e,t){const{name:n,config:s}=Ur(e,t);return!(s!=null&&s.mode)||s.mode==="tuple"?new _K(n):new NK(n)}function fDe(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(Number.parseInt(e.slice(n,n+2),16));return new Uint8Array(t)}function IL(e,t){const n=new ArrayBuffer(8),s=new DataView(n);for(let i=0;i<8;i++)s.setUint8(i,e[t+i]);return s.getFloat64(0,!0)}function CK(e){const t=fDe(e);let n=0;const s=t[n];n+=1;const i=new DataView(t.buffer),a=i.getUint32(n,s===1);if(n+=4,a&536870912&&(i.getUint32(n,s===1),n+=4),(a&65535)===1){const o=IL(t,n);n+=8;const l=IL(t,n);return n+=8,[o,l]}throw new Error("Unsupported geometry type")}var T$,k$;class PK extends(k$=tn,T$=Ae,k$){constructor(t){super(t,"array","PgGeometry")}build(t){return new AK(t,this.config)}}ae(PK,T$,"PgGeometryBuilder");var O$,M$;class AK extends(M$=Bt,O$=Ae,M$){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return CK(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}}ae(AK,O$,"PgGeometry");var I$,R$;class EK extends(R$=tn,I$=Ae,R$){constructor(t){super(t,"json","PgGeometryObject")}build(t){return new TK(t,this.config)}}ae(EK,I$,"PgGeometryObjectBuilder");var L$,D$;class TK extends(D$=Bt,L$=Ae,D$){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){const n=CK(t);return{x:n[0],y:n[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}}ae(TK,L$,"PgGeometryObject");function hDe(e,t){const{name:n,config:s}=Ur(e,t);return!(s!=null&&s.mode)||s.mode==="tuple"?new PK(n):new EK(n)}var $$,F$;class kK extends(F$=tn,$$=Ae,F$){constructor(t,n){super(t,"number","PgReal"),this.config.length=n}build(t){return new OK(t,this.config)}}ae(kK,$$,"PgRealBuilder");var z$,B$;class OK extends(B$=Bt,z$=Ae,B$){constructor(n,s){super(n,s);ae(this,"mapFromDriverValue",n=>typeof n=="string"?Number.parseFloat(n):n)}getSQLType(){return"real"}}ae(OK,z$,"PgReal");function mDe(e){return new kK(e??"")}var V$,q$;class MK extends(q$=tn,V$=Ae,q$){constructor(t){super(t,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new IK(t,this.config)}}ae(MK,V$,"PgSerialBuilder");var U$,H$;class IK extends(H$=Bt,U$=Ae,H$){getSQLType(){return"serial"}}ae(IK,U$,"PgSerial");function pDe(e){return new MK(e??"")}var W$,K$;class RK extends(K$=qg,W$=Ae,K$){constructor(t){super(t,"number","PgSmallInt")}build(t){return new LK(t,this.config)}}ae(RK,W$,"PgSmallIntBuilder");var G$,Z$;class LK extends(Z$=Bt,G$=Ae,Z$){constructor(){super(...arguments);ae(this,"mapFromDriverValue",n=>typeof n=="string"?Number(n):n)}getSQLType(){return"smallint"}}ae(LK,G$,"PgSmallInt");function gDe(e){return new RK(e??"")}var Q$,Y$;class DK extends(Y$=tn,Q$=Ae,Y$){constructor(t){super(t,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new $K(t,this.config)}}ae(DK,Q$,"PgSmallSerialBuilder");var X$,J$;class $K extends(J$=Bt,X$=Ae,J$){getSQLType(){return"smallserial"}}ae($K,X$,"PgSmallSerial");function xDe(e){return new DK(e??"")}var e3,t3;class FK extends(t3=tn,e3=Ae,t3){constructor(t,n){super(t,"string","PgText"),this.config.enumValues=n.enum}build(t){return new zK(t,this.config)}}ae(FK,e3,"PgTextBuilder");var n3,r3;class zK extends(r3=Bt,n3=Ae,r3){constructor(){super(...arguments);ae(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}ae(zK,n3,"PgText");function be(e,t={}){const{name:n,config:s}=Ur(e,t);return new FK(n,s)}var s3,i3;class BK extends(i3=Ah,s3=Ae,i3){constructor(t,n,s){super(t,"string","PgTime"),this.withTimezone=n,this.precision=s,this.config.withTimezone=n,this.config.precision=s}build(t){return new VK(t,this.config)}}ae(BK,s3,"PgTimeBuilder");var a3,o3;class VK extends(o3=Bt,a3=Ae,o3){constructor(n,s){super(n,s);ae(this,"withTimezone");ae(this,"precision");this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}ae(VK,a3,"PgTime");function Qd(e,t={}){const{name:n,config:s}=Ur(e,t);return new BK(n,s.withTimezone??!1,s.precision)}var l3,c3;class qK extends(c3=Ah,l3=Ae,c3){constructor(t,n,s){super(t,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=s}build(t){return new UK(t,this.config)}}ae(qK,l3,"PgTimestampBuilder");var u3,d3;class UK extends(d3=Bt,u3=Ae,d3){constructor(n,s){super(n,s);ae(this,"withTimezone");ae(this,"precision");ae(this,"mapFromDriverValue",n=>new Date(this.withTimezone?n:n+"+0000"));ae(this,"mapToDriverValue",n=>n.toISOString());this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}ae(UK,u3,"PgTimestamp");var f3,h3;class HK extends(h3=Ah,f3=Ae,h3){constructor(t,n,s){super(t,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=s}build(t){return new WK(t,this.config)}}ae(HK,f3,"PgTimestampStringBuilder");var m3,p3;class WK extends(p3=Bt,m3=Ae,p3){constructor(n,s){super(n,s);ae(this,"withTimezone");ae(this,"precision");this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}ae(WK,m3,"PgTimestampString");function le(e,t={}){const{name:n,config:s}=Ur(e,t);return(s==null?void 0:s.mode)==="string"?new HK(n,s.withTimezone??!1,s.precision):new qK(n,(s==null?void 0:s.withTimezone)??!1,s==null?void 0:s.precision)}var g3,x3;class KK extends(x3=tn,g3=Ae,x3){constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(Le`gen_random_uuid()`)}build(t){return new GK(t,this.config)}}ae(KK,g3,"PgUUIDBuilder");var v3,y3;class GK extends(y3=Bt,v3=Ae,y3){getSQLType(){return"uuid"}}ae(GK,v3,"PgUUID");function Xo(e){return new KK(e??"")}var b3,j3;class ZK extends(j3=tn,b3=Ae,j3){constructor(t,n){super(t,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new QK(t,this.config)}}ae(ZK,b3,"PgVarcharBuilder");var _3,w3;class QK extends(w3=Bt,_3=Ae,w3){constructor(){super(...arguments);ae(this,"length",this.config.length);ae(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}ae(QK,_3,"PgVarchar");function M(e,t={}){const{name:n,config:s}=Ur(e,t);return new ZK(n,s)}var N3,S3;class YK extends(S3=tn,N3=Ae,S3){constructor(t,n){super(t,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(t){return new XK(t,this.config)}}ae(YK,N3,"PgBinaryVectorBuilder");var C3,P3;class XK extends(P3=Bt,C3=Ae,P3){constructor(){super(...arguments);ae(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}ae(XK,C3,"PgBinaryVector");function vDe(e,t){const{name:n,config:s}=Ur(e,t);return new YK(n,s)}var A3,E3;class JK extends(E3=tn,A3=Ae,E3){constructor(t,n){super(t,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(t){return new eG(t,this.config)}}ae(JK,A3,"PgHalfVectorBuilder");var T3,k3;class eG extends(k3=Bt,T3=Ae,k3){constructor(){super(...arguments);ae(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(s=>Number.parseFloat(s))}}ae(eG,T3,"PgHalfVector");function yDe(e,t){const{name:n,config:s}=Ur(e,t);return new JK(n,s)}var O3,M3;class tG extends(M3=tn,O3=Ae,M3){constructor(t,n){super(t,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(t){return new nG(t,this.config)}}ae(tG,O3,"PgSparseVectorBuilder");var I3,R3;class nG extends(R3=Bt,I3=Ae,R3){constructor(){super(...arguments);ae(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}ae(nG,I3,"PgSparseVector");function bDe(e,t){const{name:n,config:s}=Ur(e,t);return new tG(n,s)}var L3,D3;class rG extends(D3=tn,L3=Ae,D3){constructor(t,n){super(t,"array","PgVector"),this.config.dimensions=n.dimensions}build(t){return new sG(t,this.config)}}ae(rG,L3,"PgVectorBuilder");var $3,F3;class sG extends(F3=Bt,$3=Ae,F3){constructor(){super(...arguments);ae(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(s=>Number.parseFloat(s))}}ae(sG,$3,"PgVector");function jDe(e,t){const{name:n,config:s}=Ur(e,t);return new rG(n,s)}function _De(){return{bigint:J4e,bigserial:eDe,boolean:Lt,char:tDe,cidr:nDe,customType:rDe,date:bn,doublePrecision:sDe,inet:iDe,integer:xe,interval:aDe,json:oDe,jsonb:vt,line:lDe,macaddr:cDe,macaddr8:uDe,numeric:jK,point:dDe,geometry:hDe,real:mDe,serial:pDe,smallint:gDe,smallserial:xDe,text:be,time:Qd,timestamp:le,uuid:Xo,varchar:M,bit:vDe,halfvec:yDe,sparsevec:bDe,vector:jDe}}const qS=Symbol.for("drizzle:PgInlineForeignKeys"),RL=Symbol.for("drizzle:EnableRLS");var z3,B3,V3,q3,U3;class Bm extends(U3=ys,q3=Ae,V3=qS,B3=RL,z3=ys.Symbol.ExtraConfigBuilder,U3){constructor(){super(...arguments);ae(this,V3,[]);ae(this,B3,!1);ae(this,z3)}}ae(Bm,q3,"PgTable"),ae(Bm,"Symbol",Object.assign({},ys.Symbol,{InlineForeignKeys:qS,EnableRLS:RL}));function wDe(e,t,n,s,i=e){const a=new Bm(e,s,i),o=typeof t=="function"?t(_De()):t,l=Object.fromEntries(Object.entries(o).map(([f,h])=>{const p=h;p.setName(f);const v=p.build(a);return a[qS].push(...p.buildForeignKeys(v,a)),[f,v]})),c=Object.fromEntries(Object.entries(o).map(([f,h])=>{const p=h;p.setName(f);const v=p.buildExtraConfigColumn(a);return[f,v]})),d=Object.assign(a,l);return d[ys.Symbol.Columns]=l,d[ys.Symbol.ExtraConfigColumns]=c,n&&(d[Bm.Symbol.ExtraConfigBuilder]=n),Object.assign(d,{enableRLS:()=>(d[Bm.Symbol.EnableRLS]=!0,d)})}const it=(e,t,n)=>wDe(e,t,n,void 0);var H3;H3=Ae;class iG{constructor(t,n){this.unique=t,this.name=n}on(...t){return new kv(t.map(n=>{if(vr(n,ar))return n;n=n;const s=new Tv(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),s}),this.unique,!1,this.name)}onOnly(...t){return new kv(t.map(n=>{if(vr(n,ar))return n;n=n;const s=new Tv(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=n.defaultConfig,s}),this.unique,!0,this.name)}using(t,...n){return new kv(n.map(s=>{if(vr(s,ar))return s;s=s;const i=new Tv(s.name,!!s.keyAsName,s.columnType,s.indexConfig);return s.indexConfig=JSON.parse(JSON.stringify(s.defaultConfig)),i}),this.unique,!0,this.name,t)}}ae(iG,H3,"PgIndexBuilderOn");var W3;W3=Ae;class kv{constructor(t,n,s,i,a="btree"){ae(this,"config");this.config={name:i,columns:t,unique:n,only:s,method:a}}concurrently(){return this.config.concurrently=!0,this}with(t){return this.config.with=t,this}where(t){return this.config.where=t,this}build(t){return new aG(this.config,t)}}ae(kv,W3,"PgIndexBuilder");var K3;K3=Ae;class aG{constructor(t,n){ae(this,"config");this.config={...t,table:n}}}ae(aG,K3,"PgIndex");function ie(e){return new iG(!1,e)}const Zn={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function lr(e,t){return t.includes(e.columnType)}function NDe(e){return"enumValues"in e&&Array.isArray(e.enumValues)&&e.enumValues.length>0}const SDe=NA([Ue(),xa(),Rs(),qW()]),CDe=NA([SDe,UW(Lb()),Do(Lb())]),PDe=wA(e=>e instanceof Buffer);function oG(e,t){const n=(t==null?void 0:t.zodInstance)??j4e,s=(t==null?void 0:t.coerce)??{};let i;return NDe(e)&&(i=e.enumValues.length?n.enum(e.enumValues):n.string()),i||(lr(e,["PgGeometry","PgPointTuple"])?i=n.tuple([n.number(),n.number()]):lr(e,["PgGeometryObject","PgPointObject"])?i=n.object({x:n.number(),y:n.number()}):lr(e,["PgHalfVector","PgVector"])?(i=n.array(n.number()),i=e.dimensions?i.length(e.dimensions):i):lr(e,["PgLine"])?i=n.tuple([n.number(),n.number(),n.number()]):lr(e,["PgLineABC"])?i=n.object({a:n.number(),b:n.number(),c:n.number()}):lr(e,["PgArray"])?(i=n.array(oG(e.baseColumn,n)),i=e.size?i.length(e.size):i):e.dataType==="array"?i=n.array(n.any()):e.dataType==="number"?i=ADe(e,n,s):e.dataType==="bigint"?i=EDe(e,n,s):e.dataType==="boolean"?i=s===!0||s.boolean?n.coerce.boolean():n.boolean():e.dataType==="date"?i=s===!0||s.date?n.coerce.date():n.date():e.dataType==="string"?i=TDe(e,n,s):e.dataType==="json"?i=CDe:e.dataType==="custom"?i=n.any():e.dataType==="buffer"&&(i=PDe)),i||(i=n.any()),i}function ADe(e,t,n){let s=e.getSQLType().includes("unsigned"),i,a,o=!1;lr(e,["MySqlTinyInt","SingleStoreTinyInt"])?(i=s?0:Zn.INT8_MIN,a=s?Zn.INT8_UNSIGNED_MAX:Zn.INT8_MAX,o=!0):lr(e,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(i=s?0:Zn.INT16_MIN,a=s?Zn.INT16_UNSIGNED_MAX:Zn.INT16_MAX,o=!0):lr(e,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(i=s?0:Zn.INT24_MIN,a=s?Zn.INT24_UNSIGNED_MAX:Zn.INT24_MAX,o=lr(e,["MySqlMediumInt","SingleStoreMediumInt"])):lr(e,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(i=s?0:Zn.INT32_MIN,a=s?Zn.INT32_UNSIGNED_MAX:Zn.INT32_MAX,o=!0):lr(e,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(i=s?0:Zn.INT48_MIN,a=s?Zn.INT48_UNSIGNED_MAX:Zn.INT48_MAX):lr(e,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(s=s||lr(e,["MySqlSerial","SingleStoreSerial"]),i=s?0:Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,o=!0):lr(e,["MySqlYear","SingleStoreYear"])?(i=1901,a=2155,o=!0):(i=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER);let l=n===!0||n!=null&&n.number?t.coerce.number():t.number();return l=l.min(i).max(a),o?l.int():l}function EDe(e,t,n){const s=e.getSQLType().includes("unsigned"),i=s?0n:Zn.INT64_MIN,a=s?Zn.INT64_UNSIGNED_MAX:Zn.INT64_MAX;return(n===!0||n!=null&&n.bigint?t.coerce.bigint():t.bigint()).min(i).max(a)}function TDe(e,t,n){if(lr(e,["PgUUID"]))return t.string().uuid();let s,i,a=!1;lr(e,["PgVarchar","SQLiteText"])?s=e.length:lr(e,["MySqlVarChar","SingleStoreVarChar"])?s=e.length??Zn.INT16_UNSIGNED_MAX:lr(e,["MySqlText","SingleStoreText"])&&(e.textType==="longtext"?s=Zn.INT32_UNSIGNED_MAX:e.textType==="mediumtext"?s=Zn.INT24_UNSIGNED_MAX:e.textType==="text"?s=Zn.INT16_UNSIGNED_MAX:s=Zn.INT8_UNSIGNED_MAX),lr(e,["PgChar","MySqlChar","SingleStoreChar"])&&(s=e.length,a=!0),lr(e,["PgBinaryVector"])&&(i=/^[01]+$/,s=e.dimensions);let o=n===!0||n!=null&&n.string?t.coerce.string():t.string();return o=i?o.regex(i):o,s&&a?o.length(s):s?o.max(s):o}function lG(e){return A7(e)?Y4e(e):X4e(e)}function cG(e,t,n,s){const i={};for(const[a,o]of Object.entries(e)){if(!vr(o,Jf)&&!vr(o,ar)&&!vr(o,ar.Aliased)&&typeof o=="object"){const h=A7(o)||Q4e(o)?lG(o):o;i[a]=cG(h,t[a]??{},n,s);continue}const l=t[a];if(l!==void 0&&typeof l!="function"){i[a]=l;continue}const c=vr(o,Jf)?o:void 0,d=c?oG(c,s):Lb(),f=typeof l=="function"?l(d):d;n.never(c)||(i[a]=f,c&&(n.nullable(c)&&(i[a]=i[a].nullable()),n.optional(c)&&(i[a]=i[a].optional())))}return sl(i)}const kDe={never:e=>{var t,n;return((t=e==null?void 0:e.generated)==null?void 0:t.type)==="always"||((n=e==null?void 0:e.generatedIdentity)==null?void 0:n.type)==="always"},optional:e=>!e.notNull||e.notNull&&e.hasDefault,nullable:e=>!e.notNull},ft=(e,t)=>{const n=lG(e);return cG(n,t??{},kDe)},vc=it("opportunities",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull(),userId:M("user_id").notNull().references(()=>yt.id),createdBy:M("created_by").notNull().references(()=>yt.id),companyName:M("company_name",{length:255}).notNull(),siren:M("siren",{length:14}),siret:M("siret",{length:20}),address:be("address"),city:M("city",{length:100}),postalCode:M("postal_code",{length:20}),country:M("country",{length:2}).default("FR"),contactName:M("contact_name",{length:255}).notNull(),contactTitle:M("contact_title",{length:100}),contactPhone:M("contact_phone",{length:50}),contactEmail:M("contact_email",{length:255}),contactLinkedinUrl:be("contact_linkedin_url"),title:M("title",{length:255}).notNull(),description:be("description"),contractValue:_t("contract_value",{precision:12,scale:2}),monthlySubscription:_t("monthly_subscription",{precision:10,scale:2}),isNewSiren:Lt("is_new_siren").default(!0),sector:M("sector",{length:100}),numberOfSites:xe("number_of_sites").default(1),status:M("status",{length:50}).default("active"),stage:M("stage",{length:50}).default("decouverte"),probability:xe("probability").default(50),expectedCloseDate:bn("expected_close_date"),contractSignatureDate:bn("contract_signature_date"),firstContactDate:bn("first_contact_date").default(Le`CURRENT_DATE`),lastActivityDate:le("last_activity_date").default(Le`NOW()`),score:xe("score").default(0),scoreDetails:vt("score_details"),temperature:M("temperature",{length:10}).default("cold"),daysInHector:xe("days_in_hector").default(0),requalificationRequired:Lt("requalification_required").default(!1),requalificationNotes:be("requalification_notes"),requalificationDate:le("requalification_date"),cascadeEnriched:Lt("cascade_enriched").default(!1),cascadeData:vt("cascade_data"),cascadeLastUpdate:le("cascade_last_update"),discProfiled:Lt("disc_profiled").default(!1),discProfile:M("disc_profile",{length:20}),discData:vt("disc_data"),discLastUpdate:le("disc_last_update"),gpsGeocoded:Lt("gps_geocoded").default(!1),gpsLatitude:_t("gps_latitude",{precision:10,scale:8}),gpsLongitude:_t("gps_longitude",{precision:11,scale:8}),gpsData:vt("gps_data"),gpsLastUpdate:le("gps_last_update"),linkedinScraped:Lt("linkedin_scraped").default(!1),linkedinData:vt("linkedin_data"),linkedinLastUpdate:le("linkedin_last_update"),activitiesCount:xe("activities_count").default(0),emailsSent:xe("emails_sent").default(0),emailsOpened:xe("emails_opened").default(0),callsMade:xe("calls_made").default(0),meetingsHeld:xe("meetings_held").default(0),documentsSent:xe("documents_sent").default(0),documentsViewed:xe("documents_viewed").default(0),lastEmailOpenDate:le("last_email_open_date"),lastCallDate:le("last_call_date"),lastMeetingDate:le("last_meeting_date"),exportReady:Lt("export_ready").default(!1),exportedToCrm:Lt("exported_to_crm").default(!1),exportDate:le("export_date"),exportCrmType:M("export_crm_type",{length:50}),exportCrmId:M("export_crm_id",{length:100}),exportNotes:be("export_notes"),createdAt:le("created_at").default(Le`NOW()`),updatedAt:le("updated_at").default(Le`NOW()`),deletedAt:le("deleted_at"),notes:be("notes"),internalNotes:be("internal_notes"),lastModifiedBy:M("last_modified_by").references(()=>yt.id),modificationHistory:vt("modification_history")},e=>[ie("idx_opp_entity").on(e.entity),ie("idx_opp_user").on(e.userId),ie("idx_opp_status").on(e.status),ie("idx_opp_stage").on(e.stage),ie("idx_opp_score").on(e.score),ie("idx_opp_temp").on(e.temperature),ie("idx_opp_days").on(e.daysInHector),ie("idx_opp_requalif").on(e.requalificationRequired),ie("idx_opp_siren").on(e.siren),ie("idx_opp_close_date").on(e.expectedCloseDate),ie("idx_opp_created").on(e.createdAt),ie("idx_opp_entity_user").on(e.entity,e.userId),ie("idx_opp_entity_status").on(e.entity,e.status)]);it("opportunity_scoring_history",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),opportunityId:M("opportunity_id").notNull().references(()=>vc.id,{onDelete:"cascade"}),score:xe("score").notNull(),scoreDetails:vt("score_details").notNull(),temperature:M("temperature",{length:10}).notNull(),reactivityScore:xe("reactivity_score"),maturityScore:xe("maturity_score"),enrichmentScore:xe("enrichment_score"),discScore:xe("disc_score"),geographyScore:xe("geography_score"),networkScore:xe("network_score"),stage:M("stage",{length:50}),daysInHector:xe("days_in_hector"),activitiesCount:xe("activities_count"),calculatedAt:le("calculated_at").default(Le`NOW()`)},e=>[ie("idx_scoring_hist_opp").on(e.opportunityId),ie("idx_scoring_hist_date").on(e.calculatedAt)]);const uG=it("opportunity_activities",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),opportunityId:M("opportunity_id").notNull().references(()=>vc.id,{onDelete:"cascade"}),userId:M("user_id").notNull().references(()=>yt.id),activityType:M("activity_type",{length:50}).notNull(),activityTitle:M("activity_title",{length:255}),activityDescription:be("activity_description"),activityData:vt("activity_data"),scoreImpact:xe("score_impact"),createdAt:le("created_at").default(Le`NOW()`)},e=>[ie("idx_act_opp").on(e.opportunityId),ie("idx_act_user").on(e.userId),ie("idx_act_type").on(e.activityType),ie("idx_act_date").on(e.createdAt)]),ODe=it("sales_objectives",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull(),level:M("level",{length:50}).notNull(),userId:M("user_id").references(()=>yt.id),role:M("role",{length:50}),monthlyContracts:xe("monthly_contracts").notNull(),newSirenPercentage:xe("new_siren_percentage").notNull().default(60),avgSubscriptionTarget:_t("avg_subscription_target",{precision:10,scale:2}),maxCycleDays:xe("max_cycle_days").default(30),minConversionRate:_t("min_conversion_rate",{precision:5,scale:2}).default("25.00"),alertDaysThreshold:xe("alert_days_threshold").default(30),alertScoreThreshold:xe("alert_score_threshold").default(40),alertScoreDays:xe("alert_score_days").default(7),alertNoActivityDays:xe("alert_no_activity_days").default(5),validFrom:bn("valid_from").default(Le`CURRENT_DATE`),validTo:bn("valid_to"),createdBy:M("created_by").references(()=>yt.id),createdAt:le("created_at").default(Le`NOW()`),updatedAt:le("updated_at").default(Le`NOW()`)},e=>[ie("idx_obj_entity").on(e.entity),ie("idx_obj_user").on(e.userId),ie("idx_obj_level").on(e.level),ie("idx_obj_valid").on(e.validFrom,e.validTo)]);it("opportunity_predictions",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),opportunityId:M("opportunity_id").notNull().references(()=>vc.id,{onDelete:"cascade"}),predictedCloseDate:bn("predicted_close_date"),predictedProbability:_t("predicted_probability",{precision:5,scale:2}),predictedSubscription:_t("predicted_subscription",{precision:10,scale:2}),confidenceLevel:_t("confidence_level",{precision:5,scale:2}),predictionFactors:vt("prediction_factors"),similarOpportunitiesCount:xe("similar_opportunities_count"),recommendedActions:vt("recommended_actions"),optimalClosingWindowStart:bn("optimal_closing_window_start"),optimalClosingWindowEnd:bn("optimal_closing_window_end"),risks:vt("risks"),riskLevel:M("risk_level",{length:20}),predictedAt:le("predicted_at").default(Le`NOW()`),modelVersion:M("model_version",{length:50}),actualClosedDate:bn("actual_closed_date"),actualResult:M("actual_result",{length:50}),predictionAccuracy:_t("prediction_accuracy",{precision:5,scale:2})},e=>[ie("idx_pred_opp").on(e.opportunityId),ie("idx_pred_date").on(e.predictedAt)]);it("opportunity_exports",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull(),exportBatchId:M("export_batch_id").default(Le`gen_random_uuid()`),exportType:M("export_type",{length:50}).notNull(),exportDate:le("export_date").default(Le`NOW()`),exportedBy:M("exported_by").references(()=>yt.id),opportunitiesCount:xe("opportunities_count"),opportunitiesIds:vt("opportunities_ids"),status:M("status",{length:50}),successCount:xe("success_count").default(0),errorCount:xe("error_count").default(0),errors:vt("errors"),mappingConfig:vt("mapping_config"),exportFileUrl:be("export_file_url"),notes:be("notes")},e=>[ie("idx_exp_entity").on(e.entity),ie("idx_exp_batch").on(e.exportBatchId),ie("idx_exp_date").on(e.exportDate)]);const MDe=it("opportunity_notes",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),opportunityId:M("opportunity_id").notNull().references(()=>vc.id,{onDelete:"cascade"}),userId:M("user_id").notNull().references(()=>yt.id),noteType:M("note_type",{length:50}),title:M("title",{length:255}),content:be("content").notNull(),relatedActivityId:M("related_activity_id").references(()=>uG.id),isInternal:Lt("is_internal").default(!1),createdAt:le("created_at").default(Le`NOW()`),updatedAt:le("updated_at").default(Le`NOW()`)},e=>[ie("idx_notes_opp").on(e.opportunityId),ie("idx_notes_user").on(e.userId),ie("idx_notes_type").on(e.noteType)]);ft(vc,{entity:ir(["france","luxembourg"]),companyName:Ue().min(1,"Nom entreprise requis"),contactName:Ue().min(1,"Nom contact requis"),title:Ue().min(1,"Titre opportunit requis"),status:ir(["active","on_hold","signed","lost","exported"]).optional(),stage:ir(["decouverte","rdv_argu","negociation","closing"]).optional(),temperature:ir(["hot","warm","cold"]).optional(),probability:xa().min(0).max(100).optional(),monthlySubscription:Ue().optional(),isNewSiren:Rs().optional()}).omit({id:!0,score:!0,scoreDetails:!0,temperature:!0,daysInHector:!0,createdAt:!0,updatedAt:!0});ft(ODe,{entity:ir(["france","luxembourg"]),level:ir(["individual","team","role"]),monthlyContracts:xa().min(1,"Objectif CONTRATS requis"),newSirenPercentage:xa().min(0).max(100).default(60)}).omit({id:!0,createdAt:!0,updatedAt:!0});ft(uG).omit({id:!0,createdAt:!0});ft(MDe,{noteType:ir(["general","meeting","call","email","internal","objection","decision_maker","competitor","blocker"]).optional()}).omit({id:!0,createdAt:!0,updatedAt:!0});const dG=it("phone_configurations",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull(),twilioAccountSid:be("twilio_account_sid").notNull(),twilioAuthTokenEncrypted:be("twilio_auth_token_encrypted").notNull(),twilioPhoneNumber:M("twilio_phone_number",{length:20}).notNull(),twilioTwimlAppSid:be("twilio_twiml_app_sid"),recordingEnabled:Lt("recording_enabled").default(!0).notNull(),transcriptionEnabled:Lt("transcription_enabled").default(!0).notNull(),aiAnalysisEnabled:Lt("ai_analysis_enabled").default(!0).notNull(),maxConcurrentCalls:xe("max_concurrent_calls").default(10).notNull(),maxCallDurationMinutes:xe("max_call_duration_minutes").default(60).notNull(),monthlyBudgetCents:xe("monthly_budget_cents").default(3e5).notNull(),alertThresholdPercent:xe("alert_threshold_percent").default(80).notNull(),isActive:Lt("is_active").default(!0).notNull(),lastTestedAt:le("last_tested_at"),lastTestStatus:M("last_test_status",{length:20}),createdAt:le("created_at").defaultNow().notNull(),updatedAt:le("updated_at").defaultNow().notNull(),createdBy:M("created_by").notNull().references(()=>yt.id),agencyLocation:M("agency_location",{length:50}),agencyName:M("agency_name",{length:100}),displayName:M("display_name",{length:150}),coverageArea:vt("coverage_area"),isBackup:Lt("is_backup").default(!1).notNull(),isPrimary:Lt("is_primary").default(!0).notNull(),rotationPriority:xe("rotation_priority").default(1).notNull(),activatedAt:le("activated_at"),deactivatedAt:le("deactivated_at"),deactivationReason:be("deactivation_reason"),reputationScore:xe("reputation_score"),spamReports:xe("spam_reports").default(0).notNull(),lastReputationCheck:le("last_reputation_check"),dailyCallLimit:xe("daily_call_limit").default(50),deletedAt:le("deleted_at"),lastModifiedBy:M("last_modified_by"),changeHistory:vt("change_history")},e=>[ie("phone_configurations_entity_idx").on(e.entity),ie("phone_config_agency_location_idx").on(e.agencyLocation),ie("phone_config_is_active_idx").on(e.isActive),ie("phone_config_deleted_at_idx").on(e.deletedAt),ie("phone_config_reputation_score_idx").on(e.reputationScore)]),fG=it("phone_calls",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull(),twilioCallSid:M("twilio_call_sid",{length:100}).notNull().unique(),callerUserId:M("caller_user_id").notNull().references(()=>yt.id),prospectId:M("prospect_id").references(()=>Es.id),phoneNumber:M("phone_number",{length:20}).notNull(),startedAt:le("started_at").notNull(),answeredAt:le("answered_at"),endedAt:le("ended_at"),durationSeconds:xe("duration_seconds"),status:M("status",{length:20}).notNull(),direction:M("direction",{length:20}).notNull().default("outbound"),recordingUrl:be("recording_url"),recordingDurationSeconds:xe("recording_duration_seconds"),transcription:be("transcription"),sentiment:M("sentiment",{length:20}),sentimentScore:xe("sentiment_score"),keyPoints:vt("key_points").$type(),actionItems:vt("action_items").$type(),summary:be("summary"),callPurpose:M("call_purpose",{length:50}),outcome:M("outcome",{length:50}),costCents:xe("cost_cents"),createdAt:le("created_at").defaultNow().notNull(),updatedAt:le("updated_at").defaultNow().notNull()},e=>[ie("phone_calls_entity_idx").on(e.entity),ie("phone_calls_caller_idx").on(e.callerUserId),ie("phone_calls_prospect_idx").on(e.prospectId),ie("phone_calls_status_idx").on(e.status),ie("phone_calls_started_at_idx").on(e.startedAt),ie("phone_calls_twilio_sid_idx").on(e.twilioCallSid)]),IDe=it("phone_scripts",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull(),prospectId:M("prospect_id").notNull().references(()=>Es.id),userId:M("user_id").notNull().references(()=>yt.id),scriptContent:be("script_content").notNull(),callObjective:be("call_objective").notNull(),discProfile:M("disc_profile",{length:1}),companyContext:vt("company_context"),painPoints:vt("pain_points").$type(),usedInCallId:M("used_in_call_id").references(()=>fG.id),createdAt:le("created_at").defaultNow().notNull()},e=>[ie("phone_scripts_entity_idx").on(e.entity),ie("phone_scripts_prospect_idx").on(e.prospectId),ie("phone_scripts_user_idx").on(e.userId)]),RDe=it("phone_analytics_daily",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull(),date:le("date").notNull(),userId:M("user_id").notNull().references(()=>yt.id),totalCalls:xe("total_calls").default(0).notNull(),answeredCalls:xe("answered_calls").default(0).notNull(),missedCalls:xe("missed_calls").default(0).notNull(),totalDurationSeconds:xe("total_duration_seconds").default(0).notNull(),avgDurationSeconds:xe("avg_duration_seconds").default(0).notNull(),appointmentsScheduled:xe("appointments_scheduled").default(0).notNull(),interestedProspects:xe("interested_prospects").default(0).notNull(),totalCostCents:xe("total_cost_cents").default(0).notNull(),avgSentimentScore:xe("avg_sentiment_score"),createdAt:le("created_at").defaultNow().notNull(),updatedAt:le("updated_at").defaultNow().notNull()},e=>[ie("phone_analytics_daily_entity_idx").on(e.entity),ie("phone_analytics_daily_date_idx").on(e.date),ie("phone_analytics_daily_user_idx").on(e.userId),ie("phone_analytics_daily_composite_idx").on(e.entity,e.userId,e.date)]),LDe=it("phone_consents",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull(),prospectId:M("prospect_id").notNull().references(()=>Es.id),phoneNumber:M("phone_number",{length:20}).notNull(),consentGiven:Lt("consent_given").notNull(),consentDate:le("consent_date").notNull(),consentMethod:M("consent_method",{length:20}),revokedAt:le("revoked_at"),revokedBy:M("revoked_by").references(()=>yt.id),createdAt:le("created_at").defaultNow().notNull()},e=>[ie("phone_consents_entity_idx").on(e.entity),ie("phone_consents_prospect_idx").on(e.prospectId),ie("phone_consents_phone_idx").on(e.phoneNumber)]),DDe=it("phone_config_history",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),configId:M("config_id").notNull().references(()=>dG.id),action:be("action").notNull(),reason:be("reason"),description:be("description"),performedBy:M("performed_by"),performedAt:le("performed_at").defaultNow().notNull(),oldValues:vt("old_values"),newValues:vt("new_values"),ipAddress:M("ip_address",{length:45}),userAgent:be("user_agent")},e=>[ie("phone_config_history_config_id_idx").on(e.configId),ie("phone_config_history_performed_at_idx").on(e.performedAt),ie("phone_config_history_action_idx").on(e.action)]);ft(dG);ft(fG);ft(IDe);ft(RDe);ft(LDe);ft(DDe);const hG=it("gps_positions",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull(),latitude:_t("latitude",{precision:10,scale:8}).notNull(),longitude:_t("longitude",{precision:11,scale:8}).notNull(),accuracy:_t("accuracy",{precision:6,scale:2}),altitude:_t("altitude",{precision:8,scale:2}),heading:_t("heading",{precision:5,scale:2}),speed:_t("speed",{precision:6,scale:2}),address:be("address"),city:M("city",{length:100}),postalCode:M("postal_code",{length:20}),country:M("country",{length:2}),batteryLevel:xe("battery_level"),isCharging:Lt("is_charging").default(!1),networkType:M("network_type",{length:10}),capturedAt:le("captured_at").notNull(),receivedAt:le("received_at").defaultNow(),isManual:Lt("is_manual").default(!1),createdAt:le("created_at").defaultNow()},e=>[ie("idx_gps_user_date").on(e.userId,e.capturedAt),ie("idx_gps_entity").on(e.entity,e.capturedAt),ie("idx_gps_city").on(e.city,e.capturedAt)]),$De=it("gps_activities",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull(),activityType:M("activity_type",{length:50}).notNull(),status:M("status",{length:20}).default("active"),startLatitude:_t("start_latitude",{precision:10,scale:8}),startLongitude:_t("start_longitude",{precision:11,scale:8}),endLatitude:_t("end_latitude",{precision:10,scale:8}),endLongitude:_t("end_longitude",{precision:11,scale:8}),address:be("address"),city:M("city",{length:100}),startedAt:le("started_at").notNull(),endedAt:le("ended_at"),durationMinutes:xe("duration_minutes"),distanceKm:_t("distance_km",{precision:8,scale:2}),prospectId:M("prospect_id").references(()=>Es.id),notes:be("notes"),weatherConditions:vt("weather_conditions"),createdAt:le("created_at").defaultNow(),updatedAt:le("updated_at").defaultNow()},e=>[ie("idx_activity_user_date").on(e.userId,e.startedAt),ie("idx_activity_type").on(e.activityType,e.status),ie("idx_activity_prospect").on(e.prospectId)]);it("gps_daily_stats",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull(),statDate:bn("stat_date").notNull(),totalDistanceKm:_t("total_distance_km",{precision:8,scale:2}).default(Le`0`),totalDurationMinutes:xe("total_duration_minutes").default(0),activeTimeMinutes:xe("active_time_minutes").default(0),visitsCount:xe("visits_count").default(0),meetingsCount:xe("meetings_count").default(0),callsCount:xe("calls_count").default(0),citiesVisited:be("cities_visited").array(),uniqueCitiesCount:xe("unique_cities_count").default(0),firstActivityTime:Qd("first_activity_time"),lastActivityTime:Qd("last_activity_time"),workingHours:_t("working_hours",{precision:4,scale:2}),opportunitiesDetected:xe("opportunities_detected").default(0),opportunitiesConverted:xe("opportunities_converted").default(0),createdAt:le("created_at").defaultNow(),updatedAt:le("updated_at").defaultNow()},e=>[ie("idx_daily_user_date").on(e.userId,e.statDate),ie("idx_daily_entity_date").on(e.entity,e.statDate)]);it("gps_weekly_reports",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull(),weekStart:bn("week_start").notNull(),weekEnd:bn("week_end").notNull(),weekNumber:xe("week_number").notNull(),year:xe("year").notNull(),totalDistanceKm:_t("total_distance_km",{precision:9,scale:2}),totalVisits:xe("total_visits"),totalMeetings:xe("total_meetings"),citiesVisited:be("cities_visited").array(),avgDailyDistance:_t("avg_daily_distance",{precision:7,scale:2}),avgDailyVisits:_t("avg_daily_visits",{precision:4,scale:2}),bestDay:bn("best_day"),bestDayVisits:xe("best_day_visits"),opportunitiesDetected:xe("opportunities_detected"),opportunitiesConverted:xe("opportunities_converted"),conversionRate:_t("conversion_rate",{precision:5,scale:2}),pdfFilePath:M("pdf_file_path",{length:500}),pdfGeneratedAt:le("pdf_generated_at"),sentAt:le("sent_at"),sentTo:be("sent_to").array(),createdAt:le("created_at").defaultNow()},e=>[ie("idx_weekly_user").on(e.userId,e.year,e.weekNumber),ie("idx_weekly_entity").on(e.entity,e.weekStart)]);const FDe=it("gps_opportunities",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull(),prospectId:M("prospect_id").notNull().references(()=>Es.id,{onDelete:"cascade"}),positionId:M("position_id").references(()=>hG.id),detectedAt:le("detected_at").notNull(),distanceMeters:xe("distance_meters").notNull(),userLatitude:_t("user_latitude",{precision:10,scale:8}).notNull(),userLongitude:_t("user_longitude",{precision:11,scale:8}).notNull(),userAddress:be("user_address"),prospectLatitude:_t("prospect_latitude",{precision:10,scale:8}).notNull(),prospectLongitude:_t("prospect_longitude",{precision:11,scale:8}).notNull(),prospectAddress:be("prospect_address"),prospectCompanyName:M("prospect_company_name",{length:200}),priorityScore:xe("priority_score").default(50),lastContactDaysAgo:xe("last_contact_days_ago"),prospectStatus:M("prospect_status",{length:50}),status:M("status",{length:20}).default("pending"),notifiedAt:le("notified_at"),notificationType:M("notification_type",{length:20}),actionTaken:M("action_taken",{length:50}),actionTakenAt:le("action_taken_at"),actionNotes:be("action_notes"),expiresAt:le("expires_at"),createdAt:le("created_at").defaultNow(),updatedAt:le("updated_at").defaultNow()},e=>[ie("idx_opp_user_status").on(e.userId,e.status,e.detectedAt),ie("idx_opp_prospect").on(e.prospectId),ie("idx_opp_detection").on(e.detectedAt)]),zDe=it("gps_system_config",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entityId:M("entity_id",{length:50}).notNull().unique(),trackingEnabled:Lt("tracking_enabled").default(!0),trackingFrequencyMinutes:xe("tracking_frequency_minutes").default(5),trackingHoursStart:Qd("tracking_hours_start").default(Le`'08:00:00'`),trackingHoursEnd:Qd("tracking_hours_end").default(Le`'19:00:00'`),trackingDays:xe("tracking_days").array().default(Le`ARRAY[1,2,3,4,5]`),opportunitiesEnabled:Lt("opportunities_enabled").default(!0),opportunitiesRadiusKm:_t("opportunities_radius_km",{precision:5,scale:2}).default(Le`5.0`),opportunitiesMinPriority:xe("opportunities_min_priority").default(30),dataRetentionDays:xe("data_retention_days").default(90),autoCleanupEnabled:Lt("auto_cleanup_enabled").default(!0),weeklyReportsEnabled:Lt("weekly_reports_enabled").default(!0),weeklyReportsDay:xe("weekly_reports_day").default(1),weeklyReportsHour:Qd("weekly_reports_hour").default(Le`'08:00:00'`),weeklyReportsRecipients:be("weekly_reports_recipients").array(),geocodingEnabled:Lt("geocoding_enabled").default(!0),routeOptimizationEnabled:Lt("route_optimization_enabled").default(!0),weatherIntegrationEnabled:Lt("weather_integration_enabled").default(!1),createdAt:le("created_at").defaultNow(),updatedAt:le("updated_at").defaultNow(),createdBy:M("created_by").references(()=>yt.id),updatedBy:M("updated_by").references(()=>yt.id)},e=>[ie("idx_gps_config_entity").on(e.entityId)]),mG=it("api_credentials",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),provider:M("provider",{length:50}).notNull(),entityId:M("entity_id",{length:50}).notNull(),apiKeyEncrypted:be("api_key_encrypted"),apiSecretEncrypted:be("api_secret_encrypted"),additionalConfig:vt("additional_config"),isActive:Lt("is_active").default(!1),lastValidatedAt:le("last_validated_at"),validationStatus:M("validation_status",{length:20}),validationMessage:be("validation_message"),monthlyQuota:xe("monthly_quota"),currentUsage:xe("current_usage").default(0),quotaResetAt:le("quota_reset_at"),createdAt:le("created_at").defaultNow(),updatedAt:le("updated_at").defaultNow(),createdBy:M("created_by").references(()=>yt.id),updatedBy:M("updated_by").references(()=>yt.id)},e=>[ie("idx_api_creds_provider").on(e.provider,e.isActive),ie("idx_api_creds_entity").on(e.entityId)]);it("api_usage_logs",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),credentialId:M("credential_id").references(()=>mG.id),provider:M("provider",{length:50}).notNull(),entityId:M("entity_id",{length:50}).notNull(),endpoint:M("endpoint",{length:200}),method:M("method",{length:10}),requestParams:vt("request_params"),statusCode:xe("status_code"),responseTimeMs:xe("response_time_ms"),success:Lt("success"),errorMessage:be("error_message"),estimatedCost:_t("estimated_cost",{precision:10,scale:4}),createdAt:le("created_at").defaultNow(),userId:M("user_id").references(()=>yt.id)},e=>[ie("idx_api_logs_date").on(e.createdAt),ie("idx_api_logs_provider").on(e.provider,e.createdAt),ie("idx_api_logs_cred").on(e.credentialId,e.createdAt)]);const BDe=it("supervision_logs",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),supervisorId:M("supervisor_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),supervisorEmail:M("supervisor_email",{length:255}).notNull(),action:M("action",{length:50}).notNull(),targetUserId:M("target_user_id").references(()=>yt.id,{onDelete:"set null"}),ipAddress:M("ip_address",{length:45}),userAgent:be("user_agent"),filtersApplied:vt("filters_applied"),positionsCount:xe("positions_count"),accessedAt:le("accessed_at").defaultNow()},e=>[ie("idx_supervision_logs_supervisor").on(e.supervisorId),ie("idx_supervision_logs_accessed_at").on(e.accessedAt),ie("idx_supervision_logs_target").on(e.targetUserId)]);ft(hG).omit({id:!0,receivedAt:!0,createdAt:!0});const VDe=ft(zDe).omit({id:!0,createdAt:!0,updatedAt:!0});VDe.partial().omit({entityId:!0});ft(mG,{provider:ir(["twilio","google_maps","openweather"]),entityId:Ue().min(1),apiKeyEncrypted:Ue().optional()}).omit({id:!0,createdAt:!0,updatedAt:!0});ft(FDe).omit({id:!0,createdAt:!0,updatedAt:!0});ft($De).omit({id:!0,createdAt:!0,updatedAt:!0});ft(BDe).omit({id:!0,accessedAt:!0});const pG=it("concurrents",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),name:M("name",{length:100}).notNull().unique(),type:M("type",{length:20}).notNull(),isActive:Lt("is_active").notNull().default(!0),coverageType:M("coverage_type",{length:20}),coverageRegions:be("coverage_regions").array(),coverageDepartments:M("coverage_departments",{length:3}).array(),solutionsOffered:M("solutions_offered",{length:50}).array(),estimatedMarketSharePercent:_t("estimated_market_share_percent",{precision:5,scale:2}),avgContractDurationMonths:xe("avg_contract_duration_months").default(60),typicalPricingTier:M("typical_pricing_tier",{length:20}),strengths:be("strengths"),weaknesses:be("weaknesses"),websiteUrl:be("website_url"),linkedinUrl:be("linkedin_url"),createdAt:le("created_at").defaultNow(),updatedAt:le("updated_at").defaultNow(),deletedAt:le("deleted_at")},e=>[ie("idx_concurrents_type").on(e.type),ie("idx_concurrents_active").on(e.isActive)]),LA=it("concurrent_situations",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull(),prospectId:M("prospect_id").notNull().references(()=>Es.id,{onDelete:"cascade"}),siren:M("siren",{length:14}),contactFirstName:M("contact_first_name",{length:100}),contactLastName:M("contact_last_name",{length:100}),raisonSociale:M("raison_sociale",{length:255}),enseigne:M("enseigne",{length:255}),concurrentId:M("concurrent_id").notNull().references(()=>pG.id),contractEndDate:bn("contract_end_date").notNull(),wakeupDate:bn("wakeup_date").notNull(),monthlyAmount:_t("monthly_amount",{precision:10,scale:2}),estimatedTotalContract:_t("estimated_total_contract",{precision:12,scale:2}),avgContractDurationMonths:xe("avg_contract_duration_months").default(60),amountKnown:Lt("amount_known").notNull().default(!0),solutionsInstalled:M("solutions_installed",{length:50}).array(),numberOfSites:xe("number_of_sites").default(1),subscriptionType:M("subscription_type",{length:30}),satisfactionLevel:M("satisfaction_level",{length:20}),satisfactionNotes:be("satisfaction_notes"),detectionSource:M("detection_source",{length:50}).notNull(),detectedBy:M("detected_by").notNull().references(()=>yt.id),detectedAt:le("detected_at").defaultNow(),regionCode:M("region_code",{length:50}),departmentCode:M("department_code",{length:3}),status:M("status",{length:30}).notNull().default("future"),opportunityCreated:Lt("opportunity_created").default(!1),opportunityId:M("opportunity_id"),opportunityCreatedAt:le("opportunity_created_at"),attemptNumber:xe("attempt_number").default(1),nextAttemptDate:bn("next_attempt_date"),nextWakeupDate:bn("next_wakeup_date"),wonAt:le("won_at"),wonBy:M("won_by").references(()=>yt.id),wonContractValue:_t("won_contract_value",{precision:12,scale:2}),lostAt:le("lost_at"),lostBy:M("lost_by").references(()=>yt.id),lostReason:be("lost_reason"),lostCompetitor:M("lost_competitor",{length:100}),archivedAt:le("archived_at"),archivedReason:be("archived_reason"),notes:be("notes"),internalNotes:be("internal_notes"),createdAt:le("created_at").defaultNow(),updatedAt:le("updated_at").defaultNow()},e=>[ie("idx_concurrent_situations_entity").on(e.entity),ie("idx_concurrent_situations_prospect").on(e.prospectId),ie("idx_concurrent_situations_status").on(e.status),ie("idx_concurrent_situations_wakeup_date").on(e.wakeupDate),ie("idx_concurrent_situations_contract_end").on(e.contractEndDate),ie("idx_concurrent_situations_next_attempt").on(e.nextAttemptDate)]),qDe=it("concurrent_attempts_history",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull(),situationId:M("situation_id").notNull().references(()=>LA.id,{onDelete:"cascade"}),attemptNumber:xe("attempt_number").notNull(),attemptDate:bn("attempt_date").notNull(),attemptBy:M("attempt_by").notNull().references(()=>yt.id),contactMethod:M("contact_method",{length:50}),contactDuration:xe("contact_duration"),outcome:M("outcome",{length:20}).notNull(),outcomeDate:bn("outcome_date"),notes:be("notes"),lostReason:be("lost_reason"),lostCompetitor:M("lost_competitor",{length:100}),wonContractValue:_t("won_contract_value",{precision:12,scale:2}),nextAttemptScheduled:Lt("next_attempt_scheduled").default(!1),nextAttemptDate:bn("next_attempt_date"),createdAt:le("created_at").defaultNow()},e=>[ie("idx_attempts_history_entity").on(e.entity),ie("idx_attempts_history_situation").on(e.situationId),ie("idx_attempts_history_outcome").on(e.outcome)]),UDe=it("prospect_events",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull(),prospectId:M("prospect_id").notNull().references(()=>Es.id,{onDelete:"cascade"}),siren:M("siren",{length:14}).notNull(),eventType:M("event_type",{length:50}).notNull(),eventDate:bn("event_date").notNull(),detectedDate:bn("detected_date").notNull(),source:M("source",{length:30}).notNull(),sourceReference:M("source_reference",{length:100}),eventDetails:be("event_details"),oldValue:be("old_value"),newValue:be("new_value"),criticality:M("criticality",{length:20}).notNull(),impactScore:xe("impact_score"),treated:Lt("treated").default(!1),treatedAt:le("treated_at"),treatedBy:M("treated_by").references(()=>yt.id),treatmentAction:be("treatment_action"),opportunityCreated:Lt("opportunity_created").default(!1),opportunityId:M("opportunity_id"),notes:be("notes"),createdAt:le("created_at").defaultNow(),updatedAt:le("updated_at").defaultNow()},e=>[ie("idx_prospect_events_entity").on(e.entity),ie("idx_prospect_events_prospect").on(e.prospectId),ie("idx_prospect_events_type").on(e.eventType),ie("idx_prospect_events_criticality").on(e.criticality),ie("idx_prospect_events_treated").on(e.treated),ie("idx_prospect_events_detected_date").on(e.detectedDate)]),HDe=it("competitor_alerts",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull(),situationId:M("situation_id").notNull().references(()=>LA.id,{onDelete:"cascade"}),alertType:M("alert_type",{length:20}).notNull(),alertDate:bn("alert_date").notNull(),daysBeforeEnd:xe("days_before_end").notNull(),targetUserId:M("target_user_id").notNull().references(()=>yt.id),escalatedToManager:Lt("escalated_to_manager").default(!1),escalatedToJP:Lt("escalated_to_jp").default(!1),sent:Lt("sent").default(!1),sentAt:le("sent_at"),sentChannels:M("sent_channels",{length:50}).array(),read:Lt("read").default(!1),readAt:le("read_at"),actionTaken:Lt("action_taken").default(!1),actionTakenAt:le("action_taken_at"),actionNotes:be("action_notes"),createdAt:le("created_at").defaultNow()},e=>[ie("idx_competitor_alerts_entity").on(e.entity),ie("idx_competitor_alerts_situation").on(e.situationId),ie("idx_competitor_alerts_user").on(e.targetUserId),ie("idx_competitor_alerts_read").on(e.read),ie("idx_competitor_alerts_alert_date").on(e.alertDate)]),WDe=it("system_config",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),key:M("key",{length:100}).notNull().unique(),value:be("value").notNull(),description:be("description"),category:M("category",{length:50}),updatedAt:le("updated_at").defaultNow(),updatedBy:M("updated_by").references(()=>yt.id)});ft(pG).omit({id:!0,createdAt:!0,updatedAt:!0,deletedAt:!0});ft(LA).omit({id:!0,createdAt:!0,updatedAt:!0,opportunityCreatedAt:!0,wonAt:!0,lostAt:!0,archivedAt:!0,detectedAt:!0});ft(qDe).omit({id:!0,createdAt:!0});ft(UDe).omit({id:!0,createdAt:!0,updatedAt:!0,treatedAt:!0});ft(HDe).omit({id:!0,createdAt:!0,sentAt:!0,readAt:!0,actionTakenAt:!0});ft(WDe).omit({id:!0,updatedAt:!0});ir(["france","luxembourg","belgique"]);it("sessions",{sid:M("sid").primaryKey(),sess:vt("sess").notNull(),expire:le("expire").notNull()},e=>[ie("IDX_session_expire").on(e.expire)]);const yt=it("users",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),email:M("email").unique().notNull(),password:be("password").notNull(),firstName:M("first_name"),lastName:M("last_name"),profileImageUrl:M("profile_image_url"),entity:M("entity",{length:50}).notNull().default("luxembourg"),role:M("role",{length:50}).notNull().default("business_developer"),poste:M("poste",{length:100}),equipe:M("equipe",{length:100}),managerId:M("manager_id").references(()=>yt.id,{onDelete:"set null"}),agence:M("agence",{length:100}),agencyLocation:M("agency_location",{length:50}),canalVente:M("canal_vente",{length:50}),objectifMensuelContrats:xe("objectif_mensuel_contrats"),objectifMensuelMrr:_t("objectif_mensuel_mrr",{precision:10,scale:2}),isActive:be("is_active").notNull().default("true"),isAdmin:be("is_admin").notNull().default("false"),lastLoginAt:le("last_login_at"),phoningStats:vt("phoning_stats").default(Le`'{"total_calls": 0, "rdv_pris": 0, "taux_rdv": 0, "duree_moyenne_secondes": 0}'::jsonb`),createdAt:le("created_at").defaultNow(),updatedAt:le("updated_at").defaultNow()},e=>[ie("idx_users_entity").on(e.entity),ie("users_agency_location_idx").on(e.agencyLocation)]),gG=it("conversations",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull().default("luxembourg"),title:be("title").notNull(),createdAt:le("created_at").notNull().defaultNow()},e=>[ie("idx_conversations_entity").on(e.entity)]),KDe=it("messages",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),conversationId:M("conversation_id").notNull().references(()=>gG.id,{onDelete:"cascade"}),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull().default("luxembourg"),role:be("role").notNull(),content:be("content").notNull(),featureType:be("feature_type"),createdAt:le("created_at").notNull().defaultNow()},e=>[ie("idx_messages_entity").on(e.entity)]),GDe=it("password_reset_tokens",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),token:M("token").notNull().unique(),expiresAt:le("expires_at").notNull(),createdAt:le("created_at").notNull().defaultNow()}),ZDe=it("login_attempts",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),email:M("email").notNull(),attemptedAt:le("attempted_at").notNull().defaultNow(),ipAddress:M("ip_address")}),QDe=it("invitations",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),email:M("email",{length:255}).notNull(),role:M("role",{length:50}).notNull().default("commercial"),token:M("token",{length:255}).notNull().unique(),invitedBy:M("invited_by").notNull().references(()=>yt.id,{onDelete:"cascade"}),status:M("status",{length:50}).notNull().default("pending"),expiresAt:le("expires_at").notNull(),acceptedAt:le("accepted_at"),createdAt:le("created_at").notNull().defaultNow()},e=>[ie("idx_invitations_email").on(e.email),ie("idx_invitations_token").on(e.token),ie("idx_invitations_status").on(e.status)]),YDe=it("organization_entities",{id:Xo("id").primaryKey().default(Le`gen_random_uuid()`),entityCode:M("entity_code",{length:50}).unique().notNull(),entityName:M("entity_name",{length:255}).notNull(),entityNameFull:M("entity_name_full",{length:255}),level:xe("level").notNull(),parentEntityCode:M("parent_entity_code",{length:50}),sortOrder:xe("sort_order").default(0),countryCode:M("country_code",{length:2}),countryName:M("country_name",{length:100}),flagEmoji:M("flag_emoji",{length:10}),logoUrl:M("logo_url",{length:500}),primaryColor:M("primary_color",{length:7}).default("#1E40AF"),secondaryColor:M("secondary_color",{length:7}).default("#3B82F6"),legalName:M("legal_name",{length:255}),siret:M("siret",{length:50}),address:be("address"),phone:M("phone",{length:50}),email:M("email",{length:255}),isActive:Lt("is_active").default(!0),canHaveUsers:Lt("can_have_users").default(!0),canHaveProspects:Lt("can_have_prospects").default(!0),createdAt:le("created_at").defaultNow(),updatedAt:le("updated_at").defaultNow(),updatedBy:Xo("updated_by")},e=>[ie("idx_entities_code").on(e.entityCode),ie("idx_entities_level").on(e.level),ie("idx_entities_active").on(e.isActive)]),XDe=it("teams",{id:Xo("id").primaryKey().default(Le`gen_random_uuid()`),name:M("name",{length:255}).notNull(),description:be("description"),entity:M("entity",{length:50}).notNull(),managerId:M("manager_id").references(()=>yt.id,{onDelete:"set null"}),parentTeamId:Xo("parent_team_id"),monthlyTargetCa:_t("monthly_target_ca",{precision:15,scale:2}),monthlyTargetMeetings:xe("monthly_target_meetings"),monthlyTargetSignatures:xe("monthly_target_signatures"),isActive:Lt("is_active").default(!0),color:M("color",{length:7}).default("#3B82F6"),createdAt:le("created_at").defaultNow(),updatedAt:le("updated_at").defaultNow(),createdBy:M("created_by"),updatedBy:M("updated_by")},e=>[ie("idx_teams_entity").on(e.entity),ie("idx_teams_manager").on(e.managerId),ie("idx_teams_active").on(e.isActive)]),JDe=it("team_members",{id:Xo("id").primaryKey().default(Le`gen_random_uuid()`),teamId:Xo("team_id").notNull(),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),role:M("role",{length:50}).default("member"),joinedAt:le("joined_at").defaultNow(),leftAt:le("left_at")},e=>[ie("idx_team_members_team").on(e.teamId),ie("idx_team_members_user").on(e.userId)]),e$e=it("audit_logs",{id:Xo("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull().default("luxembourg"),userId:M("user_id").references(()=>yt.id,{onDelete:"set null"}),userEmail:M("user_email",{length:255}),userName:M("user_name",{length:255}),userRole:M("user_role",{length:50}),action:M("action",{length:100}).notNull(),entityType:M("entity_type",{length:100}),entityId:Xo("entity_id"),entityName:M("entity_name",{length:255}),changes:vt("changes"),oldValues:vt("old_values"),newValues:vt("new_values"),ipAddress:M("ip_address",{length:50}),userAgent:be("user_agent"),endpoint:M("endpoint",{length:500}),method:M("method",{length:10}),status:M("status",{length:20}).default("success"),errorMessage:be("error_message"),createdAt:le("created_at").defaultNow()},e=>[ie("idx_audit_entity_rls").on(e.entity),ie("idx_audit_user").on(e.userId,e.createdAt),ie("idx_audit_action").on(e.action,e.createdAt),ie("idx_audit_entity").on(e.entityType,e.entityId),ie("idx_audit_created").on(e.createdAt),ie("idx_audit_status").on(e.status)]),xG=it("appointments",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),contactName:M("contact_name").notNull(),contactEmail:M("contact_email"),contactPhone:M("contact_phone"),company:M("company"),appointmentDate:le("appointment_date"),notes:be("notes"),businessCardImageUrl:M("business_card_image_url"),status:M("status").notNull().default("pending"),createdAt:le("created_at").notNull().defaultNow(),updatedAt:le("updated_at").notNull().defaultNow()}),t$e=it("media_files",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),type:M("type").notNull(),fileUrl:be("file_url").notNull(),fileName:M("file_name").notNull(),fileSize:M("file_size"),mimeType:M("mime_type"),purpose:M("purpose"),appointmentId:M("appointment_id").references(()=>xG.id,{onDelete:"set null"}),createdAt:le("created_at").notNull().defaultNow()}),Es=it("prospects",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull(),companyId:M("company_id").references(()=>lg.id),legacySiret:M("legacy_siret",{length:14}),legacySiren:M("legacy_siren",{length:9}),nom:M("nom",{length:255}),prenom:M("prenom",{length:255}),fonction:M("fonction",{length:255}),entreprise:M("entreprise",{length:255}).notNull(),enseigneCommerciale:M("enseigne_commerciale",{length:255}),raisonSociale:M("raison_sociale",{length:255}),siret:M("siret",{length:14}),email:M("email",{length:255}),telephone:M("telephone",{length:50}),adresse1:be("adresse_1"),adresse2:be("adresse_2"),ville:M("ville",{length:100}),codePostal:M("code_postal",{length:20}),pays:M("pays",{length:100}).default("France"),latitude:_t("latitude",{precision:10,scale:7}),longitude:_t("longitude",{precision:10,scale:7}),geocodedAt:le("geocoded_at"),geocodingSource:M("geocoding_source",{length:50}),secteur:M("secteur",{length:100}),profilDisc:M("profil_disc",{length:50}),statut:M("statut",{length:50}).notNull().default("nouveau"),source:M("source",{length:100}).notNull().default("carte_visite"),notes:be("notes"),capitalSocial:M("capital_social",{length:100}),formeJuridique:M("forme_juridique",{length:100}),dateCreationEntreprise:bn("date_creation_entreprise"),effectifEntreprise:M("effectif_entreprise",{length:50}),chiffreAffaires:_t("chiffre_affaires",{precision:15,scale:2}),dirigeantPrincipal:M("dirigeant_principal",{length:255}),nombreEtablissements:xe("nombre_etablissements"),statutEntreprise:M("statut_entreprise",{length:50}),isFullyEnriched:be("is_fully_enriched").default("false"),enrichedAt:le("enriched_at"),pappersRawData:vt("pappers_raw_data"),lastCallDate:le("last_call_date"),lastCallResult:M("last_call_result",{length:50}),totalCallsCount:xe("total_calls_count").default(0),rdvConversionRate:_t("rdv_conversion_rate",{precision:5,scale:2}),qualificationNeeded:be("qualification_needed").default("false"),qualifiedAt:le("qualified_at"),qualifiedBy:M("qualified_by").references(()=>yt.id,{onDelete:"set null"}),dataQualityScore:xe("data_quality_score").default(0),lastEnrichmentDate:le("last_enrichment_date"),enrichmentStatus:M("enrichment_status",{length:20}).default("pending"),createdAt:le("created_at").notNull().defaultNow(),updatedAt:le("updated_at").notNull().defaultNow()},e=>[ie("idx_prospects_user_id").on(e.userId),ie("idx_prospects_company_id").on(e.companyId),ie("idx_prospects_entity").on(e.entity),ie("idx_prospects_entity_created").on(e.entity,e.createdAt),ie("idx_prospects_enrichment_status").on(e.enrichmentStatus,e.lastEnrichmentDate),ie("idx_prospects_quality_score").on(e.dataQualityScore),ie("idx_prospects_geocoded").on(e.latitude,e.longitude)]),n$e=it("types_prestations",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),nom:M("nom",{length:255}).notNull().unique(),description:be("description"),icone:M("icone",{length:10}),tarifMensuelMin:_t("tarif_mensuel_min",{precision:10,scale:2}),tarifMensuelMax:_t("tarif_mensuel_max",{precision:10,scale:2}),createdAt:le("created_at").notNull().defaultNow()}),r$e=it("actions",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),prospectId:M("prospect_id").references(()=>Es.id,{onDelete:"cascade"}),opportunityId:M("opportunity_id").references(()=>vc.id,{onDelete:"set null"}),entity:M("entity",{length:50}).notNull().default("luxembourg"),type:M("type",{length:50}).notNull(),titre:M("titre",{length:255}).notNull(),description:be("description"),datePrevue:le("date_prevue").notNull(),statut:M("statut",{length:50}).notNull().default("a_faire"),priorite:M("priorite",{length:20}).notNull().default("normale"),resultat:be("resultat"),createdAt:le("created_at").notNull().defaultNow(),completedAt:le("completed_at")},e=>[ie("idx_actions_user_id").on(e.userId),ie("idx_actions_date").on(e.datePrevue),ie("idx_actions_entity").on(e.entity)]),vG=it("rdvs",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),prospectId:M("prospect_id").references(()=>Es.id,{onDelete:"cascade"}),opportunityId:M("opportunity_id").references(()=>vc.id,{onDelete:"set null"}),entity:M("entity",{length:50}).notNull().default("luxembourg"),titre:M("titre",{length:255}).notNull(),type:M("type",{length:50}),dateRdv:le("date_rdv").notNull(),lieu:M("lieu",{length:255}),objectif:be("objectif"),dossierPreparation:vt("dossier_preparation"),pdfPath:M("pdf_path",{length:500}),pdfUrl:M("pdf_url",{length:500}),pdfGeneratedAt:le("pdf_generated_at"),icalPath:M("ical_path",{length:500}),compteRendu:be("compte_rendu"),prochainesEtapes:be("prochaines_etapes"),statut:M("statut",{length:50}).notNull().default("planifie"),createdAt:le("created_at").notNull().defaultNow()},e=>[ie("idx_rdvs_user_id").on(e.userId),ie("idx_rdvs_date").on(e.dateRdv),ie("idx_rdvs_entity").on(e.entity)]),s$e=it("notifications_transfert",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),opportunityId:M("opportunity_id").references(()=>vc.id,{onDelete:"cascade"}),sdrId:M("sdr_id").references(()=>yt.id,{onDelete:"cascade"}),repreneurId:M("repreneur_id").references(()=>yt.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull().default("luxembourg"),type:M("type",{length:50}).notNull(),message:be("message"),lu:be("lu").default("false"),createdAt:le("created_at").notNull().defaultNow()},e=>[ie("idx_notif_sdr").on(e.sdrId,e.lu),ie("idx_notif_repreneur").on(e.repreneurId,e.lu),ie("idx_notif_entity").on(e.entity)]),i$e=it("rdv_preparations",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),rdvId:M("rdv_id").notNull().references(()=>vG.id,{onDelete:"cascade"}),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull().default("luxembourg"),statut:M("statut",{length:50}).notNull().default("en_cours"),donnesPappers:vt("donnees_pappers"),donnesBraveSearch:vt("donnees_brave_search"),analyseDisc:vt("analyse_disc"),pdfPath:M("pdf_path",{length:500}),pdfUrl:M("pdf_url",{length:500}),erreurPappers:be("erreur_pappers"),erreurBraveSearch:be("erreur_brave_search"),erreurClaudeDisc:be("erreur_claude_disc"),erreurPdfGeneration:be("erreur_pdf_generation"),dureeTotale:xe("duree_totale"),createdAt:le("created_at").notNull().defaultNow(),completedAt:le("completed_at")},e=>[ie("idx_rdv_prep_rdv_id").on(e.rdvId),ie("idx_rdv_prep_user_id").on(e.userId),ie("idx_rdv_prep_statut").on(e.statut),ie("idx_rdv_prep_entity").on(e.entity)]),yG=it("calls",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),prospectId:M("prospect_id").notNull().references(()=>Es.id,{onDelete:"cascade"}),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull().default("luxembourg"),startedAt:le("started_at").notNull().defaultNow(),endedAt:le("ended_at"),durationSeconds:xe("duration_seconds"),result:M("result",{length:50}).notNull(),rdvDate:le("rdv_date"),rappelDate:le("rappel_date"),rappelRaison:be("rappel_raison"),scriptId:M("script_id"),notes:be("notes"),tags:M("tags",{length:50}).array(),objectionsCount:xe("objections_count").default(0),objectionsTraitees:vt("objections_traitees"),summaryAi:vt("summary_ai"),probabiliteClosing:xe("probabilite_closing"),audioFilePath:M("audio_file_path",{length:500}),transcriptionText:be("transcription_text"),sentimentScore:_t("sentiment_score",{precision:3,scale:2}),qualityScoreAi:xe("quality_score_ai"),createdAt:le("created_at").notNull().defaultNow(),updatedAt:le("updated_at").notNull().defaultNow()},e=>[ie("idx_calls_prospect").on(e.prospectId),ie("idx_calls_user").on(e.userId),ie("idx_calls_result").on(e.result),ie("idx_calls_started_at").on(e.startedAt),ie("idx_calls_entity").on(e.entity)]),a$e=it("call_scripts",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),prospectId:M("prospect_id").notNull().references(()=>Es.id,{onDelete:"cascade"}),generatedByUserId:M("generated_by_user_id").references(()=>yt.id),entity:M("entity",{length:50}).notNull().default("luxembourg"),scriptContent:vt("script_content").notNull(),discProfileUsed:vt("disc_profile_used"),secteur:M("secteur",{length:100}),generationSource:M("generation_source",{length:50}),usedInCallId:M("used_in_call_id"),isTemplate:be("is_template").default("false"),templateName:M("template_name",{length:200}),createdAt:le("created_at").notNull().defaultNow(),expiresAt:le("expires_at").default(Le`NOW() + INTERVAL '1 hour'`)},e=>[ie("idx_scripts_prospect").on(e.prospectId),ie("idx_scripts_entity").on(e.entity)]),o$e=it("objections",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),objectionText:M("objection_text",{length:500}).notNull().unique(),objectionCategory:M("objection_category",{length:100}),timesEncountered:xe("times_encountered").default(0),timesSuccessfullyHandled:xe("times_successfully_handled").default(0),defaultResponses:vt("default_responses"),createdAt:le("created_at").notNull().defaultNow(),updatedAt:le("updated_at").notNull().defaultNow()},e=>[ie("idx_objections_category").on(e.objectionCategory)]),l$e=it("call_notes",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),callId:M("call_id").notNull().references(()=>yG.id,{onDelete:"cascade"}),noteText:be("note_text").notNull(),noteTimestamp:le("note_timestamp").notNull().defaultNow(),noteType:M("note_type",{length:50}),createdAt:le("created_at").notNull().defaultNow()},e=>[ie("idx_notes_call").on(e.callId)]);ft(yt);ft(gG).omit({id:!0,createdAt:!0});ft(KDe).omit({id:!0,createdAt:!0});ft(GDe).omit({id:!0,createdAt:!0});ft(ZDe).omit({id:!0,attemptedAt:!0});ft(QDe).omit({id:!0,createdAt:!0});ft(xG).omit({id:!0,createdAt:!0,updatedAt:!0});ft(t$e).omit({id:!0,createdAt:!0});ft(Es).omit({id:!0,createdAt:!0,updatedAt:!0});ft(n$e).omit({id:!0,createdAt:!0});ft(r$e).omit({id:!0,createdAt:!0});ft(vG).omit({id:!0,createdAt:!0});ft(s$e).omit({id:!0,createdAt:!0});ft(i$e).omit({id:!0,createdAt:!0});ft(yG).omit({id:!0,createdAt:!0,updatedAt:!0});ft(a$e).omit({id:!0,createdAt:!0});ft(o$e).omit({id:!0,createdAt:!0,updatedAt:!0});ft(l$e).omit({id:!0,createdAt:!0});const c$e=it("patron_contacts",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),siret:M("siret",{length:14}).notNull(),raisonSociale:M("raison_sociale",{length:255}).notNull(),enseigneCommerciale:M("enseigne_commerciale",{length:255}),secteur:M("secteur",{length:100}),ville:M("ville",{length:100}),codePostal:M("code_postal",{length:20}),dirigeantNom:M("dirigeant_nom",{length:100}),dirigeantPrenom:M("dirigeant_prenom",{length:100}),dirigeantFonction:M("dirigeant_fonction",{length:100}),dirigeantPhotoUrl:be("dirigeant_photo_url"),email:M("email",{length:255}),telephone:M("telephone",{length:50}),siteWeb:M("site_web",{length:255}),searchMode:M("search_mode",{length:20}).notNull(),searchQuery:be("search_query"),addedToCrm:be("added_to_crm").notNull().default("false"),crmProspectId:M("crm_prospect_id").references(()=>Es.id,{onDelete:"set null"}),wildixEnabled:be("wildix_enabled").default("false"),wildixCallId:M("wildix_call_id",{length:100}),callContext:vt("call_context"),lastCallTimestamp:le("last_call_timestamp"),callRecordingUrl:be("call_recording_url"),callTranscript:be("call_transcript"),pappersRawData:vt("pappers_raw_data"),createdAt:le("created_at").notNull().defaultNow(),updatedAt:le("updated_at").notNull().defaultNow()},e=>[ie("idx_patron_contacts_user_id").on(e.userId),ie("idx_patron_contacts_siret").on(e.siret)]);ft(c$e).omit({id:!0,createdAt:!0,updatedAt:!0});const DA=it("scenarios",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull().default("luxembourg"),nom:M("nom",{length:255}).notNull(),description:be("description"),dureeJours:xe("duree_jours").notNull(),nombreEtapes:xe("nombre_etapes").notNull(),typeCible:M("type_cible",{length:100}),tauxSuccesAttendu:_t("taux_succes_attendu",{precision:5,scale:2}),isActive:be("is_active").notNull().default("true"),createdAt:le("created_at").notNull().defaultNow(),updatedAt:le("updated_at").notNull().defaultNow()},e=>[ie("idx_scenarios_entity").on(e.entity)]),$A=it("scenario_etapes",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),scenarioId:M("scenario_id").notNull().references(()=>DA.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull().default("luxembourg"),ordre:xe("ordre").notNull(),delaiJours:xe("delai_jours").notNull(),canal:M("canal",{length:50}).notNull(),objectif:be("objectif"),templatePrompt:be("template_prompt"),longueurCible:M("longueur_cible",{length:50}),ctaSuggere:be("cta_suggere"),createdAt:le("created_at").notNull().defaultNow()},e=>[ie("idx_scenario_etapes_scenario_id").on(e.scenarioId),ie("idx_scenario_etapes_entity").on(e.entity)]),FA=it("campagnes_prospection",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull().default("luxembourg"),nom:M("nom",{length:255}).notNull(),scenarioId:M("scenario_id").notNull().references(()=>DA.id),statut:M("statut",{length:50}).notNull().default("active"),objectif:M("objectif",{length:100}),dateDebut:le("date_debut").defaultNow(),dateFin:le("date_fin"),joursEnvoi:be("jours_envoi").array().default(Le`ARRAY['lundi', 'mardi', 'mercredi', 'jeudi', 'vendredi']::text[]`),heuresEnvoi:vt("heures_envoi").default(Le`'{"debut": "09:00", "fin": "18:00"}'::jsonb`),timezone:M("timezone",{length:50}).default("Europe/Paris"),stats:vt("stats").default(Le`'{"contactes": 0, "acceptes": 0, "reponses": 0, "rdv": 0}'::jsonb`),createdAt:le("created_at").notNull().defaultNow(),updatedAt:le("updated_at").notNull().defaultNow()},e=>[ie("idx_campagnes_user_id").on(e.userId),ie("idx_campagnes_statut").on(e.statut),ie("idx_campagnes_entity").on(e.entity)]),bG=it("prospects_en_prospection",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),campagneId:M("campagne_id").notNull().references(()=>FA.id,{onDelete:"cascade"}),prospectId:M("prospect_id").notNull().references(()=>Es.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull().default("luxembourg"),statut:M("statut",{length:50}).notNull().default("active"),etapeActuelle:xe("etape_actuelle").notNull().default(0),prochaineActionDate:le("prochaine_action_date"),scoreEngagement:xe("score_engagement").default(0),messagesGeneres:vt("messages_generes").default(Le`'{}'::jsonb`),contextRecherche:vt("context_recherche").default(Le`'{}'::jsonb`),interactions:vt("interactions").default(Le`'[]'::jsonb`),createdAt:le("created_at").notNull().defaultNow(),updatedAt:le("updated_at").notNull().defaultNow()},e=>[ie("idx_prospects_prospection_campagne_id").on(e.campagneId),ie("idx_prospects_prospection_prospect_id").on(e.prospectId),ie("idx_prospects_prospection_prochaine_action").on(e.prochaineActionDate),ie("idx_prospects_prospection_entity").on(e.entity)]),zA=it("message_variants",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),campagneId:M("campagne_id").notNull().references(()=>FA.id,{onDelete:"cascade"}),etapeId:M("etape_id").notNull().references(()=>$A.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull().default("luxembourg"),canal:M("canal",{length:50}).notNull(),variantName:M("variant_name",{length:10}).notNull(),messageTemplate:be("message_template").notNull(),sujetEmail:M("sujet_email",{length:255}),isActive:be("is_active").notNull().default("true"),createdAt:le("created_at").notNull().defaultNow(),updatedAt:le("updated_at").notNull().defaultNow()},e=>[ie("idx_variants_campagne_id").on(e.campagneId),ie("idx_variants_etape_id").on(e.etapeId),ie("idx_variants_active").on(e.isActive),ie("idx_variants_entity").on(e.entity)]),u$e=it("variant_metrics",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),variantId:M("variant_id").notNull().references(()=>zA.id,{onDelete:"cascade"}),sent:xe("sent").notNull().default(0),opened:xe("opened").notNull().default(0),clicked:xe("clicked").notNull().default(0),replied:xe("replied").notNull().default(0),accepted:xe("accepted").notNull().default(0),rejected:xe("rejected").notNull().default(0),bounced:xe("bounced").notNull().default(0),updatedAt:le("updated_at").notNull().defaultNow()},e=>[ie("idx_metrics_variant_id").on(e.variantId)]),d$e=it("interactions_prospection",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),prospectEnProspectionId:M("prospect_en_prospection_id").notNull().references(()=>bG.id,{onDelete:"cascade"}),etapeId:M("etape_id").references(()=>$A.id),variantId:M("variant_id").references(()=>zA.id,{onDelete:"set null"}),canal:M("canal",{length:50}).notNull(),typeInteraction:M("type_interaction",{length:50}).notNull(),messageEnvoye:be("message_envoye"),reponseRecue:be("reponse_recue"),metadata:vt("metadata").default(Le`'{}'::jsonb`),createdAt:le("created_at").notNull().defaultNow()},e=>[ie("idx_interactions_prospect_prospection_id").on(e.prospectEnProspectionId),ie("idx_interactions_variant_id").on(e.variantId)]),f$e=it("blacklist_prospection",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),email:M("email",{length:255}).unique().notNull(),telephone:M("telephone",{length:50}),raison:M("raison",{length:100}).notNull(),source:M("source",{length:100}),createdAt:le("created_at").notNull().defaultNow()},e=>[ie("idx_blacklist_email").on(e.email)]),h$e=it("learning_insights",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),type:M("type",{length:100}).notNull(),pattern:be("pattern").notNull(),description:be("description"),successRate:_t("success_rate",{precision:5,scale:2}).notNull(),sampleSize:xe("sample_size").notNull(),sector:M("sector",{length:100}),discProfile:M("disc_profile",{length:10}),canal:M("canal",{length:50}),validated:be("validated").notNull().default("false"),appliedToPrompts:be("applied_to_prompts").notNull().default("false"),detectedAt:le("detected_at").notNull().defaultNow(),validatedAt:le("validated_at"),metadata:vt("metadata").default(Le`'{}'::jsonb`)},e=>[ie("idx_learning_insights_type").on(e.type),ie("idx_learning_insights_validated").on(e.validated)]),m$e=it("prompt_versions",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),promptType:M("prompt_type",{length:100}).notNull(),version:xe("version").notNull(),content:be("content").notNull(),avgResponseRate:_t("avg_response_rate",{precision:5,scale:2}),avgOpenRate:_t("avg_open_rate",{precision:5,scale:2}),usageCount:xe("usage_count").notNull().default(0),basedOnInsights:vt("based_on_insights").default(Le`'[]'::jsonb`),isActive:be("is_active").notNull().default("true"),createdAt:le("created_at").notNull().defaultNow(),activatedAt:le("activated_at"),deactivatedAt:le("deactivated_at")},e=>[ie("idx_prompt_versions_type").on(e.promptType),ie("idx_prompt_versions_active").on(e.isActive)]),lg=it("companies",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),entity:M("entity",{length:50}).notNull().default("luxembourg"),countryCode:M("country_code",{length:2}).notNull().default("FR"),identifierType:M("identifier_type",{length:20}).notNull().default("SIRET"),identifierValue:M("identifier_value",{length:50}),parentIdentifier:M("parent_identifier",{length:50}),legalName:M("legal_name",{length:255}),tradeName:M("trade_name",{length:255}),legalForm:M("legal_form",{length:100}),legalFormLabel:M("legal_form_label",{length:255}),nafCode:M("naf_code",{length:10}),nafLabel:M("naf_label",{length:255}),creationDate:bn("creation_date"),status:M("status",{length:50}),effectif:M("effectif",{length:50}),effectifMin:xe("effectif_min"),effectifMax:xe("effectif_max"),capitalSocial:xe("capital_social"),numeroTVA:M("numero_tva",{length:20}),etatAdministratif:M("etat_administratif",{length:20}),dateCessation:bn("date_cessation"),procedureCollective:be("procedure_collective").notNull().default("false"),procedureType:M("procedure_type",{length:20}),procedureTypeLibelle:M("procedure_type_libelle",{length:100}),procedureDate:bn("procedure_date"),tribunalCommerce:M("tribunal_commerce",{length:100}),addressLine1:M("address_line1",{length:255}),addressLine2:M("address_line2",{length:255}),postalCode:M("postal_code",{length:20}),city:M("city",{length:100}),commune:M("commune",{length:100}),department:M("department",{length:100}),region:M("region",{length:100}),country:M("country",{length:100}).default("France"),latitude:_t("latitude",{precision:10,scale:7}),longitude:_t("longitude",{precision:10,scale:7}),complementAddress:M("complement_address",{length:255}),phone:M("phone",{length:50}),email:M("email",{length:255}),website:M("website",{length:255}),enriched:be("enriched").notNull().default("false"),enrichmentSource:M("enrichment_source",{length:50}),enrichmentDate:le("enrichment_date"),lastUpdate:le("last_update").defaultNow(),phoneLookupSource:M("phone_lookup_source",{length:20}),phoneLookupConfidence:xe("phone_lookup_confidence"),createdBy:M("created_by").references(()=>yt.id),createdAt:le("created_at").notNull().defaultNow(),updatedAt:le("updated_at").notNull().defaultNow()},e=>[ie("idx_companies_identifier").on(e.identifierValue),ie("idx_companies_parent").on(e.parentIdentifier),ie("idx_companies_legal_name").on(e.legalName),ie("idx_companies_country_type").on(e.countryCode,e.identifierType),ie("idx_companies_entity").on(e.entity),ie("idx_companies_entity_created").on(e.entity,e.createdAt)]),p$e=it("enrichment_logs",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),companyId:M("company_id").references(()=>lg.id,{onDelete:"cascade"}),triggerType:M("trigger_type",{length:50}),triggerUserId:M("trigger_user_id").references(()=>yt.id),source:M("source",{length:50}),apiResponse:vt("api_response"),fieldsUpdated:be("fields_updated").array(),status:M("status",{length:20}),errorMessage:be("error_message"),cost:xe("cost").default(0),fallbackUsed:be("fallback_used").default("false"),duration:xe("duration"),phoneNumber:M("phone_number",{length:50}),phoneLookupSource:M("phone_lookup_source",{length:50}),createdAt:le("created_at").notNull().defaultNow()},e=>[ie("idx_enrichment_logs_company").on(e.companyId),ie("idx_enrichment_logs_created").on(e.createdAt),ie("idx_enrichment_logs_source").on(e.source)]),g$e=it("company_relationships",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),parentCompanyId:M("parent_company_id").references(()=>lg.id),childCompanyId:M("child_company_id").references(()=>lg.id),relationshipType:M("relationship_type",{length:50}).default("establishment"),isActive:be("is_active").notNull().default("true"),createdAt:le("created_at").notNull().defaultNow()},e=>[ie("idx_company_rel_parent").on(e.parentCompanyId),ie("idx_company_rel_child").on(e.childCompanyId)]),x$e=it("pappers_cache",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),identifier:M("identifier",{length:50}).notNull(),identifierType:M("identifier_type",{length:10}).notNull(),apiResponse:vt("api_response").notNull(),createdAt:le("created_at").notNull().defaultNow(),expiresAt:le("expires_at").notNull()},e=>[ie("idx_pappers_cache_identifier").on(e.identifier),ie("idx_pappers_cache_expires").on(e.expiresAt)]);ft(DA).omit({id:!0,createdAt:!0,updatedAt:!0});ft($A).omit({id:!0,createdAt:!0});ft(FA).omit({id:!0,createdAt:!0,updatedAt:!0});ft(bG).omit({id:!0,createdAt:!0,updatedAt:!0});ft(d$e).omit({id:!0,createdAt:!0});ft(f$e).omit({id:!0,createdAt:!0});ft(zA).omit({id:!0,createdAt:!0,updatedAt:!0});ft(u$e).omit({id:!0,updatedAt:!0});ft(h$e).omit({id:!0,detectedAt:!0});ft(m$e).omit({id:!0,createdAt:!0});ft(lg).omit({id:!0,createdAt:!0,updatedAt:!0});ft(p$e).omit({id:!0,createdAt:!0});ft(g$e).omit({id:!0,createdAt:!0});ft(x$e).omit({id:!0,createdAt:!0});const jG=it("batch_imports",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),userId:M("user_id").notNull().references(()=>yt.id,{onDelete:"cascade"}),entity:M("entity",{length:50}).notNull(),filename:M("filename",{length:255}).notNull(),mapping:vt("mapping").notNull(),options:vt("options").default(Le`'{"auto_enrich": true, "deduplicate": true, "skip_duplicates": true}'::jsonb`),status:M("status",{length:20}).notNull().default("pending"),progress:xe("progress").notNull().default(0),totalRows:xe("total_rows").notNull().default(0),processedRows:xe("processed_rows").notNull().default(0),successCount:xe("success_count").notNull().default(0),errorCount:xe("error_count").notNull().default(0),duplicateCount:xe("duplicate_count").notNull().default(0),errors:vt("errors").default(Le`'[]'::jsonb`),startedAt:le("started_at"),completedAt:le("completed_at"),createdAt:le("created_at").notNull().defaultNow(),updatedAt:le("updated_at").notNull().defaultNow()},e=>[ie("idx_batch_imports_user").on(e.userId,e.createdAt),ie("idx_batch_imports_status").on(e.status,e.createdAt),ie("idx_batch_imports_entity").on(e.entity)]),v$e=it("batch_import_prospects",{id:M("id").primaryKey().default(Le`gen_random_uuid()`),batchImportId:M("batch_import_id").notNull().references(()=>jG.id,{onDelete:"cascade"}),prospectId:M("prospect_id").references(()=>Es.id,{onDelete:"set null"}),rowNumber:xe("row_number").notNull(),rawData:vt("raw_data").notNull(),status:M("status",{length:20}).notNull().default("pending"),errorMessage:be("error_message"),createdAt:le("created_at").notNull().defaultNow()},e=>[ie("idx_batch_import_prospects_batch").on(e.batchImportId),ie("idx_batch_import_prospects_status").on(e.status)]);ft(jG).omit({id:!0,createdAt:!0,updatedAt:!0});ft(v$e).omit({id:!0,createdAt:!0});ft(YDe).omit({id:!0,createdAt:!0,updatedAt:!0});const y$e=ft(XDe).omit({id:!0,createdAt:!0,updatedAt:!0});ft(JDe).omit({id:!0,joinedAt:!0});ft(e$e).omit({id:!0,createdAt:!0});const b$e=y$e.extend({monthlyTargetCa:Ue().optional(),monthlyTargetMeetings:la.number().optional(),monthlyTargetSignatures:la.number().optional(),parentTeamId:Ue().optional()}),j$e=[{value:"france",label:" France"},{value:"luxembourg",label:" Luxembourg"},{value:"belgique",label:" Belgique"}];function LL({team:e,teams:t,onSubmit:n,onCancel:s,isSubmitting:i}){const a=Du({resolver:$u(b$e),defaultValues:{name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",entity:(e==null?void 0:e.entity)||"france",managerId:(e==null?void 0:e.managerId)||"",parentTeamId:(e==null?void 0:e.parentTeamId)||"",monthlyTargetCa:(e==null?void 0:e.monthlyTargetCa)||"",monthlyTargetMeetings:(e==null?void 0:e.monthlyTargetMeetings)||void 0,monthlyTargetSignatures:(e==null?void 0:e.monthlyTargetSignatures)||void 0,isActive:(e==null?void 0:e.isActive)??!0,color:(e==null?void 0:e.color)||"#3B82F6",createdBy:(e==null?void 0:e.createdBy)||"",updatedBy:(e==null?void 0:e.updatedBy)||""}}),o=async c=>{const d={...c,monthlyTargetCa:c.monthlyTargetCa||null,monthlyTargetMeetings:c.monthlyTargetMeetings||null,monthlyTargetSignatures:c.monthlyTargetSignatures||null,managerId:c.managerId||null,parentTeamId:c.parentTeamId&&c.parentTeamId!=="__none__"?c.parentTeamId:null,description:c.description||null};await n(d)},l=t.filter(c=>c.id!==(e==null?void 0:e.id));return r.jsx(Fu,{...a,children:r.jsxs("form",{onSubmit:a.handleSubmit(o),className:"space-y-4",children:[r.jsx(we,{control:a.control,name:"name",render:({field:c})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Nom de l'quipe *"}),r.jsx(Se,{children:r.jsx(ge,{...c,placeholder:"quipe commerciale France","data-testid":"input-team-name"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:a.control,name:"description",render:({field:c})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Description"}),r.jsx(Se,{children:r.jsx(Dn,{...c,value:c.value||"",placeholder:"Description de l'quipe...",rows:3,"data-testid":"input-team-description"})}),r.jsx(ke,{})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(we,{control:a.control,name:"entity",render:({field:c})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Entit *"}),r.jsxs(gt,{onValueChange:c.onChange,defaultValue:c.value,"data-testid":"select-team-entity",children:[r.jsx(Se,{children:r.jsx(mt,{children:r.jsx(xt,{placeholder:"Slectionner une entit"})})}),r.jsx(pt,{children:j$e.map(d=>r.jsx(Y,{value:d.value,children:d.label},d.value))})]}),r.jsx(ke,{})]})}),r.jsx(we,{control:a.control,name:"color",render:({field:c})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Couleur"}),r.jsx(Se,{children:r.jsx(ge,{...c,value:c.value||"#3B82F6",type:"color",className:"h-10 w-full","data-testid":"input-team-color"})}),r.jsx(ke,{})]})})]}),r.jsx(we,{control:a.control,name:"managerId",render:({field:c})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"ID Manager"}),r.jsx(Se,{children:r.jsx(ge,{...c,value:c.value||"",placeholder:"ID du manager (optionnel)","data-testid":"input-team-manager-id"})}),r.jsx(rr,{children:"L'ID utilisateur du manager de cette quipe"}),r.jsx(ke,{})]})}),r.jsx(we,{control:a.control,name:"parentTeamId",render:({field:c})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"quipe parente"}),r.jsxs(gt,{onValueChange:c.onChange,value:c.value||"__none__","data-testid":"select-team-parent",children:[r.jsx(Se,{children:r.jsx(mt,{children:r.jsx(xt,{placeholder:"Aucune (quipe racine)"})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"__none__",children:"Aucune (quipe racine)"}),l.map(d=>r.jsx(Y,{value:d.id,children:d.name},d.id))]})]}),r.jsx(ke,{})]})}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsx("h4",{className:"text-sm font-medium mb-3",children:"Objectifs mensuels"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsx(we,{control:a.control,name:"monthlyTargetCa",render:({field:c})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"CA ()"}),r.jsx(Se,{children:r.jsx(ge,{...c,type:"number",step:"0.01",placeholder:"50000","data-testid":"input-team-target-ca"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:a.control,name:"monthlyTargetMeetings",render:({field:c})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"RDV"}),r.jsx(Se,{children:r.jsx(ge,{...c,type:"number",placeholder:"20","data-testid":"input-team-target-meetings"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:a.control,name:"monthlyTargetSignatures",render:({field:c})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Signatures"}),r.jsx(Se,{children:r.jsx(ge,{...c,type:"number",placeholder:"10","data-testid":"input-team-target-signatures"})}),r.jsx(ke,{})]})})]})]}),r.jsx(we,{control:a.control,name:"isActive",render:({field:c})=>r.jsxs(_e,{className:"flex items-center justify-between rounded-lg border p-3",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(Ne,{children:"quipe active"}),r.jsx(rr,{children:"L'quipe est active et visible dans le systme"})]}),r.jsx(Se,{children:r.jsx(ra,{checked:c.value??!0,onCheckedChange:c.onChange,"data-testid":"switch-team-active"})})]})}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(re,{type:"button",variant:"outline",onClick:s,disabled:i,"data-testid":"button-cancel",children:"Annuler"}),r.jsx(re,{type:"submit",disabled:i,"data-testid":"button-submit",children:i?"Enregistrement...":e?"Mettre  jour":"Crer"})]})]})})}const _$e={france:" France",luxembourg:" Luxembourg",belgique:" Belgique"};function w$e({team:e,onEdit:t,onDelete:n,onClick:s}){const i=a=>{a.target.closest("button")||s==null||s()};return r.jsx(U,{className:"hover-elevate cursor-pointer",onClick:i,"data-testid":`card-team-${e.id}`,children:r.jsxs(Z,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color||"#3B82F6"}}),r.jsx("h3",{className:"font-semibold text-base","data-testid":`text-team-name-${e.id}`,children:e.name})]}),e.description&&r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:e.description})]}),r.jsxs("div",{className:"flex gap-1 ml-2",children:[r.jsx(re,{size:"icon",variant:"ghost",onClick:a=>{a.stopPropagation(),t()},"data-testid":`button-edit-team-${e.id}`,children:r.jsx(Ii,{className:"h-4 w-4"})}),r.jsx(re,{size:"icon",variant:"ghost",onClick:a=>{a.stopPropagation(),n()},"data-testid":`button-delete-team-${e.id}`,children:r.jsx(Ns,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[r.jsx(ve,{variant:"secondary","data-testid":`badge-entity-${e.id}`,children:_$e[e.entity]||e.entity}),r.jsx(ve,{variant:e.isActive?"default":"outline",children:e.isActive?"Active":"Inactive"}),e.memberCount!==void 0&&r.jsxs(ve,{variant:"outline",className:"gap-1",children:[r.jsx(Nn,{className:"h-3 w-3"}),e.memberCount," membre",e.memberCount!==1?"s":""]})]}),(e.monthlyTargetCa||e.monthlyTargetMeetings||e.monthlyTargetSignatures)&&r.jsxs("div",{className:"border-t pt-3 mt-3 space-y-1.5",children:[r.jsxs("div",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1",children:[r.jsx(fn,{className:"h-3 w-3"}),"Objectifs mensuels"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.monthlyTargetCa&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(wn,{className:"h-3 w-3 text-muted-foreground"}),r.jsxs("span",{className:"font-medium",children:[parseFloat(e.monthlyTargetCa).toLocaleString("fr-FR"),""]})]}),e.monthlyTargetMeetings&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(xn,{className:"h-3 w-3 text-muted-foreground"}),r.jsxs("span",{className:"font-medium",children:[e.monthlyTargetMeetings," RDV"]})]}),e.monthlyTargetSignatures&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(fn,{className:"h-3 w-3 text-muted-foreground"}),r.jsxs("span",{className:"font-medium",children:[e.monthlyTargetSignatures," signatures"]})]})]})]}),e.manager&&r.jsxs("div",{className:"border-t pt-3 mt-3 text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:"Manager : "}),r.jsx("span",{className:"font-medium",children:e.manager.username})]})]})})}const Rl={async getAll(){const e=await fetch("/api/admin/users",{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch users");return e.json()},async toggleActive(e){return rt("PATCH",`/api/admin/users/${e}/toggle-active`,{})},async updateRole(e,t){return rt("PATCH",`/api/admin/users/${e}/role`,{role:t})},async getStats(){const e=await this.getAll(),t={total:e.length,active:e.filter(n=>n.isActive==="true").length,inactive:e.filter(n=>n.isActive!=="true").length,byRole:{}};return e.forEach(n=>{n.role&&(t.byRole[n.role]=(t.byRole[n.role]||0)+1)}),t},async getInvitations(){const e=await fetch("/api/admin/invitations",{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch invitations");return e.json()},async sendInvitation(e,t){return rt("POST","/api/auth/invite",{email:e,role:t})},async deleteInvitation(e){return rt("DELETE",`/api/admin/invitations/${e}`,{})}};function N$e({team:e,open:t,onOpenChange:n}){var g,x;const{toast:s}=At(),[i,a]=_.useState(""),{data:o=[]}=Ke({queryKey:["/api/admin/users"],queryFn:()=>Rl.getAll(),enabled:t}),{data:l,isLoading:c}=Ke({queryKey:["/api/admin/teams",e==null?void 0:e.id],queryFn:()=>wi.getById(e.id),enabled:t&&!!e}),d=dt({mutationFn:({userId:w,role:N})=>wi.addMember(e.id,{userId:w,role:N}),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/admin/teams"]}),et.invalidateQueries({queryKey:["/api/admin/teams",e==null?void 0:e.id]}),a(""),s({title:"Membre ajout",description:"Le membre a t ajout  l'quipe avec succs"})},onError:w=>{s({variant:"destructive",title:"Erreur",description:w.message||"Impossible d'ajouter le membre"})}}),f=dt({mutationFn:w=>wi.removeMember(e.id,w),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/admin/teams"]}),et.invalidateQueries({queryKey:["/api/admin/teams",e==null?void 0:e.id]}),s({title:"Membre retir",description:"Le membre a t retir de l'quipe"})},onError:w=>{s({variant:"destructive",title:"Erreur",description:w.message||"Impossible de retirer le membre"})}}),h=dt({mutationFn:({memberId:w,role:N})=>wi.updateMemberRole(e.id,w,N),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/admin/teams"]}),et.invalidateQueries({queryKey:["/api/admin/teams",e==null?void 0:e.id]}),s({title:"Rle mis  jour",description:"Le rle du membre a t modifi"})},onError:w=>{s({variant:"destructive",title:"Erreur",description:w.message||"Impossible de modifier le rle"})}});if(!e)return null;const p=new Set(((g=l==null?void 0:l.members)==null?void 0:g.map(w=>w.userId))||[]),v=o.filter(w=>!p.has(w.id)&&w.isActive==="true"),j=()=>{i&&d.mutate({userId:i,role:"member"})};return r.jsx(Wn,{open:t,onOpenChange:n,children:r.jsxs(Fn,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(zn,{children:[r.jsxs(Bn,{className:"flex items-center gap-2",children:[r.jsx(Nn,{className:"h-5 w-5"}),"Membres de l'quipe : ",e.name]}),r.jsx(Za,{children:"Grez les membres de cette quipe commerciale"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"border rounded-lg p-4 bg-muted/30",children:[r.jsxs("h3",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[r.jsx(uy,{className:"h-4 w-4"}),"Ajouter un membre"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(gt,{value:i,onValueChange:a,children:[r.jsx(mt,{className:"flex-1","data-testid":"select-add-member",children:r.jsx(xt,{placeholder:"Slectionner un utilisateur..."})}),r.jsx(pt,{children:v.map(w=>r.jsxs(Y,{value:w.id,children:[w.email," ",w.firstName&&`(${w.firstName} ${w.lastName})`]},w.id))})]}),r.jsxs(re,{onClick:j,disabled:!i||d.isPending,"data-testid":"button-confirm-add-member",children:[r.jsx(uy,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-medium mb-3",children:["Membres actuels (",((x=l==null?void 0:l.members)==null?void 0:x.length)||0,")"]}),c?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Chargement..."}):l!=null&&l.members&&l.members.length>0?r.jsx("div",{className:"space-y-2",children:l.members.map(w=>{var N,y;return r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg","data-testid":`member-item-${w.id}`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:((N=w.user)==null?void 0:N.email)||"Utilisateur inconnu"}),((y=w.user)==null?void 0:y.username)&&r.jsx("div",{className:"text-sm text-muted-foreground",children:w.user.username})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(gt,{value:w.role||"member",onValueChange:A=>h.mutate({memberId:w.id,role:A}),disabled:h.isPending,children:[r.jsx(mt,{className:"w-32",children:r.jsx(xt,{})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"manager",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Uo,{className:"h-3 w-3"}),"Manager"]})}),r.jsx(Y,{value:"member",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ri,{className:"h-3 w-3"}),"Membre"]})})]})]}),r.jsx(ve,{variant:w.role==="manager"?"default":"secondary",children:w.role==="manager"?"Manager":"Membre"}),r.jsx(re,{size:"icon",variant:"ghost",onClick:()=>f.mutate(w.id),disabled:f.isPending,"data-testid":`button-remove-member-${w.id}`,children:r.jsx(Ns,{className:"h-4 w-4 text-destructive"})})]})]},w.id)})}):r.jsx("div",{className:"text-center py-8 text-muted-foreground border rounded-lg",children:"Aucun membre dans cette quipe. Ajoutez votre premier membre ci-dessus."})]})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t",children:r.jsx(re,{variant:"outline",onClick:()=>n(!1),children:"Fermer"})})]})})}function S$e(){const{teams:e,stats:t,isLoading:n,isStatsLoading:s,createTeam:i,updateTeam:a,deleteTeam:o,isCreating:l,isUpdating:c}=V4e(),[d,f]=_.useState(""),[h,p]=_.useState("all"),[v,j]=_.useState("all"),[g,x]=_.useState(!1),[w,N]=_.useState(null),[y,A]=_.useState(null),[P,E]=_.useState(null),C=_.useMemo(()=>e.filter(R=>{var K;const D=R.name.toLowerCase().includes(d.toLowerCase())||((K=R.description)==null?void 0:K.toLowerCase().includes(d.toLowerCase())),z=h==="all"||R.entity===h,V=v==="all"||v==="active"&&R.isActive||v==="inactive"&&!R.isActive;return D&&z&&V}),[e,d,h,v]),S=async R=>{await i(R),x(!1)},k=async R=>{w&&(await a({id:w.id,data:R}),N(null))},I=async()=>{y&&(await o(y.id),A(null))};return r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"heading-teams",children:"Gestion des quipes"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Grez vos quipes commerciales et leurs membres"})]}),r.jsxs(re,{onClick:()=>x(!0),className:"gap-2","data-testid":"button-create-team",children:[r.jsx(dr,{className:"h-4 w-4"}),"Nouvelle quipe"]})]}),s?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(R=>r.jsx(sr,{className:"h-24"},R))}):t?r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(U,{children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:r.jsx(Nn,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-total-teams",children:t.total}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Total quipes"})]})]})})}),r.jsx(U,{children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:r.jsx(du,{className:"h-5 w-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-active-teams",children:t.active}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Actives"})]})]})})}),r.jsx(U,{children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg",children:r.jsx(fn,{className:"h-5 w-5 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-inactive-teams",children:t.inactive}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Inactives"})]})]})})}),r.jsx(U,{children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Par entit"}),r.jsx("div",{className:"space-y-0.5",children:Object.entries(t.byEntity).map(([R,D])=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"capitalize",children:R}),r.jsx("span",{className:"font-medium",children:D})]},R))})]})})})]}):null,r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(ls,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(ge,{placeholder:"Rechercher une quipe...",value:d,onChange:R=>f(R.target.value),className:"pl-9","data-testid":"input-search-teams"})]}),r.jsxs(gt,{value:h,onValueChange:p,children:[r.jsx(mt,{className:"w-full sm:w-48","data-testid":"select-filter-entity",children:r.jsx(xt,{placeholder:"Toutes les entits"})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"all",children:"Toutes les entits"}),r.jsx(Y,{value:"france",children:" France"}),r.jsx(Y,{value:"luxembourg",children:" Luxembourg"}),r.jsx(Y,{value:"belgique",children:" Belgique"})]})]}),r.jsxs(gt,{value:v,onValueChange:j,children:[r.jsx(mt,{className:"w-full sm:w-40","data-testid":"select-filter-status",children:r.jsx(xt,{placeholder:"Tous les statuts"})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"all",children:"Tous"}),r.jsx(Y,{value:"active",children:"Actives"}),r.jsx(Y,{value:"inactive",children:"Inactives"})]})]})]}),n?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(R=>r.jsx(sr,{className:"h-48"},R))}):C.length===0?r.jsx(U,{children:r.jsxs(Z,{className:"p-12 text-center",children:[r.jsx(Nn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucune quipe trouve"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:d||h!=="all"||v!=="all"?"Essayez de modifier vos filtres de recherche":"Commencez par crer votre premire quipe"}),!d&&h==="all"&&v==="all"&&r.jsxs(re,{onClick:()=>x(!0),"data-testid":"button-create-first-team",children:[r.jsx(dr,{className:"h-4 w-4 mr-2"}),"Crer la premire quipe"]})]})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(R=>r.jsx(w$e,{team:R,onEdit:()=>N(R),onDelete:()=>A(R),onClick:()=>E(R)},R.id))}),r.jsx(Wn,{open:g,onOpenChange:x,children:r.jsxs(Fn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(zn,{children:r.jsx(Bn,{children:"Crer une nouvelle quipe"})}),r.jsx(LL,{teams:e,onSubmit:S,onCancel:()=>x(!1),isSubmitting:l})]})}),r.jsx(Wn,{open:!!w,onOpenChange:()=>N(null),children:r.jsxs(Fn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(zn,{children:r.jsx(Bn,{children:"Modifier l'quipe"})}),w&&r.jsx(LL,{team:w,teams:e,onSubmit:k,onCancel:()=>N(null),isSubmitting:c})]})}),r.jsx(y7,{open:!!y,onOpenChange:()=>A(null),onConfirm:I,title:"Supprimer l'quipe",description:`tes-vous sr de vouloir supprimer l'quipe "${y==null?void 0:y.name}" ? Cette action est irrversible.`}),r.jsx(N$e,{team:P,open:!!P,onOpenChange:R=>!R&&E(null)})]})}const BA={async getAll(e){const t=new URLSearchParams;e!=null&&e.userId&&t.append("userId",e.userId),e!=null&&e.action&&t.append("action",e.action),e!=null&&e.entityType&&t.append("entityType",e.entityType),e!=null&&e.limit&&t.append("limit",e.limit.toString()),e!=null&&e.offset&&t.append("offset",e.offset.toString()),e!=null&&e.startDate&&t.append("startDate",e.startDate),e!=null&&e.endDate&&t.append("endDate",e.endDate);const n=t.toString(),s=n?`/api/admin/audit-logs?${n}`:"/api/admin/audit-logs",i=await fetch(s);if(!i.ok){const a=await i.json();throw new Error(a.error||"Erreur lors de la rcupration des logs")}return i.json()},async getStats(){const e=await fetch("/api/admin/audit-logs/stats");if(!e.ok){const t=await e.json();throw new Error(t.error||"Erreur lors de la rcupration des stats")}return e.json()},async exportCSV(e){const t=await this.getAll(e),n=["Date","Utilisateur","Action","Type","Entit","Statut","IP"],s=t.map(c=>[new Date(c.createdAt).toLocaleString("fr-FR"),c.userName||c.userEmail||"N/A",c.action,c.entityType||"N/A",c.entityName||c.entityId||"N/A",c.status||"N/A",c.ipAddress||"N/A"]),i=[n.join(","),...s.map(c=>c.map(d=>`"${d}"`).join(","))].join(`
`),a=new Blob([i],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),l=URL.createObjectURL(a);o.setAttribute("href",l),o.setAttribute("download",`audit-logs-${new Date().toISOString()}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}};function C$e(e){return Ke({queryKey:["/api/admin/audit-logs",e],queryFn:()=>BA.getAll(e)})}function P$e(){return Ke({queryKey:["/api/admin/audit-logs/stats"],queryFn:()=>BA.getStats()})}function A$e(){const[e,t]=_.useState({limit:50}),{data:n,isLoading:s,refetch:i}=C$e(e),{data:a}=P$e(),{toast:o}=At(),l=async()=>{try{await BA.exportCSV(e),o({title:"Export russi",description:"Les logs ont t exports en CSV"})}catch{o({title:"Erreur",description:"Impossible d'exporter les logs",variant:"destructive"})}},c=f=>({CREATE:"bg-green-500",UPDATE:"bg-blue-500",DELETE:"bg-red-500",LOGIN:"bg-purple-500",LOGOUT:"bg-gray-500"})[f]||"bg-gray-500",d=f=>f==="success"?"default":f==="error"?"destructive":"secondary";return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"title-audit-logs",children:"Audit Logs"}),r.jsx("p",{className:"text-muted-foreground",children:"Traabilit complte de toutes les actions administratives"})]}),a&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Logs"}),r.jsx(du,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total",children:a.total})})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Actions"}),r.jsx(hu,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-actions",children:Object.keys(a.byAction).length})})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Utilisateurs"}),r.jsx(Nn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-users",children:Object.keys(a.byUser).length})})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(cz,{className:"h-5 w-5"}),"Filtres"]}),r.jsx(jt,{children:"Filtrer les logs par action, type d'entit"})]}),r.jsxs(Z,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{children:"Action"}),r.jsxs(gt,{value:e.action||"__all__",onValueChange:f=>t({...e,action:f==="__all__"?void 0:f}),"data-testid":"select-filter-action",children:[r.jsx(mt,{children:r.jsx(xt,{placeholder:"Toutes"})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"__all__",children:"Toutes"}),r.jsx(Y,{value:"CREATE",children:"CREATE"}),r.jsx(Y,{value:"UPDATE",children:"UPDATE"}),r.jsx(Y,{value:"DELETE",children:"DELETE"}),r.jsx(Y,{value:"LOGIN",children:"LOGIN"}),r.jsx(Y,{value:"LOGOUT",children:"LOGOUT"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{children:"Type d'entit"}),r.jsxs(gt,{value:e.entityType||"__all__",onValueChange:f=>t({...e,entityType:f==="__all__"?void 0:f}),"data-testid":"select-filter-entity-type",children:[r.jsx(mt,{children:r.jsx(xt,{placeholder:"Tous"})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"__all__",children:"Tous"}),r.jsx(Y,{value:"organization",children:"Organization"}),r.jsx(Y,{value:"team",children:"Team"}),r.jsx(Y,{value:"user",children:"User"}),r.jsx(Y,{value:"prospect",children:"Prospect"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{children:"Limite"}),r.jsxs(gt,{value:e.limit.toString(),onValueChange:f=>t({...e,limit:parseInt(f)}),"data-testid":"select-filter-limit",children:[r.jsx(mt,{children:r.jsx(xt,{})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"25",children:"25 logs"}),r.jsx(Y,{value:"50",children:"50 logs"}),r.jsx(Y,{value:"100",children:"100 logs"}),r.jsx(Y,{value:"200",children:"200 logs"})]})]})]})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsxs(re,{onClick:()=>i(),variant:"outline",size:"sm","data-testid":"button-refresh",children:[r.jsx(Da,{className:"h-4 w-4 mr-2"}),"Actualiser"]}),r.jsxs(re,{onClick:l,variant:"outline",size:"sm","data-testid":"button-export-csv",children:[r.jsx(nP,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Logs d'audit"}),r.jsxs(jt,{children:[(n==null?void 0:n.length)||0," logs affichs"]})]}),r.jsx(Z,{children:s?r.jsx("div",{className:"text-center py-8",children:"Chargement..."}):n&&n.length>0?r.jsx("div",{className:"rounded-md border",children:r.jsxs(Qa,{children:[r.jsx(Ya,{children:r.jsxs(_r,{children:[r.jsx(kt,{children:"Date"}),r.jsx(kt,{children:"Utilisateur"}),r.jsx(kt,{children:"Action"}),r.jsx(kt,{children:"Type"}),r.jsx(kt,{children:"Entit"}),r.jsx(kt,{children:"Statut"}),r.jsx(kt,{children:"IP"})]})}),r.jsx(Xa,{children:n.map(f=>r.jsxs(_r,{"data-testid":`row-log-${f.id}`,children:[r.jsx(Ct,{className:"text-sm",children:new Date(f.createdAt).toLocaleString("fr-FR")}),r.jsx(Ct,{children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:f.userName||"N/A"}),r.jsx("span",{className:"text-xs text-muted-foreground",children:f.userEmail})]})}),r.jsx(Ct,{children:r.jsx(ve,{className:c(f.action),"data-testid":`badge-action-${f.action}`,children:f.action})}),r.jsx(Ct,{className:"text-sm",children:f.entityType||"N/A"}),r.jsx(Ct,{className:"text-sm max-w-xs truncate",children:f.entityName||f.entityId||"N/A"}),r.jsx(Ct,{children:r.jsx(ve,{variant:d(f.status),children:f.status||"N/A"})}),r.jsx(Ct,{className:"text-sm text-muted-foreground",children:f.ipAddress||"N/A"})]},f.id))})]})}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucun log trouv"})})]})]})}function E$e(){const{data:e,isLoading:t,error:n}=Ke({queryKey:["/api/ai/cache-stats"],refetchInterval:1e4});if(t)return r.jsx(U,{"data-testid":"card-cache-stats",children:r.jsx(ne,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(_v,{className:"h-5 w-5"}),"Cache IA - Chargement..."]})})});if(n||!(e!=null&&e.success))return r.jsxs(U,{"data-testid":"card-cache-stats-error",className:"border-orange-200 dark:border-orange-800",children:[r.jsxs(ne,{children:[r.jsxs(se,{className:"flex items-center gap-2 text-orange-600",children:[r.jsx(_v,{className:"h-5 w-5"}),"Cache IA - Indisponible"]}),r.jsx(jt,{children:"Impossible de rcuprer les statistiques cache"})]}),r.jsx(Z,{children:r.jsx("p",{className:"text-sm text-muted-foreground",children:"Les statistiques de performance ne sont pas disponibles actuellement. Le systme fonctionne normalement."})})]});const s=e.stats,i=Math.round(s.hit_rate*100),a=Math.round(s.ttl_seconds/60);return r.jsxs(U,{"data-testid":"card-cache-stats",className:"hover-elevate",children:[r.jsxs(ne,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(_v,{className:"h-5 w-5"}),"Cache Scripts IA"]}),r.jsx(jt,{children:"Performance systme gnration scripts"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Entres cache"}),r.jsx("p",{className:"text-2xl font-bold","data-testid":"text-cache-entries",children:s.entries})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Temps conservation"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(jn,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("p",{className:"text-2xl font-bold","data-testid":"text-cache-ttl",children:[a,"min"]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Taux de succs cache"}),r.jsxs(ve,{variant:i>=70?"default":i>=40?"secondary":"outline","data-testid":"badge-hit-rate",children:[i,"%"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(wn,{className:"h-4 w-4 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Hits"}),r.jsx("p",{className:"text-lg font-semibold","data-testid":"text-cache-hits",children:s.hits})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(uj,{className:"h-4 w-4 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Misses"}),r.jsx("p",{className:"text-lg font-semibold","data-testid":"text-cache-misses",children:s.misses})]})]})]})]}),i<40&&s.entries>5&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground border-t pt-3",children:[r.jsx(oy,{className:"h-3 w-3"}),r.jsx("span",{children:"Taux faible : Les prospects ont des profils trs varis"})]}),i>=70&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground border-t pt-3",children:[r.jsx(Yt,{className:"h-3 w-3 text-green-600"}),r.jsx("span",{children:"Excellent : Le cache optimise bien les performances"})]})]})]})}function DL(){ya(),QP();const{data:e=[]}=Ke({queryKey:["/api/crm/prospects"]}),{data:t=[]}=Ke({queryKey:["/api/crm/opportunities"]}),{data:n=[]}=Ke({queryKey:["/api/crm/actions"]}),{data:s=[]}=Ke({queryKey:["/api/crm/rdvs"]}),{data:i=[]}=Ke({queryKey:["/api/crm/prospects/a-qualifier"]}),a=e.filter(h=>h.statut==="actif").length,o=i.length,l=t.filter(h=>h.statut==="signe").reduce((h,p)=>{const v=(Number(p.nombreContrats)||0)*(Number(p.abonnementMensuelHt)||0);return h+v},0),c=n.filter(h=>h.statut==="a_faire").length,d=s.filter(h=>new Date(h.dateRdv)>=new Date).length,f=[{title:"Prospects Actifs",value:a,total:e.length,icon:Nn,link:"/crm/prospects",color:"text-blue-600",bgColor:"bg-blue-50 dark:bg-blue-950"},{title:" Qualifier",value:o,total:null,icon:Br,link:"/crm/prospects-a-qualifier",color:o>0?"text-orange-600":"text-gray-600",bgColor:o>0?"bg-orange-50 dark:bg-orange-950":"bg-gray-50 dark:bg-gray-950",badge:o>0,urgent:o>10},{title:"Opportunits",value:`${l.toLocaleString("fr-FR")}`,total:t.length,icon:fn,link:"/crm/opportunities",color:"text-green-600",bgColor:"bg-green-50 dark:bg-green-950"},{title:"Actions en Cours",value:c,total:n.length,icon:Tk,link:"/crm/actions",color:"text-orange-600",bgColor:"bg-orange-50 dark:bg-orange-950"},{title:"RDVs  Venir",value:d,total:s.length,icon:xn,link:"/crm/rdvs",color:"text-purple-600",bgColor:"bg-purple-50 dark:bg-purple-950"}];return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:r.jsxs("div",{className:"container flex h-14 items-center justify-between",children:[r.jsx("h1",{className:"text-lg font-semibold",children:"CRM Hector"}),r.jsx(mr,{showHomeButton:!0})]})}),r.jsxs("main",{className:"container py-6",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Tableau de Bord CRM"}),r.jsx("p",{className:"text-muted-foreground",children:"Vue d'ensemble de ton activit commerciale"})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",children:f.map(h=>r.jsx(un,{href:h.link,children:r.jsxs(U,{className:"hover-elevate active-elevate-2 cursor-pointer transition-all","data-testid":`card-stat-${h.title.toLowerCase().replace(/\s+/g,"-")}`,children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:h.title}),r.jsx("div",{className:`p-2 rounded-md ${h.bgColor}`,children:r.jsx(h.icon,{className:`h-4 w-4 ${h.color}`})})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:h.value}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Total: ",h.total]})]})]})},h.title))}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Performance Systme"}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.jsx(E$e,{})})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Accs Rapide"}),r.jsx("div",{className:"mb-4",children:r.jsx(un,{href:"/crm/workflow",children:r.jsxs(re,{className:"w-full h-14 text-base font-semibold","data-testid":"button-workflow-creation",children:[r.jsx(cP,{className:"mr-2 h-5 w-5"}),"Crer un Workflow Complet (Prospect + Opp + RDV + Action)"]})})}),r.jsx("div",{className:"mb-4",children:r.jsx(un,{href:"/crm/affaires-chaudes",children:r.jsxs(re,{variant:"destructive",className:"w-full h-12 text-base font-semibold","data-testid":"button-affaires-chaudes",children:[r.jsx(Yl,{className:"mr-2 h-5 w-5"}),"Affaires Chaudes -  Relancer"]})})}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsx(un,{href:"/crm/prospects",children:r.jsxs(re,{className:"w-full justify-start",variant:"outline","data-testid":"button-quick-prospects",children:[r.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Grer les Prospects"]})}),r.jsx(un,{href:"/crm/opportunities",children:r.jsxs(re,{className:"w-full justify-start",variant:"outline","data-testid":"button-quick-opportunities",children:[r.jsx(fn,{className:"mr-2 h-4 w-4"}),"Pipeline Commercial"]})}),r.jsx(un,{href:"/crm/actions",children:r.jsxs(re,{className:"w-full justify-start",variant:"outline","data-testid":"button-quick-actions",children:[r.jsx(Tk,{className:"mr-2 h-4 w-4"}),"Mes Actions"]})}),r.jsx(un,{href:"/crm/stats",children:r.jsxs(re,{className:"w-full justify-start",variant:"outline","data-testid":"button-quick-stats",children:[r.jsx(wn,{className:"mr-2 h-4 w-4"}),"Mes Statistiques"]})}),r.jsx(un,{href:"/crm/rdvs",children:r.jsxs(re,{className:"w-full justify-start",variant:"outline","data-testid":"button-quick-rdvs",children:[r.jsx(xn,{className:"mr-2 h-4 w-4"}),"Mes Rendez-vous"]})})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs(U,{"data-testid":"card-recent-prospects",children:[r.jsx(ne,{children:r.jsx(se,{className:"text-base",children:"Prospects Rcents"})}),r.jsx(Z,{children:e.length===0?r.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucun prospect pour le moment"}):r.jsx("div",{className:"space-y-2",children:e.slice(0,5).map(h=>r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"font-medium",children:h.entreprise}),r.jsx("span",{className:"text-muted-foreground text-xs",children:h.statut})]},h.id))})})]}),r.jsxs(U,{"data-testid":"card-upcoming-rdvs",children:[r.jsx(ne,{children:r.jsx(se,{className:"text-base",children:"Prochains RDVs"})}),r.jsx(Z,{children:d===0?r.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucun rendez-vous prvu"}):r.jsx("div",{className:"space-y-2",children:s.filter(h=>new Date(h.dateRdv)>=new Date).sort((h,p)=>new Date(h.dateRdv).getTime()-new Date(p.dateRdv).getTime()).slice(0,5).map(h=>r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"font-medium",children:h.titre}),r.jsx("span",{className:"text-muted-foreground text-xs",children:new Date(h.dateRdv).toLocaleDateString("fr-FR")})]},h.id))})})]})]})]})]})}function T$e(){const{toast:e}=At(),{data:t=[],isLoading:n,error:s,refetch:i}=Ke({queryKey:["/api/admin/users"],queryFn:()=>Rl.getAll()}),{data:a,isLoading:o}=Ke({queryKey:["/api/admin/users/stats"],queryFn:()=>Rl.getStats()}),l=dt({mutationFn:d=>Rl.toggleActive(d),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/admin/users"]}),et.invalidateQueries({queryKey:["/api/admin/users/stats"]}),e({title:"Statut mis  jour",description:"Le statut de l'utilisateur a t modifi"})},onError:d=>{e({variant:"destructive",title:"Erreur",description:d.message||"Impossible de modifier le statut"})}}),c=dt({mutationFn:({userId:d,role:f})=>Rl.updateRole(d,f),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/admin/users"]}),et.invalidateQueries({queryKey:["/api/admin/users/stats"]}),e({title:"Rle mis  jour",description:"Le rle de l'utilisateur a t modifi"})},onError:d=>{e({variant:"destructive",title:"Erreur",description:d.message||"Impossible de modifier le rle"})}});return{users:t,stats:a,isLoading:n,isStatsLoading:o,error:s,refetch:i,toggleActive:l.mutate,updateRole:c.mutate,isTogglingActive:l.isPending,isUpdatingRole:c.isPending}}function k$e(){const{toast:e}=At(),{data:t=[],isLoading:n}=Ke({queryKey:["/api/admin/invitations"],queryFn:()=>Rl.getInvitations()}),s=dt({mutationFn:({email:a,role:o})=>Rl.sendInvitation(a,o),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/admin/invitations"]}),e({title:"Invitation envoye",description:"L'invitation a t envoye avec succs"})},onError:a=>{e({variant:"destructive",title:"Erreur",description:a.message||"Impossible d'envoyer l'invitation"})}}),i=dt({mutationFn:a=>Rl.deleteInvitation(a),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/admin/invitations"]}),e({title:"Invitation supprime",description:"L'invitation a t supprime"})},onError:a=>{e({variant:"destructive",title:"Erreur",description:a.message||"Impossible de supprimer l'invitation"})}});return{invitations:t,isLoading:n,sendInvitation:s.mutate,deleteInvitation:i.mutate,isSending:s.isPending,isDeleting:i.isPending}}const Tw={admin:"Admin",sdr:"SDR",bd:"BD",ic:"IC",chef:"Chef d'quipe",resp_dev:"Resp. Dveloppement",dg:"DG",president:"Prsident"};function O$e(){const{users:e,stats:t,isLoading:n,toggleActive:s,updateRole:i,isTogglingActive:a,isUpdatingRole:o}=T$e(),{invitations:l,isLoading:c,sendInvitation:d,deleteInvitation:f,isSending:h,isDeleting:p}=k$e(),[v,j]=_.useState(""),[g,x]=_.useState(!1),[w,N]=_.useState(""),[y,A]=_.useState("bd"),P=e.filter(C=>{const S=v.toLowerCase(),k=[C.firstName,C.lastName].filter(Boolean).join(" ");return C.email.toLowerCase().includes(S)||k.toLowerCase().includes(S)}),E=()=>{d({email:w,role:y}),N(""),A("bd"),x(!1)};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"title-users",children:"Gestion des Utilisateurs"}),r.jsx("p",{className:"text-muted-foreground",children:"Grer les utilisateurs et les invitations de la plateforme"})]}),t&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Utilisateurs"}),r.jsx(Nn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-users",children:t.total})})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Utilisateurs Actifs"}),r.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"stat-active-users",children:t.active})})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Utilisateurs Inactifs"}),r.jsx(os,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold text-red-600","data-testid":"stat-inactive-users",children:t.inactive})})]})]}),r.jsxs(fi,{defaultValue:"users",className:"space-y-4",children:[r.jsxs(qs,{children:[r.jsx(Ht,{value:"users","data-testid":"tab-users",children:"Utilisateurs"}),r.jsx(Ht,{value:"invitations","data-testid":"tab-invitations",children:"Invitations"})]}),r.jsx(Zt,{value:"users",className:"space-y-4",children:r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(ls,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(ge,{placeholder:"Rechercher par email ou nom...",value:v,onChange:C=>j(C.target.value),className:"pl-10","data-testid":"input-search-users"})]})}),r.jsxs(re,{onClick:()=>x(!0),"data-testid":"button-invite-user",children:[r.jsx(uy,{className:"h-4 w-4 mr-2"}),"Inviter un utilisateur"]})]})}),r.jsx(Z,{children:n?r.jsx("div",{className:"text-center py-8",children:"Chargement..."}):P.length>0?r.jsx("div",{className:"rounded-md border",children:r.jsxs(Qa,{children:[r.jsx(Ya,{children:r.jsxs(_r,{children:[r.jsx(kt,{children:"Email"}),r.jsx(kt,{children:"Nom"}),r.jsx(kt,{children:"Rle"}),r.jsx(kt,{children:"Entit"}),r.jsx(kt,{children:"Statut"}),r.jsx(kt,{children:"Actions"})]})}),r.jsx(Xa,{children:P.map(C=>r.jsxs(_r,{"data-testid":`row-user-${C.id}`,children:[r.jsx(Ct,{className:"font-medium",children:C.email}),r.jsx(Ct,{children:[C.firstName,C.lastName].filter(Boolean).join(" ")||"N/A"}),r.jsx(Ct,{children:r.jsxs(gt,{value:C.role,onValueChange:S=>i({userId:C.id,role:S}),disabled:o,"data-testid":`select-role-${C.id}`,children:[r.jsx(mt,{className:"w-48",children:r.jsx(xt,{})}),r.jsx(pt,{children:Object.entries(Tw).map(([S,k])=>r.jsx(Y,{value:S,children:k},S))})]})}),r.jsx(Ct,{children:r.jsx(ve,{variant:"outline",children:C.entity||"N/A"})}),r.jsx(Ct,{children:r.jsx(ve,{variant:C.isActive==="true"?"default":"secondary",children:C.isActive==="true"?"Actif":"Inactif"})}),r.jsx(Ct,{children:r.jsx(re,{variant:"outline",size:"sm",onClick:()=>s(C.id),disabled:a,"data-testid":`button-toggle-${C.id}`,children:C.isActive==="true"?"Dsactiver":"Activer"})})]},C.id))})]})}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucun utilisateur trouv"})})]})}),r.jsx(Zt,{value:"invitations",className:"space-y-4",children:r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(se,{children:"Invitations en attente"}),r.jsxs(re,{onClick:()=>x(!0),"data-testid":"button-invite-user-tab",children:[r.jsx(da,{className:"h-4 w-4 mr-2"}),"Nouvelle invitation"]})]})}),r.jsx(Z,{children:c?r.jsx("div",{className:"text-center py-8",children:"Chargement..."}):l.length>0?r.jsx("div",{className:"space-y-4",children:l.map(C=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg","data-testid":`invitation-${C.id}`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:C.email}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Rle: ",Tw[C.role]||C.role]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Token: ",C.token.substring(0,20),"..."]})]}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>f(C.id),disabled:p,"data-testid":`button-delete-invitation-${C.id}`,children:r.jsx(Ns,{className:"h-4 w-4 text-red-600"})})]},C.id))}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucune invitation en attente"})})]})})]}),r.jsx(Wn,{open:g,onOpenChange:x,children:r.jsxs(Fn,{"data-testid":"dialog-invite-user",children:[r.jsxs(zn,{children:[r.jsx(Bn,{children:"Inviter un utilisateur"}),r.jsx(Za,{children:"Envoyez une invitation pour crer un nouveau compte utilisateur"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Ce,{htmlFor:"invite-email",children:"Email"}),r.jsx(ge,{id:"invite-email",type:"email",placeholder:"email@example.com",value:w,onChange:C=>N(C.target.value),"data-testid":"input-invite-email"})]}),r.jsxs("div",{children:[r.jsx(Ce,{htmlFor:"invite-role",children:"Rle"}),r.jsxs(gt,{value:y,onValueChange:A,children:[r.jsx(mt,{id:"invite-role","data-testid":"select-invite-role",children:r.jsx(xt,{})}),r.jsx(pt,{children:Object.entries(Tw).map(([C,S])=>r.jsx(Y,{value:C,children:S},C))})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(re,{variant:"outline",onClick:()=>x(!1),children:"Annuler"}),r.jsx(re,{onClick:E,disabled:!w||h,"data-testid":"button-send-invitation",children:"Envoyer l'invitation"})]})]})]})})]})}var VA="Checkbox",[M$e]=Nr(VA),[I$e,R$e]=M$e(VA),_G=_.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:s,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:f,...h}=e,[p,v]=_.useState(null),j=Rt(t,A=>v(A)),g=_.useRef(!1),x=p?f||!!p.closest("form"):!0,[w=!1,N]=Vs({prop:i,defaultProp:a,onChange:d}),y=_.useRef(w);return _.useEffect(()=>{const A=p==null?void 0:p.form;if(A){const P=()=>N(y.current);return A.addEventListener("reset",P),()=>A.removeEventListener("reset",P)}},[p,N]),r.jsxs(I$e,{scope:n,state:w,disabled:l,children:[r.jsx(st.button,{type:"button",role:"checkbox","aria-checked":Wl(w)?"mixed":w,"aria-required":o,"data-state":SG(w),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:j,onKeyDown:Ve(e.onKeyDown,A=>{A.key==="Enter"&&A.preventDefault()}),onClick:Ve(e.onClick,A=>{N(P=>Wl(P)?!0:!P),x&&(g.current=A.isPropagationStopped(),g.current||A.stopPropagation())})}),x&&r.jsx(L$e,{control:p,bubbles:!g.current,name:s,value:c,checked:w,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"},defaultChecked:Wl(a)?!1:a})]})});_G.displayName=VA;var wG="CheckboxIndicator",NG=_.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:s,...i}=e,a=R$e(wG,n);return r.jsx(Vr,{present:s||Wl(a.state)||a.state===!0,children:r.jsx(st.span,{"data-state":SG(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});NG.displayName=wG;var L$e=e=>{const{control:t,checked:n,bubbles:s=!0,defaultChecked:i,...a}=e,o=_.useRef(null),l=Pj(n),c=mj(t);_.useEffect(()=>{const f=o.current,h=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&v){const j=new Event("click",{bubbles:s});f.indeterminate=Wl(n),v.call(f,Wl(n)?!1:n),f.dispatchEvent(j)}},[l,n,s]);const d=_.useRef(Wl(n)?!1:n);return r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??d.current,...a,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Wl(e){return e==="indeterminate"}function SG(e){return Wl(e)?"indeterminate":e?"checked":"unchecked"}var CG=_G,D$e=NG;const Zr=_.forwardRef(({className:e,...t},n)=>r.jsx(CG,{ref:n,className:Oe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(D$e,{className:Oe("flex items-center justify-center text-current"),children:r.jsx(Ql,{className:"h-4 w-4"})})}));Zr.displayName=CG.displayName;function $$e({prospect:e,onClose:t}){const[n,s]=_.useState(null),{toast:i}=At(),a=dt({mutationFn:async()=>{const l={nom:e.nom,fonction:e.fonction||"Dcideur",entreprise:e.entreprise,secteur:e.secteur||"Autre",effectif:e.effectifEntreprise?parseInt(e.effectifEntreprise):10,ca_estime:e.chiffreAffaires?parseInt(e.chiffreAffaires.toString()):1e5,disc_profile:{D:50,I:50,S:50,C:50,dominant:"D"},points_cles:[e.enseigneCommerciale?`Enseigne: ${e.enseigneCommerciale}`:"",e.ville?`Localisation: ${e.ville}`:"",e.notes||""].filter(Boolean),historique_interactions:[],veille_web:[]};return await rt("POST","/api/ai/generate-script",{prospect:l,commercial:{nom:"Commercial",experience:"senior"}})},onSuccess:l=>{var c;l.success&&l.script&&(s(l.script),i({title:" Script gnr",description:`Gnr en ${(c=l.duration_seconds)==null?void 0:c.toFixed(1)}s`}))},onError:l=>{i({title:"Erreur",description:l.message||"Impossible de gnrer le script",variant:"destructive"})}}),o=()=>{a.mutate()};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(U,{children:r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(se,{className:"text-lg",children:[e.prenom," ",e.nom]}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[e.fonction||"Dcideur","  ",e.entreprise]})]}),r.jsx(ve,{variant:"outline",children:e.secteur||"Autre"})]})})}),!n&&r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("p",{className:"text-muted-foreground",children:"Gnre un script d'appel personnalis adapt au profil du prospect"}),r.jsx(re,{onClick:o,disabled:a.isPending,size:"lg","data-testid":"button-generate-script",children:a.isPending?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),"Gnration en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Vn,{className:"mr-2 h-4 w-4"}),"Gnrer le script IA"]})})]}),n&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(U,{children:r.jsx(Z,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(jn,{className:"h-4 w-4 text-primary"}),r.jsx("span",{className:"font-medium",children:"Dure estime:"}),r.jsxs(ve,{variant:"secondary",children:[Math.floor(n.duree_estimee_secondes/60)," min ",n.duree_estimee_secondes%60," sec"]})]})})}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Va,{className:"h-5 w-5 text-primary"}),r.jsx(se,{className:"text-base",children:"1. Accroche"})]})}),r.jsx(Z,{children:r.jsx("p",{className:"text-sm leading-relaxed",children:n.accroche})})]}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(fn,{className:"h-5 w-5 text-primary"}),r.jsx(se,{className:"text-base",children:"2. Questions Dcouverte"})]})}),r.jsx(Z,{children:r.jsx("ul",{className:"space-y-2",children:n.questions_decouverte.map((l,c)=>r.jsxs("li",{className:"flex gap-2 text-sm",children:[r.jsxs("span",{className:"font-semibold text-primary shrink-0",children:["Q",c+1,":"]}),r.jsx("span",{children:l})]},c))})})]}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ti,{className:"h-5 w-5 text-primary"}),r.jsx(se,{className:"text-base",children:"3. Proposition de Valeur"})]})}),r.jsx(Z,{children:r.jsx("p",{className:"text-sm leading-relaxed",children:n.proposition_valeur})})]}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vn,{className:"h-5 w-5 text-primary"}),r.jsx(se,{className:"text-base",children:"4. Closing RDV"})]})}),r.jsx(Z,{children:r.jsx("p",{className:"text-sm leading-relaxed",children:n.closing_rdv})})]}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yr,{className:"h-5 w-5 text-amber-500"}),r.jsx(se,{className:"text-base",children:"5. Objections Probables"})]})}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-3",children:n.objections_probables.map((l,c)=>r.jsxs("div",{className:"border-l-2 border-amber-500 pl-3",children:[r.jsxs("p",{className:"text-sm font-semibold text-amber-600 dark:text-amber-400",children:['"',l.objection,'"']}),r.jsxs("p",{className:"text-sm mt-1 text-muted-foreground",children:[" ",l.reponse]})]},c))})})]}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yf,{className:"h-5 w-5 text-blue-500"}),r.jsx(se,{className:"text-base",children:"6. Conseils Commerciaux"})]})}),r.jsx(Z,{children:r.jsx("ul",{className:"space-y-2",children:n.conseils_commerciaux.map((l,c)=>r.jsxs("li",{className:"flex gap-2 text-sm",children:[r.jsx("span",{className:"text-blue-500 shrink-0",children:""}),r.jsx("span",{children:l})]},c))})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(re,{variant:"outline",onClick:()=>s(null),"data-testid":"button-regenerate",children:"Regnrer"}),t&&r.jsx(re,{variant:"default",onClick:t,"data-testid":"button-close-script",children:"Fermer"})]})]})]})}function F$e(){const[e,t]=_.useState(""),[n,s]=_.useState(!1),[i,a]=_.useState(null),[o,l]=_.useState(null),{toast:c}=At();ya();const[,d]=es(),{data:f=[],isLoading:h}=Ke({queryKey:["/api/crm/prospects"]}),p=dt({mutationFn:async y=>await rt("POST","/api/crm/prospects",y),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/prospects"]}),s(!1),c({title:"Prospect cr",description:"Le prospect a t ajout avec succs"})},onError:()=>{c({title:"Erreur",description:"Impossible de crer le prospect",variant:"destructive"})}}),v=dt({mutationFn:async({id:y,data:A})=>await rt("PATCH",`/api/crm/prospects/${y}`,A),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/prospects"]}),a(null),c({title:"Prospect modifi",description:"Les modifications ont t enregistres"})},onError:()=>{c({title:"Erreur",description:"Impossible de modifier le prospect",variant:"destructive"})}}),j=dt({mutationFn:async y=>await rt("DELETE",`/api/crm/prospects/${y}`),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/prospects"]}),c({title:"Prospect supprim",description:"Le prospect a t supprim avec succs"})},onError:()=>{c({title:"Erreur",description:"Impossible de supprimer le prospect",variant:"destructive"})}}),g=y=>{y.preventDefault();const A=new FormData(y.currentTarget),P={nom:A.get("nom"),prenom:A.get("prenom"),entreprise:A.get("entreprise"),enseigneCommerciale:A.get("enseigneCommerciale"),raisonSociale:A.get("raisonSociale"),siret:A.get("siret"),email:A.get("email"),telephone:A.get("telephone"),adresse1:A.get("adresse"),ville:A.get("ville"),codePostal:A.get("codePostal"),secteur:A.get("secteur"),statut:A.get("statut"),source:A.get("source"),notes:A.get("notes"),entity:A.get("entity")||void 0},E=A.get("competitorConcurrentId"),C=A.get("competitorContractEndDate");if(E&&C){const S=A.get("competitorSolutionsInstalled");P.competitorSituation={concurrentId:E,contractEndDate:C,monthlyAmount:A.get("competitorMonthlyAmount")?parseFloat(A.get("competitorMonthlyAmount")):void 0,notes:A.get("competitorNotes")||void 0,solutionsInstalled:S?JSON.parse(S):void 0,subscriptionType:A.get("competitorSubscriptionType")||void 0,numberOfSites:A.get("competitorNumberOfSites")?parseInt(A.get("competitorNumberOfSites")):void 0,avgContractDurationMonths:A.get("competitorAvgContractDurationMonths")?parseInt(A.get("competitorAvgContractDurationMonths")):void 0,satisfactionLevel:A.get("competitorSatisfactionLevel")||void 0,satisfactionNotes:A.get("competitorSatisfactionNotes")||void 0}}i?v.mutate({id:i.id,data:P}):p.mutate(P)},x=f.filter(y=>{var P,E;const A=e.toLowerCase();return y.nom.toLowerCase().includes(A)||y.entreprise.toLowerCase().includes(A)||((P=y.email)==null?void 0:P.toLowerCase().includes(A))||((E=y.telephone)==null?void 0:E.toLowerCase().includes(A))}),w=y=>{switch(y){case"actif":return"default";case"qualifie":return"secondary";case"en_attente":return"outline";case"perdu":return"destructive";default:return"outline"}},N=y=>{switch(y){case"actif":return"Actif";case"qualifie":return"Qualifi";case"en_attente":return"En attente";case"perdu":return"Perdu";default:return y}};return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:r.jsxs("div",{className:"container flex h-14 items-center justify-between",children:[r.jsx("h1",{className:"text-lg font-semibold",children:"Prospects"}),r.jsx(mr,{showHomeButton:!0})]})}),r.jsxs("main",{className:"container py-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("div",{className:"flex-1 max-w-sm",children:r.jsxs("div",{className:"relative",children:[r.jsx(ls,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(ge,{placeholder:"Rechercher un prospect...",value:e,onChange:y=>t(y.target.value),className:"pl-10","data-testid":"input-search-prospects"})]})}),r.jsxs(Wn,{open:n,onOpenChange:s,children:[r.jsx(Mo,{asChild:!0,children:r.jsxs(re,{"data-testid":"button-create-prospect",children:[r.jsx(dr,{className:"mr-2 h-4 w-4"}),"Nouveau Prospect"]})}),r.jsxs(Fn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(zn,{children:r.jsx(Bn,{children:"Nouveau Prospect"})}),r.jsx($L,{onSubmit:g,isLoading:p.isPending})]})]})]}),h?r.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Chargement..."}):x.length===0?r.jsx(U,{className:"p-12",children:r.jsx("div",{className:"text-center text-muted-foreground",children:e?"Aucun prospect trouv":"Aucun prospect pour le moment"})}):r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:x.map(y=>r.jsxs(U,{className:"hover-elevate","data-testid":`card-prospect-${y.id}`,children:[r.jsx(ne,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(se,{className:"text-base truncate",children:[y.prenom," ",y.nom]}),r.jsxs(ve,{variant:"outline",className:"shrink-0 text-xs font-mono","data-testid":`badge-entity-${y.id}`,children:[y.entity==="france"&&" FR",y.entity==="luxembourg"&&" LU",y.entity==="belgique"&&" BE"]})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-muted-foreground",children:[r.jsx(Ir,{className:"h-3 w-3 shrink-0"}),r.jsx("span",{className:"truncate",children:y.entreprise})]}),y.fonction&&r.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-muted-foreground",children:[r.jsx(JC,{className:"h-3 w-3 shrink-0"}),r.jsx("span",{className:"truncate",children:y.fonction})]})]}),r.jsx(ve,{variant:w(y.statut),children:N(y.statut)})]})}),r.jsxs(Z,{className:"space-y-2",children:[y.email&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(da,{className:"h-3 w-3 text-muted-foreground shrink-0"}),r.jsx("span",{className:"truncate",children:y.email})]}),y.telephone&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Vn,{className:"h-3 w-3 text-muted-foreground shrink-0"}),r.jsx("span",{className:"truncate",children:y.telephone})]}),y.ville&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Jr,{className:"h-3 w-3 text-muted-foreground shrink-0"}),r.jsx("span",{className:"truncate",children:y.ville})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx(Ri,{className:"h-3 w-3 shrink-0"}),r.jsxs("span",{children:["Source: ",y.source]})]}),y.isFullyEnriched==="true"&&r.jsxs("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Yt,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),r.jsx("h3",{className:"text-xs font-semibold text-green-800 dark:text-green-300",children:"Donnes enrichies"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs",children:[y.capitalSocial&&r.jsxs("div",{className:"truncate",children:[r.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Capital:"}),r.jsx("span",{className:"ml-1 text-gray-600 dark:text-gray-400",children:y.capitalSocial})]}),y.formeJuridique&&r.jsxs("div",{className:"truncate",children:[r.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Forme:"}),r.jsx("span",{className:"ml-1 text-gray-600 dark:text-gray-400",children:y.formeJuridique})]}),y.effectifEntreprise&&r.jsxs("div",{className:"truncate",children:[r.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Effectif:"}),r.jsx("span",{className:"ml-1 text-gray-600 dark:text-gray-400",children:y.effectifEntreprise})]}),y.dateCreationEntreprise&&r.jsxs("div",{className:"truncate",children:[r.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Cration:"}),r.jsx("span",{className:"ml-1 text-gray-600 dark:text-gray-400",children:new Date(y.dateCreationEntreprise).toLocaleDateString("fr-FR")})]}),y.chiffreAffaires&&r.jsxs("div",{className:"truncate col-span-2",children:[r.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"CA:"}),r.jsxs("span",{className:"ml-1 text-gray-600 dark:text-gray-400",children:[parseFloat(y.chiffreAffaires.toString()).toLocaleString("fr-FR")," "]})]}),y.dirigeantPrincipal&&r.jsxs("div",{className:"truncate col-span-2",children:[r.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Dirigeant:"}),r.jsx("span",{className:"ml-1 text-gray-600 dark:text-gray-400",children:y.dirigeantPrincipal})]})]}),y.enrichedAt&&r.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Enrichi le ",new Date(y.enrichedAt).toLocaleString("fr-FR")]})]}),r.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[r.jsxs(Wn,{open:(o==null?void 0:o.id)===y.id,onOpenChange:A=>{l(A?y:null)},children:[r.jsx(Mo,{asChild:!0,children:r.jsxs(re,{variant:"default",size:"sm","data-testid":`button-generate-script-${y.id}`,children:[r.jsx(Va,{className:"mr-2 h-3 w-3"}),"Gnrer Script IA"]})}),r.jsxs(Fn,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsx(zn,{children:r.jsx(Bn,{children:"Script d'Appel IA - Module Phoning"})}),r.jsx($$e,{prospect:y,onClose:()=>l(null)})]})]}),r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>{const A=new URLSearchParams({nom:y.nom,...y.prenom&&{prenom:y.prenom},entreprise:y.entreprise,...y.email&&{email:y.email},...y.telephone&&{telephone:y.telephone},...y.adresse1&&{adresse1:y.adresse1},...y.ville&&{ville:y.ville},...y.codePostal&&{codePostal:y.codePostal}});d(`/crm/workflow?${A.toString()}`)},"data-testid":`button-prepare-rdv-${y.id}`,children:[r.jsx(xn,{className:"mr-2 h-3 w-3"}),"Prparer RDV"]}),r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>{d(`/crm/rdvs?prospectId=${y.id}`)},"data-testid":`button-nouveau-rdv-${y.id}`,children:[r.jsx(xn,{className:"mr-2 h-3 w-3"}),"Nouveau RDV"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Wn,{open:(i==null?void 0:i.id)===y.id,onOpenChange:A=>{a(A?y:null)},children:[r.jsx(Mo,{asChild:!0,children:r.jsxs(re,{variant:"outline",size:"sm",className:"flex-1","data-testid":`button-edit-prospect-${y.id}`,children:[r.jsx(Ii,{className:"mr-2 h-3 w-3"}),"Modifier"]})}),r.jsxs(Fn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(zn,{children:r.jsx(Bn,{children:"Modifier le Prospect"})}),r.jsx($L,{onSubmit:g,initialData:y,isLoading:v.isPending})]})]}),r.jsx(re,{variant:"outline",size:"sm",onClick:()=>{confirm("tes-vous sr de vouloir supprimer ce prospect ?")&&j.mutate(y.id)},"data-testid":`button-delete-prospect-${y.id}`,children:r.jsx(Ns,{className:"h-3 w-3"})})]})]})]})]},y.id))})]})]})}function $L({onSubmit:e,initialData:t,isLoading:n}){const{user:s}=ya(),[i,a]=_.useState((t==null?void 0:t.secteur)||""),[o,l]=_.useState((t==null?void 0:t.statut)||"actif"),[c,d]=_.useState((t==null?void 0:t.source)||"direct"),[f,h]=_.useState((t==null?void 0:t.entity)||""),[p,v]=_.useState((t==null?void 0:t.siret)||""),[j,g]=_.useState((t==null?void 0:t.entreprise)||""),[x,w]=_.useState((t==null?void 0:t.raisonSociale)||""),[N,y]=_.useState((t==null?void 0:t.enseigneCommerciale)||""),[A,P]=_.useState((t==null?void 0:t.adresse1)||""),[E,C]=_.useState((t==null?void 0:t.ville)||""),[S,k]=_.useState((t==null?void 0:t.codePostal)||""),[I,R]=_.useState(!1),{toast:D}=At(),[z,V]=_.useState(!1),[K,H]=_.useState(""),[W,B]=_.useState(""),[$,G]=_.useState(""),[ee,oe]=_.useState(""),[fe,Ee]=_.useState([]),[J,Pe]=_.useState(""),[ze,$e]=_.useState(""),[me,Te]=_.useState(""),[je,ue]=_.useState(""),[ct,Ge]=_.useState(""),{data:ut}=Ke({queryKey:["/api/competitor/concurrents"],enabled:z}),Xe=_.useCallback(async qe=>{if(v(qe),!(qe.length!==14||!/^\d{14}$/.test(qe))){R(!0);try{const lt=await rt("POST","/api/prospects/enrich-siret-quick",{siret:qe});if(lt.success&&lt.data){const It=lt.data.raison_sociale||"";w(It),y(lt.data.enseigne_commerciale||""),g(It),P(lt.data.adresse||""),C(lt.data.ville||""),k(lt.data.code_postal||"");const Kn={pharmacie:"Sant",commerce_alimentaire:"Commerce",restaurant_traditionnel:"Restauration",autres_secteurs_structure:"Autre"}[lt.data.secteur]||"Autre";a(Kn),D({title:" Donnes enrichies",description:`${lt.data.raison_sociale} - ${lt.data.ville}`})}}catch(lt){console.error("Erreur enrichissement:",lt),lt.message&&!lt.message.includes("404")&&D({title:" Enrichissement indisponible",description:"Vous pouvez continuer  saisir manuellement",variant:"default"})}finally{R(!1)}}},[D]);return r.jsxs("form",{onSubmit:e,className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"prenom",children:"Prnom"}),r.jsx(ge,{id:"prenom",name:"prenom",defaultValue:(t==null?void 0:t.prenom)||"","data-testid":"input-prenom"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"nom",children:"Nom *"}),r.jsx(ge,{id:"nom",name:"nom",required:!0,defaultValue:t==null?void 0:t.nom,"data-testid":"input-nom"})]})]}),(s==null?void 0:s.role)==="admin_groupe"&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Ce,{htmlFor:"entity",children:["Entit *",r.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"(Visible uniquement pour Admin Groupe)"})]}),r.jsxs(gt,{value:f,onValueChange:h,required:!0,children:[r.jsx(mt,{id:"entity","data-testid":"select-entity",children:r.jsx(xt,{placeholder:"Choisir l'entit..."})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"france",children:" France"}),r.jsx(Y,{value:"luxembourg",children:" Luxembourg"}),r.jsx(Y,{value:"belgique",children:" Belgique (2026)"})]})]}),r.jsx("input",{type:"hidden",name:"entity",value:f})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"entreprise",children:"Entreprise *"}),r.jsx(ge,{id:"entreprise",name:"entreprise",required:!0,value:j,onChange:qe=>g(qe.target.value),"data-testid":"input-entreprise",placeholder:"Raison sociale de l'entreprise"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Raison sociale juridique (sera remplie automatiquement via SIRET)"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"siret",children:"SIRET"}),r.jsxs("div",{className:"relative",children:[r.jsx(ge,{id:"siret",name:"siret",placeholder:"14 chiffres - Ex: 80382008300019",maxLength:14,pattern:"[0-9]{14}",value:p,onChange:qe=>Xe(qe.target.value),"data-testid":"input-siret",className:I?"pr-10":""}),I&&r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:r.jsx(On,{className:"h-4 w-4 animate-spin text-muted-foreground"})})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:I?" Enrichissement en cours...":" Auto-enrichissement activ via API Pappers"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"enseigneCommerciale",children:"Enseigne Commerciale (auto-enrichi)"}),r.jsx(ge,{id:"enseigneCommerciale",name:"enseigneCommerciale",placeholder:"Ex: GRANDE PHARMACIE DE LA VERPILLIERE",value:N,onChange:qe=>y(qe.target.value),"data-testid":"input-enseigne-commerciale"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Nom visible du commerce (si diffrent du nom juridique)"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"raisonSociale",children:"Raison Sociale (auto-enrichi)"}),r.jsx(ge,{id:"raisonSociale",name:"raisonSociale",placeholder:"Ex: SARL PHARMACIE MARTIN",value:x,onChange:qe=>w(qe.target.value),"data-testid":"input-raison-sociale"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Nom juridique officiel (sera rcupr automatiquement via SIRET)"})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"email",children:"Email"}),r.jsx(ge,{id:"email",name:"email",type:"email",defaultValue:(t==null?void 0:t.email)||"","data-testid":"input-email"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"telephone",children:"Tlphone"}),r.jsx(ge,{id:"telephone",name:"telephone",defaultValue:(t==null?void 0:t.telephone)||"","data-testid":"input-telephone"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"adresse",children:"Adresse (auto-enrichi)"}),r.jsx(ge,{id:"adresse",name:"adresse",value:A,onChange:qe=>P(qe.target.value),placeholder:"Sera complt automatiquement via SIRET","data-testid":"input-adresse"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"ville",children:"Ville (auto-enrichi)"}),r.jsx(ge,{id:"ville",name:"ville",value:E,onChange:qe=>C(qe.target.value),placeholder:"Sera complt automatiquement","data-testid":"input-ville"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"codePostal",children:"Code Postal (auto-enrichi)"}),r.jsx(ge,{id:"codePostal",name:"codePostal",value:S,onChange:qe=>k(qe.target.value),placeholder:"Auto-enrichi","data-testid":"input-code-postal"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"secteur",children:"Secteur d'activit (auto-enrichi)"}),r.jsxs(gt,{value:i,onValueChange:a,children:[r.jsx(mt,{id:"secteur","data-testid":"select-secteur",children:r.jsx(xt,{placeholder:"Sera complt automatiquement via SIRET"})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"Restauration",children:"Restauration"}),r.jsx(Y,{value:"Commerce",children:"Commerce"}),r.jsx(Y,{value:"Services",children:"Services"}),r.jsx(Y,{value:"Industrie",children:"Industrie"}),r.jsx(Y,{value:"BTP",children:"BTP"}),r.jsx(Y,{value:"Sant",children:"Sant"}),r.jsx(Y,{value:"Transport",children:"Transport"}),r.jsx(Y,{value:"Immobilier",children:"Immobilier"}),r.jsx(Y,{value:"Htellerie",children:"Htellerie"}),r.jsx(Y,{value:"Agriculture",children:"Agriculture"}),r.jsx(Y,{value:"Autre",children:"Autre"})]})]}),r.jsx("input",{type:"hidden",name:"secteur",value:i})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"statut",children:"Statut *"}),r.jsxs(gt,{value:o,onValueChange:l,children:[r.jsx(mt,{id:"statut","data-testid":"select-statut",children:r.jsx(xt,{})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"actif",children:"Actif"}),r.jsx(Y,{value:"qualifie",children:"Qualifi"}),r.jsx(Y,{value:"en_attente",children:"En attente"}),r.jsx(Y,{value:"perdu",children:"Perdu"})]})]}),r.jsx("input",{type:"hidden",name:"statut",value:o})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"source",children:"Source *"}),r.jsxs(gt,{value:c,onValueChange:d,children:[r.jsx(mt,{id:"source","data-testid":"select-source",children:r.jsx(xt,{})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"direct",children:"Direct"}),r.jsx(Y,{value:"referral",children:"Recommandation"}),r.jsx(Y,{value:"website",children:"Site Web"}),r.jsx(Y,{value:"linkedin",children:"LinkedIn"}),r.jsx(Y,{value:"salon",children:"Salon"}),r.jsx(Y,{value:"carte_visite",children:"Carte de visite"}),r.jsx(Y,{value:"autre",children:"Autre"})]})]}),r.jsx("input",{type:"hidden",name:"source",value:c})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"notes",children:"Notes"}),r.jsx(Dn,{id:"notes",name:"notes",rows:4,defaultValue:(t==null?void 0:t.notes)||"","data-testid":"textarea-notes"})]}),r.jsxs(U,{className:"border-2 border-dashed",children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Zr,{id:"capture-competitor",checked:z,onCheckedChange:qe=>V(qe),"data-testid":"checkbox-capture-competitor"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs(Ce,{htmlFor:"capture-competitor",className:"text-base font-semibold flex items-center gap-2 cursor-pointer",children:[r.jsx(Uo,{className:"w-5 h-5 text-orange-500"}),"chance Concurrent (optionnel)"]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cocher si le prospect a dj un fournisseur de scurit avec chance connue"})]})]})}),z&&r.jsxs(Z,{className:"space-y-4 pt-0",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"concurrent-id",children:"Concurrent actuel *"}),r.jsxs(gt,{value:K,onValueChange:H,required:z,children:[r.jsx(mt,{id:"concurrent-id","data-testid":"select-concurrent",children:r.jsx(xt,{placeholder:"Slectionner..."})}),r.jsx(pt,{children:((ut==null?void 0:ut.concurrents)||[]).map(qe=>r.jsx(Y,{value:qe.id,children:qe.name},qe.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"contract-end-date",children:"Date chance contrat *"}),r.jsx(ge,{id:"contract-end-date",type:"date",value:W,onChange:qe=>B(qe.target.value),required:z,"data-testid":"input-contract-end-date"})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"monthly-amount",children:"Montant mensuel (/mois)"}),r.jsx(ge,{id:"monthly-amount",type:"number",min:"0",step:"0.01",value:$,onChange:qe=>G(qe.target.value),placeholder:"Ex: 650","data-testid":"input-monthly-amount"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"subscription-type",children:"Type d'abonnement"}),r.jsxs(gt,{value:J,onValueChange:Pe,children:[r.jsx(mt,{id:"subscription-type","data-testid":"select-subscription-type",children:r.jsx(xt,{placeholder:"Slectionner..."})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"mensuel",children:"Mensuel"}),r.jsx(Y,{value:"trimestriel",children:"Trimestriel"}),r.jsx(Y,{value:"annuel",children:"Annuel"}),r.jsx(Y,{value:"pluriannuel",children:"Pluriannuel"})]})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"number-of-sites",children:"Nombre de sites"}),r.jsx(ge,{id:"number-of-sites",type:"number",min:"1",value:ze,onChange:qe=>$e(qe.target.value),placeholder:"Ex: 3","data-testid":"input-number-of-sites"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"avg-contract-duration",children:"Dure moy. contrat (mois)"}),r.jsx(ge,{id:"avg-contract-duration",type:"number",min:"1",value:me,onChange:qe=>Te(qe.target.value),placeholder:"Ex: 36","data-testid":"input-avg-contract-duration"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"solutions-installed",children:"Solutions installes (multi-slection)"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Gardiennage","Tlsurveillance","Contrle d'accs","Vidosurveillance","Alarme","Autre"].map(qe=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zr,{id:`solution-${qe}`,checked:fe.includes(qe),onCheckedChange:lt=>{Ee(lt?[...fe,qe]:fe.filter(It=>It!==qe))},"data-testid":`checkbox-solution-${qe.toLowerCase().replace(/\s+/g,"-").replace(/'/g,"")}`}),r.jsx(Ce,{htmlFor:`solution-${qe}`,className:"text-sm cursor-pointer",children:qe})]},qe))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"satisfaction-level",children:"Niveau de satisfaction"}),r.jsxs(gt,{value:je,onValueChange:ue,children:[r.jsx(mt,{id:"satisfaction-level","data-testid":"select-satisfaction-level",children:r.jsx(xt,{placeholder:"Slectionner..."})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"1",children:" Trs insatisfait"}),r.jsx(Y,{value:"2",children:" Insatisfait"}),r.jsx(Y,{value:"3",children:" Neutre"}),r.jsx(Y,{value:"4",children:" Satisfait"}),r.jsx(Y,{value:"5",children:" Trs satisfait"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"satisfaction-notes",children:"Notes satisfaction"}),r.jsx(Dn,{id:"satisfaction-notes",rows:2,value:ct,onChange:qe=>Ge(qe.target.value),placeholder:"Points de douleur, insatisfactions, attentes...","data-testid":"textarea-satisfaction-notes"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"competitor-notes",children:"Notes gnrales"}),r.jsx(Dn,{id:"competitor-notes",rows:2,value:ee,onChange:qe=>oe(qe.target.value),placeholder:"Informations complmentaires...","data-testid":"textarea-competitor-notes"})]}),r.jsx("input",{type:"hidden",name:"competitorConcurrentId",value:K}),r.jsx("input",{type:"hidden",name:"competitorContractEndDate",value:W}),r.jsx("input",{type:"hidden",name:"competitorMonthlyAmount",value:$}),r.jsx("input",{type:"hidden",name:"competitorNotes",value:ee}),r.jsx("input",{type:"hidden",name:"competitorSolutionsInstalled",value:JSON.stringify(fe)}),r.jsx("input",{type:"hidden",name:"competitorSubscriptionType",value:J}),r.jsx("input",{type:"hidden",name:"competitorNumberOfSites",value:ze}),r.jsx("input",{type:"hidden",name:"competitorAvgContractDurationMonths",value:me}),r.jsx("input",{type:"hidden",name:"competitorSatisfactionLevel",value:je}),r.jsx("input",{type:"hidden",name:"competitorSatisfactionNotes",value:ct})]})]}),r.jsx("div",{className:"flex gap-2 justify-end",children:r.jsx(re,{type:"submit",disabled:n,"data-testid":"button-submit-prospect",children:n?"Enregistrement...":"Enregistrer"})})]})}function FL({prospect:e,onQualify:t,className:n}){const[s,i]=_.useState(!1),[a,o]=_.useState(""),[l,c]=_.useState(!1),d=async()=>{if(a.trim()){c(!0);try{await t(e.id,a.trim()),i(!1),o("")}catch(j){console.error("Erreur qualification:",j)}finally{c(!1)}}},f=j=>{const g=j.replace(/\s/g,"");return g.length===14?`${g.slice(0,3)} ${g.slice(3,6)} ${g.slice(6,9)} ${g.slice(9,14)}`:j},h=j=>{const g=j.target.value.replace(/\s/g,"");/^\d*$/.test(g)&&g.length<=14&&o(g)},p=Math.floor((Date.now()-new Date(e.createdAt).getTime())/(1e3*60*60*24)),v=p>=7;return r.jsxs(r.Fragment,{children:[r.jsxs(U,{className:Oe("hover-elevate transition-all",v&&"border-l-4 border-l-orange-500",n),"data-testid":`prospect-card-${e.id}`,children:[r.jsx(ne,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs(se,{className:"text-lg flex items-center gap-2",children:[r.jsx(Ri,{className:"h-5 w-5 flex-shrink-0"}),r.jsxs("span",{className:"truncate",children:[e.prenom," ",e.nom]}),r.jsxs(ve,{variant:"outline",className:"shrink-0 text-xs font-mono","data-testid":`badge-entity-${e.id}`,children:[e.entity==="france"&&" FR",e.entity==="luxembourg"&&" LU",e.entity==="belgique"&&" BE"]})]}),e.entreprise&&r.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-muted-foreground",children:[r.jsx(Ir,{className:"h-4 w-4"}),r.jsx("span",{className:"truncate",children:e.entreprise})]}),e.fonction&&r.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-muted-foreground",children:[r.jsx(JC,{className:"h-4 w-4"}),r.jsx("span",{className:"truncate",children:e.fonction})]})]}),r.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[r.jsx(ve,{variant:v?"destructive":"secondary",className:"text-xs","data-testid":`badge-status-${e.id}`,children:" qualifier"}),p>0&&r.jsxs("span",{className:"text-xs text-muted-foreground",children:["il y a ",p,"j"]})]})]})}),r.jsxs(Z,{className:"space-y-2",children:[e.telephone&&r.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[r.jsx(Vn,{className:"h-4 w-4 mt-0.5 flex-shrink-0 text-muted-foreground"}),r.jsx("span",{"data-testid":`text-phone-${e.id}`,children:e.telephone})]}),e.email&&r.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[r.jsx(da,{className:"h-4 w-4 mt-0.5 flex-shrink-0 text-muted-foreground"}),r.jsx("span",{className:"truncate","data-testid":`text-email-${e.id}`,children:e.email})]}),(e.ville||e.codePostal)&&r.jsxs("div",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[r.jsx(Jr,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),r.jsxs("span",{children:[e.codePostal&&`${e.codePostal} `,e.ville]})]}),e.createdAt&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground pt-2 border-t",children:[r.jsx(xn,{className:"h-3 w-3"}),"Cr le ",br(new Date(e.createdAt),"dd/MM/yyyy",{locale:jr})]}),r.jsx("div",{className:"pt-2",children:r.jsxs(re,{size:"sm",className:"w-full",onClick:()=>i(!0),"data-testid":`button-qualify-${e.id}`,children:[r.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Qualifier avec SIRET"]})})]})]}),r.jsx(Wn,{open:s,onOpenChange:i,children:r.jsxs(Fn,{"data-testid":"dialog-qualify",children:[r.jsx(zn,{children:r.jsx(Bn,{children:"Qualifier le prospect"})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsx("div",{className:"space-y-2",children:r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Prospect : ",r.jsxs("strong",{children:[e.prenom," ",e.nom]}),e.entreprise&&r.jsxs(r.Fragment,{children:[" - ",e.entreprise]})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"siret",children:"SIRET (14 chiffres)"}),r.jsx(ge,{id:"siret",placeholder:"123 456 789 01234",value:f(a),onChange:h,maxLength:17,"data-testid":"input-siret"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"L'enrichissement CASCADE (INSEE  Pappers) sera lanc automatiquement"})]})]}),r.jsxs(t8,{children:[r.jsx(re,{variant:"outline",onClick:()=>{i(!1),o("")},disabled:l,"data-testid":"button-cancel",children:"Annuler"}),r.jsx(re,{onClick:d,disabled:a.length!==14||l,"data-testid":"button-confirm-qualify",children:l?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"h-4 w-4 mr-2 animate-spin"}),"Qualification..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Qualifier"]})})]})]})})]})}function z$e(){const[e,t]=_.useState(""),{toast:n}=At(),{data:s=[],isLoading:i}=Ke({queryKey:["/api/crm/prospects/a-qualifier"]}),{data:a}=Ke({queryKey:["/api/crm/prospects/qualification-stats"]}),o=dt({mutationFn:async({prospectId:f,siret:h})=>await rt("POST",`/api/crm/prospects/${f}/qualify`,{siret:h}),onSuccess:f=>{et.invalidateQueries({queryKey:["/api/crm/prospects/a-qualifier"]}),et.invalidateQueries({queryKey:["/api/crm/prospects/qualification-stats"]}),et.invalidateQueries({queryKey:["/api/crm/prospects"]});const h=f.enrichmentSource==="insee"?"INSEE (gratuit)":"Pappers",p=f.enrichmentCost||0;n({title:"Prospect qualifi avec succs !",description:`Enrichissement via ${h} (${p}). Le prospect a t mis  jour.`})},onError:f=>{n({title:"Erreur de qualification",description:f.message||"Impossible de qualifier ce prospect",variant:"destructive"})}}),l=async(f,h)=>{await o.mutateAsync({prospectId:f,siret:h})},c=s.filter(f=>{var p,v,j,g,x;const h=e.toLowerCase();return((p=f.nom)==null?void 0:p.toLowerCase().includes(h))||((v=f.prenom)==null?void 0:v.toLowerCase().includes(h))||((j=f.entreprise)==null?void 0:j.toLowerCase().includes(h))||((g=f.telephone)==null?void 0:g.toLowerCase().includes(h))||((x=f.email)==null?void 0:x.toLowerCase().includes(h))}),d=c.filter(f=>Math.floor((Date.now()-new Date(f.createdAt).getTime())/864e5)>=7);return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("div",{className:"border-b bg-card",children:r.jsx("div",{className:"container mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(un,{href:"/crm/prospects",children:r.jsx(re,{variant:"ghost",size:"icon","data-testid":"button-back",children:r.jsx(ua,{className:"h-5 w-5"})})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Prospects  qualifier"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Cartes de visite terrain en attente de qualification"})]})]}),r.jsx(mr,{showHomeButton:!0})]})})}),r.jsxs("div",{className:"container mx-auto px-4 py-6",children:[a&&r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5 mb-6",children:[r.jsxs(U,{"data-testid":"stats-total",children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(se,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[r.jsx(Br,{className:"h-4 w-4"}),"Total  qualifier"]})}),r.jsx(Z,{children:r.jsx("div",{className:"text-3xl font-bold",children:a.total})})]}),r.jsxs(U,{"data-testid":"stats-today",children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(se,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[r.jsx(xn,{className:"h-4 w-4"}),"Aujourd'hui"]})}),r.jsx(Z,{children:r.jsx("div",{className:"text-3xl font-bold",children:a.aujourdhui})})]}),r.jsxs(U,{"data-testid":"stats-week",children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(se,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[r.jsx(wn,{className:"h-4 w-4"}),"Cette semaine"]})}),r.jsx(Z,{children:r.jsx("div",{className:"text-3xl font-bold",children:a.cetteSemaine})})]}),r.jsxs(U,{"data-testid":"stats-urgent",children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(se,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[r.jsx(Br,{className:"h-4 w-4 text-orange-500"}),"+ de 7 jours"]})}),r.jsx(Z,{children:r.jsx("div",{className:"text-3xl font-bold text-orange-500",children:a.plusDe7Jours})})]}),r.jsxs(U,{"data-testid":"stats-average",children:[r.jsx(ne,{className:"pb-3",children:r.jsxs(se,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[r.jsx(jn,{className:"h-4 w-4"}),"Dlai moyen"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"text-3xl font-bold",children:[a.delaiMoyenHeures,"h"]})})]})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx(ls,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(ge,{placeholder:"Rechercher par nom, entreprise, tlphone, email...",value:e,onChange:f=>t(f.target.value),className:"pl-10","data-testid":"input-search"})]})}),i?r.jsx("div",{className:"flex items-center justify-center py-12","data-testid":"loading-state",children:r.jsx(On,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):c.length===0?r.jsx(U,{"data-testid":"empty-state",children:r.jsxs(Z,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(Yt,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:e?"Aucun rsultat":"Aucun prospect  qualifier"}),r.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-md",children:e?"Aucun prospect ne correspond  votre recherche":"Tous les prospects terrain ont t qualifis !"})]})}):r.jsxs("div",{children:[d.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Br,{className:"h-5 w-5 text-orange-500"}),r.jsxs("h2",{className:"text-lg font-semibold",children:["Urgents (",d.length,")"]}),r.jsx(ve,{variant:"destructive",className:"ml-2",children:"+ de 7 jours"})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(f=>r.jsx(FL,{prospect:f,onQualify:l},f.id))})]}),c.filter(f=>Math.floor((Date.now()-new Date(f.createdAt).getTime())/864e5)<7).length>0&&r.jsxs("div",{children:[d.length>0&&r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Rcents"}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3","data-testid":"prospects-list",children:c.filter(f=>Math.floor((Date.now()-new Date(f.createdAt).getTime())/864e5)<7).map(f=>r.jsx(FL,{prospect:f,onQualify:l},f.id))})]})]})]})]})}function B$e(){const[e,t]=_.useState(!1),[n,s]=_.useState(null),[i,a]=_.useState("visio"),{toast:o}=At();ya();const{data:l=[]}=Ke({queryKey:["/api/crm/opportunities"]}),{data:c=[]}=Ke({queryKey:["/api/crm/prospects"]}),{data:d=[]}=Ke({queryKey:["/api/prestations"]}),f=dt({mutationFn:async S=>await rt("POST","/api/crm/opportunities",S),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/opportunities"]}),t(!1),o({title:"Opportunit cre",description:"L'opportunit a t ajoute avec succs"})},onError:S=>{o({title:"Erreur",description:S.message||"Impossible de crer l'opportunit",variant:"destructive"})}}),h=dt({mutationFn:async({id:S,data:k})=>await rt("PATCH",`/api/crm/opportunities/${S}`,k),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/opportunities"]}),s(null),o({title:"Opportunit modifie",description:"Les modifications ont t enregistres"})},onError:S=>{o({title:"Erreur",description:S.message||"Impossible de modifier l'opportunit",variant:"destructive"})}}),p=dt({mutationFn:async S=>await rt("DELETE",`/api/crm/opportunities/${S}`),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/opportunities"]}),o({title:"Opportunit supprime"})}}),v=S=>{S.preventDefault();const k=new FormData(S.currentTarget),I=k.get("prospectId"),R={prospectId:I&&I!=="none"?I:null,titre:k.get("titre"),nombreContrats:parseInt(k.get("nombreContrats")||"1"),abonnementMensuelHt:k.get("abonnementMensuelHt"),dureeEngagementMois:parseInt(k.get("dureeEngagementMois")||"36"),typePrestation:k.get("typePrestation")||null,statut:k.get("statut"),description:k.get("description")||null,datePremierContact:n?n.datePremierContact:new Date};n?h.mutate({id:n.id,data:R}):f.mutate(R)},j=[{id:"r1_visio_planifie",label:"R1 Planifi",color:"bg-blue-50 dark:bg-blue-950"},{id:"r1_visio_fait",label:"R1 Fait",color:"bg-cyan-50 dark:bg-cyan-950"},{id:"r2_visio_planifie",label:"R2 Planifi",color:"bg-indigo-50 dark:bg-indigo-950"},{id:"r2_visio_fait",label:"R2 Fait",color:"bg-purple-50 dark:bg-purple-950"},{id:"r3_visio_planifie",label:"R3 Planifi",color:"bg-violet-50 dark:bg-violet-950"},{id:"r3_visio_fait",label:"R3 Fait",color:"bg-fuchsia-50 dark:bg-fuchsia-950"},{id:"r4_visio_planifie",label:"R4 Planifi",color:"bg-pink-50 dark:bg-pink-950"},{id:"r4_visio_fait",label:"R4 Fait",color:"bg-rose-50 dark:bg-rose-950"},{id:"signe",label:"Sign",color:"bg-green-50 dark:bg-green-950"},{id:"perdu",label:"Perdu",color:"bg-red-50 dark:bg-red-950"}],g=[{id:"r1_planifie",label:"R1 Planifi",color:"bg-blue-50 dark:bg-blue-950"},{id:"r1_fait_signe",label:"R1 Fait - Sign",color:"bg-green-50 dark:bg-green-950"},{id:"r1_fait_r2_requis",label:"R1 Fait - R2 Requis",color:"bg-orange-50 dark:bg-orange-950"},{id:"r2_planifie",label:"R2 Planifi",color:"bg-purple-50 dark:bg-purple-950"},{id:"signe",label:"Sign",color:"bg-green-50 dark:bg-green-950"},{id:"perdu",label:"Perdu",color:"bg-red-50 dark:bg-red-950"}],x=S=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(S),w=S=>{const k={"Tlsurveillance avec IA embarque":r.jsx(lP,{className:"h-5 w-5 text-blue-600"}),"Vidosurveillance intelligente":r.jsx(bf,{className:"h-5 w-5 text-purple-600"}),"Contrle d'accs connect":r.jsx(iP,{className:"h-5 w-5 text-orange-600"}),"Dfibrillateurs connects":r.jsx(sP,{className:"h-5 w-5 text-red-600"})};return S&&k[S]?k[S]:r.jsx(aP,{className:"h-5 w-5 text-gray-600"})},N=l.filter(S=>S.canalActuel==="visio"||["r1_visio_planifie","r1_visio_fait","r2_visio_planifie","r2_visio_fait","r3_visio_planifie","r3_visio_fait","r4_visio_planifie","r4_visio_fait"].includes(S.statut)),y=l.filter(S=>S.canalActuel==="terrain"||["r1_planifie","r1_fait_signe","r1_fait_r2_requis","r2_planifie"].includes(S.statut)),A=l.filter(S=>S.statut==="signe").reduce((S,k)=>S+(Number(k.nombreContrats)||0)*(Number(k.abonnementMensuelHt)||0),0),P=l.filter(S=>S.statut==="signe").length,E=l.filter(S=>!["signe","perdu"].includes(S.statut)).length,C=(S,k)=>r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:S.map(I=>{const R=k.filter(z=>z.statut===I.id),D=R.reduce((z,V)=>{const K=(Number(V.nombreContrats)||0)*(Number(V.abonnementMensuelHt)||0);return z+K},0);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:`rounded-lg p-3 ${I.color}`,children:[r.jsx("h3",{className:"font-semibold text-sm",children:I.label}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[R.length,"  MRR ",x(D)]})]}),r.jsx("div",{className:"space-y-3",children:R.map(z=>{const V=c.find(W=>W.id===z.prospectId),K=(Number(z.nombreContrats)||0)*(Number(z.abonnementMensuelHt)||0),H=K*12;return r.jsxs(U,{className:"hover-elevate cursor-pointer","data-testid":`card-opportunity-${z.id}`,children:[r.jsxs(ne,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx(se,{className:"text-sm",children:z.titre}),r.jsx("span",{className:"text-lg",children:w(z.typePrestation)})]}),V&&r.jsx("p",{className:"text-xs text-muted-foreground",children:V.entreprise})]}),r.jsxs(Z,{className:"space-y-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:"Contrats:"}),r.jsx("span",{className:"font-medium",children:z.nombreContrats})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:"Abo/mois HT:"}),r.jsx("span",{className:"font-medium",children:x(Number(z.abonnementMensuelHt))})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:"Dure:"}),r.jsxs("span",{className:"font-medium",children:[z.dureeEngagementMois," mois"]})]})]}),r.jsxs("div",{className:"pt-2 border-t space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-blue-600",children:[r.jsx(Oo,{className:"h-3 w-3"}),"MRR ",x(K)]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx(wn,{className:"h-3 w-3"}),"ARR ",x(H)]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsxs(Wn,{open:(n==null?void 0:n.id)===z.id,onOpenChange:W=>{s(W?z:null)},children:[r.jsx(Mo,{asChild:!0,children:r.jsx(re,{variant:"outline",size:"sm",className:"flex-1","data-testid":`button-edit-opportunity-${z.id}`,children:r.jsx(Ii,{className:"h-3 w-3"})})}),r.jsxs(Fn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(zn,{children:r.jsx(Bn,{children:"Modifier l'Opportunit"})}),r.jsx(zL,{onSubmit:v,initialData:z,prospects:c,prestations:d,isLoading:h.isPending})]})]}),r.jsx(re,{variant:"outline",size:"sm",onClick:()=>{confirm("Supprimer cette opportunit ?")&&p.mutate(z.id)},"data-testid":`button-delete-opportunity-${z.id}`,children:r.jsx(Ns,{className:"h-3 w-3"})})]})]})]},z.id)})})]},I.id)})});return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:r.jsxs("div",{className:"container flex h-14 items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-semibold",children:"Pipeline Dual"}),r.jsx("p",{className:"text-xs text-muted-foreground italic",children:"SDR Visio  BD Terrain"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Wn,{open:e,onOpenChange:t,children:[r.jsx(Mo,{asChild:!0,children:r.jsxs(re,{size:"sm","data-testid":"button-create-opportunity",children:[r.jsx(dr,{className:"mr-2 h-4 w-4"}),"Nouvelle Opportunit"]})}),r.jsxs(Fn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(zn,{children:r.jsx(Bn,{children:"Nouvelle Opportunit"})}),r.jsx(zL,{onSubmit:v,prospects:c,prestations:d,isLoading:f.isPending})]})]}),r.jsx(mr,{showHomeButton:!0})]})]})}),r.jsxs("main",{className:"container py-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(U,{className:"border-2 border-green-200 dark:border-green-800","data-testid":"card-contrats-signes",children:[r.jsx(ne,{className:"pb-3",children:r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Contrats signs"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:P}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total actuel"})]})]}),r.jsxs(U,{className:"border-2 border-blue-200 dark:border-blue-800","data-testid":"card-mrr",children:[r.jsx(ne,{className:"pb-3",children:r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"MRR gnr"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x(A)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Rcurrent mensuel"})]})]}),r.jsxs(U,{className:"border-2 border-orange-200 dark:border-orange-800","data-testid":"card-pipeline",children:[r.jsx(ne,{className:"pb-3",children:r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Pipeline actif"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:E}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"En cours"})]})]})]}),r.jsxs(fi,{value:i,onValueChange:S=>a(S),className:"w-full",children:[r.jsxs(qs,{className:"grid w-full max-w-md grid-cols-2",children:[r.jsxs(Ht,{value:"visio","data-testid":"tab-visio",children:[r.jsx(bf,{className:"h-4 w-4 mr-2"}),"SDR Visio (",N.length,")"]}),r.jsxs(Ht,{value:"terrain","data-testid":"tab-terrain",children:[r.jsx(Jr,{className:"h-4 w-4 mr-2"}),"BD Terrain (",y.length,")"]})]}),r.jsx(Zt,{value:"visio",className:"mt-6",children:C(j,N)}),r.jsx(Zt,{value:"terrain",className:"mt-6",children:C(g,y)})]})]})]})}function zL({onSubmit:e,initialData:t,prospects:n,prestations:s,isLoading:i}){return r.jsxs("form",{onSubmit:e,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"titre",children:"Titre *"}),r.jsx(ge,{id:"titre",name:"titre",required:!0,defaultValue:t==null?void 0:t.titre,"data-testid":"input-titre"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"prospectId",children:"Prospect"}),r.jsxs(gt,{name:"prospectId",defaultValue:(t==null?void 0:t.prospectId)||"none",children:[r.jsx(mt,{id:"prospectId","data-testid":"select-prospect",children:r.jsx(xt,{placeholder:"Slectionner un prospect"})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"none",children:"Aucun prospect"}),n.map(a=>r.jsxs(Y,{value:a.id,children:[a.entreprise," - ",a.prenom," ",a.nom]},a.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"typePrestation",children:"Prestation ADS GROUP"}),r.jsxs(gt,{name:"typePrestation",defaultValue:(t==null?void 0:t.typePrestation)||"",children:[r.jsx(mt,{id:"typePrestation","data-testid":"select-prestation",children:r.jsx(xt,{placeholder:"Slectionner une prestation"})}),r.jsx(pt,{children:s.map(a=>r.jsxs(Y,{value:a.nom,children:[a.icone," ",a.nom]},a.id))})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"nombreContrats",children:"Nombre de contrats"}),r.jsx(ge,{id:"nombreContrats",name:"nombreContrats",type:"number",min:"1",defaultValue:(t==null?void 0:t.nombreContrats)||1,"data-testid":"input-nombre-contrats"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"abonnementMensuelHt",children:"Abonnement mensuel HT () *"}),r.jsx(ge,{id:"abonnementMensuelHt",name:"abonnementMensuelHt",type:"number",step:"0.01",required:!0,defaultValue:(t==null?void 0:t.abonnementMensuelHt)||"","data-testid":"input-abonnement-mensuel"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"dureeEngagementMois",children:"Dure engagement (mois)"}),r.jsx(ge,{id:"dureeEngagementMois",name:"dureeEngagementMois",type:"number",min:"12",max:"60",defaultValue:(t==null?void 0:t.dureeEngagementMois)||36,"data-testid":"input-duree-engagement"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"statut",children:"Statut *"}),r.jsxs(gt,{name:"statut",defaultValue:(t==null?void 0:t.statut)||"r1_planifie",children:[r.jsx(mt,{id:"statut","data-testid":"select-statut",children:r.jsx(xt,{})}),r.jsxs(pt,{children:[r.jsxs("optgroup",{label:"SDR Visio",children:[r.jsx(Y,{value:"r1_visio_planifie",children:"R1 Visio Planifi"}),r.jsx(Y,{value:"r1_visio_fait",children:"R1 Visio Fait"}),r.jsx(Y,{value:"r2_visio_planifie",children:"R2 Visio Planifi"}),r.jsx(Y,{value:"r2_visio_fait",children:"R2 Visio Fait"}),r.jsx(Y,{value:"r3_visio_planifie",children:"R3 Visio Planifi"}),r.jsx(Y,{value:"r3_visio_fait",children:"R3 Visio Fait"}),r.jsx(Y,{value:"r4_visio_planifie",children:"R4 Visio Planifi"}),r.jsx(Y,{value:"r4_visio_fait",children:"R4 Visio Fait"})]}),r.jsxs("optgroup",{label:"BD Terrain",children:[r.jsx(Y,{value:"r1_planifie",children:"R1 Planifi"}),r.jsx(Y,{value:"r1_fait_signe",children:"R1 Fait - Sign"}),r.jsx(Y,{value:"r1_fait_r2_requis",children:"R1 Fait - R2 Requis"}),r.jsx(Y,{value:"r2_planifie",children:"R2 Planifi"})]}),r.jsxs("optgroup",{label:"Transferts",children:[r.jsx(Y,{value:"appui_bd_demande",children:"Appui BD Demand"}),r.jsx(Y,{value:"transfert_accepte",children:"Transfert Accept"}),r.jsx(Y,{value:"transfert_refuse",children:"Transfert Refus"})]}),r.jsxs("optgroup",{label:"Final",children:[r.jsx(Y,{value:"signe",children:"Sign"}),r.jsx(Y,{value:"perdu",children:"Perdu"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"description",children:"Description"}),r.jsx(Dn,{id:"description",name:"description",rows:4,defaultValue:(t==null?void 0:t.description)||"","data-testid":"textarea-description"})]}),r.jsx("div",{className:"flex gap-2 justify-end",children:r.jsx(re,{type:"submit",disabled:i,"data-testid":"button-submit-opportunity",children:i?"Enregistrement...":"Enregistrer"})})]})}var qA="Progress",UA=100,[V$e]=Nr(qA),[q$e,U$e]=V$e(qA),PG=_.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:i,getValueLabel:a=H$e,...o}=e;(i||i===0)&&!BL(i)&&console.error(W$e(`${i}`,"Progress"));const l=BL(i)?i:UA;s!==null&&!VL(s,l)&&console.error(K$e(`${s}`,"Progress"));const c=VL(s,l)?s:null,d=zb(c)?a(c,l):void 0;return r.jsx(q$e,{scope:n,value:c,max:l,children:r.jsx(st.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":zb(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":TG(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});PG.displayName=qA;var AG="ProgressIndicator",EG=_.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,i=U$e(AG,n);return r.jsx(st.div,{"data-state":TG(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...s,ref:t})});EG.displayName=AG;function H$e(e,t){return`${Math.round(e/t*100)}%`}function TG(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function zb(e){return typeof e=="number"}function BL(e){return zb(e)&&!isNaN(e)&&e>0}function VL(e,t){return zb(e)&&!isNaN(e)&&e<=t&&e>=0}function W$e(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${UA}\`.`}function K$e(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${UA} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var kG=PG,G$e=EG;const $o=_.forwardRef(({className:e,value:t,...n},s)=>r.jsx(kG,{ref:s,className:Oe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:r.jsx(G$e,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));$o.displayName=kG.displayName;const hm=e=>{switch(e){case"HOT":return"text-red-600 bg-red-50 dark:bg-red-950";case"WARM":return"text-orange-600 bg-orange-50 dark:bg-orange-950";case"COLD":return"text-blue-600 bg-blue-50 dark:bg-blue-950";default:return"text-gray-600 bg-gray-50 dark:bg-gray-950"}},qL=e=>{switch(e){case"HOT":return r.jsx(Yl,{className:"w-4 h-4"});case"WARM":return r.jsx(cy,{className:"w-4 h-4"});case"COLD":return r.jsx(ly,{className:"w-4 h-4"});default:return r.jsx(cy,{className:"w-4 h-4"})}};function Z$e(){var w,N,y,A,P,E,C,S,k,I,R,D,z,V,K,H,W,B;const[e,t]=_.useState("commercial"),[n,s]=_.useState("all"),[i,a]=_.useState("all"),[o,l]=_.useState(""),{data:c,isLoading:d}=Ke({queryKey:["/api/opportunities/dashboard/commercial"]}),{data:f,isLoading:h}=Ke({queryKey:["/api/opportunities"],enabled:e==="list"}),{data:p,isLoading:v}=Ke({queryKey:["/api/opportunities/dashboard/manager"],enabled:e==="manager"}),j=(f==null?void 0:f.opportunities)||[],g=j.filter($=>!(n!=="all"&&$.temperature!==n||i!=="all"&&$.stage!==i||o&&!$.title.toLowerCase().includes(o.toLowerCase())));return(d||e==="list"&&h||e==="manager"&&v)&&e==="commercial"?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsx("div",{className:"text-muted-foreground",children:"Chargement du dashboard..."})}):r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:r.jsxs("div",{className:"container flex h-14 items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-semibold",children:"Module Opportunits"}),r.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Pre-CRM Intelligent  Scoring Automatique"})]}),r.jsx(mr,{showHomeButton:!0})]})}),r.jsx("main",{className:"container py-6 space-y-6",children:r.jsxs(fi,{value:e,onValueChange:$=>t($),children:[r.jsxs(qs,{className:"grid w-full max-w-3xl grid-cols-3",children:[r.jsxs(Ht,{value:"commercial","data-testid":"tab-commercial",children:[r.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Dashboard"]}),r.jsxs(Ht,{value:"list","data-testid":"tab-list",children:[r.jsx(Pk,{className:"h-4 w-4 mr-2"}),"Liste Complte"]}),r.jsxs(Ht,{value:"manager","data-testid":"tab-manager",children:[r.jsx(fn,{className:"h-4 w-4 mr-2"}),"Vue Manager"]})]}),r.jsxs(Zt,{value:"commercial",className:"space-y-6 mt-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(U,{className:"border-2 border-red-200 dark:border-red-800","data-testid":"card-hot",children:[r.jsx(ne,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Opportunits HOT"}),r.jsx(Yl,{className:"w-5 h-5 text-red-600"})]})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-3xl font-bold text-red-600",children:((N=(w=c==null?void 0:c.byTemperature)==null?void 0:w.find($=>$.temperature==="HOT"))==null?void 0:N.count)||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Score 85-100  Priorit max"})]})]}),r.jsxs(U,{className:"border-2 border-orange-200 dark:border-orange-800","data-testid":"card-warm",children:[r.jsx(ne,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Opportunits WARM"}),r.jsx(cy,{className:"w-5 h-5 text-orange-600"})]})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-3xl font-bold text-orange-600",children:((A=(y=c==null?void 0:c.byTemperature)==null?void 0:y.find($=>$.temperature==="WARM"))==null?void 0:A.count)||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Score 60-84  Priorit moyenne"})]})]}),r.jsxs(U,{className:"border-2 border-blue-200 dark:border-blue-800","data-testid":"card-cold",children:[r.jsx(ne,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Opportunits COLD"}),r.jsx(ly,{className:"w-5 h-5 text-blue-600"})]})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-3xl font-bold text-blue-600",children:((E=(P=c==null?void 0:c.byTemperature)==null?void 0:P.find($=>$.temperature==="COLD"))==null?void 0:E.count)||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Score 0-59  Priorit basse"})]})]}),r.jsxs(U,{className:"border-2 border-green-200 dark:border-green-800","data-testid":"card-total",children:[r.jsx(ne,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Total Actives"}),r.jsx(wn,{className:"w-5 h-5 text-green-600"})]})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-3xl font-bold text-green-600",children:((C=c==null?void 0:c.stats)==null?void 0:C.total)||0}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Score moyen: ",Math.round(((S=c==null?void 0:c.stats)==null?void 0:S.avgScore)||0),"/100"]})]})]})]}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Yl,{className:"w-5 h-5 text-red-600"}),"Top Opportunits HOT"]}),r.jsxs(ve,{variant:"outline",className:"bg-red-50 dark:bg-red-950 text-red-600",children:[((k=c==null?void 0:c.hotOpportunities)==null?void 0:k.length)||0," opportunits"]})]})}),r.jsx(Z,{children:!(c!=null&&c.hotOpportunities)||c.hotOpportunities.length===0?r.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Aucune opportunit HOT pour le moment"}):r.jsx("div",{className:"space-y-4",children:c.hotOpportunities.slice(0,5).map($=>r.jsx(un,{href:`/crm/opportunities-module/${$.id}`,children:r.jsx(U,{className:"hover-elevate cursor-pointer","data-testid":`card-hot-opportunity-${$.id}`,children:r.jsx(Z,{className:"p-4",children:r.jsx("div",{className:"flex items-start justify-between gap-4",children:r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold text-base",children:$.title}),r.jsxs(ve,{className:hm($.temperature),children:[qL($.temperature),r.jsx("span",{className:"ml-1",children:$.temperature})]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(fn,{className:"w-3 h-3"}),"Stage: ",$.stage]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(xn,{className:"w-3 h-3"}),$.daysInHector,"j dans Hector"]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"font-medium",children:"Score Global"}),r.jsxs("span",{className:"font-bold text-red-600",children:[$.score,"/100"]})]}),r.jsx($o,{value:$.score,className:"h-2"})]})]})})})})},$.id))})})]}),(((I=c==null?void 0:c.toRequalify)==null?void 0:I.length)||0)>0&&r.jsxs(U,{className:"border-2 border-yellow-200 dark:border-yellow-800",children:[r.jsx(ne,{children:r.jsxs(se,{className:"flex items-center gap-2 text-yellow-700 dark:text-yellow-500",children:[r.jsx(Yr,{className:"w-5 h-5"}),"Opportunits  Requalifier"]})}),r.jsx(Z,{children:r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"font-bold text-yellow-700 dark:text-yellow-500",children:((R=c==null?void 0:c.toRequalify)==null?void 0:R.length)||0})," ","opportunits ncessitent une requalification urgente."]})})]})]}),r.jsxs(Zt,{value:"list",className:"space-y-6 mt-6",children:[r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(cz,{className:"w-5 h-5"}),"Filtres"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Recherche"}),r.jsx(ge,{placeholder:"Rechercher...",value:o,onChange:$=>l($.target.value),"data-testid":"input-search-opportunities"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Temprature"}),r.jsxs(gt,{value:n,onValueChange:s,children:[r.jsx(mt,{"data-testid":"select-temperature-filter",children:r.jsx(xt,{})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"all",children:"Toutes"}),r.jsx(Y,{value:"HOT",children:"HOT (85-100)"}),r.jsx(Y,{value:"WARM",children:"WARM (60-84)"}),r.jsx(Y,{value:"COLD",children:"COLD (0-59)"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Stage"}),r.jsxs(gt,{value:i,onValueChange:a,children:[r.jsx(mt,{"data-testid":"select-stage-filter",children:r.jsx(xt,{})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"all",children:"Tous"}),r.jsx(Y,{value:"discovery",children:"Discovery"}),r.jsx(Y,{value:"qualification",children:"Qualification"}),r.jsx(Y,{value:"proposal",children:"Proposal"}),r.jsx(Y,{value:"negotiation",children:"Negotiation"}),r.jsx(Y,{value:"closing",children:"Closing"})]})]})]})]})})]}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h2",{className:"text-lg font-semibold",children:[g.length," opportunit",g.length>1?"s":""]})}),h?r.jsx(U,{children:r.jsx(Z,{className:"p-12 text-center",children:r.jsx("div",{className:"text-muted-foreground",children:"Chargement des opportunits..."})})}):g.length===0?r.jsx(U,{children:r.jsxs(Z,{className:"p-12 text-center",children:[r.jsx(Pk,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucune opportunit"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:j.length===0?"Crez votre premire opportunit pour commencer":"Aucune opportunit ne correspond aux filtres"})]})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map($=>r.jsx(un,{href:`/crm/opportunities-module/${$.id}`,children:r.jsxs(U,{className:"hover-elevate cursor-pointer","data-testid":`card-opportunity-${$.id}`,children:[r.jsxs(ne,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx("h3",{className:"font-semibold text-base line-clamp-2",children:$.title}),r.jsx(ve,{className:hm($.temperature||"COLD"),children:qL($.temperature||"COLD")})]}),$.description&&r.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:$.description})]}),r.jsxs(Z,{className:"space-y-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"font-medium",children:"Score Global"}),r.jsxs("span",{className:`font-bold ${($.score||0)>=85?"text-red-600":($.score||0)>=60?"text-orange-600":"text-blue-600"}`,children:[$.score||0,"/100"]})]}),r.jsx($o,{value:$.score||0,className:"h-2"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("span",{className:"text-muted-foreground block",children:"Stage"}),r.jsx(ve,{variant:"outline",className:"text-xs",children:$.stage})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("span",{className:"text-muted-foreground block",children:"Jours"}),r.jsxs("span",{className:"font-medium",children:[$.daysInHector||0,"j"]})]})]}),$.requalificationRequired&&r.jsxs(ve,{variant:"destructive",className:"w-full justify-center",children:[r.jsx(Yr,{className:"w-3 h-3 mr-1"}),"Requalification requise"]})]})]})},$.id))})]}),r.jsx(Zt,{value:"manager",className:"space-y-6 mt-6",children:v?r.jsx(U,{children:r.jsx(Z,{className:"p-12 text-center",children:r.jsx("p",{className:"text-muted-foreground",children:"Chargement des stats manager..."})})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(U,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Total Opportunits"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-3xl font-bold",children:((D=p==null?void 0:p.byUser)==null?void 0:D.reduce(($,G)=>$+G.count,0))||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Toutes tempratures confondues"})]})]}),r.jsxs(U,{className:"border-2 border-red-200 dark:border-red-800",children:[r.jsx(ne,{className:"pb-3",children:r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Opportunits HOT"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-3xl font-bold text-red-600",children:((V=(z=p==null?void 0:p.temperatureDistribution)==null?void 0:z.find($=>$.temperature==="HOT"))==null?void 0:V.count)||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Score 85-100  Priorit maximale"})]})]}),r.jsxs(U,{className:"border-2 border-yellow-200 dark:border-yellow-800",children:[r.jsx(ne,{className:"pb-3",children:r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Opportunits Critiques"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:((K=p==null?void 0:p.criticalOpportunities)==null?void 0:K.length)||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Score < 40 depuis +7 jours"})]})]})]}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Nn,{className:"w-5 h-5"}),"Performances par Commercial"]})}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-4",children:(H=p==null?void 0:p.byUser)==null?void 0:H.slice().sort(($,G)=>(G.avgScore||0)-($.avgScore||0)).map($=>r.jsx(U,{className:"hover-elevate","data-testid":`card-user-${$.userId}`,children:r.jsx(Z,{className:"p-4",children:r.jsx("div",{className:"flex items-start justify-between gap-4",children:r.jsxs("div",{className:"flex-1 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold",children:$.userFirstName&&$.userLastName?`${$.userFirstName} ${$.userLastName}`:$.userEmail}),r.jsxs(ve,{variant:"outline",className:"text-xs",children:[$.count," opps"]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("span",{className:"text-muted-foreground block text-xs",children:"HOT"}),r.jsx(ve,{className:hm("HOT"),children:$.hotCount||0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("span",{className:"text-muted-foreground block text-xs",children:"WARM"}),r.jsx(ve,{className:hm("WARM"),children:$.warmCount||0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("span",{className:"text-muted-foreground block text-xs",children:"COLD"}),r.jsx(ve,{className:hm("COLD"),children:$.coldCount||0})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"font-medium",children:"Score Moyen"}),r.jsxs("span",{className:`font-bold ${($.avgScore||0)>=85?"text-red-600":($.avgScore||0)>=60?"text-orange-600":"text-blue-600"}`,children:[Math.round($.avgScore||0),"/100"]})]}),r.jsx($o,{value:$.avgScore||0,className:"h-2"})]}),$.totalPipeline>0&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Pipeline total: ",r.jsxs("span",{className:"font-semibold",children:[$.totalPipeline,""]})," MRR"]})]})})})},$.userId))})})]}),(((W=p==null?void 0:p.criticalOpportunities)==null?void 0:W.length)||0)>0&&r.jsxs(U,{className:"border-2 border-yellow-200 dark:border-yellow-800",children:[r.jsx(ne,{children:r.jsxs(se,{className:"flex items-center gap-2 text-yellow-700 dark:text-yellow-500",children:[r.jsx(Yr,{className:"w-5 h-5"}),"Opportunits Critiques  Traiter"]})}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-3",children:(B=p==null?void 0:p.criticalOpportunities)==null?void 0:B.slice(0,10).map($=>r.jsx(un,{href:`/crm/opportunities-module/${$.id}`,children:r.jsx(U,{className:"hover-elevate cursor-pointer","data-testid":`card-critical-${$.id}`,children:r.jsx(Z,{className:"p-3",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 space-y-1",children:[r.jsx("h4",{className:"font-semibold text-sm line-clamp-1",children:$.title}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(fn,{className:"w-3 h-3"}),"Stage: ",$.stage]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(xn,{className:"w-3 h-3"}),$.daysInHector,"j dans Hector"]})]})]}),r.jsxs(ve,{variant:"destructive",className:"text-xs",children:["Score: ",$.score,"/100"]})]})})})},$.id))})})]})]})})]})})]})}const Q$e=e=>{switch(e){case"HOT":return r.jsx(Yl,{className:"w-5 h-5 text-red-600"});case"WARM":return r.jsx(cy,{className:"w-5 h-5 text-orange-600"});case"COLD":return r.jsx(ly,{className:"w-5 h-5 text-blue-600"});default:return r.jsx(ly,{className:"w-5 h-5 text-gray-600"})}},Y$e=e=>{switch(e){case"HOT":return"text-red-600 bg-red-50 dark:bg-red-950";case"WARM":return"text-orange-600 bg-orange-50 dark:bg-orange-950";case"COLD":return"text-blue-600 bg-blue-50 dark:bg-blue-950";default:return"text-gray-600 bg-gray-50 dark:bg-gray-950"}},X$e=e=>({discovery:"Dcouverte",qualification:"Qualification",proposal:"Proposition",negotiation:"Ngociation",closing:"Signature"})[e||"discovery"]||e;function J$e(){var j;const[,e]=gJ("/crm/opportunities-module/:id"),t=e==null?void 0:e.id,{data:n,isLoading:s}=Ke({queryKey:["/api/opportunities",t],enabled:!!t}),i=n==null?void 0:n.opportunity,a=(n==null?void 0:n.activities)||[],o=(n==null?void 0:n.notes)||[],l=(i==null?void 0:i.scoreDetails)||{},c=l.reactivity||0,d=l.maturity||0,f=l.enrichment||0,h=l.disc||0,p=l.geography||0,v=l.network||0;return s?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("p",{className:"text-muted-foreground",children:"Chargement..."})}):i?r.jsxs("div",{className:"flex flex-col h-full p-6 space-y-6 overflow-auto",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(un,{href:"/crm/opportunities-module",children:r.jsx(re,{variant:"outline",size:"icon","data-testid":"button-back",children:r.jsx(ua,{className:"w-4 h-4"})})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold","data-testid":"text-opportunity-title",children:i.title}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Opportunit #",i.id.slice(0,8)]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(ve,{className:Y$e(i.temperature),"data-testid":"badge-temperature",children:[Q$e(i.temperature),r.jsx("span",{className:"ml-1",children:i.temperature})]}),i.requalificationRequired&&r.jsxs(ve,{variant:"outline",className:"bg-yellow-50 dark:bg-yellow-950 text-yellow-700 dark:text-yellow-500","data-testid":"badge-requalif",children:[r.jsx(Yr,{className:"w-3 h-3 mr-1"}),"Requalification requise"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(U,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Score Global"}),r.jsx(wn,{className:"w-4 h-4 text-muted-foreground"})]})}),r.jsxs(Z,{children:[r.jsxs("div",{className:"text-2xl font-bold","data-testid":"text-score",children:[i.score,"/100"]}),r.jsx("div",{className:"w-full bg-secondary rounded-full h-2 mt-2",children:r.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${i.score}%`}})})]})]}),r.jsxs(U,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Jours dans Hector"}),r.jsx(jn,{className:"w-4 h-4 text-muted-foreground"})]})}),r.jsxs(Z,{children:[r.jsxs("div",{className:"text-2xl font-bold","data-testid":"text-days",children:[i.daysInHector," jours"]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Cr le ",i.createdAt?new Date(i.createdAt).toLocaleDateString("fr-FR"):"-"]})]})]}),r.jsxs(U,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Stage"}),r.jsx(fn,{className:"w-4 h-4 text-muted-foreground"})]})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-lg font-semibold","data-testid":"text-stage",children:X$e(i.stage)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.status==="active"?"Active":"Termine"})]})]}),r.jsxs(U,{children:[r.jsx(ne,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Abonnement mensuel"}),r.jsx(xn,{className:"w-4 h-4 text-muted-foreground"})]})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"text-monthly-subscription",children:i.monthlySubscription?`${Number(i.monthlySubscription)}`:"-"}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Potentiel annuel: ",i.monthlySubscription?`${Number(i.monthlySubscription)*12}`:"-"]})]})]})]}),r.jsxs(fi,{defaultValue:"overview",className:"flex-1",children:[r.jsxs(qs,{children:[r.jsx(Ht,{value:"overview","data-testid":"tab-overview",children:"Vue d'ensemble"}),r.jsxs(Ht,{value:"activities","data-testid":"tab-activities",children:["Activits (",a.length,")"]}),r.jsxs(Ht,{value:"notes","data-testid":"tab-notes",children:["Notes (",o.length,")"]}),r.jsxs(Ht,{value:"scoring","data-testid":"tab-scoring",children:["Scoring (",((j=i.scoringHistory)==null?void 0:j.length)||0,")"]})]}),r.jsxs(Zt,{value:"overview",className:"space-y-4 mt-4",children:[r.jsxs(U,{children:[r.jsx(ne,{children:r.jsx(se,{children:"Dtails de l'opportunit"})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Titre"}),r.jsx("p",{className:"text-base","data-testid":"text-detail-title",children:i.title})]}),i.description&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),r.jsx("p",{className:"text-base","data-testid":"text-description",children:i.description})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Contact"}),r.jsx("p",{className:"text-base","data-testid":"text-contact-name",children:i.contactName||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Tlphone"}),r.jsx("p",{className:"text-base","data-testid":"text-phone",children:i.contactPhone||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),r.jsx("p",{className:"text-base","data-testid":"text-email",children:i.contactEmail||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Entreprise"}),r.jsx("p",{className:"text-base","data-testid":"text-company",children:i.companyName||"-"})]})]})]})]}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsx(se,{children:"Enrichissements automatiques"})}),r.jsxs(Z,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"CASCADE (donnes entreprise)"}),i.cascadeEnriched&&i.cascadeData?r.jsxs(ve,{variant:"default",className:"bg-green-600 flex items-center gap-1","data-testid":"badge-cascade-success",children:[r.jsx(Yt,{className:"h-3 w-3"}),"Enrichi"]}):i.siren?r.jsxs(ve,{variant:"destructive",className:"flex items-center gap-1","data-testid":"badge-cascade-failed",children:[r.jsx(os,{className:"h-3 w-3"}),"chec enrichissement"]}):r.jsxs(ve,{variant:"secondary",className:"flex items-center gap-1","data-testid":"badge-cascade-pending",children:[r.jsx(jn,{className:"h-3 w-3"}),"Pas de SIREN"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"DISC (profil dcideur AI)"}),i.discProfiled&&i.discProfile?r.jsxs(ve,{variant:"default",className:"bg-blue-600 flex items-center gap-1","data-testid":"badge-disc-success",children:[r.jsx(Yt,{className:"h-3 w-3"}),"Profil ",i.discProfile]}):i.cascadeData?r.jsxs(ve,{variant:"destructive",className:"flex items-center gap-1","data-testid":"badge-disc-failed",children:[r.jsx(os,{className:"h-3 w-3"}),"chec profiling"]}):r.jsxs(ve,{variant:"secondary",className:"flex items-center gap-1","data-testid":"badge-disc-pending",children:[r.jsx(jn,{className:"h-3 w-3"}),"Attente CASCADE"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"GPS (golocalisation)"}),i.gpsGeocoded&&i.gpsLatitude&&i.gpsLongitude?r.jsxs(ve,{variant:"default",className:"bg-purple-600 flex items-center gap-1","data-testid":"badge-gps-success",children:[r.jsx(Yt,{className:"h-3 w-3"}),"Golocalis"]}):i.address?r.jsxs(ve,{variant:"destructive",className:"flex items-center gap-1","data-testid":"badge-gps-failed",children:[r.jsx(os,{className:"h-3 w-3"}),"chec gocodage"]}):r.jsxs(ve,{variant:"secondary",className:"flex items-center gap-1","data-testid":"badge-gps-pending",children:[r.jsx(jn,{className:"h-3 w-3"}),"Pas d'adresse"]})]})]})]}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsx(se,{children:"Scoring dtaill"})}),r.jsxs(Z,{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm",children:"Ractivit"}),r.jsxs("span",{className:"text-sm font-medium",children:[c,"/100"]})]}),r.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${c}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm",children:"Maturit"}),r.jsxs("span",{className:"text-sm font-medium",children:[d,"/100"]})]}),r.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:r.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all",style:{width:`${d}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm",children:"Enrichissement"}),r.jsxs("span",{className:"text-sm font-medium",children:[f,"/100"]})]}),r.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:r.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all",style:{width:`${f}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm",children:"DISC"}),r.jsxs("span",{className:"text-sm font-medium",children:[h,"/100"]})]}),r.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:r.jsx("div",{className:"bg-yellow-600 h-2 rounded-full transition-all",style:{width:`${h}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm",children:"Gographie"}),r.jsxs("span",{className:"text-sm font-medium",children:[p,"/100"]})]}),r.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:r.jsx("div",{className:"bg-orange-600 h-2 rounded-full transition-all",style:{width:`${p}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm",children:"Rseau"}),r.jsxs("span",{className:"text-sm font-medium",children:[v,"/100"]})]}),r.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:r.jsx("div",{className:"bg-red-600 h-2 rounded-full transition-all",style:{width:`${v}%`}})})]})]})]})]}),r.jsx(Zt,{value:"activities",className:"mt-4",children:r.jsxs(U,{children:[r.jsx(ne,{children:r.jsx(se,{children:"Historique des activits"})}),r.jsx(Z,{children:a.length===0?r.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Aucune activit enregistre"}):r.jsx("div",{className:"space-y-4",children:a.map(g=>r.jsxs("div",{className:"border-l-2 border-primary pl-4 pb-4","data-testid":`activity-${g.id}`,children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:g.activityTitle}),g.activityDescription&&r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:g.activityDescription})]}),r.jsx(ve,{variant:"outline",className:"text-xs",children:g.activityType})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(g.createdAt).toLocaleString("fr-FR")})]},g.id))})})]})}),r.jsx(Zt,{value:"notes",className:"mt-4",children:r.jsxs(U,{children:[r.jsx(ne,{children:r.jsx(se,{children:"Notes"})}),r.jsx(Z,{children:o.length===0?r.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Aucune note enregistre"}):r.jsx("div",{className:"space-y-4",children:o.map(g=>r.jsx(U,{"data-testid":`note-${g.id}`,children:r.jsxs(Z,{className:"pt-4",children:[r.jsx("p",{className:"text-sm",children:g.noteContent}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(g.createdAt).toLocaleString("fr-FR")})]})},g.id))})})]})}),r.jsx(Zt,{value:"scoring",className:"mt-4",children:r.jsxs(U,{children:[r.jsx(ne,{children:r.jsx(se,{children:"Historique du scoring"})}),r.jsx(Z,{children:!i.scoringHistory||i.scoringHistory.length===0?r.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Aucun historique de scoring"}):r.jsx("div",{className:"space-y-4",children:i.scoringHistory.map(g=>r.jsx(U,{"data-testid":`scoring-${g.id}`,children:r.jsxs(Z,{className:"pt-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"font-bold text-lg",children:["Score: ",g.score,"/100"]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(g.createdAt).toLocaleString("fr-FR")})]}),g.scoringReason&&r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:g.scoringReason}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[r.jsxs("div",{children:["Ractivit: ",g.reactivityScore]}),r.jsxs("div",{children:["Maturit: ",g.maturityScore]}),r.jsxs("div",{children:["Enrichissement: ",g.enrichmentScore]}),r.jsxs("div",{children:["DISC: ",g.discScore]}),r.jsxs("div",{children:["Gographie: ",g.geographyScore]}),r.jsxs("div",{children:["Rseau: ",g.networkScore]})]})]})},g.id))})})]})})]})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[r.jsx("p",{className:"text-muted-foreground",children:"Opportunit introuvable"}),r.jsx(un,{href:"/crm/opportunities-module",children:r.jsxs(re,{variant:"outline","data-testid":"button-back-to-list",children:[r.jsx(ua,{className:"w-4 h-4 mr-2"}),"Retour  la liste"]})})]})}const e3e=sl({concurrentId:Ue().min(1,"Concurrent requis"),contractEndDate:Ue().min(1,"Date d'chance requise"),monthlyAmount:SA(e=>{if(e===""||e===null||e===void 0)return;const t=Number(e);return isNaN(t)?void 0:t},xa().nonnegative().optional()),solutionsInstalled:Do(Ue()).optional(),subscriptionType:ir(["mensuel","trimestriel","annuel","pluriannuel"]).optional()}),t3e=sl({prospectId:Ue().min(1,"Prospect requis"),contactFirstName:Ue().optional(),contactLastName:Ue().optional(),raisonSociale:Ue().optional(),enseigne:Ue().optional(),siren:Ue().optional(),contracts:Do(e3e).min(1,"Au moins un contrat requis").max(4,"Maximum 4 contrats"),numberOfSites:la.number().optional(),avgContractDurationMonths:la.number().optional(),satisfactionLevel:ir(["satisfied","neutral","unsatisfied","unknown"]).optional(),satisfactionNotes:Ue().optional(),notes:Ue().optional()});function n3e({onSuccess:e}){var N,y,A;const{toast:t}=At(),[n,s]=_.useState(""),[i,a]=_.useState(null),o=Du({resolver:$u(t3e),defaultValues:{prospectId:"",contactFirstName:"",contactLastName:"",raisonSociale:"",enseigne:"",siren:"",contracts:[{concurrentId:"",contractEndDate:"",monthlyAmount:void 0,solutionsInstalled:[],subscriptionType:void 0}],numberOfSites:1,avgContractDurationMonths:60,satisfactionLevel:"unknown",satisfactionNotes:"",notes:""}}),{data:l}=Ke({queryKey:["/api/crm/prospects"]}),{data:c}=Ke({queryKey:["/api/competitor/concurrents"]}),d=dt({mutationFn:async P=>await rt("POST","/api/competitor/situations/batch",P),onSuccess:P=>{var C;const E=P.created||((C=P.contracts)==null?void 0:C.length)||o.getValues("contracts").length;t({title:" chances cres",description:`${E} contrat(s) enregistr(s) avec succs`}),et.invalidateQueries({queryKey:["/api/competitor/situations"]}),et.invalidateQueries({queryKey:["/api/competitor/dashboards/bd"]}),o.reset(),a(null),e==null||e()},onError:P=>{t({title:" Erreur",description:P.message||"Impossible de crer les chances",variant:"destructive"})}}),f=P=>{d.mutate(P)},h=(l==null?void 0:l.prospects)||[],p=(c==null?void 0:c.concurrents)||[],v={national:p.filter(P=>P.type==="national"),regional:p.filter(P=>P.type==="regional"),local:p.filter(P=>P.type==="local")},j=h.filter(P=>P.entreprise&&P.entreprise.toLowerCase().includes(n.toLowerCase())||P.siret&&P.siret.includes(n)),g=P=>{const E=h.find(C=>C.id===P);a(E),o.setValue("prospectId",P),E&&(E.raisonSociale&&o.setValue("raisonSociale",E.raisonSociale),E.enseigneCommerciale&&o.setValue("enseigne",E.enseigneCommerciale),E.siret&&o.setValue("siren",E.siret))},x=()=>{const P=o.getValues("contracts");P.length<4&&o.setValue("contracts",[...P,{concurrentId:"",contractEndDate:"",monthlyAmount:void 0,solutionsInstalled:[],subscriptionType:void 0}])},w=P=>{const E=o.getValues("contracts");E.length>1&&o.setValue("contracts",E.filter((C,S)=>S!==P))};return r.jsx(Fu,{...o,children:r.jsxs("form",{onSubmit:o.handleSubmit(f),className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{children:"Prospect"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ge,{placeholder:"Rechercher par nom ou SIRET...",value:n,onChange:P=>s(P.target.value),"data-testid":"input-prospect-search"}),r.jsx(re,{type:"button",variant:"outline",size:"icon",children:r.jsx(ls,{className:"w-4 h-4"})})]}),n&&n.length>=3&&r.jsx(U,{className:"mt-2",children:r.jsx(Z,{className:"p-2 max-h-[200px] overflow-y-auto",children:j.length>0?r.jsx("div",{className:"space-y-1",children:j.slice(0,10).map(P=>r.jsx(re,{type:"button",variant:"ghost",className:"w-full justify-start text-left",onClick:()=>{g(P.id),s("")},"data-testid":`prospect-option-${P.id}`,children:r.jsxs("div",{className:"flex flex-col items-start",children:[r.jsx("span",{className:"font-medium",children:P.companyName}),P.siret&&r.jsxs("span",{className:"text-xs text-muted-foreground",children:["SIRET: ",P.siret]})]})},P.id))}):r.jsxs("div",{className:"text-center py-4 text-sm text-muted-foreground","data-testid":"no-results-message",children:['Aucun prospect trouv pour "',n,'"']})})}),i&&r.jsx(U,{className:"bg-muted",children:r.jsx(Z,{className:"p-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:i.companyName}),i.siret&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:["SIRET: ",i.siret]})]}),r.jsx(Yt,{className:"w-5 h-5 text-green-600"})]})})}),r.jsx(we,{control:o.control,name:"prospectId",render:({field:P})=>r.jsxs(_e,{className:"hidden",children:[r.jsx(Se,{children:r.jsx(ge,{...P})}),r.jsx(ke,{})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold",children:["Contrats concurrent (",((N=o.watch("contracts"))==null?void 0:N.length)||0,"/4)"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajoutez jusqu' 4 contrats pour ce prospect"})]}),((y=o.watch("contracts"))==null?void 0:y.length)<4&&r.jsxs(re,{type:"button",variant:"outline",size:"sm",onClick:x,"data-testid":"button-add-contract",children:[r.jsx(dr,{className:"w-4 h-4 mr-2"}),"Ajouter un contrat"]})]}),(A=o.watch("contracts"))==null?void 0:A.map((P,E)=>r.jsx(U,{className:"relative",children:r.jsxs(Z,{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs(ve,{variant:"outline",children:["Contrat ",E+1]}),o.watch("contracts").length>1&&r.jsx(re,{type:"button",variant:"ghost",size:"icon",onClick:()=>w(E),"data-testid":`button-remove-contract-${E}`,children:r.jsx(dc,{className:"w-4 h-4"})})]}),r.jsx(we,{control:o.control,name:`contracts.${E}.concurrentId`,render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Concurrent"}),r.jsxs(gt,{value:C.value,onValueChange:C.onChange,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":`select-concurrent-${E}`,children:r.jsx(xt,{placeholder:"Slectionner concurrent..."})})}),r.jsxs(pt,{children:[v.national.length>0&&r.jsxs(Z_,{children:[r.jsx(Pv,{children:" Concurrents Nationaux"}),v.national.map(S=>r.jsx(Y,{value:S.id,children:S.name},S.id))]}),v.regional.length>0&&r.jsxs(Z_,{children:[r.jsx(Pv,{children:" Concurrents Rgionaux"}),v.regional.map(S=>r.jsx(Y,{value:S.id,children:S.name},S.id))]}),v.local.length>0&&r.jsxs(Z_,{children:[r.jsx(Pv,{children:" Concurrents Locaux"}),v.local.map(S=>r.jsx(Y,{value:S.id,children:S.name},S.id))]})]})]}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:`contracts.${E}.contractEndDate`,render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Date d'chance contrat"}),r.jsx(Se,{children:r.jsx(ge,{type:"date",...C,"data-testid":`input-contract-end-date-${E}`})}),r.jsx(rr,{className:"text-xs",children:"Le rveil J-240 sera calcul automatiquement"}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:`contracts.${E}.monthlyAmount`,render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Abonnement mensuel ()"}),r.jsx(Se,{children:r.jsx(ge,{type:"number",step:"0.01",placeholder:"150.00",...C,onChange:S=>C.onChange(S.target.value?parseFloat(S.target.value):void 0),value:C.value||"","data-testid":`input-monthly-amount-${E}`})}),r.jsx(rr,{className:"text-xs",children:"Montant de l'abonnement mensuel actuel"}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:`contracts.${E}.subscriptionType`,render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Type d'abonnement"}),r.jsxs(gt,{value:C.value,onValueChange:C.onChange,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":`select-subscription-type-${E}`,children:r.jsx(xt,{placeholder:"Slectionner..."})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"mensuel",children:"Mensuel"}),r.jsx(Y,{value:"trimestriel",children:"Trimestriel"}),r.jsx(Y,{value:"annuel",children:"Annuel"}),r.jsx(Y,{value:"pluriannuel",children:"Pluriannuel"})]})]}),r.jsx(ke,{})]})})]})},E))]}),r.jsx(U,{className:"bg-muted/30",children:r.jsxs(Z,{className:"p-4 space-y-3",children:[r.jsx("h3",{className:"font-semibold text-sm",children:"Informations contact et entreprise"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx(we,{control:o.control,name:"contactFirstName",render:({field:P})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Prnom contact"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"Jean",...P,"data-testid":"input-contact-first-name"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"contactLastName",render:({field:P})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Nom contact"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"Dupont",...P,"data-testid":"input-contact-last-name"})}),r.jsx(ke,{})]})})]}),r.jsx(we,{control:o.control,name:"raisonSociale",render:({field:P})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Raison sociale (nom lgal)"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"SARL ENTREPRISE DUPONT",...P,"data-testid":"input-raison-sociale"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"enseigne",render:({field:P})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Enseigne (nom commercial)"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"Boutique Dupont",...P,"data-testid":"input-enseigne"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"siren",render:({field:P})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"SIRET (optionnel)"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"12345678901234",maxLength:14,...P,"data-testid":"input-siren"})}),r.jsx(rr,{className:"text-xs",children:'Si SIRET absent  chance envoye dans " qualifier"'}),r.jsx(ke,{})]})})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(we,{control:o.control,name:"numberOfSites",render:({field:P})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Nombre de sites"}),r.jsx(Se,{children:r.jsx(ge,{type:"number",min:"1",...P,"data-testid":"input-number-of-sites"})}),r.jsx(rr,{children:"Nombre de sites couverts par le contrat"}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"avgContractDurationMonths",render:({field:P})=>{var E;return r.jsxs(_e,{children:[r.jsx(Ne,{children:"Dure contrat (mois)"}),r.jsxs(gt,{value:(E=P.value)==null?void 0:E.toString(),onValueChange:C=>P.onChange(parseInt(C)),children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-contract-duration",children:r.jsx(xt,{placeholder:"Slectionner..."})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"12",children:"1 an (12 mois)"}),r.jsx(Y,{value:"24",children:"2 ans (24 mois)"}),r.jsx(Y,{value:"36",children:"3 ans (36 mois)"}),r.jsx(Y,{value:"48",children:"4 ans (48 mois)"}),r.jsx(Y,{value:"60",children:"5 ans (60 mois)"}),r.jsx(Y,{value:"72",children:"6 ans (72 mois)"})]})]}),r.jsx(rr,{children:"Dure habituelle des contrats"}),r.jsx(ke,{})]})}})]}),r.jsx(we,{control:o.control,name:"satisfactionLevel",render:({field:P})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Niveau de satisfaction client"}),r.jsxs(gt,{value:P.value,onValueChange:P.onChange,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-satisfaction-level",children:r.jsx(xt,{placeholder:"Slectionner..."})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"satisfied",children:" Satisfait"}),r.jsx(Y,{value:"neutral",children:" Neutre"}),r.jsx(Y,{value:"unsatisfied",children:" Insatisfait"}),r.jsx(Y,{value:"unknown",children:" Inconnu"})]})]}),r.jsx(rr,{children:"Niveau de satisfaction du prospect avec son prestataire actuel"}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"satisfactionNotes",render:({field:P})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Notes sur la satisfaction (optionnel)"}),r.jsx(Se,{children:r.jsx(Dn,{placeholder:"Dtails sur la satisfaction, points de friction, opportunits...",className:"resize-none",rows:2,...P,"data-testid":"textarea-satisfaction-notes"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"notes",render:({field:P})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Notes gnrales (optionnel)"}),r.jsx(Se,{children:r.jsx(Dn,{placeholder:"Informations complmentaires...",className:"resize-none",rows:3,...P,"data-testid":"textarea-notes"})}),r.jsx(ke,{})]})}),r.jsx("div",{className:"flex gap-2",children:r.jsx(re,{type:"submit",className:"flex-1",disabled:d.isPending,"data-testid":"button-submit-situation",children:d.isPending?"Enregistrement...":"Crer chance"})})]})})}const r3e=sl({contractEndDate:Ue().min(1,"Date d'chance requise"),contactFirstName:Ue().optional(),contactLastName:Ue().optional(),raisonSociale:Ue().optional(),enseigne:Ue().optional(),siren:Ue().optional(),monthlyAmount:SA(e=>{if(e===""||e===null||e===void 0)return;const t=Number(e);return isNaN(t)?void 0:t},xa().nonnegative().optional()),solutionsInstalled:Do(Ue()).optional(),subscriptionType:ir(["mensuel","trimestriel","annuel","pluriannuel"]).optional(),numberOfSites:la.number().optional(),avgContractDurationMonths:la.number().optional(),satisfactionLevel:ir(["satisfied","neutral","unsatisfied","unknown"]).optional(),satisfactionNotes:Ue().optional(),notes:Ue().optional(),internalNotes:Ue().optional()});function s3e({situationId:e,open:t,onOpenChange:n}){const{toast:s}=At(),[i,a]=_.useState(!1),o=Du({resolver:$u(r3e),defaultValues:{contractEndDate:"",contactFirstName:"",contactLastName:"",raisonSociale:"",enseigne:"",siren:"",monthlyAmount:void 0,solutionsInstalled:[],subscriptionType:void 0,numberOfSites:1,avgContractDurationMonths:60,satisfactionLevel:"unknown",satisfactionNotes:"",notes:"",internalNotes:""}}),{data:l,isLoading:c}=Ke({queryKey:[`/api/competitor/situations/${e}`],enabled:!!e&&t}),d=l==null?void 0:l.situation,f=l==null?void 0:l.prospect,h=l==null?void 0:l.concurrent;_.useEffect(()=>{d&&o.reset({contractEndDate:d.contractEndDate||"",contactFirstName:d.contactFirstName||"",contactLastName:d.contactLastName||"",raisonSociale:d.raisonSociale||"",enseigne:d.enseigne||"",siren:d.siren||"",monthlyAmount:d.monthlyAmount,solutionsInstalled:d.solutionsInstalled||[],subscriptionType:d.subscriptionType,numberOfSites:d.numberOfSites||1,avgContractDurationMonths:d.avgContractDurationMonths||60,satisfactionLevel:d.satisfactionLevel||"unknown",satisfactionNotes:d.satisfactionNotes||"",notes:d.notes||"",internalNotes:d.internalNotes||""})},[d,o]);const p=dt({mutationFn:async g=>await rt("PATCH",`/api/competitor/situations/${e}`,g),onSuccess:()=>{s({title:" chance mise  jour",description:"Les modifications ont t enregistres avec succs"}),et.invalidateQueries({queryKey:["/api/competitor/situations"]}),et.invalidateQueries({queryKey:["/api/competitor/dashboards/bd"]}),a(!1)},onError:g=>{s({title:" Erreur",description:g.message||"Impossible de mettre  jour l'chance",variant:"destructive"})}}),v=g=>{p.mutate(g)},j=g=>{const x={a_qualifier:{label:" qualifier",variant:"outline"},future:{label:"Futur",variant:"secondary"},active:{label:"Actif",variant:"default"},won:{label:"Gagn",variant:"default"},lost:{label:"Perdu",variant:"destructive"},archived:{label:"Archiv",variant:"outline"}},w=x[g]||x.future;return r.jsx(ve,{variant:w.variant,"data-testid":`badge-status-${g}`,children:w.label})};return!d||c?r.jsx(Wn,{open:t,onOpenChange:n,children:r.jsxs(Fn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(zn,{children:r.jsx(Bn,{children:"Chargement..."})}),r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Chargement des dtails..."})]})}):r.jsx(Wn,{open:t,onOpenChange:n,children:r.jsxs(Fn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(zn,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs(Bn,{className:"text-2xl",children:[(f==null?void 0:f.entreprise)||"N/A"," - ",(h==null?void 0:h.name)||"N/A"]}),r.jsxs(Za,{className:"mt-2",children:["chance: ",new Date(d.contractEndDate).toLocaleDateString("fr-FR"),"  Rveil: ",new Date(d.wakeupDate).toLocaleDateString("fr-FR")]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[j(d.status),r.jsx(re,{size:"icon",variant:"ghost",onClick:()=>a(!i),"data-testid":"button-edit-situation",children:r.jsx(Ii,{className:"h-4 w-4"})})]})]})}),r.jsxs(fi,{defaultValue:"overview",className:"w-full",children:[r.jsxs(qs,{className:"grid w-full grid-cols-3",children:[r.jsxs(Ht,{value:"overview","data-testid":"tab-overview",children:[r.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Aperu"]}),r.jsxs(Ht,{value:"edit","data-testid":"tab-edit",children:[r.jsx(Uo,{className:"w-4 h-4 mr-2"}),"Informations"]}),r.jsxs(Ht,{value:"history","data-testid":"tab-history",children:[r.jsx(xn,{className:"w-4 h-4 mr-2"}),"Historique"]})]}),r.jsxs(Zt,{value:"overview",className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-3",children:[r.jsx(se,{className:"text-sm font-medium",children:"Prospect"}),r.jsx(Ir,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("p",{className:"text-lg font-semibold",children:(f==null?void 0:f.entreprise)||"N/A"}),(f==null?void 0:f.siren)&&r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["SIREN: ",f.siren]})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-3",children:[r.jsx(se,{className:"text-sm font-medium",children:"Concurrent"}),r.jsx(Uo,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("p",{className:"text-lg font-semibold",children:(h==null?void 0:h.name)||"N/A"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(h==null?void 0:h.type)||"N/A"})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-3",children:[r.jsx(se,{className:"text-sm font-medium",children:"Contact"}),r.jsx(wn,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsx(Z,{children:r.jsx("p",{className:"text-lg font-semibold",children:d.contactFirstName&&d.contactLastName?`${d.contactFirstName} ${d.contactLastName}`:"N/A"})})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-3",children:[r.jsx(se,{className:"text-sm font-medium",children:"Enseigne"}),r.jsx(Ir,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("p",{className:"text-lg font-semibold",children:d.enseigne||"N/A"}),d.raisonSociale&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Raison sociale: ",d.raisonSociale]})]})]}),d.monthlyAmount&&r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-3",children:[r.jsx(se,{className:"text-sm font-medium",children:"Abonnement mensuel"}),r.jsx(wn,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsx(Z,{children:r.jsxs("p",{className:"text-lg font-semibold",children:[d.monthlyAmount,"/mois"]})})]})]}),d.solutionsInstalled&&d.solutionsInstalled.length>0&&r.jsxs(U,{children:[r.jsx(ne,{children:r.jsx(se,{className:"text-sm",children:"Solutions installes"})}),r.jsx(Z,{children:r.jsx("div",{className:"flex flex-wrap gap-2",children:d.solutionsInstalled.map(g=>r.jsx(ve,{variant:"outline",children:g.replace(/_/g," ")},g))})})]}),d.satisfactionLevel&&d.satisfactionLevel!=="unknown"&&r.jsxs(U,{children:[r.jsx(ne,{children:r.jsx(se,{className:"text-sm",children:"Satisfaction client"})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{className:"font-medium",children:["Niveau: ",d.satisfactionLevel==="satisfied"?" Satisfait":d.satisfactionLevel==="neutral"?" Neutre":d.satisfactionLevel==="unsatisfied"?" Insatisfait":" Inconnu"]}),d.satisfactionNotes&&r.jsx("p",{className:"text-sm text-muted-foreground",children:d.satisfactionNotes})]})})]}),d.notes&&r.jsxs(U,{children:[r.jsx(ne,{children:r.jsx(se,{className:"text-sm",children:"Notes"})}),r.jsx(Z,{children:r.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:d.notes})})]})]}),r.jsx(Zt,{value:"edit",className:"space-y-4",children:r.jsx(Fu,{...o,children:r.jsxs("form",{onSubmit:o.handleSubmit(v),className:"space-y-4",children:[r.jsx(we,{control:o.control,name:"contractEndDate",render:({field:g})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Date d'chance contrat"}),r.jsx(Se,{children:r.jsx(ge,{type:"date",...g,disabled:!i,"data-testid":"input-contract-end-date"})}),r.jsx(ke,{})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-sm",children:"Informations contact et entreprise"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(we,{control:o.control,name:"contactFirstName",render:({field:g})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Prnom contact"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"Jean",...g,disabled:!i,"data-testid":"input-contact-first-name"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"contactLastName",render:({field:g})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Nom contact"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"Dupont",...g,disabled:!i,"data-testid":"input-contact-last-name"})}),r.jsx(ke,{})]})})]}),r.jsx(we,{control:o.control,name:"raisonSociale",render:({field:g})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Raison sociale (nom lgal)"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"SARL ENTREPRISE DUPONT",...g,disabled:!i,"data-testid":"input-raison-sociale"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"enseigne",render:({field:g})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Enseigne (nom commercial)"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"Boutique Dupont",...g,disabled:!i,"data-testid":"input-enseigne"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"siren",render:({field:g})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"SIRET (optionnel)"}),r.jsx(Se,{children:r.jsx(ge,{placeholder:"12345678901234",maxLength:14,...g,disabled:!i,"data-testid":"input-siren"})}),r.jsx(ke,{})]})})]}),r.jsx(we,{control:o.control,name:"monthlyAmount",render:({field:g})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Abonnement mensuel ()"}),r.jsx(Se,{children:r.jsx(ge,{type:"number",step:"0.01",placeholder:"150.00",...g,onChange:x=>g.onChange(x.target.value?parseFloat(x.target.value):void 0),value:g.value||"",disabled:!i,"data-testid":"input-monthly-amount-edit"})}),r.jsx(rr,{children:"Montant de l'abonnement mensuel actuel"}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"solutionsInstalled",render:()=>r.jsxs(_e,{children:[r.jsxs("div",{className:"mb-4",children:[r.jsx(Ne,{className:"text-base",children:"Solutions installes"}),r.jsx(rr,{children:"Slectionnez toutes les solutions actuellement en place"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{value:"alarme_intrusion",label:"Alarme intrusion"},{value:"telesurveillance_classique",label:"Tlsurveillance classique"},{value:"intervention_gardien",label:"Intervention gardien"},{value:"videosurveillance",label:"Vidosurveillance"},{value:"controle_acces",label:"Contrle d'accs"},{value:"detection_incendie",label:"Dtection incendie"},{value:"autre",label:"Autre"}].map(g=>r.jsx(we,{control:o.control,name:"solutionsInstalled",render:({field:x})=>{const w=x.value||[];return r.jsxs(_e,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(Se,{children:r.jsx(Zr,{checked:w.includes(g.value),onCheckedChange:N=>{const y=N?[...w,g.value]:w.filter(A=>A!==g.value);x.onChange(y)},disabled:!i,"data-testid":`checkbox-solution-${g.value}`})}),r.jsx(Ne,{className:"font-normal",children:g.label})]},g.value)}},g.value))}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"subscriptionType",render:({field:g})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Type d'abonnement"}),r.jsxs(gt,{value:g.value,onValueChange:g.onChange,disabled:!i,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-subscription-type",children:r.jsx(xt,{placeholder:"Slectionner..."})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"mensuel",children:"Mensuel"}),r.jsx(Y,{value:"trimestriel",children:"Trimestriel"}),r.jsx(Y,{value:"annuel",children:"Annuel"}),r.jsx(Y,{value:"pluriannuel",children:"Pluriannuel"})]})]}),r.jsx(rr,{children:"Type de facturation du contrat concurrent"}),r.jsx(ke,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(we,{control:o.control,name:"numberOfSites",render:({field:g})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Nombre de sites"}),r.jsx(Se,{children:r.jsx(ge,{type:"number",min:"1",...g,disabled:!i,"data-testid":"input-number-of-sites"})}),r.jsx(rr,{children:"Nombre de sites couverts par le contrat"}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"avgContractDurationMonths",render:({field:g})=>{var x;return r.jsxs(_e,{children:[r.jsx(Ne,{children:"Dure contrat (mois)"}),r.jsxs(gt,{value:(x=g.value)==null?void 0:x.toString(),onValueChange:w=>g.onChange(parseInt(w)),disabled:!i,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-contract-duration",children:r.jsx(xt,{placeholder:"Slectionner..."})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"12",children:"1 an (12 mois)"}),r.jsx(Y,{value:"24",children:"2 ans (24 mois)"}),r.jsx(Y,{value:"36",children:"3 ans (36 mois)"}),r.jsx(Y,{value:"48",children:"4 ans (48 mois)"}),r.jsx(Y,{value:"60",children:"5 ans (60 mois)"}),r.jsx(Y,{value:"72",children:"6 ans (72 mois)"})]})]}),r.jsx(rr,{children:"Dure habituelle des contrats"}),r.jsx(ke,{})]})}})]}),r.jsx(we,{control:o.control,name:"satisfactionLevel",render:({field:g})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Niveau de satisfaction client"}),r.jsxs(gt,{value:g.value,onValueChange:g.onChange,disabled:!i,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-satisfaction-level",children:r.jsx(xt,{placeholder:"Slectionner..."})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"satisfied",children:" Satisfait"}),r.jsx(Y,{value:"neutral",children:" Neutre"}),r.jsx(Y,{value:"unsatisfied",children:" Insatisfait"}),r.jsx(Y,{value:"unknown",children:" Inconnu"})]})]}),r.jsx(rr,{children:"Niveau de satisfaction du prospect avec son prestataire actuel"}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"satisfactionNotes",render:({field:g})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Notes sur la satisfaction"}),r.jsx(Se,{children:r.jsx(Dn,{placeholder:"Dtails sur la satisfaction, points de friction, opportunits...",className:"resize-none",rows:2,...g,disabled:!i,"data-testid":"textarea-satisfaction-notes"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"notes",render:({field:g})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Notes gnrales"}),r.jsx(Se,{children:r.jsx(Dn,{placeholder:"Informations complmentaires...",className:"resize-none",rows:3,...g,disabled:!i,"data-testid":"textarea-notes"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"internalNotes",render:({field:g})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Notes internes (prives)"}),r.jsx(Se,{children:r.jsx(Dn,{placeholder:"Notes internes non visibles par le client...",className:"resize-none",rows:2,...g,disabled:!i,"data-testid":"textarea-internal-notes"})}),r.jsx(ke,{})]})}),r.jsx("div",{className:"flex gap-2 justify-end",children:i?r.jsxs(r.Fragment,{children:[r.jsx(re,{type:"button",variant:"outline",onClick:()=>{a(!1),o.reset()},"data-testid":"button-cancel-edit",children:"Annuler"}),r.jsx(re,{type:"submit",disabled:p.isPending,"data-testid":"button-save-edit",children:p.isPending?"Enregistrement...":"Enregistrer"})]}):r.jsx(re,{type:"button",onClick:()=>a(!0),"data-testid":"button-start-edit",children:"Modifier"})})]})})}),r.jsx(Zt,{value:"history",className:"space-y-4",children:r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Historique des tentatives"}),r.jsx(jt,{children:"Suivi des actions de reconqute"})]}),r.jsx(Z,{children:r.jsxs("p",{className:"text-sm text-muted-foreground text-center py-4",children:["Historique  venir (Tentative #",d.attemptNumber||1,")"]})})]})})]})]})})}const UL=e=>{switch(e){case"won":return"text-green-600 bg-green-50 dark:bg-green-950";case"active":return"text-blue-600 bg-blue-50 dark:bg-blue-950";case"lost":return"text-red-600 bg-red-50 dark:bg-red-950";case"archived":return"text-gray-600 bg-gray-50 dark:bg-gray-950";case"future":return"text-purple-600 bg-purple-50 dark:bg-purple-950";case"a_qualifier":return"text-orange-600 bg-orange-50 dark:bg-orange-950";default:return"text-gray-600 bg-gray-50 dark:bg-gray-950"}},kw=e=>{switch(e){case"won":return"Gagn";case"active":return"Actif";case"lost":return"Perdu";case"archived":return"Archiv";case"future":return"Futur";case"a_qualifier":return" qualifier";default:return e}};function i3e(){const[e,t]=_.useState("dashboard"),[n,s]=_.useState("all"),[i,a]=_.useState(""),[o,l]=_.useState(!1),[c,d]=_.useState(null),[f,h]=_.useState(!1),{data:p,isLoading:v}=Ke({queryKey:["/api/competitor/dashboards/bd"]}),{data:j,isLoading:g}=Ke({queryKey:["/api/competitor/situations"],enabled:e==="list"}),x=((j==null?void 0:j.situations)||[]).map(y=>{var A,P,E,C,S,k,I,R,D,z,V,K,H,W,B,$;return{id:((A=y.situation)==null?void 0:A.id)||"",prospectId:((P=y.situation)==null?void 0:P.prospectId)||"",prospectName:((E=y.prospect)==null?void 0:E.entreprise)||"N/A",siren:((C=y.situation)==null?void 0:C.siren)||null,contactFirstName:((S=y.situation)==null?void 0:S.contactFirstName)||null,contactLastName:((k=y.situation)==null?void 0:k.contactLastName)||null,raisonSociale:((I=y.situation)==null?void 0:I.raisonSociale)||null,enseigne:((R=y.situation)==null?void 0:R.enseigne)||null,monthlyAmount:((D=y.situation)==null?void 0:D.monthlyAmount)||null,concurrentId:((z=y.situation)==null?void 0:z.concurrentId)||"",concurrentName:((V=y.concurrent)==null?void 0:V.name)||"N/A",contractEndDate:((K=y.situation)==null?void 0:K.contractEndDate)||"",wakeupDate:((H=y.situation)==null?void 0:H.wakeupDate)||"",status:((W=y.situation)==null?void 0:W.status)||"active",attemptNumber:((B=y.situation)==null?void 0:B.attemptNumber)||0,daysUntilEnd:(($=y.situation)==null?void 0:$.daysBeforeEnd)||0}}),w=x.filter(y=>!(n!=="all"&&y.status!==n||i&&!y.prospectName.toLowerCase().includes(i.toLowerCase())&&!y.concurrentName.toLowerCase().includes(i.toLowerCase()))),N=x.reduce((y,A)=>(y[A.prospectId]=(y[A.prospectId]||0)+1,y),{});return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx(mr,{}),r.jsxs("div",{className:"container mx-auto p-4 space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[r.jsx(UN,{className:"w-8 h-8 text-primary"}),"Module chances Concurrent"]}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Reconqute contrats concurrents  ROI cible : +1M/an"})]}),r.jsxs(Wn,{open:o,onOpenChange:l,children:[r.jsx(Mo,{asChild:!0,children:r.jsxs(re,{size:"default","data-testid":"button-add-situation",children:[r.jsx(dr,{className:"w-4 h-4 mr-2"}),"Nouvelle chance"]})}),r.jsxs(Fn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(zn,{children:[r.jsx(Bn,{children:"Capturer chance Concurrent"}),r.jsx(Za,{children:"Saisie rapide en 30-60 secondes  Systme anti-doublon automatique"})]}),r.jsx(n3e,{onSuccess:()=>l(!1)})]})]})]}),r.jsxs(fi,{value:e,onValueChange:y=>t(y),children:[r.jsxs(qs,{children:[r.jsxs(Ht,{value:"dashboard","data-testid":"tab-dashboard",children:[r.jsx(fn,{className:"w-4 h-4 mr-2"}),"Dashboard BD"]}),r.jsxs(Ht,{value:"list","data-testid":"tab-list",children:[r.jsx(xn,{className:"w-4 h-4 mr-2"}),"Situations"]}),r.jsxs(Ht,{value:"alerts","data-testid":"tab-alerts",children:[r.jsx(Yr,{className:"w-4 h-4 mr-2"}),"Alertes"]})]}),r.jsx(Zt,{value:"dashboard",className:"space-y-4",children:v?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Chargement..."}):p?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Situations"}),r.jsx(fn,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:p.stats.total}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Actives: ",p.stats.active]})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Taux Conversion"}),r.jsx(wn,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[p.stats.conversionRate.toFixed(1),"%"]}),r.jsx($o,{value:p.stats.conversionRate,className:"mt-2"})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Contrats Gagns"}),r.jsx(UN,{className:"w-4 h-4 text-green-600"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:p.stats.won}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p.stats.total>0?(p.stats.won/p.stats.total*100).toFixed(1):0,"% du total"]})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Contrats Perdus"}),r.jsx(Yr,{className:"w-4 h-4 text-red-600"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:p.stats.lost}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p.stats.total>0?(p.stats.lost/p.stats.total*100).toFixed(1):0,"% du total"]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Distribution par Statut"}),r.jsx(jt,{children:"Vue d'ensemble du pipeline reconqute"})]}),r.jsx(Z,{children:p.byStatus.length>0?r.jsx(Ua,{width:"100%",height:250,children:r.jsxs(Ph,{data:p.byStatus.map(y=>({name:kw(y.status),count:y.count,value:y.totalValue})),children:[r.jsx(Qo,{strokeDasharray:"3 3"}),r.jsx(Di,{dataKey:"name",angle:-45,textAnchor:"end",height:80}),r.jsx(oi,{}),r.jsx(Ar,{formatter:(y,A)=>[A==="count"?y:`${Number(y).toLocaleString("fr-FR")} `,A==="count"?"Nombre":"Valeur"]}),r.jsx(Bs,{}),r.jsx(us,{dataKey:"count",fill:"hsl(var(--primary))",name:"Nombre"})]})}):r.jsx("p",{className:"text-muted-foreground text-center py-8",children:"Aucune donne"})})]}),r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Indicateurs Cls"}),r.jsx(jt,{children:"Performance reconqute"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Taux de Conversion"}),r.jsxs("span",{className:"text-sm font-bold",children:[p.stats.conversionRate,"%"]})]}),r.jsx($o,{value:p.stats.conversionRate,className:"h-2"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Situations Actives"}),r.jsxs("span",{className:"text-sm font-bold",children:[p.stats.active,"/",p.stats.total]})]}),r.jsx($o,{value:p.stats.total>0?p.stats.active/p.stats.total*100:0,className:"h-2"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Objectif ROI"}),r.jsx("span",{className:"text-sm font-bold",children:"+1M/an"})]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["60 contrats cibles  ",p.stats.won," reconquis"]})]})]})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Situations Prioritaires"}),r.jsx(jt,{children:"chances  traiter en priorit"})]}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-3",children:p.prioritySituations.length===0?r.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Aucune situation prioritaire"}):p.prioritySituations.map(y=>r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 p-3 rounded-lg border bg-card hover-elevate cursor-pointer","data-testid":`situation-${y.id}`,onClick:()=>{d(y.id),h(!0)},children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("p",{className:"font-medium",children:y.prospectName}),r.jsxs(ve,{variant:"outline",className:"text-xs",children:["vs ",y.concurrentName]})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-muted-foreground flex-wrap",children:[r.jsxs("span",{children:["chance: ",new Date(y.contractEndDate).toLocaleDateString("fr-FR")]}),r.jsxs("span",{children:["Rveil: ",new Date(y.wakeupDate).toLocaleDateString("fr-FR")]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ve,{className:UL(y.status),children:kw(y.status)}),y.daysUntilEnd<=30&&r.jsxs(ve,{variant:"destructive",className:"text-xs",children:["J-",y.daysUntilEnd]}),r.jsx(re,{size:"icon",variant:"ghost",onClick:A=>{A.stopPropagation(),d(y.id),h(!0)},"data-testid":`button-edit-${y.id}`,children:r.jsx(Ii,{className:"h-4 w-4"})})]})]},y.id))})})]})]}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucune donne disponible"})}),r.jsxs(Zt,{value:"list",className:"space-y-4",children:[r.jsxs(U,{children:[r.jsx(ne,{children:r.jsx(se,{className:"text-base",children:"Filtres"})}),r.jsxs(Z,{className:"flex flex-wrap gap-4",children:[r.jsx("div",{className:"flex-1 min-w-[200px]",children:r.jsx(ge,{placeholder:"Rechercher prospect ou concurrent...",value:i,onChange:y=>a(y.target.value),"data-testid":"input-search"})}),r.jsxs(gt,{value:n,onValueChange:s,children:[r.jsx(mt,{className:"w-[200px]","data-testid":"select-status",children:r.jsx(xt,{placeholder:"Statut"})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"all",children:"Tous les statuts"}),r.jsx(Y,{value:"a_qualifier",children:" qualifier"}),r.jsx(Y,{value:"future",children:"Futur"}),r.jsx(Y,{value:"active",children:"Actif"}),r.jsx(Y,{value:"won",children:"Gagn"}),r.jsx(Y,{value:"lost",children:"Perdu"}),r.jsx(Y,{value:"archived",children:"Archiv"})]})]})]})]}),g?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Chargement..."}):r.jsx("div",{className:"space-y-3",children:w.length===0?r.jsx(U,{children:r.jsx(Z,{className:"py-8 text-center text-muted-foreground",children:"Aucune situation trouve"})}):w.map(y=>r.jsx(U,{className:"hover-elevate cursor-pointer","data-testid":`situation-card-${y.id}`,onClick:()=>{d(y.id),h(!0)},children:r.jsx(Z,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("h3",{className:"text-lg font-semibold",children:y.prospectName}),N[y.prospectId]>1&&r.jsxs(ve,{variant:"secondary",className:"text-xs",children:[N[y.prospectId]," contrats"]}),r.jsxs(ve,{variant:"outline",children:["vs ",y.concurrentName]}),r.jsx(ve,{className:UL(y.status),children:kw(y.status)})]}),r.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"chance: "}),r.jsx("span",{className:"font-medium",children:new Date(y.contractEndDate).toLocaleDateString("fr-FR")})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Rveil: "}),r.jsx("span",{className:"font-medium",children:new Date(y.wakeupDate).toLocaleDateString("fr-FR")})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Contact: "}),r.jsx("span",{className:"font-medium",children:y.contactFirstName&&y.contactLastName?`${y.contactFirstName} ${y.contactLastName}`:"N/A"})]}),y.enseigne&&r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Enseigne: "}),r.jsx("span",{className:"font-medium",children:y.enseigne})]}),y.monthlyAmount&&r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Abonnement: "}),r.jsxs("span",{className:"font-medium",children:[y.monthlyAmount,"/mois"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Tentatives: "}),r.jsx("span",{className:"font-medium",children:y.attemptNumber})]})]})]}),y.daysUntilEnd<=60&&y.status==="active"&&r.jsxs(ve,{variant:"destructive",children:["J-",y.daysUntilEnd]})]})})},y.id))})]}),r.jsx(Zt,{value:"alerts",className:"space-y-4",children:r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Alertes Progressives"}),r.jsx(jt,{children:"Jalons automatiques : J-180, J-90, J-60, J-30, J-15, J-7"})]}),r.jsx(Z,{children:!p||p.recentAlerts.length===0?r.jsx("p",{className:"text-muted-foreground text-center py-8",children:"Aucune alerte non lue"}):r.jsx("div",{className:"space-y-3",children:p.recentAlerts.map(y=>r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border bg-card hover-elevate","data-testid":`alert-${y.id}`,children:[r.jsx(Yr,{className:"w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(ve,{variant:"outline",className:"text-xs",children:y.alertType}),r.jsxs(ve,{variant:"destructive",className:"text-xs",children:["J-",y.daysBeforeEnd]})]}),r.jsx("p",{className:"text-sm mt-1",children:y.message||"chance proche - Action requise"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(y.alertDate).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]},y.id))})})]})})]})]}),r.jsx(s3e,{situationId:c,open:f,onOpenChange:y=>{h(y),y||d(null)}})]})}const OG=[{value:"appel",label:"Appel tlphonique",icon:Vn},{value:"email",label:"Email",icon:da},{value:"reunion",label:"Runion",icon:Ri},{value:"suivi",label:"Suivi",icon:Va}];function a3e(){const[e,t]=_.useState(""),[n,s]=_.useState(!1),[i,a]=_.useState(null),[o,l]=_.useState("all"),{toast:c}=At(),{data:d=[],isLoading:f}=Ke({queryKey:["/api/crm/actions"]}),{data:h=[]}=Ke({queryKey:["/api/crm/prospects"]}),p=dt({mutationFn:async y=>await rt("POST","/api/crm/actions",y),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/actions"]}),s(!1),c({title:"Action cre",description:"L'action a t ajoute avec succs"})}}),v=dt({mutationFn:async({id:y,data:A})=>await rt("PATCH",`/api/crm/actions/${y}`,A),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/actions"]}),a(null),c({title:"Action mise  jour",description:"Les modifications ont t enregistres"})}}),j=dt({mutationFn:async y=>await rt("DELETE",`/api/crm/actions/${y}`),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/actions"]}),c({title:"Action supprime",description:"L'action a t supprime avec succs"})}}),g=y=>{v.mutate({id:y.id,data:{statut:y.statut==="terminee"?"a_faire":"terminee"}})},x=d.filter(y=>{var E;const A=e===""||((E=y.description)==null?void 0:E.toLowerCase().includes(e.toLowerCase()))||y.type.toLowerCase().includes(e.toLowerCase()),P=o==="all"||o==="completed"&&y.statut==="terminee"||o==="pending"&&y.statut==="a_faire";return A&&P}).sort((y,A)=>!y.datePrevue||!A.datePrevue?0:new Date(y.datePrevue).getTime()-new Date(A.datePrevue).getTime()),w=x.filter(y=>y.datePrevue&&(dp(new Date(y.datePrevue))||_B(new Date(y.datePrevue)))),N=x.filter(y=>y.datePrevue&&yj(new Date(y.datePrevue))&&!dp(new Date(y.datePrevue)));return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"sticky top-0 z-10 bg-primary text-primary-foreground shadow-md",children:r.jsx("div",{className:"container mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Actions & Tches"}),r.jsx("p",{className:"text-sm text-primary-foreground/80",children:"Gre tes actions commerciales"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Wn,{open:n,onOpenChange:s,children:[r.jsx(Mo,{asChild:!0,children:r.jsxs(re,{variant:"secondary","data-testid":"button-create-action",children:[r.jsx(dr,{className:"h-4 w-4 mr-2"}),"Nouvelle Action"]})}),r.jsxs(Fn,{className:"max-w-md",children:[r.jsx(zn,{children:r.jsx(Bn,{children:"Crer une action"})}),r.jsx(WL,{onSubmit:y=>p.mutate(y),prospects:h,isPending:p.isPending})]})]}),r.jsx(mr,{showHomeButton:!0})]})]})})}),r.jsxs("main",{className:"container mx-auto px-4 py-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(ls,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(ge,{type:"search",placeholder:"Rechercher une action...",value:e,onChange:y=>t(y.target.value),className:"pl-9","data-testid":"input-search-actions"})]}),r.jsxs(gt,{value:o,onValueChange:y=>l(y),children:[r.jsx(mt,{className:"w-full sm:w-48","data-testid":"select-filter-status",children:r.jsx(xt,{})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"all",children:"Toutes"}),r.jsx(Y,{value:"pending",children:" faire"}),r.jsx(Y,{value:"completed",children:"Termines"})]})]})]}),f?r.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Chargement des actions..."}):x.length===0?r.jsx(U,{children:r.jsxs(Z,{className:"py-12 text-center",children:[r.jsx(xn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:e||o!=="all"?"Aucune action trouve":"Aucune action planifie"})]})}):r.jsxs("div",{className:"space-y-6",children:[w.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[r.jsx(xn,{className:"h-5 w-5"})," venir (",w.length,")"]}),r.jsx("div",{className:"grid gap-3",children:w.map(y=>r.jsx(HL,{action:y,prospects:h,onToggleComplete:g,onEdit:a,onDelete:A=>j.mutate(A)},y.id))})]}),N.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-muted-foreground",children:["Passes (",N.length,")"]}),r.jsx("div",{className:"grid gap-3 opacity-60",children:N.map(y=>r.jsx(HL,{action:y,prospects:h,onToggleComplete:g,onEdit:a,onDelete:A=>j.mutate(A)},y.id))})]})]})]}),i&&r.jsx(Wn,{open:!!i,onOpenChange:y=>!y&&a(null),children:r.jsxs(Fn,{className:"max-w-md",children:[r.jsx(zn,{children:r.jsx(Bn,{children:"Modifier l'action"})}),r.jsx(WL,{initialData:i,onSubmit:y=>v.mutate({id:i.id,data:y}),prospects:h,isPending:v.isPending})]})})]})}function HL({action:e,prospects:t,onToggleComplete:n,onEdit:s,onDelete:i}){var d;const a=t.find(f=>f.id===e.prospectId),o=((d=OG.find(f=>f.value===e.type))==null?void 0:d.icon)||Va,l=e.statut==="terminee",c=e.datePrevue&&yj(new Date(e.datePrevue))&&!l;return r.jsx(U,{className:l?"opacity-50":"","data-testid":`card-action-${e.id}`,children:r.jsx(Z,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>n(e),className:"mt-1 shrink-0","data-testid":`button-toggle-complete-${e.id}`,children:l?r.jsx(Yt,{className:"h-5 w-5 text-green-600"}):r.jsx(tP,{className:"h-5 w-5 text-muted-foreground"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(o,{className:"h-4 w-4 text-muted-foreground shrink-0"}),r.jsx(ve,{variant:"outline",className:"capitalize",children:e.type}),e.datePrevue&&r.jsx("span",{className:`text-sm ${c?"text-destructive font-semibold":"text-muted-foreground"}`,children:br(new Date(e.datePrevue),"dd MMM yyyy",{locale:jr})})]}),r.jsxs("div",{className:"flex gap-1 shrink-0",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>s(e),"data-testid":`button-edit-${e.id}`,children:r.jsx(Ii,{className:"h-4 w-4"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>i(e.id),"data-testid":`button-delete-${e.id}`,children:r.jsx(Ns,{className:"h-4 w-4"})})]})]}),e.description&&r.jsx("p",{className:"text-sm mb-2",children:e.description}),a&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx(Ri,{className:"h-3 w-3"}),r.jsx("span",{children:a.nom})]})]})]})})})}function WL({initialData:e,onSubmit:t,prospects:n,isPending:s}){const[i,a]=_.useState({type:(e==null?void 0:e.type)||"appel",description:(e==null?void 0:e.description)||"",datePrevue:e!=null&&e.datePrevue?br(new Date(e.datePrevue),"yyyy-MM-dd'T'HH:mm"):"",prospectId:(e==null?void 0:e.prospectId)||"",statut:(e==null?void 0:e.statut)||"a_faire"}),o=l=>{l.preventDefault(),t({...i,datePrevue:i.datePrevue?new Date(i.datePrevue):void 0})};return r.jsxs("form",{onSubmit:o,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Ce,{htmlFor:"type",children:"Type d'action *"}),r.jsxs(gt,{value:i.type,onValueChange:l=>a({...i,type:l}),children:[r.jsx(mt,{id:"type","data-testid":"select-action-type",children:r.jsx(xt,{})}),r.jsx(pt,{children:OG.map(l=>r.jsx(Y,{value:l.value,children:l.label},l.value))})]})]}),r.jsxs("div",{children:[r.jsx(Ce,{htmlFor:"prospectId",children:"Prospect *"}),r.jsxs(gt,{value:i.prospectId,onValueChange:l=>a({...i,prospectId:l}),children:[r.jsx(mt,{id:"prospectId","data-testid":"select-prospect",children:r.jsx(xt,{placeholder:"Slectionne un prospect"})}),r.jsx(pt,{children:n.map(l=>r.jsx(Y,{value:l.id,children:l.nom},l.id))})]})]}),r.jsxs("div",{children:[r.jsx(Ce,{htmlFor:"datePrevue",children:"Date prvue *"}),r.jsx(ge,{id:"datePrevue",type:"datetime-local",value:i.datePrevue,onChange:l=>a({...i,datePrevue:l.target.value}),required:!0,"data-testid":"input-date"})]}),r.jsxs("div",{children:[r.jsx(Ce,{htmlFor:"description",children:"Description"}),r.jsx(Dn,{id:"description",value:i.description,onChange:l=>a({...i,description:l.target.value}),placeholder:"Dtails de l'action...",rows:3,"data-testid":"textarea-description"})]}),r.jsx("div",{className:"flex justify-end gap-2 pt-4",children:r.jsx(re,{type:"submit",disabled:s||!i.type||!i.prospectId||!i.datePrevue,"data-testid":"button-submit-action",children:s?"Enregistrement...":e?"Mettre  jour":"Crer"})})]})}function o3e(){const[e,t]=_.useState(""),[n,s]=_.useState(!1),[i,a]=_.useState(null),[o,l]=_.useState(null),[c,d]=_.useState(null),{toast:f}=At(),[h]=es();_.useEffect(()=>{const k=new URLSearchParams(window.location.search).get("prospectId");if(k){console.log("[RDV PREFILL] prospectId dtect dans URL:",k),d(k),s(!0);const I=window.location.pathname;window.history.replaceState({},"",I)}},[h]);const{data:p=[],isLoading:v}=Ke({queryKey:["/api/crm/rdvs"]}),{data:j=[]}=Ke({queryKey:["/api/crm/prospects"]}),g=dt({mutationFn:async S=>await rt("POST","/api/crm/rdvs",S),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/rdvs"]}),f({title:"RDV cr",description:"Le rendez-vous a t ajout avec succs"}),setTimeout(()=>{s(!1)},100)}}),x=dt({mutationFn:async({id:S,data:k})=>await rt("PATCH",`/api/crm/rdvs/${S}`,k),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/rdvs"]}),a(null),f({title:"RDV mis  jour",description:"Les modifications ont t enregistres"})}}),w=dt({mutationFn:async S=>await rt("DELETE",`/api/crm/rdvs/${S}`),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/rdvs"]}),f({title:"RDV supprim",description:"Le rendez-vous a t supprim avec succs"})}}),N=dt({mutationFn:async S=>(l(S),await rt("POST",`/api/workflow/prepare-rdv/${S}`)),onSuccess:S=>{var k,I,R,D,z;if(l(null),et.invalidateQueries({queryKey:["/api/crm/rdvs"]}),S.pdfBuffer){const V=atob(S.pdfBuffer),K=new Array(V.length);for(let oe=0;oe<V.length;oe++)K[oe]=V.charCodeAt(oe);const H=new Uint8Array(K),W=new Blob([H],{type:"application/pdf"}),B=window.URL.createObjectURL(W),$=document.createElement("a");$.href=B;const G=((k=S.pdfPath)==null?void 0:k.split("/").pop())||`preparation_rdv_${S.preparationId}.pdf`;$.download=G,document.body.appendChild($),$.click(),document.body.removeChild($),window.URL.revokeObjectURL(B);const ee=S.erreurs&&Object.keys(S.erreurs).length>0;f(ee?{title:"Prparation partielle gnre",description:"Le PDF a t tlcharg mais certaines donnes n'ont pas pu tre rcupres"}:{title:"Prparation RDV gnre",description:"Le PDF a t tlcharg avec succs"})}else{const V=[];(I=S.erreurs)!=null&&I.pappers&&V.push("Pappers: "+S.erreurs.pappers),(R=S.erreurs)!=null&&R.braveSearch&&V.push("Recherche web: "+S.erreurs.braveSearch),(D=S.erreurs)!=null&&D.claudeDisc&&V.push("Analyse DISC: "+S.erreurs.claudeDisc),(z=S.erreurs)!=null&&z.pdfGeneration&&V.push("PDF: "+S.erreurs.pdfGeneration),f({title:"Erreur de prparation",description:V.join(" | ")||"Impossible de gnrer le dossier de prparation",variant:"destructive"})}},onError:S=>{l(null),f({title:"Erreur",description:S.message||"Erreur lors de la prparation du RDV",variant:"destructive"})}}),y=S=>{var k;if(S.dossierPreparation&&S.dossierPreparation.pdfBase64){const I=S.dossierPreparation.pdfBase64,R=atob(I),D=new Array(R.length);for(let B=0;B<R.length;B++)D[B]=R.charCodeAt(B);const z=new Uint8Array(D),V=new Blob([z],{type:"application/pdf"}),K=window.URL.createObjectURL(V),H=document.createElement("a");H.href=K;const W=((k=S.pdfPath)==null?void 0:k.split("/").pop())||`preparation_rdv_${S.id}.pdf`;H.download=W,document.body.appendChild(H),H.click(),document.body.removeChild(H),window.URL.revokeObjectURL(K),f({title:"PDF tlcharg",description:"Le dossier de prparation a t tlcharg"})}},A=S=>{const k=j.find(D=>D.id===S.prospectId),I=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <title>Compte-rendu RDV - ${(k==null?void 0:k.nom)||"Prospect"}</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 40px; line-height: 1.6; }
          .header { text-align: center; margin-bottom: 40px; border-bottom: 3px solid #1e3a5f; padding-bottom: 20px; }
          .logo { font-size: 28px; font-weight: bold; color: #1e3a5f; margin-bottom: 10px; }
          .title { font-size: 22px; margin: 20px 0; color: #333; }
          .info { margin: 30px 0; }
          .info-row { margin: 10px 0; display: flex; }
          .info-label { font-weight: bold; width: 150px; color: #555; }
          .info-value { flex: 1; }
          .section { margin: 30px 0; }
          .section-title { font-size: 18px; font-weight: bold; color: #1e3a5f; margin-bottom: 10px; border-bottom: 2px solid #e0e0e0; padding-bottom: 5px; }
          .content { background: #f9f9f9; padding: 15px; border-radius: 5px; margin-top: 10px; white-space: pre-wrap; }
          .footer { margin-top: 50px; text-align: center; color: #777; font-size: 12px; }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="logo">HECTOR - ADS GROUP</div>
          <div class="title">Compte-rendu de rendez-vous</div>
        </div>
        
        <div class="info">
          <div class="info-row">
            <span class="info-label">Prospect:</span>
            <span class="info-value">${(k==null?void 0:k.nom)||"N/A"}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Date:</span>
            <span class="info-value">${S.dateRdv?br(new Date(S.dateRdv),"dd MMMM yyyy '' HH:mm",{locale:jr}):"N/A"}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Lieu:</span>
            <span class="info-value">${S.lieu||"Non prcis"}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Type:</span>
            <span class="info-value">${S.type||"N/A"}</span>
          </div>
        </div>

        ${S.objectif?`
        <div class="section">
          <div class="section-title">Objectif du rendez-vous</div>
          <div class="content">${S.objectif}</div>
        </div>
        `:""}

        ${S.compteRendu?`
        <div class="section">
          <div class="section-title">Compte-rendu</div>
          <div class="content">${S.compteRendu}</div>
        </div>
        `:""}

        ${S.prochainesEtapes?`
        <div class="section">
          <div class="section-title">Prochaines tapes</div>
          <div class="content">${S.prochainesEtapes}</div>
        </div>
        `:""}

        <div class="footer">
          <p>Document gnr par Hector - ADS GROUP CRM</p>
          <p>Date de gnration: ${br(new Date,"dd/MM/yyyy '' HH:mm",{locale:jr})}</p>
        </div>
      </body>
      </html>
    `,R=window.open("","_blank");R&&(R.document.write(I),R.document.close(),setTimeout(()=>{R.print()},250)),f({title:"PDF gnr",description:"Le compte-rendu est prt  tre imprim"})},P=p.filter(S=>{var I,R;const k=j.find(D=>D.id===S.prospectId);return e===""||(k==null?void 0:k.nom.toLowerCase().includes(e.toLowerCase()))||((I=S.type)==null?void 0:I.toLowerCase().includes(e.toLowerCase()))||((R=S.lieu)==null?void 0:R.toLowerCase().includes(e.toLowerCase()))}).sort((S,k)=>!S.dateRdv||!k.dateRdv?0:new Date(k.dateRdv).getTime()-new Date(S.dateRdv).getTime()),E=P.filter(S=>S.dateRdv&&(dp(new Date(S.dateRdv))||_B(new Date(S.dateRdv)))),C=P.filter(S=>S.dateRdv&&yj(new Date(S.dateRdv))&&!dp(new Date(S.dateRdv)));return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"sticky top-0 z-10 bg-primary text-primary-foreground shadow-md",children:r.jsx("div",{className:"container mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Rendez-vous"}),r.jsx("p",{className:"text-sm text-primary-foreground/80",children:"Planifie et suit tes RDVs"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Wn,{open:n,onOpenChange:s,children:[r.jsx(Mo,{asChild:!0,children:r.jsxs(re,{variant:"secondary","data-testid":"button-create-rdv",children:[r.jsx(dr,{className:"h-4 w-4 mr-2"}),"Nouveau RDV"]})}),r.jsxs(Fn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(zn,{children:r.jsx(Bn,{children:"Crer un rendez-vous"})}),r.jsx(GL,{onSubmit:S=>g.mutate(S),prospects:j,isPending:g.isPending,prefilledProspectId:c})]})]}),r.jsx(mr,{showHomeButton:!0})]})]})})}),r.jsxs("main",{className:"container mx-auto px-4 py-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx(ls,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(ge,{type:"search",placeholder:"Rechercher un rendez-vous...",value:e,onChange:S=>t(S.target.value),className:"pl-9","data-testid":"input-search-rdvs"})]})}),v?r.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Chargement des rendez-vous..."}):P.length===0?r.jsx(U,{children:r.jsxs(Z,{className:"py-12 text-center",children:[r.jsx(xn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:e?"Aucun rendez-vous trouv":"Aucun rendez-vous planifi"})]})}):r.jsxs("div",{className:"space-y-6",children:[E.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[r.jsx(xn,{className:"h-5 w-5"})," venir (",E.length,")"]}),r.jsx("div",{className:"grid gap-3",children:E.map(S=>r.jsx(KL,{rdv:S,prospects:j,onEdit:a,onDelete:k=>w.mutate(k),onGeneratePDF:A,onPrepareRdv:k=>N.mutate(k),onDownloadPDF:y,preparingRdvId:o},S.id))})]}),C.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-muted-foreground",children:["Passs (",C.length,")"]}),r.jsx("div",{className:"grid gap-3",children:C.map(S=>r.jsx(KL,{rdv:S,prospects:j,onEdit:a,onDelete:k=>w.mutate(k),onGeneratePDF:A,onPrepareRdv:k=>N.mutate(k),onDownloadPDF:y,preparingRdvId:o},S.id))})]})]})]}),i&&r.jsx(Wn,{open:!!i,onOpenChange:S=>!S&&a(null),children:r.jsxs(Fn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(zn,{children:r.jsx(Bn,{children:"Modifier le rendez-vous"})}),r.jsx(GL,{initialData:i,onSubmit:S=>x.mutate({id:i.id,data:S}),prospects:j,isPending:x.isPending})]})})]})}function KL({rdv:e,prospects:t,onEdit:n,onDelete:s,onGeneratePDF:i,onPrepareRdv:a,onDownloadPDF:o,preparingRdvId:l}){const c=t.find(d=>d.id===e.prospectId);return e.dateRdv&&yj(new Date(e.dateRdv))&&dp(new Date(e.dateRdv)),r.jsxs(U,{"data-testid":`card-rdv-${e.id}`,children:[r.jsx(ne,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[r.jsxs(se,{className:"text-lg",children:[(c==null?void 0:c.prenom)&&`${c.prenom} `,c!=null&&c.nom?c.nom.toUpperCase():"Prospect inconnu"]}),e.type&&r.jsx(ve,{variant:"outline",className:"capitalize",children:e.type})]}),(c==null?void 0:c.enseigneCommerciale)&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[r.jsx(Ir,{className:"h-4 w-4"}),r.jsx("span",{className:"font-medium",children:c.enseigneCommerciale})]}),e.dateRdv&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(jn,{className:"h-4 w-4"}),r.jsx("span",{children:br(new Date(e.dateRdv),"dd MMMM yyyy '' HH:mm",{locale:jr})})]}),e.lieu&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[r.jsx(Jr,{className:"h-4 w-4"}),r.jsx("span",{children:e.lieu})]}),e.createdAt&&r.jsxs("div",{className:"text-xs text-muted-foreground/60 mt-2",children:["Cr le ",br(new Date(e.createdAt),"dd/MM/yyyy",{locale:jr})]})]}),r.jsxs("div",{className:"flex gap-1 shrink-0",children:[e.pdfPath?r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>o(e),title:"Tlcharger le dossier de prparation PDF","data-testid":`button-download-pdf-${e.id}`,children:r.jsx(nP,{className:"h-4 w-4 text-primary"})}):r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>a(e.id),title:l===e.id?"Gnration en cours...":"Prparer RDV (Recherche automatique + PDF)","data-testid":`button-prepare-${e.id}`,disabled:l===e.id,className:"bg-orange-500 hover:bg-orange-600 text-white disabled:bg-orange-300",children:l===e.id?r.jsx(On,{className:"h-4 w-4 animate-spin"}):r.jsx(ap,{className:"h-4 w-4"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>i(e),title:"Gnrer compte-rendu PDF","data-testid":`button-pdf-${e.id}`,children:r.jsx(hu,{className:"h-4 w-4"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>n(e),"data-testid":`button-edit-${e.id}`,children:r.jsx(Ii,{className:"h-4 w-4"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>s(e.id),"data-testid":`button-delete-${e.id}`,children:r.jsx(Ns,{className:"h-4 w-4"})})]})]})}),r.jsxs(Z,{className:"space-y-3",children:[e.objectif&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-1",children:"Objectif"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e.objectif})]}),e.compteRendu&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-1",children:"Compte-rendu"}),r.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:e.compteRendu})]}),e.prochainesEtapes&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-1",children:"Prochaines tapes"}),r.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:e.prochainesEtapes})]})]})]})}function GL({initialData:e,onSubmit:t,prospects:n,isPending:s,prefilledProspectId:i}){const a=()=>{const g=new Date;return g.setDate(g.getDate()+1),g.setHours(14,0,0,0),br(g,"yyyy-MM-dd'T'HH:mm")},[o,l]=_.useState({type:(e==null?void 0:e.type)||"presentiel",prospectId:(e==null?void 0:e.prospectId)||i||"",dateRdv:e!=null&&e.dateRdv?br(new Date(e.dateRdv),"yyyy-MM-dd'T'HH:mm"):a(),lieu:(e==null?void 0:e.lieu)||"",objectif:(e==null?void 0:e.objectif)||"",compteRendu:(e==null?void 0:e.compteRendu)||"",prochainesEtapes:(e==null?void 0:e.prochainesEtapes)||""}),[c,d]=_.useState(null),[f,h]=_.useState(!1),{toast:p}=At();_.useEffect(()=>{i&&!e&&v(i)},[i]);async function v(g){h(!0);try{const x=await fetch(`/api/prospects/${g}/for-rdv`);if(!x.ok)throw new Error("Erreur chargement prospect");const w=await x.json();w.success&&(d(w.data),l(N=>({...N,prospectId:g,lieu:w.data.adresseComplete||N.lieu})),console.log("[RDV PREFILL]  Donnes prospect charges et formulaire pr-rempli"),p({title:"Donnes prospect charges",description:`RDV pour ${w.data.entreprise}`}))}catch(x){console.error("[RDV PREFILL] Erreur chargement prospect:",x),p({title:"Erreur",description:"Impossible de charger les donnes du prospect",variant:"destructive"})}finally{h(!1)}}const j=g=>{g.preventDefault(),t({...o,dateRdv:o.dateRdv?new Date(o.dateRdv):void 0})};return r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[f&&r.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(On,{className:"w-4 h-4 animate-spin text-blue-600 dark:text-blue-400"}),r.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Chargement des donnes prospect..."})]})}),c&&r.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Yt,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),r.jsx("span",{className:"text-sm font-semibold text-green-800 dark:text-green-300",children:"Donnes prospect pr-remplies"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-gray-700 dark:text-gray-300",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Entreprise:"})," ",c.entreprise]}),c.secteur&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Secteur:"})," ",c.secteur]}),c.contactComplet&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Contact:"})," ",c.contactComplet]}),c.telephone&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Tl:"})," ",c.telephone]}),c.isFullyEnriched&&r.jsxs("div",{className:"col-span-2 mt-1 pt-1 border-t border-green-200 dark:border-green-700",children:[r.jsx("span",{className:"text-green-700 dark:text-green-400 font-medium",children:" Donnes enrichies disponibles"}),c.formeJuridique&&r.jsx("span",{className:"ml-2",children:c.formeJuridique}),c.effectif&&r.jsxs("span",{className:"ml-2",children:[" ",c.effectif]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Ce,{htmlFor:"type",children:"Type de RDV *"}),r.jsxs(gt,{value:o.type,onValueChange:g=>l({...o,type:g}),children:[r.jsx(mt,{id:"type","data-testid":"select-rdv-type",children:r.jsx(xt,{})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"presentiel",children:"Prsentiel"}),r.jsx(Y,{value:"visio",children:"Visioconfrence"}),r.jsx(Y,{value:"tel",children:"Tlphonique"})]})]})]}),r.jsxs("div",{children:[r.jsx(Ce,{htmlFor:"prospectId",children:"Prospect *"}),r.jsxs(gt,{value:o.prospectId,onValueChange:g=>l({...o,prospectId:g}),children:[r.jsx(mt,{id:"prospectId","data-testid":"select-prospect",children:r.jsx(xt,{placeholder:"Slectionne un prospect"})}),r.jsx(pt,{children:n.map(g=>r.jsx(Y,{value:g.id,children:g.nom},g.id))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Ce,{htmlFor:"dateRdv",children:"Date et heure *"}),r.jsx(ge,{id:"dateRdv",type:"datetime-local",value:o.dateRdv,onChange:g=>l({...o,dateRdv:g.target.value}),required:!0,"data-testid":"input-date"})]}),r.jsxs("div",{children:[r.jsx(Ce,{htmlFor:"lieu",children:"Lieu"}),r.jsx(ge,{id:"lieu",value:o.lieu,onChange:g=>l({...o,lieu:g.target.value}),placeholder:"Adresse ou lien visio","data-testid":"input-lieu"})]})]}),r.jsxs("div",{children:[r.jsx(Ce,{htmlFor:"objectif",children:"Objectif du RDV"}),r.jsx(Dn,{id:"objectif",value:o.objectif,onChange:g=>l({...o,objectif:g.target.value}),placeholder:"Quel est l'objectif de ce rendez-vous ?",rows:2,"data-testid":"textarea-objectif"})]}),r.jsxs("div",{children:[r.jsx(Ce,{htmlFor:"compteRendu",children:"Compte-rendu"}),r.jsx(Dn,{id:"compteRendu",value:o.compteRendu,onChange:g=>l({...o,compteRendu:g.target.value}),placeholder:"Notes et compte-rendu du rendez-vous...",rows:4,"data-testid":"textarea-compte-rendu"})]}),r.jsxs("div",{children:[r.jsx(Ce,{htmlFor:"prochainesEtapes",children:"Prochaines tapes"}),r.jsx(Dn,{id:"prochainesEtapes",value:o.prochainesEtapes,onChange:g=>l({...o,prochainesEtapes:g.target.value}),placeholder:"Actions  suivre aprs ce RDV...",rows:3,"data-testid":"textarea-prochaines-etapes"})]}),r.jsx("div",{className:"flex justify-end gap-2 pt-4",children:r.jsx(re,{type:"submit",disabled:s||!o.prospectId,"data-testid":"button-submit-rdv",children:s?"Enregistrement...":e?"Mettre  jour":"Crer"})})]})}function l3e(){const[e,t]=_.useState(""),[n,s]=_.useState("all"),{toast:i}=At(),{data:a=[],isLoading:o}=Ke({queryKey:["/api/crm/affaires-chaudes"]}),{data:l=[]}=Ke({queryKey:["/api/crm/prospects"]}),c=dt({mutationFn:async j=>await rt("POST",`/api/crm/affaires-chaudes/${j}/relancer`),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/affaires-chaudes"]}),et.invalidateQueries({queryKey:["/api/crm/opportunities"]}),i({title:"Relance programme",description:"R2 positionn avec succs"})},onError:j=>{i({title:"Erreur",description:j.message||"Impossible de relancer l'affaire",variant:"destructive"})}}),d=a.filter(j=>{var N;const g=l.find(y=>y.id===j.prospectId),x=!e||j.titre.toLowerCase().includes(e.toLowerCase())||(((N=g==null?void 0:g.entreprise)==null?void 0:N.toLowerCase())??"").includes(e.toLowerCase()),w=n==="all"||j.urgence===n;return x&&w}),f={total:a.length,critique:a.filter(j=>j.urgence==="critique").length,elevee:a.filter(j=>j.urgence==="elevee").length,mrrPotentiel:a.reduce((j,g)=>j+(Number(g.nombreContrats)||0)*(Number(g.abonnementMensuelHt)||0),0)},h=j=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(j),p=(j,g)=>j==="critique"?r.jsxs(ve,{variant:"destructive","data-testid":"badge-urgence-critique",children:[r.jsx(Yr,{className:"h-3 w-3 mr-1"}),"Critique (",g,"j)"]}):j==="elevee"?r.jsxs(ve,{className:"bg-orange-500 hover:bg-orange-600","data-testid":"badge-urgence-elevee",children:[r.jsx(jn,{className:"h-3 w-3 mr-1"}),"leve (",g,"j)"]}):r.jsxs(ve,{variant:"secondary","data-testid":"badge-urgence-normale",children:[r.jsx(jn,{className:"h-3 w-3 mr-1"}),"Normale (",g,"j)"]}),v=j=>{const g={"Tlsurveillance avec IA embarque":r.jsx(lP,{className:"h-5 w-5 text-blue-600"}),"Vidosurveillance intelligente":r.jsx(bf,{className:"h-5 w-5 text-purple-600"}),"Contrle d'accs connect":r.jsx(iP,{className:"h-5 w-5 text-orange-600"}),"Dfibrillateurs connects":r.jsx(sP,{className:"h-5 w-5 text-red-600"})};return j&&g[j]?g[j]:r.jsx(aP,{className:"h-5 w-5 text-gray-600"})};return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx(un,{href:"/crm",children:r.jsxs(re,{variant:"ghost",className:"mb-4","data-testid":"button-back-crm",children:[r.jsx(ua,{className:"mr-2 h-4 w-4"}),"Retour au CRM"]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Yl,{className:"h-8 w-8 text-orange-600"}),r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Affaires Chaudes"})]}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Deals ncessitant un R2 aprs R1 non sign"})]}),r.jsx(mr,{showHomeButton:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs(U,{className:"border-2 border-orange-200 dark:border-orange-800","data-testid":"card-total-affaires",children:[r.jsx(ne,{className:"pb-3",children:r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Total Affaires Chaudes"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:f.total}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" relancer"})]})]}),r.jsxs(U,{className:"border-2 border-red-200 dark:border-red-800","data-testid":"card-critiques",children:[r.jsx(ne,{className:"pb-3",children:r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Urgence Critique"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:f.critique}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"> 7 jours"})]})]}),r.jsxs(U,{className:"border-2 border-orange-200 dark:border-orange-800","data-testid":"card-elevees",children:[r.jsx(ne,{className:"pb-3",children:r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Urgence leve"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:f.elevee}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"4-7 jours"})]})]}),r.jsxs(U,{className:"border-2 border-blue-200 dark:border-blue-800","data-testid":"card-mrr-potentiel",children:[r.jsx(ne,{className:"pb-3",children:r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"MRR Potentiel"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h(f.mrrPotentiel)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Si signs"})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(ls,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(ge,{placeholder:"Rechercher une affaire ou entreprise...",value:e,onChange:j=>t(j.target.value),className:"pl-10","data-testid":"input-search"})]}),r.jsxs(gt,{value:n,onValueChange:j=>s(j),children:[r.jsx(mt,{className:"w-full sm:w-48","data-testid":"select-urgence",children:r.jsx(xt,{})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"all",children:"Toutes urgences"}),r.jsx(Y,{value:"critique",children:"Critique uniquement"}),r.jsx(Y,{value:"elevee",children:"leve uniquement"}),r.jsx(Y,{value:"normale",children:"Normale uniquement"})]})]})]}),o?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-muted-foreground",children:"Chargement..."})}):d.length===0?r.jsx(U,{"data-testid":"card-empty-state",children:r.jsxs(Z,{className:"text-center py-12",children:[r.jsx(Yr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucune affaire chaude"}),r.jsx("p",{className:"text-muted-foreground",children:e||n!=="all"?"Aucune affaire ne correspond  vos filtres":"Toutes les affaires sont  jour !"})]})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(j=>{const g=l.find(N=>N.id===j.prospectId),x=(Number(j.nombreContrats)||0)*(Number(j.abonnementMensuelHt)||0),w=x*12;return r.jsxs(U,{className:"hover-elevate","data-testid":`card-affaire-${j.id}`,children:[r.jsxs(ne,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[r.jsx(se,{className:"text-base",children:j.titre}),r.jsx("span",{className:"text-lg",children:v(j.typePrestation)})]}),g&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(Ir,{className:"h-3 w-3"}),g.entreprise]}),g&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx(Ri,{className:"h-3 w-3"}),g.prenom," ",g.nom]})]}),r.jsxs(Z,{className:"space-y-3",children:[r.jsx("div",{children:p(j.urgence,j.joursDepuisR1)}),j.dateR1&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx(xn,{className:"h-3 w-3"}),"R1: ",br(new Date(j.dateR1),"dd MMM yyyy",{locale:jr})]}),r.jsxs("div",{className:"space-y-1 pt-2 border-t",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:"Contrats:"}),r.jsx("span",{className:"font-medium",children:j.nombreContrats})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:"Abo/mois HT:"}),r.jsx("span",{className:"font-medium",children:h(Number(j.abonnementMensuelHt))})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:"Dure:"}),r.jsxs("span",{className:"font-medium",children:[j.dureeEngagementMois," mois"]})]})]}),r.jsxs("div",{className:"pt-2 border-t space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-blue-600",children:[r.jsx(Oo,{className:"h-3 w-3"}),"MRR ",h(x)]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx(wn,{className:"h-3 w-3"}),"ARR ",h(w)]})]}),r.jsxs(re,{onClick:()=>c.mutate(j.id),disabled:c.isPending,className:"w-full",variant:j.urgence==="critique"?"destructive":"default","data-testid":`button-relancer-${j.id}`,children:[r.jsx(cP,{className:"h-4 w-4 mr-2"}),c.isPending?"Relance...":"Positionner R2"]})]})]},j.id)})})]})}function c3e(){const[e,t]=_.useState("mes_demandes"),{toast:n}=At(),{user:s}=ya(),{data:i=[]}=Ke({queryKey:["/api/crm/opportunities"]}),{data:a=[]}=Ke({queryKey:["/api/crm/prospects"]}),{data:o=[]}=Ke({queryKey:["/api/notifications/transferts"]}),l=dt({mutationFn:async x=>await rt("POST",`/api/crm/transferts/${x}/accepter`),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/opportunities"]}),et.invalidateQueries({queryKey:["/api/notifications/transferts"]}),n({title:"Transfert accept",description:"L'opportunit vous a t transfre avec succs"})},onError:x=>{n({title:"Erreur",description:x.message||"Impossible d'accepter le transfert",variant:"destructive"})}}),c=dt({mutationFn:async({opportunityId:x,raison:w})=>await rt("POST",`/api/crm/transferts/${x}/refuser`,{raison:w}),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/crm/opportunities"]}),et.invalidateQueries({queryKey:["/api/notifications/transferts"]}),n({title:"Transfert refus"})},onError:x=>{n({title:"Erreur",description:x.message||"Impossible de refuser le transfert",variant:"destructive"})}}),d=i.filter(x=>x.statutTransfert&&["en_attente","accepte","refuse"].includes(x.statutTransfert)),f=d.filter(x=>x.sdrCreateurId===(s==null?void 0:s.id)),h=d.filter(x=>x.bdRepreneurId===(s==null?void 0:s.id)&&x.statutTransfert==="en_attente"),p=x=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(x),v=x=>x==="en_attente"?r.jsxs(ve,{className:"bg-orange-500 hover:bg-orange-600","data-testid":"badge-en-attente",children:[r.jsx(jn,{className:"h-3 w-3 mr-1"}),"En attente"]}):x==="accepte"?r.jsxs(ve,{className:"bg-green-500 hover:bg-green-600","data-testid":"badge-accepte",children:[r.jsx(ti,{className:"h-3 w-3 mr-1"}),"Accept"]}):r.jsxs(ve,{variant:"destructive","data-testid":"badge-refuse",children:[r.jsx(os,{className:"h-3 w-3 mr-1"}),"Refus"]}),j=x=>{const w={"Tlsurveillance avec IA embarque":r.jsx(lP,{className:"h-5 w-5 text-blue-600"}),"Vidosurveillance intelligente":r.jsx(bf,{className:"h-5 w-5 text-purple-600"}),"Contrle d'accs connect":r.jsx(iP,{className:"h-5 w-5 text-orange-600"}),"Dfibrillateurs connects":r.jsx(sP,{className:"h-5 w-5 text-red-600"})};return x&&w[x]?w[x]:r.jsx(aP,{className:"h-5 w-5 text-gray-600"})},g=(x,w=!1)=>{const N=a.find(A=>A.id===x.prospectId),y=(Number(x.nombreContrats)||0)*(Number(x.abonnementMensuelHt)||0);return r.jsxs(U,{className:"hover-elevate","data-testid":`card-transfert-${x.id}`,children:[r.jsxs(ne,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[r.jsx(se,{className:"text-base",children:x.titre}),r.jsx("span",{className:"text-lg",children:j(x.typePrestation)})]}),N&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(Ir,{className:"h-3 w-3"}),N.entreprise]})]}),r.jsxs(Z,{className:"space-y-3",children:[r.jsx("div",{children:x.statutTransfert&&v(x.statutTransfert)}),x.dateTransfertBd&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Demand le ",br(new Date(x.dateTransfertBd),"dd MMM yyyy",{locale:jr})]}),x.raisonTransfert&&r.jsxs("div",{className:"text-xs p-2 bg-muted rounded-md",children:[r.jsx("span",{className:"font-medium",children:"Raison:"})," ",x.raisonTransfert]}),r.jsxs("div",{className:"pt-2 border-t",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-blue-600",children:[r.jsx(Oo,{className:"h-3 w-3"}),"MRR ",p(y)]}),r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[x.nombreContrats," contrats  ",p(Number(x.abonnementMensuelHt))]})]}),w&&x.statutTransfert==="en_attente"&&r.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[r.jsxs(re,{onClick:()=>l.mutate(x.id),disabled:l.isPending,className:"flex-1 bg-green-600 hover:bg-green-700","data-testid":`button-accepter-${x.id}`,children:[r.jsx(ti,{className:"h-4 w-4 mr-2"}),"Accepter"]}),r.jsxs(re,{onClick:()=>{const A=prompt("Raison du refus (optionnel):")||"Pas de raison fournie";c.mutate({opportunityId:x.id,raison:A})},disabled:c.isPending,variant:"destructive",className:"flex-1","data-testid":`button-refuser-${x.id}`,children:[r.jsx(os,{className:"h-4 w-4 mr-2"}),"Refuser"]})]})]})]},x.id)};return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx(un,{href:"/crm",children:r.jsxs(re,{variant:"ghost",className:"mb-4","data-testid":"button-back-crm",children:[r.jsx(ua,{className:"mr-2 h-4 w-4"}),"Retour au CRM"]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx($d,{className:"h-8 w-8 text-blue-600"}),r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transferts SDR  BD/IC"})]}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Gestion des transferts d'opportunits"})]}),r.jsx(mr,{showHomeButton:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[r.jsxs(U,{className:"border-2 border-orange-200 dark:border-orange-800","data-testid":"card-en-attente",children:[r.jsx(ne,{className:"pb-3",children:r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"En attente"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:d.filter(x=>x.statutTransfert==="en_attente").length}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Transferts  traiter"})]})]}),r.jsxs(U,{className:"border-2 border-green-200 dark:border-green-800","data-testid":"card-acceptes",children:[r.jsx(ne,{className:"pb-3",children:r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Accepts"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.filter(x=>x.statutTransfert==="accepte").length}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Transferts valids"})]})]}),r.jsxs(U,{className:"border-2 border-red-200 dark:border-red-800","data-testid":"card-refuses",children:[r.jsx(ne,{className:"pb-3",children:r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Refuss"})}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:d.filter(x=>x.statutTransfert==="refuse").length}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Transferts rejets"})]})]})]}),o.length>0&&r.jsxs(U,{className:"mb-6","data-testid":"card-notifications",children:[r.jsx(ne,{children:r.jsxs(se,{className:"flex items-center gap-2 text-base",children:[r.jsx(Zee,{className:"h-5 w-5"}),"Notifications (",o.filter(x=>x.lu==="false").length," non lues)"]})}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-2",children:o.slice(0,5).map(x=>r.jsx("div",{className:`p-3 rounded-md border ${x.lu==="false"?"bg-muted border-primary":"bg-background"}`,"data-testid":`notification-${x.id}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Br,{className:`h-4 w-4 mt-0.5 ${x.lu==="false"?"text-primary":"text-muted-foreground"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm",children:x.message}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:br(new Date(x.createdAt),"dd MMM yyyy  HH:mm",{locale:jr})})]})]})},x.id))})})]}),r.jsxs(fi,{value:e,onValueChange:x=>t(x),className:"w-full",children:[r.jsxs(qs,{className:"grid w-full max-w-md grid-cols-2",children:[r.jsxs(Ht,{value:"mes_demandes","data-testid":"tab-mes-demandes",children:[r.jsx($d,{className:"h-4 w-4 mr-2"}),"Mes Demandes (",f.length,")"]}),r.jsxs(Ht,{value:"a_traiter","data-testid":"tab-a-traiter",children:[r.jsx(Ri,{className:"h-4 w-4 mr-2"})," Traiter (",h.length,")"]})]}),r.jsx(Zt,{value:"mes_demandes",className:"mt-6",children:f.length===0?r.jsx(U,{"data-testid":"card-empty-mes-demandes",children:r.jsxs(Z,{className:"text-center py-12",children:[r.jsx($d,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucune demande de transfert"}),r.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore demand de transfert vers un BD/IC"})]})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(x=>g(x,!1))})}),r.jsx(Zt,{value:"a_traiter",className:"mt-6",children:h.length===0?r.jsx(U,{"data-testid":"card-empty-a-traiter",children:r.jsxs(Z,{className:"text-center py-12",children:[r.jsx(Ri,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun transfert  traiter"}),r.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas de transferts en attente de votre dcision"})]})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(x=>g(x,!0))})})]})]})}async function u3e(e){const t=await fetch("/api/companies/enrich",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok){const n=await t.json();throw new Error(n.error||"Erreur lors de l'enrichissement")}return t.json()}async function d3e(e){const t=await fetch(`/api/companies/${e}`,{credentials:"include"});if(!t.ok){const n=await t.json();throw new Error(n.error||"Entreprise non trouve")}return t.json()}async function f3e(e){const t=await fetch(`/api/companies/${e}/establishments`,{credentials:"include"});if(!t.ok){const n=await t.json();throw new Error(n.error||"Erreur lors de la rcupration des tablissements")}return t.json()}const vl={all:["companies"],lists:()=>[...vl.all,"list"],list:e=>[...vl.lists(),{limit:e}],details:()=>[...vl.all,"detail"],detail:e=>[...vl.details(),e],establishments:e=>[...vl.detail(e),"establishments"],enrichmentLogs:e=>[...vl.detail(e),"enrichment-logs"]};function h3e({siretValue:e,sirenValue:t,onSiretChange:n,onSirenChange:s,onCompanyEnriched:i,className:a,disabled:o=!1}){const[l,c]=_.useState(!1),[d,f]=_.useState("idle"),[h,p]=_.useState(null),[v,j]=_.useState(null),{toast:g}=At();_.useEffect(()=>{if(!e&&!t){f("idle"),p(null),j(null);return}const y=e.replace(/[\s\-\.]/g,""),A=t.replace(/[\s\-\.]/g,"");let P="",E=null;if(y.length===14&&/^\d{14}$/.test(y)?(P=y,E="siret"):A.length===9&&/^\d{9}$/.test(A)&&(P=A,E="siren"),!P||!E){f("idle"),p(null);return}const C=setTimeout(async()=>{c(!0),f("idle"),j(E);try{const S=await u3e({identifier:P,triggerType:"automatic"});S.success&&S.company?(f("success"),p(S.company),i&&i(S.company),g({title:" Entreprise enrichie",description:`${S.company.legalName} - ${S.company.city||""}`})):(f("error"),p(null))}catch(S){console.error("Erreur enrichissement:",S),f("error"),p(null)}finally{c(!1)}},800);return()=>clearTimeout(C)},[e,t]);const x=y=>{const A=y.target.value;n(A),A&&t&&s("")},w=y=>{const A=y.target.value;s(A),A&&e&&n("")},N=({field:y})=>{const A=v===y;return l&&A?r.jsx(On,{className:"h-4 w-4 animate-spin text-muted-foreground"}):d==="success"&&A?r.jsx(Yt,{className:"h-4 w-4 text-green-600"}):d==="error"&&A?r.jsx(Br,{className:"h-4 w-4 text-orange-500"}):r.jsx(Ir,{className:"h-4 w-4 text-muted-foreground"})};return r.jsxs("div",{className:Oe("space-y-4",a),children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"siret-input",children:"SIRET (14 chiffres)"}),r.jsxs("div",{className:"relative",children:[r.jsx(ge,{id:"siret-input",type:"text",placeholder:"Ex: 84450210400019",value:e,onChange:x,disabled:o||l,maxLength:14,className:"pr-10","data-testid":"input-siret"}),r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:r.jsx(N,{field:"siret"})})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Enrichissement automatique  14 chiffres"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"ou"})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"siren-input",children:"SIREN (9 chiffres)"}),r.jsxs("div",{className:"relative",children:[r.jsx(ge,{id:"siren-input",type:"text",placeholder:"Ex: 844502104",value:t,onChange:w,disabled:o||l,maxLength:9,className:"pr-10","data-testid":"input-siren"}),r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:r.jsx(N,{field:"siren"})})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Enrichissement automatique  9 chiffres"})]}),h&&d==="success"&&r.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 rounded-md space-y-1","data-testid":"enrichment-info",children:[r.jsxs("p",{className:"font-medium text-foreground text-sm",children:[" ",h.legalName]}),h.addressLine1&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",h.addressLine1,h.postalCode&&h.city&&`, ${h.postalCode} ${h.city}`]}),h.nafCode&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:[" NAF: ",h.nafCode,h.nafLabel&&` - ${h.nafLabel}`]})]})]})}function Ow(e,t){const n=(e==null?void 0:e.trim().toUpperCase())||"",s=(t==null?void 0:t.trim().toLowerCase())||"";if(n){if(n.startsWith("L-")||/^\d{4}$/.test(n)&&parseInt(n)>=1e3&&parseInt(n)<=9999&&s.includes("luxemb"))return"luxembourg";if(n.startsWith("B-")||/^\d{4}$/.test(n)&&s.includes("belg"))return"belgique";if(/^\d{5}$/.test(n))return"france"}if(s){if(s.includes("france")||s.includes("franais"))return"france";if(s.includes("luxemb"))return"luxembourg";if(s.includes("belg")||s.includes("bruxelles"))return"belgique"}return null}const m3e=sl({createProspect:Rs().default(!0),createOpportunity:Rs().default(!0),createRdv:Rs().default(!0),createAction:Rs().default(!0),sendEmail:Rs().default(!1),prospectAQualifier:Rs().default(!1),prospectNom:Ue().min(1,"Le nom est requis"),prospectPrenom:Ue().optional(),prospectFonction:Ue().optional(),prospectEntreprise:Ue().optional(),prospectSiret:Ue().optional(),prospectSiren:Ue().optional(),prospectEmail:Ue().email("Email invalide").optional().or(HW("")),prospectTelephone:Ue().optional(),prospectAdresse1:Ue().optional(),prospectAdresse2:Ue().optional(),prospectCodePostal:Ue().optional(),prospectVille:Ue().optional(),prospectPays:Ue().default("France"),prospectEntity:ir(["france","luxembourg","belgique"]).optional(),prospectSecteur:Ue().optional(),prospectNotes:Ue().optional(),competitorConcurrentId:Ue().optional(),competitorContractEndDate:Ue().optional(),competitorMonthlyAmount:la.number().optional(),competitorNotes:Ue().optional(),competitorSolutionsInstalled:Do(Ue()).optional(),competitorSubscriptionType:Ue().optional(),competitorNumberOfSites:la.number().optional(),competitorAvgContractDurationMonths:la.number().optional(),competitorSatisfactionLevel:Ue().optional(),competitorSatisfactionNotes:Ue().optional(),opportunityNom:Ue().optional(),opportunityMontant:xa().min(0,"Le montant doit tre positif").default(0),opportunityEtape:ir(["nouveau","proposition","negociation","gagne","perdu"]).default("nouveau"),opportunityProbabilite:xa().min(0).max(100).default(50),rdvTitre:Ue().optional(),rdvDate:Ue().optional(),rdvDuree:Ue().default("1h"),rdvLieu:Ue().optional(),rdvType:Ue().default("Rendez-vous commercial"),rdvObjectif:Ue().optional(),rdvParticipants:Ue().optional(),actionTitre:Ue().optional(),actionType:ir(["appel","email","reunion","autre"]).default("appel"),actionPriorite:ir(["basse","moyenne","haute"]).default("moyenne"),actionDateEcheance:Ue().optional(),actionDescription:Ue().optional()}).refine(e=>!(e.createAction&&(!e.actionDateEcheance||e.actionDateEcheance.trim()==="")),{message:"La date d'chance est requise",path:["actionDateEcheance"]}).refine(e=>!(e.createOpportunity&&(!e.opportunityNom||e.opportunityNom.trim()==="")),{message:"Le nom de l'opportunit est requis",path:["opportunityNom"]}).refine(e=>!(e.createRdv&&(!e.rdvTitre||e.rdvTitre.trim()===""||!e.rdvDate||e.rdvDate.trim()===""||!e.rdvLieu||e.rdvLieu.trim()==="")),{message:"Tous les champs du RDV sont requis",path:["rdvDate"]}).refine(e=>!(e.createAction&&(!e.actionTitre||e.actionTitre.trim()==="")),{message:"Le titre de l'action est requis",path:["actionTitre"]});function p3e({cardData:e,onSuccess:t,onCancel:n}){const[s,i]=_.useState(!1),[a,o]=_.useState(null),[l,c]=_.useState(null),{toast:d}=At(),[,f]=es(),{data:h=[]}=Ke({queryKey:["/api/concurrents"]});_.useEffect(()=>{const C=sessionStorage.getItem("businessCardImage");C&&(c(C),sessionStorage.removeItem("businessCardImage"))},[]);const p=e!=null&&e.prenom&&(e!=null&&e.nom)?`${e.prenom} ${e.nom}`:(e==null?void 0:e.nom)||"",v=e!=null&&e.poste?`Poste: ${e.poste}`:"",j=[e==null?void 0:e.adresse1,e==null?void 0:e.ville].filter(Boolean).join(", "),g=Ow(e==null?void 0:e.codePostal,e==null?void 0:e.pays),x=Du({resolver:$u(m3e),defaultValues:{createProspect:!0,createOpportunity:!0,createRdv:!0,createAction:!0,sendEmail:!1,prospectAQualifier:!1,prospectNom:(e==null?void 0:e.nom)||"",prospectPrenom:(e==null?void 0:e.prenom)||"",prospectFonction:(e==null?void 0:e.poste)||"",prospectEntreprise:(e==null?void 0:e.entreprise)||"",prospectSiret:"",prospectSiren:"",prospectEmail:(e==null?void 0:e.email)||"",prospectTelephone:(e==null?void 0:e.telephone)||"",prospectAdresse1:(e==null?void 0:e.adresse1)||"",prospectAdresse2:(e==null?void 0:e.adresse2)||"",prospectCodePostal:(e==null?void 0:e.codePostal)||"",prospectVille:(e==null?void 0:e.ville)||"",prospectPays:(e==null?void 0:e.pays)||"France",prospectEntity:g,prospectSecteur:(e==null?void 0:e.secteur)||"",prospectNotes:v,competitorConcurrentId:"",competitorContractEndDate:"",competitorMonthlyAmount:void 0,competitorNotes:"",competitorSolutionsInstalled:[],competitorSubscriptionType:"",competitorNumberOfSites:void 0,competitorAvgContractDurationMonths:void 0,competitorSatisfactionLevel:"",competitorSatisfactionNotes:"",opportunityNom:e!=null&&e.entreprise?`Opportunit ${e.entreprise}`:"Nouvelle opportunit",opportunityMontant:1e4,opportunityEtape:"nouveau",opportunityProbabilite:50,rdvTitre:p?`RDV avec ${p}`:"Rendez-vous commercial",rdvDate:"",rdvDuree:"1h",rdvLieu:j||"",rdvType:"Rendez-vous commercial",rdvObjectif:"",rdvParticipants:(e==null?void 0:e.email)||"",actionTitre:"Relance post-RDV",actionType:"appel",actionPriorite:"moyenne",actionDateEcheance:"",actionDescription:""}});_.useEffect(()=>{if(e&&Object.keys(e).some(C=>e[C])){console.log("[WorkflowCreation] CardData detected, updating form:",e);const C=e.prenom&&e.nom?`${e.prenom} ${e.nom}`:e.nom||"",S=e.poste?`Poste: ${e.poste}`:"",k=[e.adresse1,e.ville].filter(Boolean).join(", ");x.reset({createProspect:!0,createOpportunity:!0,createRdv:!0,createAction:!0,sendEmail:!1,prospectAQualifier:!1,prospectNom:e.nom||"",prospectPrenom:e.prenom||"",prospectFonction:e.poste||"",prospectEntreprise:e.entreprise||"",prospectSiret:"",prospectSiren:"",prospectEmail:e.email||"",prospectTelephone:e.telephone||"",prospectAdresse1:e.adresse1||"",prospectAdresse2:e.adresse2||"",prospectCodePostal:e.codePostal||"",prospectVille:e.ville||"",prospectPays:e.pays||"France",prospectEntity:Ow(e.codePostal,e.pays),prospectSecteur:e.secteur||"",prospectNotes:S,competitorConcurrentId:"",competitorContractEndDate:"",competitorMonthlyAmount:void 0,competitorNotes:"",opportunityNom:e.entreprise?`Opportunit ${e.entreprise}`:"Nouvelle opportunit",opportunityMontant:1e4,opportunityEtape:"nouveau",opportunityProbabilite:50,rdvTitre:C?`RDV avec ${C}`:"Rendez-vous commercial",rdvDate:"",rdvDuree:"1h",rdvLieu:k||"",rdvType:"Rendez-vous commercial",rdvObjectif:"",rdvParticipants:e.email||"",actionTitre:"Relance post-RDV",actionType:"appel",actionPriorite:"moyenne",actionDateEcheance:"",actionDescription:""})}},[e,x]),_.useEffect(()=>{const C=x.watch((S,{name:k})=>{if(k==="prospectEntreprise"&&S.prospectEntreprise&&x.setValue("opportunityNom",`Opportunit ${S.prospectEntreprise}`),k==="prospectNom"&&S.prospectNom){const I=x.getValues("rdvTitre");(!I||I==="Rendez-vous commercial"||I.startsWith("RDV"))&&x.setValue("rdvTitre",`RDV avec ${S.prospectNom}`)}if((k==="prospectCodePostal"||k==="prospectPays")&&(S.prospectCodePostal||S.prospectPays)){const I=Ow(S.prospectCodePostal,S.prospectPays);I&&(x.setValue("prospectEntity",I),console.log("[WorkflowCreation] Auto-detected entity:",I,"from postal code:",S.prospectCodePostal,"and country:",S.prospectPays))}});return()=>C.unsubscribe()},[x]);const w=C=>{if(console.log("[WorkflowCreation] Enrichissement CASCADE reu:",C),C.legalName&&x.setValue("prospectEntreprise",C.legalName),C.addressLine1&&x.setValue("prospectAdresse1",C.addressLine1),C.postalCode&&x.setValue("prospectCodePostal",C.postalCode),C.city&&x.setValue("prospectVille",C.city),C.nafCode||C.nafLabel){const S=C.nafLabel||"";let k="Autre";S.toLowerCase().includes("restaur")?k="Restauration":S.toLowerCase().includes("commerc")?k="Commerce":S.toLowerCase().includes("htel")?k="Htellerie":S.toLowerCase().includes("construct")||S.toLowerCase().includes("bti")?k="BTP":S.toLowerCase().includes("sant")||S.toLowerCase().includes("mdic")?k="Sant":S.toLowerCase().includes("transport")?k="Transport":S.toLowerCase().includes("immobil")?k="Immobilier":S.toLowerCase().includes("industr")||S.toLowerCase().includes("fabricat")?k="Industrie":S.toLowerCase().includes("agricul")?k="Agriculture":S.toLowerCase().includes("service")&&(k="Services"),x.setValue("prospectSecteur",k)}d({title:" Enrichissement CASCADE russi",description:`${C.legalName} - ${C.city||""}`})},N=async C=>{var S,k,I,R,D,z,V;i(!0),o(null);try{const K=C.prospectAQualifier===!0,H=C.prospectSiret&&C.prospectSiret.trim()!==""||C.prospectSiren&&C.prospectSiren.trim()!=="",W=K||!H,B={createProspect:C.createProspect,createOpportunity:K?!1:C.createOpportunity,createRdv:K?!1:C.createRdv,createAction:K?!1:C.createAction,sendEmail:C.sendEmail,prospectData:C.createProspect?{nom:C.prospectNom,prenom:C.prospectPrenom||void 0,fonction:C.prospectFonction||void 0,entreprise:C.prospectEntreprise||" qualifier",siret:C.prospectSiret||C.prospectSiren||void 0,email:C.prospectEmail||void 0,telephone:C.prospectTelephone||void 0,adresse1:C.prospectAdresse1||void 0,adresse2:C.prospectAdresse2||void 0,codePostal:C.prospectCodePostal||void 0,ville:C.prospectVille||void 0,pays:C.prospectPays||"France",entity:C.prospectEntity||void 0,secteur:C.prospectSecteur||void 0,notes:C.prospectNotes||void 0,statut:"actif",qualificationNeeded:W?"true":"false",source:"scan_carte_visite",competitorSituation:C.competitorConcurrentId&&C.competitorContractEndDate?{concurrentId:C.competitorConcurrentId,contractEndDate:C.competitorContractEndDate,monthlyAmount:C.competitorMonthlyAmount,notes:C.competitorNotes,solutionsInstalled:C.competitorSolutionsInstalled,subscriptionType:C.competitorSubscriptionType,numberOfSites:C.competitorNumberOfSites,avgContractDurationMonths:C.competitorAvgContractDurationMonths,satisfactionLevel:C.competitorSatisfactionLevel,satisfactionNotes:C.competitorSatisfactionNotes}:void 0}:null,opportunityData:C.createOpportunity?{nom:C.opportunityNom,montant:C.opportunityMontant,etape:C.opportunityEtape,probabilite:C.opportunityProbabilite}:null,rdvData:C.createRdv?{titre:C.rdvTitre,date:new Date(C.rdvDate).toISOString(),duree:C.rdvDuree,lieu:C.rdvLieu,type:C.rdvType,objectif:C.rdvObjectif||void 0,participants:C.rdvParticipants?C.rdvParticipants.split(",").map(G=>G.trim()):void 0}:null,actionData:C.createAction&&C.actionDateEcheance?{titre:C.actionTitre,type:C.actionType,priorite:C.actionPriorite,date_echeance:new Date(C.actionDateEcheance).toISOString(),description:C.actionDescription||void 0,statut:"a_faire"}:null};console.log("[WORKFLOW] Payload:",B);const $=await rt("POST","/api/workflow/create-from-card",B);o($),(S=$.created)!=null&&S.prospect&&(et.invalidateQueries({queryKey:["/api/crm/prospects"]}),et.invalidateQueries({queryKey:["/api/crm/prospects/a-qualifier"]})),(k=$.created)!=null&&k.opportunity&&et.invalidateQueries({queryKey:["/api/crm/opportunities"]}),(I=$.created)!=null&&I.rdv&&et.invalidateQueries({queryKey:["/api/crm/rdvs"]}),(R=$.created)!=null&&R.action&&et.invalidateQueries({queryKey:["/api/crm/actions"]}),$.success&&((D=$.created)!=null&&D.prospect)?W?(d({title:" Prospect cr !",description:"Ce prospect ncessite une qualification. Rendez-vous sur 'Prospects  qualifier' pour complter.",duration:6e3}),setTimeout(()=>{f("/crm/prospects-a-qualifier")},1500)):(d({title:" Workflow cr avec succs !",description:`${Object.values($.created).filter(Boolean).length} lment(s) cr(s)`}),t&&t()):$.success&&!((z=$.created)!=null&&z.prospect)?d({title:" Workflow partiellement cr",description:"Le prospect n'a pas pu tre cr",variant:"destructive"}):d({title:" Erreur de cration",description:(V=$.errors)!=null&&V.length?`${$.errors.length} erreur(s) rencontre(s)`:"Une erreur est survenue",variant:"destructive"})}catch(K){console.error("[WORKFLOW] Erreur:",K),d({title:" Erreur",description:K.message||"Une erreur est survenue",variant:"destructive"})}finally{i(!1)}},y=x.watch("createProspect"),A=x.watch("createOpportunity"),P=x.watch("createRdv"),E=x.watch("createAction");return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(fn,{className:"h-5 w-5"}),"Crer un Workflow Complet"]}),r.jsx(jt,{children:"Crez simultanment un prospect, une opportunit, un RDV et une action de suivi"}),l&&r.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:" Carte de visite analyse"}),r.jsx("img",{src:l,alt:"Carte de visite",className:"max-w-xs rounded-md border","data-testid":"img-business-card-preview"})]})]}),r.jsx(Z,{children:r.jsx(Fu,{...x,children:r.jsxs("form",{onSubmit:x.handleSubmit(N),className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-semibold",children:"lments  crer"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(we,{control:x.control,name:"createProspect",render:({field:C})=>r.jsxs(_e,{className:"flex items-center space-x-2 space-y-0",children:[r.jsx(Se,{children:r.jsx(Zr,{"data-testid":"checkbox-create-prospect",checked:C.value,onCheckedChange:C.onChange})}),r.jsx(Ne,{className:"text-sm font-normal",children:"Crer le prospect"})]})}),r.jsx(we,{control:x.control,name:"createOpportunity",render:({field:C})=>r.jsxs(_e,{className:"flex items-center space-x-2 space-y-0",children:[r.jsx(Se,{children:r.jsx(Zr,{"data-testid":"checkbox-create-opportunity",checked:C.value,onCheckedChange:C.onChange})}),r.jsx(Ne,{className:"text-sm font-normal",children:"Crer l'opportunit"})]})}),r.jsx(we,{control:x.control,name:"createRdv",render:({field:C})=>r.jsxs(_e,{className:"flex items-center space-x-2 space-y-0",children:[r.jsx(Se,{children:r.jsx(Zr,{"data-testid":"checkbox-create-rdv",checked:C.value,onCheckedChange:C.onChange})}),r.jsx(Ne,{className:"text-sm font-normal",children:"Crer le RDV"})]})}),r.jsx(we,{control:x.control,name:"createAction",render:({field:C})=>r.jsxs(_e,{className:"flex items-center space-x-2 space-y-0",children:[r.jsx(Se,{children:r.jsx(Zr,{"data-testid":"checkbox-create-action",checked:C.value,onCheckedChange:C.onChange})}),r.jsx(Ne,{className:"text-sm font-normal",children:"Crer l'action de suivi"})]})}),r.jsx(we,{control:x.control,name:"sendEmail",render:({field:C})=>r.jsxs(_e,{className:"flex items-center space-x-2 space-y-0",children:[r.jsx(Se,{children:r.jsx(Zr,{"data-testid":"checkbox-send-email",checked:C.value,onCheckedChange:C.onChange})}),r.jsxs(Ne,{className:"text-sm font-normal flex items-center gap-1",children:[r.jsx(da,{className:"h-3 w-3"}),"Envoyer l'email"]})]})})]}),r.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-md",children:r.jsx(we,{control:x.control,name:"prospectAQualifier",render:({field:C})=>r.jsxs(_e,{className:"flex items-start space-x-3 space-y-0",children:[r.jsx(Se,{children:r.jsx(Zr,{"data-testid":"checkbox-prospect-a-qualifier",checked:C.value,onCheckedChange:S=>{C.onChange(S),S?(x.setValue("createOpportunity",!1),x.setValue("createRdv",!1),x.setValue("createAction",!1)):(x.setValue("createOpportunity",!0),x.setValue("createRdv",!0),x.setValue("createAction",!0))}})}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(Ne,{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:" Prospect  qualifier"}),r.jsx("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:'Si coch : cration simplifie sans workflows. Le prospect ira directement dans le module "Prospects  qualifier" pour complter les informations au bureau.'}),r.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 font-medium",children:"Par dfaut (dcoch) : workflow RDV complet avec opportunit, RDV et actions."})]})]})})})]}),y&&r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs(se,{className:"text-base flex items-center gap-2",children:[r.jsx(Ri,{className:"h-4 w-4"}),"Prospect"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(we,{control:x.control,name:"prospectNom",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Nom *"}),r.jsx(Se,{children:r.jsx(ge,{...C,"data-testid":"input-prospect-nom"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"prospectPrenom",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Prnom"}),r.jsx(Se,{children:r.jsx(ge,{...C,"data-testid":"input-prospect-prenom"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"prospectFonction",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Fonction"}),r.jsx(Se,{children:r.jsx(ge,{...C,placeholder:"Ex: Directeur, Responsable Achats","data-testid":"input-prospect-fonction"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"prospectEntreprise",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Entreprise"}),r.jsx(Se,{children:r.jsx(ge,{...C,"data-testid":"input-prospect-entreprise"})}),r.jsx(ke,{})]})}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(h3e,{siretValue:x.watch("prospectSiret")||"",sirenValue:x.watch("prospectSiren")||"",onSiretChange:C=>x.setValue("prospectSiret",C),onSirenChange:C=>x.setValue("prospectSiren",C),onCompanyEnriched:w}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:" Enrichissement automatique CASCADE (INSEEPappers) - pr-remplit adresse, ville, secteur"})]}),r.jsx(we,{control:x.control,name:"prospectSecteur",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Secteur d'activit"}),r.jsxs(gt,{onValueChange:C.onChange,value:C.value,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-prospect-secteur",children:r.jsx(xt,{placeholder:"Slectionner un secteur"})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"Restauration",children:"Restauration"}),r.jsx(Y,{value:"Commerce",children:"Commerce"}),r.jsx(Y,{value:"Services",children:"Services"}),r.jsx(Y,{value:"Industrie",children:"Industrie"}),r.jsx(Y,{value:"BTP",children:"BTP"}),r.jsx(Y,{value:"Sant",children:"Sant"}),r.jsx(Y,{value:"Transport",children:"Transport"}),r.jsx(Y,{value:"Immobilier",children:"Immobilier"}),r.jsx(Y,{value:"Htellerie",children:"Htellerie"}),r.jsx(Y,{value:"Agriculture",children:"Agriculture"}),r.jsx(Y,{value:"Autre",children:"Autre"})]})]}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"prospectEmail",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Email"}),r.jsx(Se,{children:r.jsx(ge,{type:"email",...C,"data-testid":"input-prospect-email"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"prospectTelephone",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Tlphone"}),r.jsx(Se,{children:r.jsx(ge,{...C,"data-testid":"input-prospect-telephone"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"prospectAdresse1",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Adresse 1"}),r.jsx(Se,{children:r.jsx(ge,{...C,placeholder:"Numro et nom de rue","data-testid":"input-prospect-adresse1"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"prospectAdresse2",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Adresse 2"}),r.jsx(Se,{children:r.jsx(ge,{...C,placeholder:"Complment (btiment, tage...)","data-testid":"input-prospect-adresse2"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"prospectCodePostal",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Code Postal"}),r.jsx(Se,{children:r.jsx(ge,{...C,placeholder:"75008","data-testid":"input-prospect-code-postal"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"prospectVille",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Ville"}),r.jsx(Se,{children:r.jsx(ge,{...C,placeholder:"Paris","data-testid":"input-prospect-ville"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"prospectPays",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Pays"}),r.jsxs(gt,{onValueChange:C.onChange,defaultValue:C.value,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-prospect-pays",children:r.jsx(xt,{placeholder:"Slectionner un pays"})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"France",children:"France"}),r.jsx(Y,{value:"Luxembourg",children:"Luxembourg"})]})]}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"prospectEntity",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Entit / Pays CRM"}),r.jsxs(gt,{onValueChange:C.onChange,value:C.value,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-prospect-entity",children:r.jsx(xt,{placeholder:"Dtection auto..."})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"france",children:" France"}),r.jsx(Y,{value:"luxembourg",children:" Luxembourg"}),r.jsx(Y,{value:"belgique",children:" Belgique"})]})]}),r.jsx(rr,{className:"text-xs",children:"Dtect automatiquement depuis le code postal. Modifiable si incorrect."}),r.jsx(ke,{})]})})]}),r.jsx(we,{control:x.control,name:"prospectNotes",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Notes"}),r.jsx(Se,{children:r.jsx(Dn,{...C,"data-testid":"textarea-prospect-notes",rows:3})}),r.jsx(ke,{})]})}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(sz,{className:"h-4 w-4 text-orange-600"}),r.jsx("h3",{className:"text-sm font-semibold",children:"chance Concurrent (Optionnel)"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:" Capture l'chance de contrat concurrent pour programmation automatique reconqute J-240"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(we,{control:x.control,name:"competitorConcurrentId",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Concurrent actuel"}),r.jsxs(gt,{onValueChange:C.onChange,value:C.value,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-competitor-concurrent",children:r.jsx(xt,{placeholder:"Slectionner..."})})}),r.jsx(pt,{children:h.map(S=>r.jsx(Y,{value:S.id,children:S.name},S.id))})]}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"competitorContractEndDate",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Date chance contrat"}),r.jsx(Se,{children:r.jsx(ge,{type:"date",...C,"data-testid":"input-competitor-end-date"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"competitorMonthlyAmount",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Montant mensuel ()"}),r.jsx(Se,{children:r.jsx(ge,{type:"number",placeholder:"Ex: 500",...C,value:C.value??"",onChange:S=>{const k=S.target.value;C.onChange(k===""?void 0:parseFloat(k))},"data-testid":"input-competitor-monthly-amount"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"competitorSubscriptionType",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Type d'abonnement"}),r.jsxs(gt,{onValueChange:C.onChange,value:C.value,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-competitor-subscription-type",children:r.jsx(xt,{placeholder:"Slectionner..."})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"mensuel",children:"Mensuel"}),r.jsx(Y,{value:"trimestriel",children:"Trimestriel"}),r.jsx(Y,{value:"annuel",children:"Annuel"}),r.jsx(Y,{value:"pluriannuel",children:"Pluriannuel"})]})]}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"competitorNumberOfSites",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Nombre de sites"}),r.jsx(Se,{children:r.jsx(ge,{type:"number",min:"1",placeholder:"Ex: 3",...C,value:C.value??"",onChange:S=>{const k=S.target.value;C.onChange(k===""?void 0:parseInt(k))},"data-testid":"input-competitor-number-of-sites"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"competitorAvgContractDurationMonths",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Dure moy. contrat (mois)"}),r.jsx(Se,{children:r.jsx(ge,{type:"number",min:"1",placeholder:"Ex: 36",...C,value:C.value??"",onChange:S=>{const k=S.target.value;C.onChange(k===""?void 0:parseInt(k))},"data-testid":"input-competitor-avg-contract-duration"})}),r.jsx(ke,{})]})})]}),r.jsx(we,{control:x.control,name:"competitorSolutionsInstalled",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Solutions installes (multi-slection)"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Gardiennage","Tlsurveillance","Contrle d'accs","Vidosurveillance","Alarme","Autre"].map(S=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zr,{id:`solution-wf-${S}`,checked:(C.value||[]).includes(S),onCheckedChange:k=>{const I=C.value||[];k?C.onChange([...I,S]):C.onChange(I.filter(R=>R!==S))},"data-testid":`checkbox-solution-wf-${S.toLowerCase().replace(/\s+/g,"-").replace(/'/g,"")}`}),r.jsx(Label,{htmlFor:`solution-wf-${S}`,className:"text-sm cursor-pointer",children:S})]},S))}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"competitorSatisfactionLevel",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Niveau de satisfaction"}),r.jsxs(gt,{onValueChange:C.onChange,value:C.value,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-competitor-satisfaction-level",children:r.jsx(xt,{placeholder:"Slectionner..."})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"1",children:" Trs insatisfait"}),r.jsx(Y,{value:"2",children:" Insatisfait"}),r.jsx(Y,{value:"3",children:" Neutre"}),r.jsx(Y,{value:"4",children:" Satisfait"}),r.jsx(Y,{value:"5",children:" Trs satisfait"})]})]}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"competitorSatisfactionNotes",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Notes satisfaction"}),r.jsx(Se,{children:r.jsx(Dn,{...C,rows:2,placeholder:"Points de douleur, insatisfactions, attentes...","data-testid":"textarea-competitor-satisfaction-notes"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"competitorNotes",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Notes gnrales"}),r.jsx(Se,{children:r.jsx(Dn,{...C,rows:2,placeholder:"Informations complmentaires...","data-testid":"textarea-competitor-notes"})}),r.jsx(ke,{})]})})]})]})]})]}),A&&r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs(se,{className:"text-base flex items-center gap-2",children:[r.jsx(Ir,{className:"h-4 w-4"}),"Opportunit"]})}),r.jsx(Z,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(we,{control:x.control,name:"opportunityNom",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Nom *"}),r.jsx(Se,{children:r.jsx(ge,{...C,"data-testid":"input-opportunity-nom"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"opportunityMontant",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Montant () *"}),r.jsx(Se,{children:r.jsx(ge,{type:"number",...C,onChange:S=>C.onChange(parseFloat(S.target.value)),"data-testid":"input-opportunity-montant"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"opportunityEtape",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"tape *"}),r.jsxs(gt,{onValueChange:C.onChange,defaultValue:C.value,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-opportunity-etape",children:r.jsx(xt,{})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"nouveau",children:"Nouveau"}),r.jsx(Y,{value:"proposition",children:"Proposition"}),r.jsx(Y,{value:"negociation",children:"Ngociation"}),r.jsx(Y,{value:"gagne",children:"Gagn"}),r.jsx(Y,{value:"perdu",children:"Perdu"})]})]}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"opportunityProbabilite",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Probabilit (%) *"}),r.jsx(Se,{children:r.jsx(ge,{type:"number",min:0,max:100,...C,onChange:S=>C.onChange(parseFloat(S.target.value)),"data-testid":"input-opportunity-probabilite"})}),r.jsx(ke,{})]})})]})})]}),P&&r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs(se,{className:"text-base flex items-center gap-2",children:[r.jsx(xn,{className:"h-4 w-4"}),"Rendez-vous"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(we,{control:x.control,name:"rdvTitre",render:({field:C})=>r.jsxs(_e,{className:"col-span-2",children:[r.jsx(Ne,{children:"Titre *"}),r.jsx(Se,{children:r.jsx(ge,{...C,"data-testid":"input-rdv-titre"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"rdvDate",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Date et heure *"}),r.jsx(Se,{children:r.jsx(ge,{type:"datetime-local",...C,"data-testid":"input-rdv-date"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"rdvDuree",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Dure"}),r.jsxs(gt,{onValueChange:C.onChange,defaultValue:C.value,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-rdv-duree",children:r.jsx(xt,{})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"30min",children:"30 minutes"}),r.jsx(Y,{value:"1h",children:"1 heure"}),r.jsx(Y,{value:"1h30",children:"1h30"}),r.jsx(Y,{value:"2h",children:"2 heures"})]})]}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"rdvLieu",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Lieu *"}),r.jsx(Se,{children:r.jsx(ge,{...C,"data-testid":"input-rdv-lieu",placeholder:"Adresse ou Visio"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"rdvType",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Type"}),r.jsx(Se,{children:r.jsx(ge,{...C,"data-testid":"input-rdv-type"})}),r.jsx(ke,{})]})})]}),r.jsx(we,{control:x.control,name:"rdvObjectif",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Objectif du RDV"}),r.jsx(Se,{children:r.jsx(Dn,{...C,"data-testid":"textarea-rdv-objectif",rows:3})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"rdvParticipants",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Participants (spars par des virgules)"}),r.jsx(Se,{children:r.jsx(ge,{...C,"data-testid":"input-rdv-participants",placeholder:"nom1@email.com, nom2@email.com"})}),r.jsx(rr,{className:"text-xs",children:"Entrez les emails ou noms des participants, spars par des virgules"}),r.jsx(ke,{})]})})]})]}),E&&r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs(se,{className:"text-base flex items-center gap-2",children:[r.jsx(jn,{className:"h-4 w-4"}),"Action de suivi"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(we,{control:x.control,name:"actionTitre",render:({field:C})=>r.jsxs(_e,{className:"col-span-2",children:[r.jsx(Ne,{children:"Titre *"}),r.jsx(Se,{children:r.jsx(ge,{...C,"data-testid":"input-action-titre"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"actionType",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Type *"}),r.jsxs(gt,{onValueChange:C.onChange,defaultValue:C.value,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-action-type",children:r.jsx(xt,{})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"appel",children:"Appel"}),r.jsx(Y,{value:"email",children:"Email"}),r.jsx(Y,{value:"reunion",children:"Runion"}),r.jsx(Y,{value:"autre",children:"Autre"})]})]}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"actionPriorite",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Priorit *"}),r.jsxs(gt,{onValueChange:C.onChange,defaultValue:C.value,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-action-priorite",children:r.jsx(xt,{})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"basse",children:"Basse"}),r.jsx(Y,{value:"moyenne",children:"Moyenne"}),r.jsx(Y,{value:"haute",children:"Haute"})]})]}),r.jsx(ke,{})]})}),r.jsx(we,{control:x.control,name:"actionDateEcheance",render:({field:C})=>r.jsxs(_e,{className:"col-span-2",children:[r.jsx(Ne,{children:"Date d'chance *"}),r.jsx(Se,{children:r.jsx(ge,{type:"datetime-local",...C,"data-testid":"input-action-date"})}),r.jsx(ke,{})]})})]}),r.jsx(we,{control:x.control,name:"actionDescription",render:({field:C})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Description"}),r.jsx(Se,{children:r.jsx(Dn,{...C,"data-testid":"textarea-action-description",rows:3})}),r.jsx(ke,{})]})})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[n&&r.jsx(re,{type:"button",variant:"outline",onClick:n,disabled:s,"data-testid":"button-cancel-workflow",children:"Annuler"}),r.jsx(re,{type:"submit",disabled:s,"data-testid":"button-create-workflow",className:"min-w-[200px]",children:s?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),"Cration en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Yt,{className:"mr-2 h-4 w-4"}),"Tout crer"]})})]})]})})})]}),a&&r.jsxs(U,{children:[r.jsx(ne,{children:r.jsx(se,{className:a.success?"text-green-600":"text-orange-600",children:a.success?" Workflow cr avec succs !":" Workflow partiellement cr"})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:"lments crs :"}),r.jsxs("div",{className:"space-y-2",children:[a.created.prospect&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Yt,{className:"h-4 w-4 text-green-600"}),r.jsxs("span",{children:["Prospect : ",a.created.prospect.nom]})]}),a.created.opportunity&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Yt,{className:"h-4 w-4 text-green-600"}),r.jsxs("span",{children:["Opportunit : ",a.created.opportunity.nom]})]}),a.created.rdv&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Yt,{className:"h-4 w-4 text-green-600"}),r.jsxs("span",{children:["RDV : ",a.created.rdv.titre]})]}),a.created.action&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Yt,{className:"h-4 w-4 text-green-600"}),r.jsxs("span",{children:["Action : ",a.created.action.titre]})]})]})]}),a.documents&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Documents :"}),r.jsxs("div",{className:"space-y-2",children:[a.documents.pdf_generated&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Yt,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{children:"PDF gnr"})]}),a.documents.ical_generated&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Yt,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{children:"Calendrier (.ics) gnr"})]}),a.documents.email_sent&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Yt,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{children:"Email envoy"})]})]})]}),a.errors&&a.errors.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2 text-orange-600",children:"Erreurs :"}),r.jsx("div",{className:"space-y-1",children:a.errors.map((C,S)=>r.jsxs("div",{className:"flex items-start gap-2 text-sm text-orange-600",children:[r.jsx(Br,{className:"h-4 w-4 mt-0.5"}),r.jsx("span",{children:C})]},S))})]})]})]})]})}function g3e(){const[,e]=es(),{toast:t}=At(),[n,s]=_.useState(!1),[i,a]=_.useState(!1),[o,l]=_.useState(null),c=new URLSearchParams(window.location.search),d={nom:c.get("nom")||void 0,prenom:c.get("prenom")||void 0,entreprise:c.get("entreprise")||void 0,email:c.get("email")||void 0,telephone:c.get("telephone")||void 0,poste:c.get("poste")||void 0,secteur:c.get("secteur")||void 0,adresse1:c.get("adresse1")||void 0,adresse2:c.get("adresse2")||void 0,codePostal:c.get("codePostal")||void 0,ville:c.get("ville")||void 0,pays:c.get("pays")||void 0},f=o||d,h=async p=>{try{s(!1),a(!0);const v=Array.isArray(p)?p[0]:p,j=new FileReader;j.onloadend=async()=>{try{const g=j.result;t({title:"Analyse en cours...",description:"Extraction des informations de la carte de visite"});const x=await rt("POST","/api/analyze-business-card",{imageData:g});if(x.success&&x.data)l(x.data),t({title:"Carte analyse avec succs",description:"Les informations ont t extraites et pr-remplies"});else throw new Error("Impossible d'extraire les donnes de la carte")}catch(g){console.error("[WorkflowPage] Analysis error:",g),t({title:"Erreur d'analyse",description:g instanceof Error?g.message:"Impossible d'analyser la carte. Vrifiez que la photo est nette.",variant:"destructive"})}finally{a(!1)}},j.onerror=()=>{t({title:"Erreur de lecture",description:"Impossible de lire l'image capture",variant:"destructive"}),a(!1)},j.readAsDataURL(v)}catch(v){console.error("[WorkflowPage] Camera capture error:",v),t({title:"Erreur",description:"Une erreur s'est produite lors de la capture",variant:"destructive"}),a(!1)}};return r.jsxs("div",{className:"container mx-auto p-6 max-w-5xl",children:[r.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(re,{variant:"ghost",onClick:()=>e("/crm/dashboard"),"data-testid":"button-back-dashboard",children:[r.jsx(ua,{className:"mr-2 h-4 w-4"}),"Retour au Dashboard"]}),r.jsxs(re,{onClick:()=>s(!0),disabled:i,variant:"outline","data-testid":"button-scan-business-card",children:[r.jsx(ay,{className:"mr-2 h-4 w-4"}),i?"Analyse en cours...":"Scanner carte de visite"]})]}),r.jsx(mr,{showHomeButton:!0})]}),n&&r.jsx(JB,{mode:"photo",onCapture:h,onClose:()=>s(!1),allowMultiplePhotos:!1}),r.jsx(p3e,{cardData:f,onSuccess:()=>{setTimeout(()=>{e("/crm/dashboard")},2e3)},onCancel:()=>e("/crm/dashboard")})]})}const x3e=Au("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Eo=_.forwardRef(({className:e,variant:t,...n},s)=>r.jsx("div",{ref:s,role:"alert",className:Oe(x3e({variant:t}),e),...n}));Eo.displayName="Alert";const HA=_.forwardRef(({className:e,...t},n)=>r.jsx("h5",{ref:n,className:Oe("mb-1 font-medium leading-none tracking-tight",e),...t}));HA.displayName="AlertTitle";const To=_.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Oe("text-sm [&_p]:leading-relaxed",e),...t}));To.displayName="AlertDescription";var MG={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,s)=>{e.exports=s()})(fd,function n(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},i,a=!s.document&&!!s.postMessage,o=s.IS_PAPA_WORKER||!1,l={},c=0,d={};function f(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(k){var I=P(k);I.chunkSize=parseInt(I.chunkSize),k.step||k.chunk||(I.chunkSize=null),this._handle=new g(I),(this._handle.streamer=this)._config=I}).call(this,S),this.parseChunk=function(k,I){var R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<R){let z=this._config.newline;z||(D=this._config.quoteChar||'"',z=this._handle.guessLineEndings(k,D)),k=[...k.split(z).slice(R)].join(z)}this.isFirstChunk&&C(this._config.beforeFirstChunk)&&(D=this._config.beforeFirstChunk(k))!==void 0&&(k=D),this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+k,D=(this._partialLine="",this._handle.parse(R,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(k=D.meta.cursor,R=(this._finished||(this._partialLine=R.substring(k-this._baseIndex),this._baseIndex=k),D&&D.data&&(this._rowCount+=D.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)s.postMessage({results:D,workerId:d.WORKER_ID,finished:R});else if(C(this._config.chunk)&&!I){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=D=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!R||!C(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(k){C(this._config.error)?this._config.error(k):o&&this._config.error&&s.postMessage({workerId:d.WORKER_ID,error:k,finished:!1})}}function h(S){var k;(S=S||{}).chunkSize||(S.chunkSize=d.RemoteChunkSize),f.call(this,S),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(I){this._input=I,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(k=new XMLHttpRequest,this._config.withCredentials&&(k.withCredentials=this._config.withCredentials),a||(k.onload=E(this._chunkLoaded,this),k.onerror=E(this._chunkError,this)),k.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var I,R=this._config.downloadRequestHeaders;for(I in R)k.setRequestHeader(I,R[I])}var D;this._config.chunkSize&&(D=this._start+this._config.chunkSize-1,k.setRequestHeader("Range","bytes="+this._start+"-"+D));try{k.send(this._config.downloadRequestBody)}catch(z){this._chunkError(z.message)}a&&k.status===0&&this._chunkError()}},this._chunkLoaded=function(){k.readyState===4&&(k.status<200||400<=k.status?this._chunkError():(this._start+=this._config.chunkSize||k.responseText.length,this._finished=!this._config.chunkSize||this._start>=(I=>(I=I.getResponseHeader("Content-Range"))!==null?parseInt(I.substring(I.lastIndexOf("/")+1)):-1)(k),this.parseChunk(k.responseText)))},this._chunkError=function(I){I=k.statusText||I,this._sendError(new Error(I))}}function p(S){(S=S||{}).chunkSize||(S.chunkSize=d.LocalChunkSize),f.call(this,S);var k,I,R=typeof FileReader<"u";this.stream=function(D){this._input=D,I=D.slice||D.webkitSlice||D.mozSlice,R?((k=new FileReader).onload=E(this._chunkLoaded,this),k.onerror=E(this._chunkError,this)):k=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var D=this._input,z=(this._config.chunkSize&&(z=Math.min(this._start+this._config.chunkSize,this._input.size),D=I.call(D,this._start,z)),k.readAsText(D,this._config.encoding));R||this._chunkLoaded({target:{result:z}})},this._chunkLoaded=function(D){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(D.target.result)},this._chunkError=function(){this._sendError(k.error)}}function v(S){var k;f.call(this,S=S||{}),this.stream=function(I){return k=I,this._nextChunk()},this._nextChunk=function(){var I,R;if(!this._finished)return I=this._config.chunkSize,k=I?(R=k.substring(0,I),k.substring(I)):(R=k,""),this._finished=!k,this.parseChunk(R)}}function j(S){f.call(this,S=S||{});var k=[],I=!0,R=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(D){this._input=D,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&k.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),k.length?this.parseChunk(k.shift()):I=!0},this._streamData=E(function(D){try{k.push(typeof D=="string"?D:D.toString(this._config.encoding)),I&&(I=!1,this._checkIsFinished(),this.parseChunk(k.shift()))}catch(z){this._streamError(z)}},this),this._streamError=E(function(D){this._streamCleanUp(),this._sendError(D)},this),this._streamEnd=E(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=E(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(S){var k,I,R,D,z=Math.pow(2,53),V=-z,K=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,H=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,W=this,B=0,$=0,G=!1,ee=!1,oe=[],fe={data:[],errors:[],meta:{}};function Ee($e){return S.skipEmptyLines==="greedy"?$e.join("").trim()==="":$e.length===1&&$e[0].length===0}function J(){if(fe&&R&&(ze("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),R=!1),S.skipEmptyLines&&(fe.data=fe.data.filter(function(ue){return!Ee(ue)})),Pe()){let ue=function(ct,Ge){C(S.transformHeader)&&(ct=S.transformHeader(ct,Ge)),oe.push(ct)};var je=ue;if(fe)if(Array.isArray(fe.data[0])){for(var $e=0;Pe()&&$e<fe.data.length;$e++)fe.data[$e].forEach(ue);fe.data.splice(0,1)}else fe.data.forEach(ue)}function me(ue,ct){for(var Ge=S.header?{}:[],ut=0;ut<ue.length;ut++){var Xe=ut,qe=ue[ut],qe=((lt,It)=>(hn=>(S.dynamicTypingFunction&&S.dynamicTyping[hn]===void 0&&(S.dynamicTyping[hn]=S.dynamicTypingFunction(hn)),(S.dynamicTyping[hn]||S.dynamicTyping)===!0))(lt)?It==="true"||It==="TRUE"||It!=="false"&&It!=="FALSE"&&((hn=>{if(K.test(hn)&&(hn=parseFloat(hn),V<hn&&hn<z))return 1})(It)?parseFloat(It):H.test(It)?new Date(It):It===""?null:It):It)(Xe=S.header?ut>=oe.length?"__parsed_extra":oe[ut]:Xe,qe=S.transform?S.transform(qe,Xe):qe);Xe==="__parsed_extra"?(Ge[Xe]=Ge[Xe]||[],Ge[Xe].push(qe)):Ge[Xe]=qe}return S.header&&(ut>oe.length?ze("FieldMismatch","TooManyFields","Too many fields: expected "+oe.length+" fields but parsed "+ut,$+ct):ut<oe.length&&ze("FieldMismatch","TooFewFields","Too few fields: expected "+oe.length+" fields but parsed "+ut,$+ct)),Ge}var Te;fe&&(S.header||S.dynamicTyping||S.transform)&&(Te=1,!fe.data.length||Array.isArray(fe.data[0])?(fe.data=fe.data.map(me),Te=fe.data.length):fe.data=me(fe.data,0),S.header&&fe.meta&&(fe.meta.fields=oe),$+=Te)}function Pe(){return S.header&&oe.length===0}function ze($e,me,Te,je){$e={type:$e,code:me,message:Te},je!==void 0&&($e.row=je),fe.errors.push($e)}C(S.step)&&(D=S.step,S.step=function($e){fe=$e,Pe()?J():(J(),fe.data.length!==0&&(B+=$e.data.length,S.preview&&B>S.preview?I.abort():(fe.data=fe.data[0],D(fe,W))))}),this.parse=function($e,me,Te){var je=S.quoteChar||'"',je=(S.newline||(S.newline=this.guessLineEndings($e,je)),R=!1,S.delimiter?C(S.delimiter)&&(S.delimiter=S.delimiter($e),fe.meta.delimiter=S.delimiter):((je=((ue,ct,Ge,ut,Xe)=>{var qe,lt,It,hn;Xe=Xe||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var Kn=0;Kn<Xe.length;Kn++){for(var Q,de=Xe[Kn],pe=0,He=0,De=0,Ie=(It=void 0,new w({comments:ut,delimiter:de,newline:ct,preview:10}).parse(ue)),Qe=0;Qe<Ie.data.length;Qe++)Ge&&Ee(Ie.data[Qe])?De++:(Q=Ie.data[Qe].length,He+=Q,It===void 0?It=Q:0<Q&&(pe+=Math.abs(Q-It),It=Q));0<Ie.data.length&&(He/=Ie.data.length-De),(lt===void 0||pe<=lt)&&(hn===void 0||hn<He)&&1.99<He&&(lt=pe,qe=de,hn=He)}return{successful:!!(S.delimiter=qe),bestDelimiter:qe}})($e,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess)).successful?S.delimiter=je.bestDelimiter:(R=!0,S.delimiter=d.DefaultDelimiter),fe.meta.delimiter=S.delimiter),P(S));return S.preview&&S.header&&je.preview++,k=$e,I=new w(je),fe=I.parse(k,me,Te),J(),G?{meta:{paused:!0}}:fe||{meta:{paused:!1}}},this.paused=function(){return G},this.pause=function(){G=!0,I.abort(),k=C(S.chunk)?"":k.substring(I.getCharIndex())},this.resume=function(){W.streamer._halted?(G=!1,W.streamer.parseChunk(k,!0)):setTimeout(W.resume,3)},this.aborted=function(){return ee},this.abort=function(){ee=!0,I.abort(),fe.meta.aborted=!0,C(S.complete)&&S.complete(fe),k=""},this.guessLineEndings=function(ue,je){ue=ue.substring(0,1048576);var je=new RegExp(x(je)+"([^]*?)"+x(je),"gm"),Te=(ue=ue.replace(je,"")).split("\r"),je=ue.split(`
`),ue=1<je.length&&je[0].length<Te[0].length;if(Te.length===1||ue)return`
`;for(var ct=0,Ge=0;Ge<Te.length;Ge++)Te[Ge][0]===`
`&&ct++;return ct>=Te.length/2?`\r
`:"\r"}}function x(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function w(S){var k=(S=S||{}).delimiter,I=S.newline,R=S.comments,D=S.step,z=S.preview,V=S.fastMode,K=null,H=!1,W=S.quoteChar==null?'"':S.quoteChar,B=W;if(S.escapeChar!==void 0&&(B=S.escapeChar),(typeof k!="string"||-1<d.BAD_DELIMITERS.indexOf(k))&&(k=","),R===k)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<d.BAD_DELIMITERS.indexOf(R))&&(R=!1),I!==`
`&&I!=="\r"&&I!==`\r
`&&(I=`
`);var $=0,G=!1;this.parse=function(ee,oe,fe){if(typeof ee!="string")throw new Error("Input must be a string");var Ee=ee.length,J=k.length,Pe=I.length,ze=R.length,$e=C(D),me=[],Te=[],je=[],ue=$=0;if(!ee)return pe();if(V||V!==!1&&ee.indexOf(W)===-1){for(var ct=ee.split(I),Ge=0;Ge<ct.length;Ge++){if(je=ct[Ge],$+=je.length,Ge!==ct.length-1)$+=I.length;else if(fe)return pe();if(!R||je.substring(0,ze)!==R){if($e){if(me=[],hn(je.split(k)),He(),G)return pe()}else hn(je.split(k));if(z&&z<=Ge)return me=me.slice(0,z),pe(!0)}}return pe()}for(var ut=ee.indexOf(k,$),Xe=ee.indexOf(I,$),qe=new RegExp(x(B)+x(W),"g"),lt=ee.indexOf(W,$);;)if(ee[$]===W)for(lt=$,$++;;){if((lt=ee.indexOf(W,lt+1))===-1)return fe||Te.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:me.length,index:$}),Q();if(lt===Ee-1)return Q(ee.substring($,lt).replace(qe,W));if(W===B&&ee[lt+1]===B)lt++;else if(W===B||lt===0||ee[lt-1]!==B){ut!==-1&&ut<lt+1&&(ut=ee.indexOf(k,lt+1));var It=Kn((Xe=Xe!==-1&&Xe<lt+1?ee.indexOf(I,lt+1):Xe)===-1?ut:Math.min(ut,Xe));if(ee.substr(lt+1+It,J)===k){je.push(ee.substring($,lt).replace(qe,W)),ee[$=lt+1+It+J]!==W&&(lt=ee.indexOf(W,$)),ut=ee.indexOf(k,$),Xe=ee.indexOf(I,$);break}if(It=Kn(Xe),ee.substring(lt+1+It,lt+1+It+Pe)===I){if(je.push(ee.substring($,lt).replace(qe,W)),de(lt+1+It+Pe),ut=ee.indexOf(k,$),lt=ee.indexOf(W,$),$e&&(He(),G))return pe();if(z&&me.length>=z)return pe(!0);break}Te.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:me.length,index:$}),lt++}}else if(R&&je.length===0&&ee.substring($,$+ze)===R){if(Xe===-1)return pe();$=Xe+Pe,Xe=ee.indexOf(I,$),ut=ee.indexOf(k,$)}else if(ut!==-1&&(ut<Xe||Xe===-1))je.push(ee.substring($,ut)),$=ut+J,ut=ee.indexOf(k,$);else{if(Xe===-1)break;if(je.push(ee.substring($,Xe)),de(Xe+Pe),$e&&(He(),G))return pe();if(z&&me.length>=z)return pe(!0)}return Q();function hn(De){me.push(De),ue=$}function Kn(De){var Ie=0;return Ie=De!==-1&&(De=ee.substring(lt+1,De))&&De.trim()===""?De.length:Ie}function Q(De){return fe||(De===void 0&&(De=ee.substring($)),je.push(De),$=Ee,hn(je),$e&&He()),pe()}function de(De){$=De,hn(je),je=[],Xe=ee.indexOf(I,$)}function pe(De){if(S.header&&!oe&&me.length&&!H){var Ie=me[0],Qe=Object.create(null),Kt=new Set(Ie);let Sn=!1;for(let Cn=0;Cn<Ie.length;Cn++){let Ts=Ie[Cn];if(Qe[Ts=C(S.transformHeader)?S.transformHeader(Ts,Cn):Ts]){let hi,ja=Qe[Ts];for(;hi=Ts+"_"+ja,ja++,Kt.has(hi););Kt.add(hi),Ie[Cn]=hi,Qe[Ts]++,Sn=!0,(K=K===null?{}:K)[hi]=Ts}else Qe[Ts]=1,Ie[Cn]=Ts;Kt.add(Ts)}Sn&&console.warn("Duplicate headers found and renamed."),H=!0}return{data:me,errors:Te,meta:{delimiter:k,linebreak:I,aborted:G,truncated:!!De,cursor:ue+(oe||0),renamedHeaders:K}}}function He(){D(pe()),me=[],Te=[]}},this.abort=function(){G=!0},this.getCharIndex=function(){return $}}function N(S){var k=S.data,I=l[k.workerId],R=!1;if(k.error)I.userError(k.error,k.file);else if(k.results&&k.results.data){var D={abort:function(){R=!0,y(k.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:A,resume:A};if(C(I.userStep)){for(var z=0;z<k.results.data.length&&(I.userStep({data:k.results.data[z],errors:k.results.errors,meta:k.results.meta},D),!R);z++);delete k.results}else C(I.userChunk)&&(I.userChunk(k.results,D,k.file),delete k.results)}k.finished&&!R&&y(k.workerId,k.results)}function y(S,k){var I=l[S];C(I.userComplete)&&I.userComplete(k),I.terminate(),delete l[S]}function A(){throw new Error("Not implemented.")}function P(S){if(typeof S!="object"||S===null)return S;var k,I=Array.isArray(S)?[]:{};for(k in S)I[k]=P(S[k]);return I}function E(S,k){return function(){S.apply(k,arguments)}}function C(S){return typeof S=="function"}return d.parse=function(S,k){var I=(k=k||{}).dynamicTyping||!1;if(C(I)&&(k.dynamicTypingFunction=I,I={}),k.dynamicTyping=I,k.transform=!!C(k.transform)&&k.transform,!k.worker||!d.WORKERS_SUPPORTED)return I=null,d.NODE_STREAM_INPUT,typeof S=="string"?(S=(R=>R.charCodeAt(0)!==65279?R:R.slice(1))(S),I=new(k.download?h:v)(k)):S.readable===!0&&C(S.read)&&C(S.on)?I=new j(k):(s.File&&S instanceof File||S instanceof Object)&&(I=new p(k)),I.stream(S);(I=(()=>{var R;return!!d.WORKERS_SUPPORTED&&(R=(()=>{var D=s.URL||s.webkitURL||null,z=n.toString();return d.BLOB_URL||(d.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",z,")();"],{type:"text/javascript"})))})(),(R=new s.Worker(R)).onmessage=N,R.id=c++,l[R.id]=R)})()).userStep=k.step,I.userChunk=k.chunk,I.userComplete=k.complete,I.userError=k.error,k.step=C(k.step),k.chunk=C(k.chunk),k.complete=C(k.complete),k.error=C(k.error),delete k.worker,I.postMessage({input:S,config:k,workerId:I.id})},d.unparse=function(S,k){var I=!1,R=!0,D=",",z=`\r
`,V='"',K=V+V,H=!1,W=null,B=!1,$=((()=>{if(typeof k=="object"){if(typeof k.delimiter!="string"||d.BAD_DELIMITERS.filter(function(oe){return k.delimiter.indexOf(oe)!==-1}).length||(D=k.delimiter),typeof k.quotes!="boolean"&&typeof k.quotes!="function"&&!Array.isArray(k.quotes)||(I=k.quotes),typeof k.skipEmptyLines!="boolean"&&typeof k.skipEmptyLines!="string"||(H=k.skipEmptyLines),typeof k.newline=="string"&&(z=k.newline),typeof k.quoteChar=="string"&&(V=k.quoteChar),typeof k.header=="boolean"&&(R=k.header),Array.isArray(k.columns)){if(k.columns.length===0)throw new Error("Option columns is empty");W=k.columns}k.escapeChar!==void 0&&(K=k.escapeChar+V),k.escapeFormulae instanceof RegExp?B=k.escapeFormulae:typeof k.escapeFormulae=="boolean"&&k.escapeFormulae&&(B=/^[=+\-@\t\r].*$/)}})(),new RegExp(x(V),"g"));if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return G(null,S,H);if(typeof S[0]=="object")return G(W||Object.keys(S[0]),S,H)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||W),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),G(S.fields||[],S.data||[],H);throw new Error("Unable to serialize unrecognized input");function G(oe,fe,Ee){var J="",Pe=(typeof oe=="string"&&(oe=JSON.parse(oe)),typeof fe=="string"&&(fe=JSON.parse(fe)),Array.isArray(oe)&&0<oe.length),ze=!Array.isArray(fe[0]);if(Pe&&R){for(var $e=0;$e<oe.length;$e++)0<$e&&(J+=D),J+=ee(oe[$e],$e);0<fe.length&&(J+=z)}for(var me=0;me<fe.length;me++){var Te=(Pe?oe:fe[me]).length,je=!1,ue=Pe?Object.keys(fe[me]).length===0:fe[me].length===0;if(Ee&&!Pe&&(je=Ee==="greedy"?fe[me].join("").trim()==="":fe[me].length===1&&fe[me][0].length===0),Ee==="greedy"&&Pe){for(var ct=[],Ge=0;Ge<Te;Ge++){var ut=ze?oe[Ge]:Ge;ct.push(fe[me][ut])}je=ct.join("").trim()===""}if(!je){for(var Xe=0;Xe<Te;Xe++){0<Xe&&!ue&&(J+=D);var qe=Pe&&ze?oe[Xe]:Xe;J+=ee(fe[me][qe],Xe)}me<fe.length-1&&(!Ee||0<Te&&!ue)&&(J+=z)}}return J}function ee(oe,fe){var Ee,J;return oe==null?"":oe.constructor===Date?JSON.stringify(oe).slice(1,25):(J=!1,B&&typeof oe=="string"&&B.test(oe)&&(oe="'"+oe,J=!0),Ee=oe.toString().replace($,K),(J=J||I===!0||typeof I=="function"&&I(oe,fe)||Array.isArray(I)&&I[fe]||((Pe,ze)=>{for(var $e=0;$e<ze.length;$e++)if(-1<Pe.indexOf(ze[$e]))return!0;return!1})(Ee,d.BAD_DELIMITERS)||-1<Ee.indexOf(D)||Ee.charAt(0)===" "||Ee.charAt(Ee.length-1)===" ")?V+Ee+V:Ee)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!a&&!!s.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=w,d.ParserHandle=g,d.NetworkStreamer=h,d.FileStreamer=p,d.StringStreamer=v,d.ReadableStreamStreamer=j,s.jQuery&&((i=s.jQuery).fn.parse=function(S){var k=S.config||{},I=[];return this.each(function(z){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var V=0;V<this.files.length;V++)I.push({file:this.files[V],inputElem:this,instanceConfig:i.extend({},k)})}),R(),this;function R(){if(I.length===0)C(S.complete)&&S.complete();else{var z,V,K,H,W=I[0];if(C(S.before)){var B=S.before(W.file,W.inputElem);if(typeof B=="object"){if(B.action==="abort")return z="AbortError",V=W.file,K=W.inputElem,H=B.reason,void(C(S.error)&&S.error({name:z},V,K,H));if(B.action==="skip")return void D();typeof B.config=="object"&&(W.instanceConfig=i.extend(W.instanceConfig,B.config))}else if(B==="skip")return void D()}var $=W.instanceConfig.complete;W.instanceConfig.complete=function(G){C($)&&$(G,W.file,W.inputElem),D()},d.parse(W.file,W.instanceConfig)}}function D(){I.splice(0,1),R()}}),o&&(s.onmessage=function(S){S=S.data,d.WORKER_ID===void 0&&S&&(d.WORKER_ID=S.workerId),typeof S.input=="string"?s.postMessage({workerId:d.WORKER_ID,results:d.parse(S.input,S.config),finished:!0}):(s.File&&S.input instanceof File||S.input instanceof Object)&&(S=d.parse(S.input,S.config))&&s.postMessage({workerId:d.WORKER_ID,results:S,finished:!0})}),(h.prototype=Object.create(f.prototype)).constructor=h,(p.prototype=Object.create(f.prototype)).constructor=p,(v.prototype=Object.create(v.prototype)).constructor=v,(j.prototype=Object.create(f.prototype)).constructor=j,d})})(MG);var v3e=MG.exports;const IG=on(v3e),y3e=[{value:"entreprise",label:"Entreprise"},{value:"siren",label:"SIREN"},{value:"siret",label:"SIRET"},{value:"nom",label:"Nom contact"},{value:"prenom",label:"Prnom contact"},{value:"email",label:"Email"},{value:"telephone",label:"Tlphone"},{value:"mobile",label:"Mobile"},{value:"fonction",label:"Fonction"},{value:"adresse",label:"Adresse"},{value:"codePostal",label:"Code postal"},{value:"ville",label:"Ville"},{value:"pays",label:"Pays"},{value:"secteurActivite",label:"Secteur"},{value:"effectif",label:"Effectif"},{value:"chiffreAffaires",label:"CA"},{value:"notes",label:"Notes"}];function b3e(){var y;const{toast:e}=At(),t=_.useRef(null),[n,s]=_.useState(null),[i,a]=_.useState(null),[o,l]=_.useState({}),[c,d]=_.useState({autoEnrich:!0,deduplicate:!0,skipDuplicates:!0}),[f,h]=_.useState(null),[p,v]=_.useState("upload"),{data:j}=Ke({queryKey:["/api/batch-import/history"],refetchInterval:f?3e3:!1}),{data:g}=Ke({queryKey:["/api/batch-import",f,"status"],enabled:!!f,refetchInterval:2e3}),x=dt({mutationFn:async({file:A,mapping:P,options:E})=>{const C=new FormData;C.append("file",A),C.append("mapping",JSON.stringify(P)),C.append("options",JSON.stringify(E));const S=await fetch("/api/batch-import/upload",{method:"POST",body:C,credentials:"include"});if(!S.ok){const k=await S.json();throw new Error(k.error||"Erreur upload")}return S.json()},onSuccess:A=>{e({title:"Import dmarr",description:A.message}),h(A.batchId),v("monitoring"),et.invalidateQueries({queryKey:["/api/batch-import/history"]})},onError:A=>{e({title:"Erreur import",description:A.message,variant:"destructive"})}}),w=A=>{var E;const P=(E=A.target.files)==null?void 0:E[0];if(P){if(P.size>5*1024*1024){e({title:"Fichier trop volumineux",description:"Maximum 5 MB",variant:"destructive"});return}s(P),IG.parse(P,{header:!0,preview:10,skipEmptyLines:!0,complete:C=>{const S=C.meta.fields||[],k=C.data;a({headers:S,rows:k,totalRows:k.length});const I={};S.forEach(R=>{const D=R.toLowerCase().trim();D.includes("entreprise")||D.includes("societe")?I[R]="entreprise":D.includes("siren")&&!D.includes("siret")?I[R]="siren":D.includes("siret")?I[R]="siret":D.includes("email")||D.includes("mail")?I[R]="email":D.includes("tel")||D.includes("phone")?I[R]="telephone":D.includes("nom")&&!D.includes("prenom")?I[R]="nom":D.includes("prenom")?I[R]="prenom":D.includes("ville")&&(I[R]="ville")}),l(I),v("mapping")},error:C=>{e({title:"Erreur parsing CSV",description:C.message,variant:"destructive"})}})}},N=()=>{if(!n){e({title:"Aucun fichier",description:"Veuillez slectionner un fichier CSV",variant:"destructive"});return}if(Object.keys(o).length===0){e({title:"Mapping requis",description:"Veuillez mapper au moins une colonne",variant:"destructive"});return}x.mutate({file:n,mapping:o,options:c})};return _.useEffect(()=>{((g==null?void 0:g.status)==="completed"||(g==null?void 0:g.status)==="failed")&&(et.invalidateQueries({queryKey:["/api/batch-import/history"]}),g.status==="completed"&&e({title:"Import termin",description:`${g.successCount} prospects crs`}))},[g==null?void 0:g.status]),r.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold","data-testid":"text-batch-import-title",children:"Import Batch CSV"}),r.jsx("p",{className:"text-muted-foreground",children:"Importez jusqu' 1000 prospects en une fois avec enrichissement automatique"})]}),r.jsx(re,{variant:"outline",onClick:()=>{s(null),a(null),l({}),h(null),v("upload"),t.current&&(t.current.value="")},"data-testid":"button-reset-import",children:"Nouvel import"})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.jsxs(fi,{value:p,onValueChange:v,className:"w-full",children:[r.jsxs(qs,{className:"grid w-full grid-cols-4",children:[r.jsx(Ht,{value:"upload","data-testid":"tab-upload",children:"1. Upload"}),r.jsx(Ht,{value:"mapping",disabled:!i,"data-testid":"tab-mapping",children:"2. Mapping"}),r.jsx(Ht,{value:"options",disabled:!i,"data-testid":"tab-options",children:"3. Options"}),r.jsx(Ht,{value:"monitoring",disabled:!f,"data-testid":"tab-monitoring",children:"4. Monitoring"})]}),r.jsxs(Zt,{value:"upload",className:"space-y-6",children:[r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Slectionner un fichier CSV"}),r.jsx(jt,{children:"Formats accepts: .csv, .txt (max 5 MB, 1000 lignes)"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-center border-2 border-dashed rounded-lg p-12",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx(ite,{className:"mx-auto h-12 w-12 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx(ge,{ref:t,type:"file",accept:".csv,.txt",onChange:w,className:"hidden",id:"csv-upload","data-testid":"input-csv-file"}),r.jsx(Ce,{htmlFor:"csv-upload",children:r.jsx(re,{variant:"default",asChild:!0,"data-testid":"button-select-file",children:r.jsxs("span",{children:[r.jsx(yz,{className:"mr-2 h-4 w-4"}),"Slectionner un fichier"]})})})]}),n&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Fichier: ",r.jsx("strong",{children:n.name})," (",(n.size/1024).toFixed(1)," KB)"]})]})}),i&&r.jsxs(Eo,{children:[r.jsx(oy,{className:"h-4 w-4"}),r.jsxs(To,{children:[r.jsxs("strong",{children:[i.totalRows," lignes"]})," dtectes dans le fichier. Passez  l'tape suivante pour mapper les colonnes."]})]})]})]}),i&&r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Aperu des donnes"}),r.jsx(jt,{children:"Premires lignes du fichier"})]}),r.jsx(Z,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Qa,{children:[r.jsx(Ya,{children:r.jsx(_r,{children:i.headers.map(A=>r.jsx(kt,{children:A},A))})}),r.jsx(Xa,{children:i.rows.slice(0,5).map((A,P)=>r.jsx(_r,{children:i.headers.map(E=>r.jsx(Ct,{className:"max-w-xs truncate",children:A[E]},E))},P))})]})})})]})]}),r.jsx(Zt,{value:"mapping",className:"space-y-6",children:r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Mapper les colonnes"}),r.jsx(jt,{children:"Associez chaque colonne CSV  un champ Hector CRM"})]}),r.jsxs(Z,{className:"space-y-4",children:[i==null?void 0:i.headers.map(A=>r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx(Ce,{className:"font-mono text-sm",children:A})}),r.jsx($d,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("div",{className:"flex-1",children:r.jsxs(gt,{value:o[A]||"",onValueChange:P=>{if(P==="skip"){const E={...o};delete E[A],l(E)}else l({...o,[A]:P})},children:[r.jsx(mt,{"data-testid":`select-mapping-${A}`,children:r.jsx(xt,{placeholder:"Ignorer cette colonne"})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"skip",children:"Ignorer"}),y3e.map(P=>r.jsx(Y,{value:P.value,children:P.label},P.value))]})]})})]},A)),r.jsx(Tr,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:[Object.keys(o).length," colonnes mappes"]}),r.jsxs(re,{onClick:()=>v("options"),disabled:Object.keys(o).length===0,"data-testid":"button-next-options",children:["Suivant: Options",r.jsx($d,{className:"ml-2 h-4 w-4"})]})]})]})]})}),r.jsx(Zt,{value:"options",className:"space-y-6",children:r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Options d'import"}),r.jsx(jt,{children:"Configurez le comportement de l'import"})]}),r.jsxs(Z,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(Ce,{htmlFor:"auto-enrich",children:"Enrichissement automatique CASCADE"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Enrichir via INSEE/Pappers si SIREN prsent"})]}),r.jsx(ra,{id:"auto-enrich",checked:c.autoEnrich,onCheckedChange:A=>d({...c,autoEnrich:A}),"data-testid":"switch-auto-enrich"})]}),r.jsx(Tr,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(Ce,{htmlFor:"deduplicate",children:"Dtecter les doublons"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Vrifier SIREN, email, tlphone existants"})]}),r.jsx(ra,{id:"deduplicate",checked:c.deduplicate,onCheckedChange:A=>d({...c,deduplicate:A}),"data-testid":"switch-deduplicate"})]}),r.jsx(Tr,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(Ce,{htmlFor:"skip-duplicates",children:"Ignorer les doublons"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Ne pas crer si prospect dj existant"})]}),r.jsx(ra,{id:"skip-duplicates",checked:c.skipDuplicates,onCheckedChange:A=>d({...c,skipDuplicates:A}),disabled:!c.deduplicate,"data-testid":"switch-skip-duplicates"})]}),r.jsx(Tr,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("strong",{children:[(i==null?void 0:i.totalRows)||0," prospects"]}),"  importer"]}),r.jsx(re,{onClick:N,disabled:x.isPending,"data-testid":"button-start-import",children:x.isPending?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),"Dmarrage..."]}):r.jsxs(r.Fragment,{children:["Lancer l'import",r.jsx(ti,{className:"ml-2 h-4 w-4"})]})})]})]})]})}),r.jsxs(Zt,{value:"monitoring",className:"space-y-6",children:[g&&r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(se,{children:"Import en cours"}),r.jsx(jt,{children:g.filename})]}),r.jsx(ve,{variant:g.status==="completed"?"default":g.status==="failed"?"destructive":g.status==="processing"?"secondary":"outline",children:g.status})]})}),r.jsxs(Z,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm",children:"Progression"}),r.jsxs("span",{className:"text-sm font-medium",children:[g.progress,"%"]})]}),r.jsx($o,{value:g.progress,"data-testid":"progress-import"})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold",children:g.totalRows}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:g.successCount}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Succs"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:g.errorCount}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Erreurs"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:g.duplicateCount}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Doublons"})]})]}),g.errors&&g.errors.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Erreurs dtectes"}),r.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:g.errors.slice(0,10).map((A,P)=>r.jsx(Eo,{variant:"destructive",children:r.jsxs(To,{children:[r.jsxs("strong",{children:["Ligne ",A.row,":"]})," ",A.error]})},P))})]})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Historique des imports"}),r.jsx(jt,{children:"20 derniers imports batch"})]}),r.jsx(Z,{children:r.jsxs(Qa,{children:[r.jsx(Ya,{children:r.jsxs(_r,{children:[r.jsx(kt,{children:"Fichier"}),r.jsx(kt,{children:"Date"}),r.jsx(kt,{children:"Statut"}),r.jsx(kt,{className:"text-right",children:"Total"}),r.jsx(kt,{className:"text-right",children:"Succs"}),r.jsx(kt,{className:"text-right",children:"Erreurs"})]})}),r.jsx(Xa,{children:(y=j==null?void 0:j.history)==null?void 0:y.map(A=>r.jsxs(_r,{children:[r.jsx(Ct,{className:"font-medium",children:A.filename}),r.jsx(Ct,{children:new Date(A.createdAt).toLocaleDateString("fr-FR")}),r.jsx(Ct,{children:r.jsx(ve,{variant:A.status==="completed"?"default":A.status==="failed"?"destructive":A.status==="processing"?"secondary":"outline",children:A.status})}),r.jsx(Ct,{className:"text-right",children:A.totalRows}),r.jsx(Ct,{className:"text-right text-green-600",children:A.successCount}),r.jsx(Ct,{className:"text-right text-red-600",children:A.errorCount})]},A.id))})]})})]})]})]})})]})}function j3e(){const{user:e}=ya(),t=(e==null?void 0:e.role)||"bd",{data:n,isLoading:s}=Ke({queryKey:["/api/stats/sdr"],enabled:t==="sdr"}),{data:i,isLoading:a}=Ke({queryKey:["/api/stats/bd"],enabled:t==="bd"||t==="business_developer"}),{data:o,isLoading:l}=Ke({queryKey:["/api/stats/ic"],enabled:t==="ic"}),{data:c,isLoading:d}=Ke({queryKey:["/api/stats/chef"],enabled:t==="chef"||t==="chef_ventes"}),f=j=>j?`${Math.round(j).toLocaleString("fr-FR")} `:"0 ",h=j=>j?`${Math.round(j)}%`:"0%",p=j=>j?Math.round(j).toString():"0",v=j=>j?`${Math.round(j)}j`:"0j";return s||a||l||d?r.jsx("div",{className:"container mx-auto p-6",children:r.jsx("div",{className:"text-center text-muted-foreground",children:"Chargement des statistiques..."})}):r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(wn,{className:"h-8 w-8 text-primary"}),r.jsxs("h1",{className:"text-3xl font-bold",children:[t==="sdr"&&"Tableau de Bord SDR",(t==="bd"||t==="business_developer")&&"Tableau de Bord Business Developer",t==="ic"&&"Tableau de Bord Indpendant Commercial",(t==="chef"||t==="chef_ventes")&&"Tableau de Bord Chef des Ventes"]})]}),r.jsx(mr,{showHomeButton:!0})]}),t==="sdr"&&n&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(U,{"data-testid":"card-opportunites-creees",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Opportunits Cres"}),r.jsx(fn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:p(n.total_opportunites_creees)}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Pipeline visio: ",p(n.pipeline_visio_actif)]})]})]}),r.jsxs(U,{"data-testid":"card-signatures",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Signatures"}),r.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:p(n.signatures_solo)}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Avec BD: ",p(n.signatures_avec_bd)," | Transferts: ",p(n.transferts_bd)]})]})]}),r.jsxs(U,{"data-testid":"card-mrr",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"MRR Gnr"}),r.jsx(Oo,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:f(n.mrr_genere)}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["ARR: ",f(n.arr_genere)]})]})]}),r.jsxs(U,{"data-testid":"card-commissions",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Commissions"}),r.jsx(sz,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:f(n.commissions_totales)}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Taux signature: ",h(n.taux_signature_autonome)]})]})]}),r.jsxs(U,{"data-testid":"card-cycle",className:"md:col-span-2",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Cycle de Vente Moyen"}),r.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:v(n.cycle_moyen_visio)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Cycle visio R1Signature"})]})]})]}),(t==="bd"||t==="business_developer")&&i&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(U,{"data-testid":"card-signatures",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Signatures"}),r.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:p(i.signatures_solo)}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Reprises SDR: ",p(i.signatures_reprise_sdr)," | R1: ",p(i.signatures_r1)]})]})]}),r.jsxs(U,{"data-testid":"card-affaires-chaudes",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Affaires Chaudes"}),r.jsx(Yl,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:p(i.affaires_chaudes_actives)}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["R2 non positionns: ",p(i.r2_non_positionnes)]})]})]}),r.jsxs(U,{"data-testid":"card-mrr",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"MRR Gnr"}),r.jsx(Oo,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:f(i.mrr_genere)}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Commissions: ",f(i.commissions_totales)]})]})]}),r.jsxs(U,{"data-testid":"card-performance",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Performance R1"}),r.jsx(cP,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:h(i.taux_signature_r1)}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Dlai R1R2: ",v(i.delai_moyen_r1_r2)]})]})]})]}),t==="ic"&&o&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs(U,{"data-testid":"card-signatures",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Signatures"}),r.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:p((o.signatures_nouveau||0)+(o.signatures_reconduction||0))}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Nouveaux: ",p(o.signatures_nouveau)," | Reconductions: ",p(o.signatures_reconduction)]})]})]}),r.jsxs(U,{"data-testid":"card-mrr",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"MRR Gnr"}),r.jsx(Oo,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:f(o.mrr_genere)}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Commissions: ",f(o.commissions_totales)]})]})]}),r.jsxs(U,{"data-testid":"card-affaires-chaudes",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Affaires Chaudes"}),r.jsx(Yl,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:p(o.affaires_chaudes_actives)}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Dure moyenne: ",p(o.duree_moyenne)," mois"]})]})]})]}),(t==="chef"||t==="chef_ventes")&&c&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs(U,{className:"md:col-span-2 lg:col-span-1","data-testid":"card-perso",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Performance Personnelle"}),r.jsx(fn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:p(c.signatures_perso)}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Commissions: ",f(c.commissions_perso)]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Affaires chaudes: ",p(c.affaires_chaudes_perso)]})]})]}),r.jsxs(U,{className:"md:col-span-2","data-testid":"card-equipe",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Performance quipe BD"}),r.jsx(Nn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:p(c.signatures_equipe_bd)}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["MRR quipe: ",f(c.mrr_equipe_bd)]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Affaires chaudes: ",p(c.affaires_chaudes_equipe_bd)]})]})]})]}),!["sdr","bd","business_developer","ic","chef","chef_ventes"].includes(t)&&r.jsx(U,{children:r.jsx(Z,{className:"p-6",children:r.jsx("p",{className:"text-center text-muted-foreground",children:"Aucun tableau de bord spcifique pour votre rle. Utilisez le CRM Dashboard gnral."})})})]})}function sv({title:e,value:t,subtitle:n,icon:s,iconColor:i="text-muted-foreground",testId:a}){return r.jsxs(U,{className:"hover-elevate transition-all duration-200",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:e}),r.jsx(s,{className:`h-4 w-4 ${i}`})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":a,children:t}),n&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n})]})]})}function _3e({status:e,testId:t}){const s=(i=>{switch(i){case"active":return{label:"Active",variant:"default",icon:r.jsx(vz,{className:"h-3 w-3"}),color:"bg-green-500"};case"paused":return{label:"En pause",variant:"secondary",icon:r.jsx(xz,{className:"h-3 w-3"}),color:"bg-yellow-500"};case"completed":return{label:"Termine",variant:"outline",icon:r.jsx(Yt,{className:"h-3 w-3"}),color:"bg-blue-500"};default:return{label:"En attente",variant:"secondary",icon:r.jsx(jn,{className:"h-3 w-3"}),color:"bg-gray-500"}}})(e);return r.jsxs(ve,{variant:s.variant,className:"gap-1","data-testid":t,children:[s.icon,s.label]})}function w3e({percentage:e,showPercentage:t=!0,height:n="h-2",color:s="bg-primary",testId:i}){const a=Math.min(100,Math.max(0,e));return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`flex-1 bg-muted rounded-full overflow-hidden ${n}`,children:r.jsx("div",{className:`${n} ${s} rounded-full transition-all duration-500 ease-out`,style:{width:`${a}%`},"data-testid":i})}),t&&r.jsxs("span",{className:"text-sm font-medium text-muted-foreground min-w-[3rem] text-right",children:[Math.round(a),"%"]})]})}function N3e({campaign:e,onEdit:t,onDelete:n,onTogglePause:s,onViewAnalytics:i}){var l,c,d;const o=(()=>{var p,v;if(!((p=e.stats)!=null&&p.contactes))return 0;const f=((v=e.scenario)==null?void 0:v.totalEtapes)||5;return Math.round(2/f*100)})();return r.jsx(U,{className:"hover-elevate transition-all duration-200","data-testid":`card-campaign-${e.id}`,children:r.jsx(ne,{children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[r.jsx(se,{className:"text-xl","data-testid":`text-campaign-name-${e.id}`,children:e.nom}),r.jsx(_3e,{status:e.statut,testId:`badge-status-${e.id}`})]}),e.scenario&&r.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["Scnario: ",e.scenario.nom," (",e.scenario.totalEtapes," tapes)"]}),e.objectif&&!e.scenario&&r.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["Objectif: ",e.objectif]}),r.jsx("div",{className:"mb-4",children:r.jsx(w3e,{percentage:o,testId:`progress-${e.id}`})}),r.jsxs("div",{className:"flex flex-wrap gap-4 text-sm mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Nn,{className:"h-4 w-4 text-blue-500"}),r.jsxs("span",{"data-testid":`stat-contacted-${e.id}`,children:[r.jsx("strong",{children:((l=e.stats)==null?void 0:l.contactes)||0})," prospects"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(oP,{className:"h-4 w-4 text-purple-500"}),r.jsxs("span",{"data-testid":`stat-responses-${e.id}`,children:[r.jsx("strong",{children:((c=e.stats)==null?void 0:c.reponses)||0})," rponses"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yt,{className:"h-4 w-4 text-green-500"}),r.jsxs("span",{"data-testid":`stat-rdv-${e.id}`,children:[r.jsx("strong",{children:((d=e.stats)==null?void 0:d.rdv)||0})," RDV"]})]}),e.dateDebut&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jn,{className:"h-4 w-4 text-orange-500"}),r.jsxs("span",{className:"text-muted-foreground",children:["Dbut: ",br(new Date(e.dateDebut),"dd MMM yyyy",{locale:jr})]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>i==null?void 0:i(e.id),"data-testid":`button-details-${e.id}`,className:"gap-2",children:[r.jsx(Zl,{className:"h-4 w-4"}),"Dtails"]}),r.jsx(re,{variant:"outline",size:"sm",onClick:()=>s==null?void 0:s(e.id),"data-testid":`button-pause-${e.id}`,className:"gap-2",children:e.statut==="active"?r.jsxs(r.Fragment,{children:[r.jsx(xz,{className:"h-4 w-4"}),"Pause"]}):r.jsxs(r.Fragment,{children:[r.jsx(vz,{className:"h-4 w-4"}),"Reprendre"]})}),r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>i==null?void 0:i(e.id),"data-testid":`button-analytics-${e.id}`,className:"gap-2",children:[r.jsx(Zl,{className:"h-4 w-4"}),"Analytics"]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>t==null?void 0:t(e.id),"data-testid":`button-edit-${e.id}`,children:r.jsx(Ii,{className:"h-4 w-4"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>n==null?void 0:n(e.id),"data-testid":`button-delete-${e.id}`,children:r.jsx(Ns,{className:"h-4 w-4"})})]})]})})})}function ZL({icon:e,title:t,description:n,actionLabel:s,onAction:i,testId:a}){return r.jsx(U,{children:r.jsxs(Z,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(e,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:t}),r.jsx("p",{className:"text-muted-foreground text-center mb-4 max-w-md",children:n}),s&&i&&r.jsx(re,{onClick:i,"data-testid":a,children:s})]})})}function S3e(){const[e,t]=_.useState(""),[,n]=es(),{toast:s}=At(),{data:i=[],isLoading:a}=Ke({queryKey:["/api/prospection/campagnes"]}),o=dt({mutationFn:async({id:g,data:x})=>await rt("PATCH",`/api/prospection/campagnes/${g}`,x),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/prospection/campagnes"]}),s({title:"Campagne mise  jour",description:"Les modifications ont t enregistres"})},onError:()=>{s({title:"Erreur",description:"Impossible de mettre  jour la campagne",variant:"destructive"})}}),l=dt({mutationFn:async g=>await rt("DELETE",`/api/prospection/campagnes/${g}`),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/prospection/campagnes"]}),s({title:"Campagne supprime",description:"La campagne a t supprime avec succs"})},onError:()=>{s({title:"Erreur",description:"Impossible de supprimer la campagne",variant:"destructive"})}}),c=i.filter(g=>{var w;const x=e.toLowerCase();return g.nom.toLowerCase().includes(x)||((w=g.objectif)==null?void 0:w.toLowerCase().includes(x))}),d={totalCampagnes:i.length,campagnesActives:i.filter(g=>g.statut==="active").length,totalProspects:i.reduce((g,x)=>{var w;return g+(((w=x.stats)==null?void 0:w.contactes)||0)},0),tauxReponseGlobal:i.length>0?Math.round(i.reduce((g,x)=>{var w;return g+(((w=x.stats)==null?void 0:w.reponses)||0)},0)/Math.max(i.reduce((g,x)=>{var w;return g+(((w=x.stats)==null?void 0:w.contactes)||0)},0),1)*100):0,totalRdv:i.reduce((g,x)=>{var w;return g+(((w=x.stats)==null?void 0:w.rdv)||0)},0)},f=()=>{n("/prospection/campagnes/nouvelle")},h=g=>{const x=i.find(N=>N.id===g);if(!x)return;const w=x.statut==="active"?"paused":"active";o.mutate({id:g,data:{statut:w}})},p=g=>{confirm("tes-vous sr de vouloir supprimer cette campagne ?")&&l.mutate(g)},v=g=>{n(`/prospection/campagnes/nouvelle?edit=${g}`)},j=g=>{n(`/prospection/analytics?campaign=${g}`)};return a?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Chargement des campagnes..."})]})}):r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-title",children:" Prospection LinkedIn"}),r.jsx("p",{className:"text-muted-foreground",children:"Grez vos campagnes de prospection multi-canal"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(mr,{showHomeButton:!0}),r.jsxs(re,{variant:"outline",onClick:()=>n("/prospection/analytics"),"data-testid":"button-analytics",className:"gap-2",children:[r.jsx(Zl,{className:"h-4 w-4"}),"Analytics"]}),r.jsxs(re,{onClick:f,"data-testid":"button-create-campaign",className:"gap-2",children:[r.jsx(dr,{className:"h-4 w-4"}),"Nouvelle campagne"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(sv,{title:"Prospects en cours",value:d.totalProspects,subtitle:`${d.campagnesActives} campagnes actives`,icon:Nn,iconColor:"text-blue-500",testId:"stat-total-prospects"}),r.jsx(sv,{title:"Taux acceptation",value:`${d.tauxReponseGlobal}%`,subtitle:"Connexions acceptes",icon:fn,iconColor:"text-green-500",testId:"stat-acceptance-rate"}),r.jsx(sv,{title:"Rponses",value:i.reduce((g,x)=>{var w;return g+(((w=x.stats)==null?void 0:w.reponses)||0)},0),subtitle:"Messages reus",icon:wn,iconColor:"text-purple-500",testId:"stat-responses"}),r.jsx(sv,{title:"RDV obtenus",value:d.totalRdv,subtitle:"Objectifs atteints",icon:Yt,iconColor:"text-orange-500",testId:"stat-total-rdv"})]}),r.jsx("div",{className:"flex gap-4",children:r.jsxs("div",{className:"relative flex-1",children:[r.jsx(ls,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(ge,{placeholder:"Rechercher une campagne...",value:e,onChange:g=>t(g.target.value),className:"pl-10","data-testid":"input-search-campagnes"})]})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:" Mes Campagnes"}),r.jsx("div",{className:"space-y-4",children:c.length===0?e?r.jsx(ZL,{icon:ls,title:"Aucune campagne trouve",description:"Essayez une autre recherche ou crez une nouvelle campagne",testId:"empty-search"}):r.jsx(ZL,{icon:fn,title:"Aucune campagne pour le moment",description:"Crez votre premire campagne de prospection LinkedIn pour automatiser vos prises de contact et maximiser vos opportunits",actionLabel:"+ Nouvelle campagne",onAction:f,testId:"button-create-campaign-empty"}):c.map(g=>r.jsx(N3e,{campaign:g,onEdit:v,onDelete:p,onTogglePause:h,onViewAnalytics:j},g.id))})]})]})})}function C3e(){const{data:e,isLoading:t}=Ke({queryKey:["/api/prospection/analytics/global-stats"]}),{data:n=[],isLoading:s}=Ke({queryKey:["/api/prospection/analytics/conversion-funnel"]}),{data:i=[],isLoading:a}=Ke({queryKey:["/api/prospection/analytics/top-messages"]}),{data:o=[],isLoading:l}=Ke({queryKey:["/api/prospection/analytics/ab-variants"]}),c=p=>{switch(p){case"linkedin":return r.jsx(cte,{className:"h-4 w-4"});case"email":return r.jsx(da,{className:"h-4 w-4"});case"sms":return r.jsx(oP,{className:"h-4 w-4"});default:return r.jsx(Va,{className:"h-4 w-4"})}},d=p=>{switch(p){case"linkedin":return"default";case"email":return"secondary";case"sms":return"outline";default:return"secondary"}},f=n.map(p=>({name:`tape ${p.etape}`,prospects:p.count})),h=["#0ea5e9","#06b6d4","#14b8a6","#10b981","#22c55e"];return t||s||a||l?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Chargement des analytics..."})]})}):r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(un,{href:"/prospection/campagnes",children:r.jsx(re,{variant:"ghost",size:"icon","data-testid":"button-back",children:r.jsx(ua,{className:"h-4 w-4"})})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-title",children:"Analytics Prospection"}),r.jsx("p",{className:"text-muted-foreground",children:"Vue d'ensemble de vos performances"})]})]}),r.jsx(mr,{showHomeButton:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total prospects"}),r.jsx(Nn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-prospects",children:(e==null?void 0:e.totalProspects)||0}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[(e==null?void 0:e.prospectsActifs)||0," actifs"]})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Interactions"}),r.jsx(Va,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-interactions",children:(e==null?void 0:e.totalInteractions)||0}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[(e==null?void 0:e.totalReponses)||0," rponses"]})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Taux de rponse"}),r.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsxs("div",{className:"text-2xl font-bold","data-testid":"stat-response-rate",children:[(e==null?void 0:e.tauxReponse)||0,"%"]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Sur ",(e==null?void 0:e.totalInteractions)||0," envois"]})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Campagnes"}),r.jsx(fn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-campaigns",children:(e==null?void 0:e.campagnesTotales)||0}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[(e==null?void 0:e.campagnesActives)||0," actives"]})]})]})]}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Yt,{className:"h-5 w-5"}),"Funnel de conversion"]})}),r.jsx(Z,{children:f.length>0?r.jsx(Ua,{width:"100%",height:300,children:r.jsxs(Ph,{data:f,children:[r.jsx(Qo,{strokeDasharray:"3 3"}),r.jsx(Di,{dataKey:"name"}),r.jsx(oi,{}),r.jsx(Ar,{}),r.jsx(us,{dataKey:"prospects",fill:"#0ea5e9",radius:[8,8,0,0],children:f.map((p,v)=>r.jsx(_h,{fill:h[v%h.length]},`cell-${v}`))})]})}):r.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Aucune donne disponible pour le funnel"})})]}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Va,{className:"h-5 w-5"}),"Top messages performants"]})}),r.jsx(Z,{children:i.length>0?r.jsxs(Qa,{children:[r.jsx(Ya,{children:r.jsxs(_r,{children:[r.jsx(kt,{children:"Message"}),r.jsx(kt,{children:"Canal"}),r.jsx(kt,{className:"text-right",children:"Envois"})]})}),r.jsx(Xa,{children:i.map((p,v)=>r.jsxs(_r,{"data-testid":`row-message-${v}`,children:[r.jsx(Ct,{className:"max-w-md truncate","data-testid":`text-message-${v}`,children:p.message}),r.jsx(Ct,{children:r.jsxs(ve,{variant:d(p.canal),className:"gap-1","data-testid":`badge-canal-${v}`,children:[c(p.canal),p.canal]})}),r.jsx(Ct,{className:"text-right font-medium","data-testid":`stat-envois-${v}`,children:p.envois})]},v))})]}):r.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Aucun message envoy pour le moment"})})]}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(fn,{className:"h-5 w-5"}),"A/B Testing - Top Variants"]})}),r.jsx(Z,{children:o.length>0?r.jsxs(Qa,{children:[r.jsx(Ya,{children:r.jsxs(_r,{children:[r.jsx(kt,{children:"Variant"}),r.jsx(kt,{children:"Canal"}),r.jsx(kt,{className:"text-right",children:"Score"}),r.jsx(kt,{className:"text-right",children:"Envois"}),r.jsx(kt,{className:"text-right",children:"Taux ouverture"}),r.jsx(kt,{className:"text-right",children:"Taux clic"}),r.jsx(kt,{className:"text-right",children:"Taux rponse"})]})}),r.jsx(Xa,{children:o.map((p,v)=>r.jsxs(_r,{"data-testid":`row-variant-${v}`,children:[r.jsx(Ct,{className:"font-medium","data-testid":`text-variant-name-${v}`,children:p.variantName}),r.jsx(Ct,{children:r.jsxs(ve,{variant:d(p.canal),className:"gap-1","data-testid":`badge-canal-${v}`,children:[c(p.canal),p.canal]})}),r.jsx(Ct,{className:"text-right font-bold","data-testid":`stat-score-${v}`,children:r.jsxs(ve,{variant:p.score>0?"default":"secondary",children:[p.score>0?"+":"",p.score.toFixed(3)]})}),r.jsx(Ct,{className:"text-right","data-testid":`stat-sent-${v}`,children:p.metrics.sent}),r.jsx(Ct,{className:"text-right","data-testid":`stat-open-rate-${v}`,children:r.jsxs("span",{className:p.openRate>20?"text-green-600 dark:text-green-400 font-medium":"",children:[p.openRate,"%"]})}),r.jsx(Ct,{className:"text-right","data-testid":`stat-click-rate-${v}`,children:r.jsxs("span",{className:p.clickRate>5?"text-green-600 dark:text-green-400 font-medium":"",children:[p.clickRate,"%"]})}),r.jsx(Ct,{className:"text-right","data-testid":`stat-reply-rate-${v}`,children:r.jsxs("span",{className:p.replyRate>10?"text-green-600 dark:text-green-400 font-medium":"",children:[p.replyRate,"%"]})})]},p.id))})]}):r.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Aucun variant A/B testing disponible. Crez des variants pour comparer les performances de vos messages."})})]})]})})}var WA="Radio",[P3e,RG]=Nr(WA),[A3e,E3e]=P3e(WA),LG=_.forwardRef((e,t)=>{const{__scopeRadio:n,name:s,checked:i=!1,required:a,disabled:o,value:l="on",onCheck:c,form:d,...f}=e,[h,p]=_.useState(null),v=Rt(t,x=>p(x)),j=_.useRef(!1),g=h?d||!!h.closest("form"):!0;return r.jsxs(A3e,{scope:n,checked:i,disabled:o,children:[r.jsx(st.button,{type:"button",role:"radio","aria-checked":i,"data-state":FG(i),"data-disabled":o?"":void 0,disabled:o,value:l,...f,ref:v,onClick:Ve(e.onClick,x=>{i||c==null||c(),g&&(j.current=x.isPropagationStopped(),j.current||x.stopPropagation())})}),g&&r.jsx(T3e,{control:h,bubbles:!j.current,name:s,value:l,checked:i,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});LG.displayName=WA;var DG="RadioIndicator",$G=_.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:s,...i}=e,a=E3e(DG,n);return r.jsx(Vr,{present:s||a.checked,children:r.jsx(st.span,{"data-state":FG(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})})});$G.displayName=DG;var T3e=e=>{const{control:t,checked:n,bubbles:s=!0,...i}=e,a=_.useRef(null),o=Pj(n),l=mj(t);return _.useEffect(()=>{const c=a.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&h){const p=new Event("click",{bubbles:s});h.call(c,n),c.dispatchEvent(p)}},[o,n,s]),r.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function FG(e){return e?"checked":"unchecked"}var k3e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],KA="RadioGroup",[O3e]=Nr(KA,[dh,RG]),zG=dh(),BG=RG(),[M3e,I3e]=O3e(KA),VG=_.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:s,defaultValue:i,value:a,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:f=!0,onValueChange:h,...p}=e,v=zG(n),j=Eu(d),[g,x]=Vs({prop:a,defaultProp:i,onChange:h});return r.jsx(M3e,{scope:n,name:s,required:o,disabled:l,value:g,onValueChange:x,children:r.jsx(FP,{asChild:!0,...v,orientation:c,dir:j,loop:f,children:r.jsx(st.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:j,...p,ref:t})})})});VG.displayName=KA;var qG="RadioGroupItem",UG=_.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:s,...i}=e,a=I3e(qG,n),o=a.disabled||s,l=zG(n),c=BG(n),d=_.useRef(null),f=Rt(t,d),h=a.value===i.value,p=_.useRef(!1);return _.useEffect(()=>{const v=g=>{k3e.includes(g.key)&&(p.current=!0)},j=()=>p.current=!1;return document.addEventListener("keydown",v),document.addEventListener("keyup",j),()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",j)}},[]),r.jsx(zP,{asChild:!0,...l,focusable:!o,active:h,children:r.jsx(LG,{disabled:o,required:a.required,checked:h,...c,...i,name:a.name,ref:f,onCheck:()=>a.onValueChange(i.value),onKeyDown:Ve(v=>{v.key==="Enter"&&v.preventDefault()}),onFocus:Ve(i.onFocus,()=>{var v;p.current&&((v=d.current)==null||v.click())})})})});UG.displayName=qG;var R3e="RadioGroupIndicator",HG=_.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...s}=e,i=BG(n);return r.jsx($G,{...i,...s,ref:t})});HG.displayName=R3e;var WG=VG,KG=UG,L3e=HG;const US=_.forwardRef(({className:e,...t},n)=>r.jsx(WG,{className:Oe("grid gap-2",e),...t,ref:n}));US.displayName=WG.displayName;const Ov=_.forwardRef(({className:e,...t},n)=>r.jsx(KG,{ref:n,className:Oe("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:r.jsx(L3e,{className:"flex items-center justify-center",children:r.jsx(tP,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Ov.displayName=KG.displayName;const QL=[{id:"lundi",label:"Lundi"},{id:"mardi",label:"Mardi"},{id:"mercredi",label:"Mercredi"},{id:"jeudi",label:"Jeudi"},{id:"vendredi",label:"Vendredi"},{id:"samedi",label:"Samedi"},{id:"dimanche",label:"Dimanche"}],Ac=[{id:1,title:"Informations",icon:fn},{id:2,title:"Scnario",icon:lz},{id:3,title:"Prospects",icon:Nn},{id:4,title:"Configuration",icon:jn},{id:5,title:"Rcapitulatif",icon:Ql}];function D3e(){var C;const[,e]=es(),{toast:t}=At(),[n,s]=_.useState(1),[i,a]=_.useState(!1),[o,l]=_.useState(!1),[c,d]=_.useState({nom:"",objectif:"",dateDebut:new Date().toISOString().split("T")[0],dateFin:"",scenarioId:"",importMethod:"bdd",csvFile:null,selectedProspectIds:[],sendDays:["lundi","mardi","mercredi","jeudi","vendredi"],sendHourStart:"09:00",sendHourEnd:"18:00"}),h=new URLSearchParams(window.location.search).get("edit"),p=!!h,{data:v=[]}=Ke({queryKey:["/api/prospection/scenarios"]}),{data:j=[]}=Ke({queryKey:["/api/crm/prospects"],enabled:c.importMethod==="bdd"});_.useEffect(()=>{p&&h&&(l(!0),Promise.all([rt("GET",`/api/prospection/campagnes/${h}`),rt("GET",`/api/prospection/campagnes/${h}/prospects`)]).then(([S,k])=>{const I=S.heuresEnvoi,R=D=>D?(typeof D=="string"?new Date(D):D).toISOString().split("T")[0]:"";d({nom:S.nom,objectif:S.objectif||"",dateDebut:R(S.dateDebut)||new Date().toISOString().split("T")[0],dateFin:R(S.dateFin),scenarioId:S.scenarioId,importMethod:"bdd",csvFile:null,selectedProspectIds:k.map(D=>D.prospectId),sendDays:S.joursEnvoi||["lundi","mardi","mercredi","jeudi","vendredi"],sendHourStart:(I==null?void 0:I.debut)||"09:00",sendHourEnd:(I==null?void 0:I.fin)||"18:00"}),l(!1)}).catch(S=>{t({title:" Erreur",description:"Impossible de charger la campagne",variant:"destructive"}),e("/prospection/campagnes")}))},[p,h]);const g=dt({mutationFn:async S=>p&&h?await rt("PATCH",`/api/prospection/campagnes/${h}`,S):await rt("POST","/api/prospection/campagnes",S),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/prospection/campagnes"]}),t({title:p?" Campagne modifie !":" Campagne cre !",description:p?"Les modifications ont t enregistres avec succs.":"Ta campagne de prospection a t lance avec succs."}),e("/prospection/campagnes")},onError:()=>{t({title:" Erreur",description:p?"Impossible de modifier la campagne.":"Impossible de crer la campagne.",variant:"destructive"})}}),x=S=>{d(k=>({...k,...S}))},w=async S=>{a(!0),x({csvFile:S}),IG.parse(S,{header:!0,skipEmptyLines:!0,complete:async k=>{try{const I=[];for(const R of k.data){const D=R;if(!D.nom||!D.entreprise)continue;const z={nom:D.nom,prenom:D.prenom||"",entreprise:D.entreprise,email:D.email||"",telephone:D.telephone||""},V=await rt("POST","/api/crm/prospects",z);I.push(V.id)}x({selectedProspectIds:I}),t({title:" CSV import",description:`${I.length} prospect(s) cr(s) avec succs`})}catch{t({title:" Erreur import CSV",description:"Impossible de crer les prospects depuis le CSV",variant:"destructive"}),x({csvFile:null,selectedProspectIds:[]})}finally{a(!1)}},error:()=>{t({title:" Erreur parsing CSV",description:"Format CSV invalide. Vrifiez votre fichier.",variant:"destructive"}),x({csvFile:null}),a(!1)}})},N=()=>{n<Ac.length&&s(n+1)},y=()=>{n>1&&s(n-1)},A=async()=>{if(v.find(S=>S.id===c.scenarioId),p){const S={nom:c.nom,objectif:c.objectif,dateDebut:c.dateDebut,dateFin:c.dateFin,joursEnvoi:c.sendDays,heuresEnvoi:{debut:c.sendHourStart,fin:c.sendHourEnd}};await g.mutateAsync(S)}else{const S={nom:c.nom,scenarioId:c.scenarioId,objectif:c.objectif,statut:"active",dateDebut:c.dateDebut,dateFin:c.dateFin,configEnvoi:{jours:c.sendDays,heureDebut:c.sendHourStart,heureFin:c.sendHourEnd},prospectIds:c.selectedProspectIds};await g.mutateAsync(S)}},P=()=>{switch(n){case 1:return c.nom&&c.objectif&&c.dateDebut;case 2:return c.scenarioId;case 3:return i?!1:c.selectedProspectIds.length>0;case 4:return c.sendDays.length>0&&c.sendHourStart&&c.sendHourEnd;default:return!0}},E=v.find(S=>S.id===c.scenarioId);return o?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Chargement de la campagne..."})]})}):r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto p-6 max-w-5xl space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(un,{href:"/prospection/campagnes",children:r.jsx(re,{variant:"ghost",size:"icon","data-testid":"button-back",children:r.jsx(ua,{className:"h-4 w-4"})})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-title",children:p?"Modifier la campagne":"Nouvelle campagne de prospection"}),r.jsx("p",{className:"text-muted-foreground",children:p?"Modifie les paramtres de ta campagne":"Configure ta campagne en 5 tapes simples"})]})]}),r.jsx("div",{className:"flex items-center justify-between",children:Ac.map((S,k)=>{const I=S.icon,R=n===S.id,D=n>S.id;return r.jsxs("div",{className:"flex items-center flex-1",children:[r.jsxs("div",{className:"flex flex-col items-center flex-1",children:[r.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors ${D?"bg-primary border-primary text-primary-foreground":R?"border-primary bg-primary/10 text-primary":"border-border bg-background text-muted-foreground"}`,"data-testid":`step-${S.id}`,children:D?r.jsx(Ql,{className:"h-5 w-5"}):r.jsx(I,{className:"h-5 w-5"})}),r.jsx("span",{className:`text-xs mt-2 font-medium ${R?"text-foreground":"text-muted-foreground"}`,children:S.title})]}),k<Ac.length-1&&r.jsx("div",{className:`h-0.5 flex-1 mx-2 ${D?"bg-primary":"bg-border"}`})]},S.id)})}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsx(se,{className:"flex items-center gap-2",children:Ac[n-1]&&r.jsxs(r.Fragment,{children:[(()=>{const S=Ac[n-1].icon;return r.jsx(S,{className:"h-5 w-5"})})(),"tape ",n," : ",Ac[n-1].title]})})}),r.jsxs(Z,{className:"space-y-6",children:[n===1&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"nom",children:"Nom de la campagne *"}),r.jsx(ge,{id:"nom",placeholder:"Ex: Prospection Pharmacies IDF Q1 2025",value:c.nom,onChange:S=>x({nom:S.target.value}),"data-testid":"input-campaign-name"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"objectif",children:"Objectif de la campagne *"}),r.jsx(Dn,{id:"objectif",placeholder:"Dcris ton objectif : nombre de RDV, segment cible, KPIs attendus...",value:c.objectif,onChange:S=>x({objectif:S.target.value}),rows:4,"data-testid":"input-campaign-objective"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"dateDebut",children:"Date de dbut *"}),r.jsx(ge,{id:"dateDebut",type:"date",value:c.dateDebut,onChange:S=>x({dateDebut:S.target.value}),"data-testid":"input-date-start"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"dateFin",children:"Date de fin (optionnel)"}),r.jsx(ge,{id:"dateFin",type:"date",value:c.dateFin,onChange:S=>x({dateFin:S.target.value}),"data-testid":"input-date-end"})]})]})]}),n===2&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Choisis le scnario adapt  ton type de prospection"}),r.jsx(US,{value:c.scenarioId,onValueChange:S=>x({scenarioId:S}),children:r.jsx("div",{className:"space-y-3",children:v.map(S=>r.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-all hover-elevate ${c.scenarioId===S.id?"border-primary bg-primary/5":"border-border"}`,onClick:()=>x({scenarioId:S.id}),"data-testid":`card-scenario-${S.id}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ov,{value:S.id,id:S.id,"data-testid":`radio-scenario-${S.id}`}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ce,{htmlFor:S.id,className:"font-semibold cursor-pointer",children:S.nom}),r.jsxs(ve,{variant:"outline",className:"gap-1",children:[r.jsx(xn,{className:"h-3 w-3"}),S.dureeJours,"j"]}),r.jsxs(ve,{variant:"secondary",className:"gap-1",children:[S.nombreEtapes," tapes"]})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:S.description}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Cible : ",S.typeCible]}),r.jsxs("span",{children:["Taux succs : ",(S.tauxSuccesAttendu*100).toFixed(0),"%"]})]})]})]})},S.id))})})]}),n===3&&r.jsxs("div",{className:"space-y-6",children:[r.jsx(US,{value:c.importMethod,onValueChange:S=>x({importMethod:S}),children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:`flex-1 border rounded-lg p-4 cursor-pointer transition-all hover-elevate ${c.importMethod==="bdd"?"border-primary bg-primary/5":"border-border"}`,onClick:()=>x({importMethod:"bdd"}),"data-testid":"option-import-bdd",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ov,{value:"bdd",id:"bdd"}),r.jsx(Ce,{htmlFor:"bdd",className:"cursor-pointer font-semibold",children:"Slectionner depuis la base"})]})}),r.jsx("div",{className:`flex-1 border rounded-lg p-4 cursor-pointer transition-all hover-elevate ${c.importMethod==="csv"?"border-primary bg-primary/5":"border-border"}`,onClick:()=>x({importMethod:"csv"}),"data-testid":"option-import-csv",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ov,{value:"csv",id:"csv"}),r.jsx(Ce,{htmlFor:"csv",className:"cursor-pointer font-semibold",children:"Importer un fichier CSV"})]})})]})}),c.importMethod==="csv"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center",children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-sm font-medium",children:"Parsing du CSV en cours..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(yz,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),r.jsx(Ce,{htmlFor:"csv-upload",className:"cursor-pointer text-sm font-medium",children:"Clique pour importer un fichier CSV"}),r.jsx(ge,{id:"csv-upload",type:"file",accept:".csv",className:"hidden",onChange:S=>{var I;const k=(I=S.target.files)==null?void 0:I[0];k&&w(k)},"data-testid":"input-csv-file"}),c.csvFile&&!i&&r.jsxs("p",{className:"mt-2 text-sm text-muted-foreground",children:[" ",c.csvFile.name," - ",c.selectedProspectIds.length," prospects"]})]})}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Format CSV attendu : nom, prenom, email, entreprise, telephone"})]}),c.importMethod==="bdd"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Ce,{children:["Slectionne les prospects (",j.length," disponibles)"]}),r.jsx(re,{variant:"outline",size:"sm",onClick:()=>{c.selectedProspectIds.length===j.length?x({selectedProspectIds:[]}):x({selectedProspectIds:j.map(S=>S.id)})},"data-testid":"button-select-all-prospects",children:c.selectedProspectIds.length===j.length?"Tout dslectionner":"Tout slectionner"})]}),r.jsx("div",{className:"border rounded-lg max-h-96 overflow-y-auto",children:j.length===0?r.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Aucun prospect dans ta base. Cre-en d'abord dans le CRM."}):r.jsx("div",{className:"divide-y",children:j.map(S=>r.jsxs("div",{className:"flex items-center gap-3 p-3 hover-elevate cursor-pointer",onClick:()=>{const k=c.selectedProspectIds.includes(S.id)?c.selectedProspectIds.filter(I=>I!==S.id):[...c.selectedProspectIds,S.id];x({selectedProspectIds:k})},"data-testid":`prospect-${S.id}`,children:[r.jsx(Zr,{checked:c.selectedProspectIds.includes(S.id),onCheckedChange:k=>{const I=k?[...c.selectedProspectIds,S.id]:c.selectedProspectIds.filter(R=>R!==S.id);x({selectedProspectIds:I})},"data-testid":`checkbox-prospect-${S.id}`}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"font-medium",children:[S.prenom," ",S.nom]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[S.entreprise,"  ",S.email]})]})]},S.id))})}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.selectedProspectIds.length," prospect(s) slectionn(s)"]})]})]}),n===4&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ce,{children:"Jours d'envoi"}),r.jsx("div",{className:"grid grid-cols-4 gap-3",children:QL.map(S=>r.jsxs("div",{className:`border rounded-lg p-3 cursor-pointer text-center transition-all hover-elevate ${c.sendDays.includes(S.id)?"border-primary bg-primary/10":"border-border"}`,onClick:()=>{const k=c.sendDays.includes(S.id)?c.sendDays.filter(I=>I!==S.id):[...c.sendDays,S.id];x({sendDays:k})},"data-testid":`day-${S.id}`,children:[r.jsx(Zr,{checked:c.sendDays.includes(S.id),className:"mb-2","data-testid":`checkbox-day-${S.id}`}),r.jsx(Ce,{className:"cursor-pointer block text-sm font-medium",children:S.label})]},S.id))})]}),r.jsx(Tr,{}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"hourStart",children:"Heure de dbut"}),r.jsx(ge,{id:"hourStart",type:"time",value:c.sendHourStart,onChange:S=>x({sendHourStart:S.target.value}),"data-testid":"input-hour-start"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"hourEnd",children:"Heure de fin"}),r.jsx(ge,{id:"hourEnd",type:"time",value:c.sendHourEnd,onChange:S=>x({sendHourEnd:S.target.value}),"data-testid":"input-hour-end"})]})]}),r.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-muted-foreground",children:" Les messages seront envoys automatiquement pendant les plages horaires dfinies, uniquement les jours slectionns."})})]}),n===5&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(fn,{className:"h-5 w-5 text-primary mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold",children:"Informations gnrales"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Nom : ",c.nom]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Objectif : ",c.objectif]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Priode : ",c.dateDebut,c.dateFin&&`  ${c.dateFin}`]})]})]}),r.jsx(Tr,{}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(lz,{className:"h-5 w-5 text-primary mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold",children:"Scnario slectionn"}),E&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-sm text-muted-foreground",children:[E.nom,"  ",E.dureeJours," jours  ",E.nombreEtapes," tapes"]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Taux de succs attendu : ",(E.tauxSuccesAttendu*100).toFixed(0),"%"]})]})]})]}),r.jsx(Tr,{}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Nn,{className:"h-5 w-5 text-primary mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold",children:"Prospects"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:c.importMethod==="csv"?`Import CSV : ${((C=c.csvFile)==null?void 0:C.name)||"Non dfini"}`:`${c.selectedProspectIds.length} prospect(s) slectionn(s)`})]})]}),r.jsx(Tr,{}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(jn,{className:"h-5 w-5 text-primary mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold",children:"Configuration d'envoi"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Jours : ",c.sendDays.map(S=>{var k;return(k=QL.find(I=>I.id===S))==null?void 0:k.label}).join(", ")]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Horaires : ",c.sendHourStart," - ",c.sendHourEnd]})]})]})]}),r.jsxs("div",{className:"bg-primary/10 border border-primary rounded-lg p-4",children:[r.jsx("p",{className:"text-sm font-medium text-primary",children:" Prt  lancer ta campagne ?"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Les envois dmarreront automatiquement selon le scnario choisi."})]})]})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs(re,{variant:"outline",onClick:y,disabled:n===1,"data-testid":"button-previous",children:[r.jsx(ua,{className:"h-4 w-4 mr-2"}),"Prcdent"]}),n<Ac.length?r.jsxs(re,{onClick:N,disabled:!P(),"data-testid":"button-next",children:["Suivant",r.jsx($d,{className:"h-4 w-4 ml-2"})]}):r.jsx(re,{onClick:A,disabled:!P()||g.isPending,"data-testid":"button-submit-campaign",children:g.isPending?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),p?"Enregistrement...":"Lancement..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ql,{className:"h-4 w-4 mr-2"}),p?"Enregistrer les modifications":"Lancer la campagne"]})})]})]})})}const $3e={pagesjaunes:{name:"Pages Jaunes",icon:"",color:"bg-yellow-100 text-yellow-800 border-yellow-300"},118712:{name:"118 712",icon:"",color:"bg-blue-100 text-blue-800 border-blue-300"},118218:{name:"118 218",icon:"",color:"bg-purple-100 text-purple-800 border-purple-300"}};function F3e(){var d,f,h,p,v,j,g;const[e,t]=_.useState(""),[n,s]=_.useState(null),{toast:i}=At(),a=dt({mutationFn:async x=>rt("POST","/api/companies/enrich-by-phone",{phone:x}),onSuccess:x=>{var w;s(x),x.success?i({title:" Enrichissement russi",description:`Entreprise "${(w=x.company)==null?void 0:w.legalName}" trouve`}):i({title:" Aucune entreprise trouve",description:x.message||x.error,variant:"destructive"})},onError:x=>{i({title:" Erreur",description:x.message,variant:"destructive"})}}),o=x=>{if(x.preventDefault(),!e.trim()){i({title:" Tlphone requis",description:"Veuillez saisir un numro de tlphone",variant:"destructive"});return}s(null),a.mutate(e)},l=x=>{if(!x)return null;const w=$3e[x];return w?r.jsxs(ve,{"data-testid":"badge-phone-source",className:`gap-1.5 ${w.color}`,children:[r.jsx("span",{children:w.icon}),r.jsx("span",{children:w.name})]}):null},c=x=>{if(x===void 0)return null;let w="secondary",N="Moyenne";return x>=80?(w="default",N="leve"):x>=50?(w="secondary",N="Moyenne"):(w="destructive",N="Faible"),r.jsxs(ve,{variant:w,className:"gap-1",children:[r.jsx(fn,{className:"w-3 h-3"}),"Confiance : ",N," (",x,"%)"]})};return r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Test Enrichissement Tlphone"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Phase 2.7 CASCADE Multi-Sources : Tlphone  (Pages Jaunes  118 712  118 218)  SIRET  INSEE/Pappers"}),r.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[r.jsxs(ve,{variant:"outline",className:"gap-1",children:[r.jsx(Yt,{className:"w-3 h-3"}),"Taux succs : 65-70%"]}),r.jsxs(ve,{variant:"outline",className:"gap-1",children:[r.jsx(Oo,{className:"w-3 h-3"}),"100% gratuit"]}),r.jsxs(ve,{variant:"outline",className:"gap-1",children:[r.jsx(jn,{className:"w-3 h-3"}),"2-7 secondes"]})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Vn,{className:"w-5 h-5"}),"Recherche par tlphone"]}),r.jsx(jt,{children:"Saisissez un numro de tlphone franais (ex: 01 23 45 67 89 ou 04 74 18 14 05)"})]}),r.jsx(Z,{children:r.jsx("form",{onSubmit:o,className:"space-y-4",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ge,{"data-testid":"input-phone",type:"tel",placeholder:"04 74 18 14 05",value:e,onChange:x=>t(x.target.value),className:"flex-1"}),r.jsx(re,{"data-testid":"button-enrichir",type:"submit",disabled:a.isPending,children:a.isPending?"Recherche...":"Enrichir"})]})})})]}),a.isPending&&r.jsx(U,{children:r.jsx(Z,{className:"pt-6",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3 text-muted-foreground",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary"}),r.jsx("span",{children:"Recherche en cours via fallback multi-sources..."})]}),r.jsxs("div",{className:"text-sm text-muted-foreground pl-8 space-y-1",children:[r.jsx("div",{children:" Tentative 1/3 : Pages Jaunes..."}),r.jsx("div",{children:" Si chec  Tentative 2/3 : 118 712..."}),r.jsx("div",{children:" Si chec  Tentative 3/3 : 118 218..."})]})]})})}),n&&n.success&&n.company&&r.jsxs(U,{"data-testid":"card-result-success",children:[r.jsx(ne,{children:r.jsxs(se,{className:"flex items-center gap-2 text-green-600",children:[r.jsx(Ir,{className:"w-5 h-5"}),"Entreprise trouve"]})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Nom de l'entreprise"}),r.jsx("div",{"data-testid":"text-company-name",className:"text-lg font-semibold",children:n.company.legalName})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[r.jsx(qN,{className:"w-4 h-4"}),"SIRET"]}),r.jsx("div",{"data-testid":"text-siret",className:"font-mono",children:n.company.identifierValue})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[r.jsx(Vn,{className:"w-4 h-4"}),"Tlphone recherch"]}),r.jsx("div",{"data-testid":"text-phone",children:(d=n.metadata)==null?void 0:d.phone})]})]}),n.company.addressLine1&&r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Adresse"}),r.jsxs("div",{className:"text-sm",children:[n.company.addressLine1,n.company.postalCode&&n.company.city&&r.jsxs("span",{children:[", ",n.company.postalCode," ",n.company.city]})]})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("div",{className:"text-sm font-medium mb-3",children:" Source tlphone (Phase 2.7)"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[l(((f=n.metadata)==null?void 0:f.phoneLookupSource)||n.company.phoneLookupSource),c(n.company.phoneLookupConfidence)]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("div",{className:"text-sm font-medium mb-3",children:" Source enrichissement (CASCADE)"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:((h=n.metadata)==null?void 0:h.enrichmentSource)&&r.jsxs(ve,{"data-testid":"badge-enrichment-source",variant:n.metadata.enrichmentSource==="insee"?"default":"secondary",className:"gap-1",children:[r.jsx(_v,{className:"w-3 h-3"}),n.metadata.enrichmentSource.toUpperCase(),n.metadata.enrichmentSource==="insee"&&" (0 - Gratuit !)",n.metadata.enrichmentSource==="pappers"&&" (0,10)"]})})]}),n.metadata&&r.jsxs("div",{className:"border-t pt-4 grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-muted-foreground mb-1 flex items-center gap-1",children:[r.jsx(Oo,{className:"w-3 h-3"}),"Cot total"]}),r.jsx("div",{"data-testid":"text-cost",className:"font-semibold",children:n.metadata.cost!==void 0?`${(n.metadata.cost/100).toFixed(2)}`:"N/A"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-muted-foreground mb-1 flex items-center gap-1",children:[r.jsx(jn,{className:"w-3 h-3"}),"Dure"]}),r.jsx("div",{"data-testid":"text-duration",children:n.metadata.duration?`${(n.metadata.duration/1e3).toFixed(1)}s`:"N/A"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-muted-foreground mb-1",children:" conomie"}),r.jsx("div",{"data-testid":"text-savings",className:"font-semibold text-green-600",children:n.metadata.savingsRealized!==void 0?`${n.metadata.savingsRealized.toFixed(2)}`:"N/A"})]})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-3 text-sm",children:[r.jsx("div",{className:"font-semibold text-green-800 mb-1",children:" Workflow complet"}),r.jsxs("div",{className:"text-green-700 space-y-0.5",children:[r.jsxs("div",{children:["1. Tlphone  ",((p=n.metadata)==null?void 0:p.phoneLookupSource)||n.company.phoneLookupSource," (SIRET trouv)"]}),r.jsxs("div",{children:["2. SIRET  CASCADE ",(j=(v=n.metadata)==null?void 0:v.enrichmentSource)==null?void 0:j.toUpperCase()," (donnes enrichies)"]}),r.jsxs("div",{children:["3. conomies maintenues : ",((g=n.metadata)==null?void 0:g.cost)===0?"100%":"0%"," via INSEE gratuit"]})]})]})]})]}),n&&!n.success&&r.jsx(U,{"data-testid":"card-result-error",className:"border-destructive",children:r.jsx(Z,{className:"pt-6",children:r.jsxs("div",{className:"text-destructive",children:[r.jsxs("div",{className:"font-semibold mb-1",children:[" ",n.message||"Erreur"]}),n.error&&r.jsx("div",{className:"text-sm text-muted-foreground",children:n.error}),r.jsx("div",{className:"mt-3 text-sm text-muted-foreground",children:"Les 3 sources ont t testes (Pages Jaunes  118 712  118 218) sans succs."})]})})}),r.jsxs(U,{children:[r.jsx(ne,{children:r.jsx(se,{className:"text-sm",children:" Phase 2.7 : Fallback Multi-Sources (100% gratuit)"})}),r.jsxs(Z,{className:"text-sm text-muted-foreground space-y-2",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"font-semibold text-foreground",children:"1."}),r.jsxs("span",{children:[r.jsx("strong",{className:"text-foreground",children:"Fallback intelligent"})," : Pages Jaunes  118 712  118 218 (jusqu' trouver le SIRET)"]})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"font-semibold text-foreground",children:"2."}),r.jsxs("span",{children:[r.jsx("strong",{className:"text-foreground",children:"CASCADE enrichissement"})," : INSEE (gratuit) en priorit, fallback Pappers (0,10) si chec"]})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"font-semibold text-foreground",children:"3."}),r.jsxs("span",{children:[r.jsx("strong",{className:"text-foreground",children:"Tracking source"})," : Sauvegarde quelle source a trouv le SIRET (pour analytics)"]})]}),r.jsxs("div",{className:"mt-3 p-3 bg-muted rounded-md space-y-1",children:[r.jsx("div",{children:r.jsx("strong",{children:" Objectif Phase 2.7 :"})}),r.jsxs("div",{className:"pl-4 space-y-0.5",children:[r.jsx("div",{children:" Taux succs : 65-70% (au lieu de 40% avec Pages Jaunes seul)"}),r.jsx("div",{children:" Cot : 100% gratuit (aucune API payante pour tlphone)"}),r.jsx("div",{children:" Temps moyen : 2-7 secondes (selon source trouve)"}),r.jsx("div",{children:" conomies CASCADE maintenues : 80-90% via INSEE"})]})]})]})]})]})})}function z3e({companyId:e,showEstablishments:t=!0}){const{data:n,isLoading:s,error:i}=Ke({queryKey:vl.detail(e),queryFn:()=>d3e(e)}),{data:a,isLoading:o}=Ke({queryKey:vl.establishments(e),queryFn:()=>f3e(e),enabled:!!(n&&n.identifierType==="SIREN"&&t)});if(s)return r.jsx(B3e,{});if(i||!n)return r.jsx(U,{className:"border-destructive",children:r.jsxs(ne,{children:[r.jsxs(se,{className:"flex items-center gap-2 text-destructive",children:[r.jsx(os,{className:"h-5 w-5"}),"Entreprise non trouve"]}),r.jsx(jt,{children:"L'entreprise demande n'existe pas ou vous n'y avez pas accs."})]})});const l=n.identifierType==="SIREN",c=(a==null?void 0:a.establishments)||[];return r.jsxs("div",{className:"space-y-6","data-testid":"company-overview",children:[r.jsxs(U,{children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs(se,{className:"text-2xl flex items-center gap-2",children:[r.jsx(Ir,{className:"h-6 w-6"}),n.legalName]}),r.jsx(jt,{children:l?r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(ve,{variant:"default",children:"SIREN"}),n.identifierValue]}):r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(ve,{variant:"secondary",children:"SIRET"}),n.identifierValue]})})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.procedureCollective==="true"&&r.jsxs(ve,{variant:"destructive",className:"gap-1","data-testid":"badge-juridical-alert",children:[r.jsx(Yr,{className:"h-3 w-3"}),n.procedureType||"Procdure collective"]}),n.enriched==="true"?r.jsxs(ve,{variant:"outline",className:"gap-1",children:[r.jsx(Yt,{className:"h-3 w-3"}),"Enrichie"]}):r.jsxs(ve,{variant:"outline",className:"gap-1",children:[r.jsx(os,{className:"h-3 w-3"}),"Non enrichie"]}),r.jsx(ve,{variant:n.status==="active"?"default":"secondary",children:n.status==="active"?"Active":n.etatAdministratif||n.status})]})]})}),r.jsxs(Z,{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.tradeName&&n.tradeName!==n.legalName&&r.jsx(Pa,{icon:r.jsx(iy,{className:"h-4 w-4"}),label:"Nom commercial",value:n.tradeName}),(n.legalFormLabel||n.legalForm)&&r.jsx(Pa,{icon:r.jsx(qN,{className:"h-4 w-4"}),label:"Forme juridique",value:n.legalFormLabel||n.legalForm}),n.nafCode&&r.jsx(Pa,{icon:r.jsx(qN,{className:"h-4 w-4"}),label:"Code NAF",value:`${n.nafCode}${n.nafLabel?` - ${n.nafLabel}`:""}`}),n.creationDate&&r.jsx(Pa,{icon:r.jsx(xn,{className:"h-4 w-4"}),label:"Date de cration",value:br(new Date(n.creationDate),"dd MMMM yyyy",{locale:jr})}),n.effectif&&r.jsx(Pa,{icon:r.jsx(Nn,{className:"h-4 w-4"}),label:"Effectif",value:n.effectif,"data-testid":"info-effectif"}),n.capitalSocial&&r.jsx(Pa,{icon:r.jsx(Gee,{className:"h-4 w-4"}),label:"Capital social",value:`${n.capitalSocial.toLocaleString("fr-FR")} `,"data-testid":"info-capital"}),n.numeroTVA&&r.jsx(Pa,{icon:r.jsx(hu,{className:"h-4 w-4"}),label:"Numro TVA",value:n.numeroTVA,"data-testid":"info-tva"})]}),n.procedureCollective==="true"&&r.jsxs(r.Fragment,{children:[r.jsx(Tr,{}),r.jsxs("div",{className:"space-y-2 p-4 bg-destructive/10 rounded-lg border border-destructive/20","data-testid":"juridical-alert-details",children:[r.jsxs("h3",{className:"font-semibold flex items-center gap-2 text-destructive",children:[r.jsx(Yr,{className:"h-4 w-4"}),"Alerte Juridique"]}),r.jsxs("div",{className:"text-sm space-y-1",children:[n.procedureTypeLibelle&&r.jsx("p",{className:"font-medium",children:n.procedureTypeLibelle}),n.procedureDate&&r.jsxs("p",{className:"text-muted-foreground",children:["Date : ",br(new Date(n.procedureDate),"dd MMMM yyyy",{locale:jr})]}),n.tribunalCommerce&&r.jsxs("p",{className:"text-muted-foreground",children:["Tribunal : ",n.tribunalCommerce]})]})]})]}),n.etatAdministratif==="Cess"&&n.dateCessation&&r.jsxs(r.Fragment,{children:[r.jsx(Tr,{}),r.jsxs("div",{className:"space-y-2 p-4 bg-muted/50 rounded-lg border","data-testid":"cessation-notice",children:[r.jsxs("h3",{className:"font-semibold flex items-center gap-2 text-muted-foreground",children:[r.jsx(os,{className:"h-4 w-4"}),"Entreprise Cesse"]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Date de cessation : ",br(new Date(n.dateCessation),"dd MMMM yyyy",{locale:jr})]})]})]}),n.addressLine1&&r.jsxs(r.Fragment,{children:[r.jsx(Tr,{}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[r.jsx(Jr,{className:"h-4 w-4"}),"Adresse"]}),r.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[n.complementAddress&&r.jsx("p",{className:"italic",children:n.complementAddress}),r.jsx("p",{children:n.addressLine1}),n.addressLine2&&r.jsx("p",{children:n.addressLine2}),r.jsxs("p",{children:[n.postalCode," ",n.city,n.commune&&n.commune!==n.city&&` (${n.commune})`]}),n.department&&r.jsx("p",{children:n.department}),n.region&&r.jsx("p",{className:"font-medium",children:n.region}),n.country&&n.country!=="France"&&r.jsx("p",{children:n.country}),n.latitude&&n.longitude&&r.jsx("p",{className:"text-xs",children:r.jsx("a",{href:`https://www.google.com/maps?q=${n.latitude},${n.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline","data-testid":"link-google-maps",children:"Voir sur Google Maps"})})]})]})]}),(n.phone||n.email||n.website)&&r.jsxs(r.Fragment,{children:[r.jsx(Tr,{}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.phone&&r.jsx(Pa,{icon:r.jsx(Vn,{className:"h-4 w-4"}),label:"Tlphone",value:n.phone}),n.email&&r.jsx(Pa,{icon:r.jsx(da,{className:"h-4 w-4"}),label:"Email",value:n.email}),n.website&&r.jsx(Pa,{icon:r.jsx(uz,{className:"h-4 w-4"}),label:"Site web",value:r.jsx("a",{href:n.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:n.website})})]})]}),n.enriched==="true"&&n.enrichmentDate&&r.jsxs(r.Fragment,{children:[r.jsx(Tr,{}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Enrichie le ",br(new Date(n.enrichmentDate),"dd MMMM yyyy  HH:mm",{locale:jr}),n.enrichmentSource&&` via ${n.enrichmentSource}`]})]})]})]}),l&&t&&r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(iy,{className:"h-5 w-5"}),"tablissements (",c.length,")"]}),r.jsx(jt,{children:"Liste des tablissements (SIRET) de cette entreprise"})]}),r.jsx(Z,{children:o?r.jsxs("div",{className:"space-y-3",children:[r.jsx(sr,{className:"h-20 w-full"}),r.jsx(sr,{className:"h-20 w-full"})]}):c.length===0?r.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Aucun tablissement trouv"}):r.jsx("div",{className:"space-y-3",children:c.map(d=>r.jsx(U,{className:"border-muted",children:r.jsx(Z,{className:"pt-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:d.legalName}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["SIRET: ",d.identifierValue]})]}),r.jsx(ve,{variant:d.status==="active"?"default":"secondary",children:d.status})]}),d.addressLine1&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.addressLine1,", ",d.postalCode," ",d.city]})]})})},d.id))})})]})]})}function Pa({icon:e,label:t,value:n,...s}){return r.jsxs("div",{className:"space-y-1",...s,children:[r.jsxs("p",{className:"text-sm font-medium flex items-center gap-2 text-muted-foreground",children:[e,t]}),r.jsx("p",{className:"text-sm",children:n})]})}function B3e(){return r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(sr,{className:"h-8 w-2/3"}),r.jsx(sr,{className:"h-4 w-1/3 mt-2"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(sr,{className:"h-16 w-full"}),r.jsx(sr,{className:"h-16 w-full"})]}),r.jsx(Tr,{}),r.jsx(sr,{className:"h-24 w-full"})]})]})}function V3e(){const[e,t]=_.useState(""),[n,s]=_.useState(null),{toast:i}=At(),a=dt({mutationFn:async l=>rt("POST","/api/companies/enrich",{identifier:l,triggerType:"manual"}),onSuccess:l=>{l.success&&l.company?(s(l.company),i({title:" Enrichissement russi",description:`Entreprise "${l.company.legalName}" enrichie avec succs`})):i({title:" chec enrichissement",description:l.message||l.error||"Entreprise non trouve",variant:"destructive"})},onError:l=>{i({title:" Erreur",description:l.message,variant:"destructive"})}}),o=l=>{l.preventDefault();const c=e.replace(/[\s\-\.]/g,"");if(!/^\d{9}$|^\d{14}$/.test(c)){i({title:" Format invalide",description:"Veuillez saisir un SIREN (9 chiffres) ou SIRET (14 chiffres)",variant:"destructive"});return}s(null),a.mutate(c)};return r.jsxs("div",{className:"container mx-auto py-8 space-y-8",children:[r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Test Enrichissement CASCADE - Phase 2.8"}),r.jsx(jt,{children:"Testez l'enrichissement complet avec alertes juridiques, coordonnes, adresse GPS, effectif, capital, TVA"})]}),r.jsx(Z,{children:r.jsxs("form",{onSubmit:o,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"siret",children:"SIRET ou SIREN"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ge,{id:"siret",type:"text",placeholder:"552032534 (SIREN) ou 55203253400120 (SIRET)",value:e,onChange:l=>t(l.target.value),disabled:a.isPending,"data-testid":"input-siret",className:"flex-1"}),r.jsx(re,{type:"submit",disabled:a.isPending,"data-testid":"button-enrich",children:a.isPending?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),"Enrichissement..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ls,{className:"mr-2 h-4 w-4"}),"Enrichir"]})})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Format : SIREN (9 chiffres) ou SIRET (14 chiffres)"})]}),r.jsxs("div",{className:"rounded-lg bg-muted/50 p-4 space-y-2 text-sm",children:[r.jsx("p",{className:"font-medium",children:"Exemples de test :"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[r.jsxs("li",{children:[r.jsx("code",{children:"552032534"})," - Carrefour France (SIREN)"]}),r.jsxs("li",{children:[r.jsx("code",{children:"55203253400120"})," - Carrefour France (SIRET sige)"]}),r.jsxs("li",{children:[r.jsx("code",{children:"732829320"})," - Tesla France (SIREN)"]})]})]})]})})]}),n&&r.jsx(z3e,{companyId:n.id,showEstablishments:!0})]})}function q3e({prospectId:e,prospectName:t,prospectPhone:n,onCallStarted:s}){const[i,a]=_.useState(!1),[o,l]=_.useState(null),{toast:c}=At(),d=p=>{const v=p.replace(/\s/g,"");return v.startsWith("+")?v:v.startsWith("0")?"+33"+v.substring(1):v.startsWith("33")?"+"+v:"+33"+v},f=async()=>{try{if(a(!0),!n)throw new Error("Numro de tlphone requis");const p=d(n),v=await rt("POST","/api/phone/initiate",{prospectId:e,phoneNumber:p});v.success&&v.data&&(l({id:v.data.callId,status:v.data.status}),s==null||s(v.data.callId),c({title:"Appel initi",description:`Appel en cours vers ${t||"le prospect"}`}))}catch(p){c({title:"Erreur",description:p.message||"Impossible d'initier l'appel",variant:"destructive"})}finally{a(!1)}},h=async()=>{if(o)try{await rt("POST",`/api/phone/calls/${o.id}/end`),l(null),c({title:"Appel termin",description:"L'appel a t termin avec succs"})}catch(p){c({title:"Erreur",description:p.message||"Impossible de terminer l'appel",variant:"destructive"})}};return r.jsxs(U,{"data-testid":"card-phone-dialer",children:[r.jsxs(ne,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Vn,{className:"w-5 h-5 text-primary"}),"Tlphonie"]}),r.jsx(jt,{children:"Initier un appel assist par IA"})]}),r.jsxs(Z,{className:"space-y-4",children:[t&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg","data-testid":"prospect-info",children:[r.jsx(Ri,{className:"w-4 h-4 text-muted-foreground"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-sm",children:t}),n&&r.jsx("p",{className:"text-xs text-muted-foreground",children:n})]})]}),o?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/5 rounded-lg border border-primary/20",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm font-medium",children:"Appel en cours"})]}),r.jsx(ve,{variant:"secondary","data-testid":"badge-call-status",children:o.status})]}),r.jsxs(re,{onClick:h,variant:"destructive",className:"w-full","data-testid":"button-end-call",children:[r.jsx(mte,{className:"w-4 h-4 mr-2"}),"Terminer l'appel"]})]}):r.jsx(re,{onClick:f,disabled:i||!n,className:"w-full","data-testid":"button-initiate-call",children:i?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"w-4 h-4 mr-2 animate-spin"}),"Connexion..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Dmarrer l'appel"]})}),!n&&r.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Numro de tlphone requis pour initier un appel"})]})]})}function U3e({prospectId:e}){const{data:t,isLoading:n}=Ke({queryKey:e?["/api/phone/calls",{prospectId:e}]:["/api/phone/calls"]}),s=l=>{switch(l){case"completed":return r.jsx(ti,{className:"w-4 h-4 text-green-600"});case"failed":case"busy":case"no-answer":return r.jsx(os,{className:"w-4 h-4 text-red-600"});case"in-progress":case"ringing":return r.jsx(Vn,{className:"w-4 h-4 text-blue-600 animate-pulse"});default:return r.jsx(jn,{className:"w-4 h-4 text-muted-foreground"})}},i=l=>({queued:"En attente",ringing:"Sonnerie","in-progress":"En cours",completed:"Termin",failed:"chou",busy:"Occup","no-answer":"Pas de rponse"})[l]||l,a=l=>l==="completed"?"default":["failed","busy","no-answer"].includes(l)?"destructive":"secondary";if(n)return r.jsx(H3e,{});const o=(t==null?void 0:t.calls)||[];return r.jsxs(U,{"data-testid":"card-call-history",children:[r.jsxs(ne,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(ote,{className:"w-5 h-5 text-primary"}),"Historique d'appels"]}),r.jsxs(jt,{children:[o.length," appel",o.length>1?"s":""," enregistr",o.length>1?"s":""]})]}),r.jsx(Z,{children:o.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground","data-testid":"empty-state",children:[r.jsx(Vn,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),r.jsx("p",{children:"Aucun appel enregistr"})]}):r.jsx(Ul,{className:"h-[400px]",children:r.jsx("div",{className:"space-y-3",children:o.map(l=>r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border hover-elevate active-elevate-2 transition-colors","data-testid":`call-item-${l.id}`,children:[r.jsx("div",{className:"mt-1",children:s(l.status)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[r.jsx("p",{className:"font-medium text-sm truncate",children:l.prospectName||l.prospectPhone||"Prospect inconnu"}),r.jsx(ve,{variant:a(l.status),className:"text-xs",children:i(l.status)})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[r.jsx("span",{children:PP(new Date(l.createdAt),{addSuffix:!0,locale:jr})}),l.duration!==null&&l.duration>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(jn,{className:"w-3 h-3"}),Math.floor(l.duration/60),":",(l.duration%60).toString().padStart(2,"0")]})]}),l.transcription&&r.jsx("p",{className:"text-xs text-muted-foreground mt-2 line-clamp-2",children:l.transcription})]})]},l.id))})})})]})}function H3e(){return r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(sr,{className:"h-6 w-40"}),r.jsx(sr,{className:"h-4 w-32"})]}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-3",children:[1,2,3].map(e=>r.jsxs("div",{className:"flex items-start gap-3 p-3",children:[r.jsx(sr,{className:"w-4 h-4 rounded-full"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx(sr,{className:"h-4 w-3/4"}),r.jsx(sr,{className:"h-3 w-1/2"})]})]},e))})})]})}function W3e({prospectId:e}){const[t,n]=_.useState(!1),[s,i]=_.useState("tablir premier contact et qualifier le besoin"),{toast:a}=At(),{data:o,isLoading:l}=Ke({queryKey:[`/api/phone/scripts/${e}`]}),c=async()=>{if(s.length<10){a({title:"Objectif trop court",description:"L'objectif doit contenir au moins 10 caractres",variant:"destructive"});return}try{n(!0),await rt("POST","/api/phone/scripts/generate",{prospectId:e,callObjective:s}),await et.invalidateQueries({queryKey:[`/api/phone/scripts/${e}`]}),a({title:"Script gnr",description:"Le script d'appel a t cr avec succs"})}catch(f){a({title:"Erreur",description:f.message||"Impossible de gnrer le script",variant:"destructive"})}finally{n(!1)}};if(l)return r.jsx(K3e,{});const d=o!=null&&o.success?o.data:void 0;return r.jsxs(U,{"data-testid":"card-script-viewer",children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(hu,{className:"w-5 h-5 text-primary"}),"Script d'appel IA"]}),r.jsx(jt,{children:"Argumentaire personnalis gnr par Claude"})]}),r.jsxs(re,{onClick:c,disabled:t,variant:"outline",size:"sm","data-testid":"button-generate-script",children:[t?r.jsx(On,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(Da,{className:"w-4 h-4 mr-2"}),d?"Rgnrer":"Gnrer"]})]})}),r.jsxs(Z,{children:[r.jsxs("div",{className:"mb-4 space-y-2",children:[r.jsx(Ce,{htmlFor:"callObjective",children:"Objectif de l'appel"}),r.jsx(ge,{id:"callObjective",value:s,onChange:f=>i(f.target.value),placeholder:"Ex: tablir premier contact et qualifier le besoin",disabled:t,"data-testid":"input-call-objective"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum 10 caractres pour gnrer un script personnalis"})]}),d?r.jsxs(fi,{defaultValue:"script",className:"w-full",children:[r.jsxs(qs,{className:"grid w-full grid-cols-3",children:[r.jsx(Ht,{value:"script","data-testid":"tab-script",children:"Script"}),r.jsx(Ht,{value:"points","data-testid":"tab-points",children:"Points cls"}),r.jsx(Ht,{value:"objections","data-testid":"tab-objections",children:"Objections"})]}),r.jsx(Zt,{value:"script",className:"mt-4",children:r.jsx(Ul,{className:"h-[400px]",children:r.jsx("div",{className:"prose prose-sm max-w-none","data-testid":"script-content",children:r.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:d.scriptContent})})})}),r.jsx(Zt,{value:"points",className:"mt-4",children:r.jsx(Ul,{className:"h-[400px]",children:r.jsxs("div",{className:"space-y-2 text-sm","data-testid":"key-points",children:[r.jsxs("p",{className:"font-medium",children:["Objectif : ",d.callObjective]}),d.discProfile&&r.jsxs("p",{className:"text-muted-foreground",children:["Profil DISC : ",d.discProfile]})]})})}),r.jsx(Zt,{value:"objections",className:"mt-4",children:r.jsx(Ul,{className:"h-[400px]",children:r.jsx("div",{className:"text-sm text-muted-foreground p-4","data-testid":"objections-list",children:"Les rponses aux objections sont intgres dans le script d'appel"})})})]}):r.jsxs("div",{className:"text-center py-12","data-testid":"empty-state",children:[r.jsx(ap,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground/20"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Aucun script gnr pour ce prospect"}),r.jsx(re,{onClick:c,disabled:t,children:t?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"w-4 h-4 mr-2 animate-spin"}),"Gnration en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ap,{className:"w-4 h-4 mr-2"}),"Gnrer un script"]})})]})]})]})}function K3e(){return r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(sr,{className:"h-6 w-48"}),r.jsx(sr,{className:"h-4 w-64"})]}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsx(sr,{className:"h-8 w-full"}),r.jsx(sr,{className:"h-64 w-full"})]})})]})}function G3e(){const[e,t]=_.useState(null),{data:n}=Ke({queryKey:["/api/crm/prospects"]}),s=n||[],i=s.find(a=>a.id===e);return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("div",{className:"border-b bg-card",children:r.jsx("div",{className:"container mx-auto px-4 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[r.jsx(Vn,{className:"w-8 h-8 text-primary"}),"Module Phoning"]}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Appels assists par intelligence artificielle"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(mr,{showHomeButton:!0}),r.jsxs(ve,{variant:"secondary",className:"flex items-center gap-2",children:[r.jsx(wn,{className:"w-4 h-4"}),s.filter(a=>a.telephone).length," prospects contactables"]})]})]})})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs(U,{className:"mb-6","data-testid":"card-prospect-selector",children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Slectionner un prospect"}),r.jsx(jt,{children:"Choisissez le prospect  contacter pour gnrer un script personnalis"})]}),r.jsx(Z,{children:r.jsxs(gt,{value:e||"",onValueChange:a=>t(a),children:[r.jsx(mt,{"data-testid":"select-prospect",children:r.jsx(xt,{placeholder:"Choisir un prospect..."})}),r.jsx(pt,{children:s.filter(a=>a.telephone).map(a=>r.jsx(Y,{value:a.id,"data-testid":`prospect-option-${a.id}`,children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("span",{className:"font-medium",children:[a.prenom," ",a.nom]}),(a.raisonSociale||a.enseigneCommerciale)&&r.jsx("span",{className:"text-xs text-muted-foreground",children:a.raisonSociale||a.enseigneCommerciale}),r.jsx("span",{className:"text-xs text-muted-foreground",children:a.telephone})]})},a.id))})]})})]}),e?r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsx(q3e,{prospectId:e,prospectName:i?`${i.prenom||""} ${i.nom}`.trim():void 0,prospectPhone:i==null?void 0:i.telephone}),r.jsx(U3e,{prospectId:e})]}),r.jsx("div",{children:r.jsx(W3e,{prospectId:e})})]}):r.jsxs("div",{className:"text-center py-20","data-testid":"empty-state-no-selection",children:[r.jsx(Vn,{className:"w-20 h-20 mx-auto mb-6 text-muted-foreground/20"}),r.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Aucun prospect slectionn"}),r.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"Slectionnez un prospect dans la liste ci-dessus pour dmarrer un appel et accder au script personnalis gnr par IA."})]})]})]})}const Z3e={completed:"#10b981",failed:"#ef4444",busy:"#f59e0b","no-answer":"#f59e0b","in-progress":"#3b82f6",queued:"#6b7280"};function Q3e(){const{data:e,isLoading:t}=Ke({queryKey:["/api/phone/analytics"]});if(t)return r.jsx(Y3e,{});const n=e==null?void 0:e.analytics;if(!n)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("p",{className:"text-muted-foreground",children:"Aucune donne disponible"})});const{summary:s,callsByDay:i,callsByStatus:a,callsByUser:o}=n;return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("div",{className:"border-b bg-card",children:r.jsx("div",{className:"container mx-auto px-4 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[r.jsx(Zl,{className:"w-8 h-8 text-primary"}),"Analytics Phoning"]}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Statistiques et performances des appels"})]}),r.jsx(mr,{showHomeButton:!0})]})})}),r.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(U,{"data-testid":"card-total-calls",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Appels"}),r.jsx(Vn,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:s.totalCalls}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.completedCalls," termins"]})]})]}),r.jsxs(U,{"data-testid":"card-conversion-rate",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Taux de conversion"}),r.jsx(wn,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[s.conversionRate.toFixed(1),"%"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Appels complts / Total"})]})]}),r.jsxs(U,{"data-testid":"card-avg-duration",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Dure moyenne"}),r.jsx(jn,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[Math.floor(s.averageDuration/60),":",(s.averageDuration%60).toString().padStart(2,"0")]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Minutes par appel"})]})]}),r.jsxs(U,{"data-testid":"card-active-users",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Commerciaux actifs"}),r.jsx(Nn,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:o.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Utilisateurs avec appels"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(U,{"data-testid":"chart-calls-by-day",children:[r.jsxs(ne,{children:[r.jsx(se,{children:"volution des appels"}),r.jsx(jt,{children:"Nombre d'appels par jour"})]}),r.jsx(Z,{children:r.jsx(Ua,{width:"100%",height:300,children:r.jsxs(PH,{data:i,children:[r.jsx(Qo,{strokeDasharray:"3 3"}),r.jsx(Di,{dataKey:"date"}),r.jsx(oi,{}),r.jsx(Ar,{}),r.jsx(Bs,{}),r.jsx(_u,{type:"monotone",dataKey:"calls",stroke:"hsl(var(--primary))",strokeWidth:2,name:"Total appels"}),r.jsx(_u,{type:"monotone",dataKey:"completed",stroke:"#10b981",strokeWidth:2,name:"Complts"})]})})})]}),r.jsxs(U,{"data-testid":"chart-calls-by-status",children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Rpartition par statut"}),r.jsx(jt,{children:"Distribution des rsultats d'appels"})]}),r.jsx(Z,{children:r.jsx(Ua,{width:"100%",height:300,children:r.jsxs(AH,{children:[r.jsx(oo,{data:a,cx:"50%",cy:"50%",labelLine:!1,label:({status:l,percentage:c})=>`${l} (${c.toFixed(1)}%)`,outerRadius:100,fill:"#8884d8",dataKey:"count",children:a.map(l=>r.jsx(_h,{fill:Z3e[l.status]||"#6b7280"},l.status))}),r.jsx(Ar,{})]})})})]})]}),r.jsxs(U,{"data-testid":"chart-performance-by-user",children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Performance par commercial"}),r.jsx(jt,{children:"Nombre d'appels et dure moyenne"})]}),r.jsx(Z,{children:r.jsx(Ua,{width:"100%",height:400,children:r.jsxs(Ph,{data:o,children:[r.jsx(Qo,{strokeDasharray:"3 3"}),r.jsx(Di,{dataKey:"userName"}),r.jsx(oi,{yAxisId:"left"}),r.jsx(oi,{yAxisId:"right",orientation:"right"}),r.jsx(Ar,{}),r.jsx(Bs,{}),r.jsx(us,{yAxisId:"left",dataKey:"calls",fill:"hsl(var(--primary))",name:"Nombre d'appels"}),r.jsx(us,{yAxisId:"right",dataKey:"averageDuration",fill:"#10b981",name:"Dure moyenne (s)"})]})})})]}),o.length>0&&r.jsxs(U,{"data-testid":"card-top-performers",children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Top Performers"}),r.jsx(jt,{children:"Classement des commerciaux"})]}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-3",children:o.sort((l,c)=>c.calls-l.calls).slice(0,5).map((l,c)=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border","data-testid":`performer-${c+1}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(ve,{variant:c===0?"default":"secondary",children:["#",c+1]}),r.jsx("span",{className:"font-medium",children:l.userName})]}),r.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Vn,{className:"w-4 h-4"}),l.calls," appels"]}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(jn,{className:"w-4 h-4"}),Math.floor(l.averageDuration/60),":",(l.averageDuration%60).toString().padStart(2,"0")]})]})]},l.userId))})})]})]})]})}function Y3e(){return r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsx(sr,{className:"h-32 w-full"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>r.jsx(sr,{className:"h-32 w-full"},e))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(sr,{className:"h-[400px] w-full"}),r.jsx(sr,{className:"h-[400px] w-full"})]})]})}function X3e(){var v,j,g;const[e,t]=_.useState("france"),[n,s]=_.useState(!1),{toast:i}=At(),{data:a,isLoading:o}=Ke({queryKey:["/api/admin/phone/configurations"]}),{data:l}=Ke({queryKey:["/api/admin/phone/budget-status"]}),c=(a==null?void 0:a.configs)||[],d=c.find(x=>x.entity===e),f=(l==null?void 0:l.budgets)||[];f.find(x=>x.entity===e);const h=async()=>{try{s(!0);const x=await rt("POST",`/api/admin/phone/test-connection/${e}`);await et.invalidateQueries({queryKey:["/api/admin/phone/configurations"]}),i({title:x.success?"Test russi":"Test chou",description:x.message,variant:x.success?"default":"destructive"})}catch(x){i({title:"Erreur de test",description:x.message||"Impossible de tester la connexion",variant:"destructive"})}finally{s(!1)}},p=async x=>{try{const w={entity:e,twilioAccountSid:x.get("accountSid"),twilioAuthToken:x.get("authToken"),twilioPhoneNumber:x.get("twilioPhoneNumber"),isActive:x.get("isActive")==="true"},N=d?"PUT":"POST",y=d?`/api/admin/phone/configurations/${e}`:"/api/admin/phone/configurations";await rt(N,y,{...w,entity:e}),await et.invalidateQueries({queryKey:["/api/admin/phone/configurations"]}),i({title:"Configuration enregistre",description:`Configuration Twilio pour ${e} mise  jour`})}catch(w){i({title:"Erreur",description:w.message||"Impossible d'enregistrer la configuration",variant:"destructive"})}};return o?r.jsx("div",{className:"container mx-auto p-6",children:r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx(On,{className:"w-8 h-8 animate-spin text-muted-foreground"})})}):r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[r.jsx(jg,{className:"w-8 h-8 text-primary"}),"Configuration Twilio"]}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Grer les connexions Twilio par entit"})]}),r.jsx(mr,{showHomeButton:!0})]}),f.length>0&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4","data-testid":"budget-overview",children:f.map(x=>r.jsxs(U,{children:[r.jsx(ne,{className:"pb-3",children:r.jsx(se,{className:"text-base capitalize",children:x.entity})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(nte,{className:"w-4 h-4 text-muted-foreground"}),r.jsxs("span",{className:"text-2xl font-bold",children:[x.consumed.toFixed(2),""]})]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Budget: ",x.monthlyBudget,"/mois"]}),r.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full transition-all ${x.percentage>90?"bg-destructive":x.percentage>70?"bg-orange-500":"bg-primary"}`,style:{width:`${Math.min(x.percentage,100)}%`}})}),r.jsxs("div",{className:"text-xs text-right text-muted-foreground",children:[x.percentage.toFixed(1),"%"]})]})})]},x.entity))}),r.jsxs(fi,{value:e,onValueChange:x=>t(x),children:[r.jsxs(qs,{className:"grid w-full grid-cols-3",children:[r.jsxs(Ht,{value:"france","data-testid":"tab-france",children:["France",((v=c.find(x=>x.entity==="france"))==null?void 0:v.isActive)&&r.jsx(ti,{className:"w-3 h-3 ml-2 text-green-600"})]}),r.jsxs(Ht,{value:"luxembourg","data-testid":"tab-luxembourg",children:["Luxembourg",((j=c.find(x=>x.entity==="luxembourg"))==null?void 0:j.isActive)&&r.jsx(ti,{className:"w-3 h-3 ml-2 text-green-600"})]}),r.jsxs(Ht,{value:"belgique","data-testid":"tab-belgique",children:["Belgique",((g=c.find(x=>x.entity==="belgique"))==null?void 0:g.isActive)&&r.jsx(ti,{className:"w-3 h-3 ml-2 text-green-600"})]})]}),["france","luxembourg","belgique"].map(x=>r.jsx(Zt,{value:x,className:"space-y-4",children:r.jsxs(U,{"data-testid":`config-card-${x}`,children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(se,{children:["Configuration Twilio - ",x]}),r.jsx(jt,{children:"Credentials et paramtres de connexion"})]}),d&&r.jsx(ve,{variant:d.isActive?"default":"secondary",className:"flex items-center gap-2",children:d.isActive?r.jsxs(r.Fragment,{children:[r.jsx(ti,{className:"w-3 h-3"}),"Actif"]}):r.jsxs(r.Fragment,{children:[r.jsx(os,{className:"w-3 h-3"}),"Inactif"]})})]})}),r.jsx(Z,{children:r.jsxs("form",{onSubmit:w=>{w.preventDefault(),p(new FormData(w.currentTarget))},className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"accountSid",children:"Account SID"}),r.jsx(ge,{id:"accountSid",name:"accountSid",placeholder:"ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",defaultValue:(d==null?void 0:d.accountSid)||"",required:!0,"data-testid":"input-account-sid"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"authToken",children:"Auth Token"}),r.jsx(ge,{id:"authToken",name:"authToken",type:"password",placeholder:"********************************",required:!0,"data-testid":"input-auth-token"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Le token sera chiffr en AES-256-CBC"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{htmlFor:"twilioPhoneNumber",children:"Numro Twilio"}),r.jsx(ge,{id:"twilioPhoneNumber",name:"twilioPhoneNumber",placeholder:"+33...",defaultValue:(d==null?void 0:d.twilioPhoneNumber)||"",required:!0,"data-testid":"input-phone-number"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",value:"true",defaultChecked:d==null?void 0:d.isActive,className:"rounded","data-testid":"checkbox-is-active"}),r.jsx(Ce,{htmlFor:"isActive",className:"cursor-pointer",children:"Activer cette configuration"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(re,{type:"submit","data-testid":"button-save-config",children:"Enregistrer"}),r.jsx(re,{type:"button",variant:"outline",onClick:h,disabled:n||!d,"data-testid":"button-test-connection",children:n?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"w-4 h-4 mr-2 animate-spin"}),"Test en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(xte,{className:"w-4 h-4 mr-2"}),"Tester la connexion"]})})]}),(d==null?void 0:d.lastTestAt)&&r.jsx("div",{className:"pt-4 border-t",children:r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dernier test:"," ",new Date(d.lastTestAt).toLocaleString("fr-FR")," -"," ",d.lastTestSuccess?r.jsx("span",{className:"text-green-600 font-medium",children:"Succs"}):r.jsx("span",{className:"text-destructive font-medium",children:"chec"})]})})]})})]})},x))]})]})}const YL=sl({entity:ir(["france","luxembourg","belgique"],{required_error:"Entit requise"}),agencyLocation:Ue().min(2,"Code agence trop court (min 2 caractres)").max(50,"Code agence trop long (max 50 caractres)"),agencyName:Ue().min(3,"Nom agence trop court (min 3 caractres)").max(100,"Nom agence trop long (max 100 caractres)"),displayName:Ue().min(3,"Nom affichage trop court (min 3 caractres)").max(100,"Nom affichage trop long (max 100 caractres)"),twilioAccountSid:Ue().min(34,"Account SID invalide (34 caractres attendus)").startsWith("AC","Account SID doit commencer par AC"),twilioAuthToken:Ue().min(32,"Auth Token trop court (min 32 caractres)"),twilioPhoneNumber:Ue().regex(/^\+\d{10,15}$/,"Format numro invalide (ex: +33612345678)"),twilioTwimlAppSid:Ue().optional().refine(e=>!e||e.startsWith("AP"),"TwiML App SID doit commencer par AP"),coverageArea:Ue().min(1,"Zone de couverture requise (ex: 75, 92, 93)"),isBackup:Rs().default(!1),isActive:Rs().default(!0)});function J3e({open:e,onClose:t,onSuccess:n}){const[s,i]=_.useState(!1),{toast:a}=At(),o=Du({resolver:$u(YL),defaultValues:{entity:"france",agencyLocation:"",agencyName:"",displayName:"",twilioAccountSid:"",twilioAuthToken:"",twilioPhoneNumber:"",twilioTwimlAppSid:"",coverageArea:"",isBackup:!1,isActive:!0}}),l=async()=>{i(!0);try{const d=o.getValues();if(!(await YL.pick({twilioAccountSid:!0,twilioAuthToken:!0,twilioPhoneNumber:!0}).safeParseAsync({twilioAccountSid:d.twilioAccountSid,twilioAuthToken:d.twilioAuthToken,twilioPhoneNumber:d.twilioPhoneNumber})).success){a({title:"Erreur de validation",description:"Vrifie les credentials Twilio avant de tester",variant:"destructive"});return}await rt("POST","/api/admin/phone/test-connection",{twilioAccountSid:d.twilioAccountSid,twilioAuthToken:d.twilioAuthToken,twilioPhoneNumber:d.twilioPhoneNumber}),a({title:"Succs",description:"Connexion Twilio valide avec succs"})}catch(d){console.error("Test connection failed:",d),a({title:"chec du test",description:d.message||"Impossible de valider les credentials Twilio",variant:"destructive"})}finally{i(!1)}},c=async d=>{try{const f={...d,coverageArea:d.coverageArea.split(",").map(h=>h.trim()).filter(Boolean)};await rt("POST","/api/admin/phone/configurations/create-dynamic",f),a({title:"Succs",description:"Configuration cre avec succs"}),o.reset(),n()}catch(f){console.error("Error creating config:",f),a({title:"Erreur",description:f.message||"Erreur lors de la cration",variant:"destructive"})}};return r.jsx(Wn,{open:e,onOpenChange:d=>!d&&t(),children:r.jsxs(Fn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(zn,{children:r.jsx(Bn,{children:" Ajouter numro Twilio"})}),r.jsx(Fu,{...o,children:r.jsxs("form",{onSubmit:o.handleSubmit(c),className:"space-y-4",children:[r.jsx(we,{control:o.control,name:"entity",render:({field:d})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Entit *"}),r.jsxs(gt,{onValueChange:d.onChange,defaultValue:d.value,"data-testid":"select-entity",children:[r.jsx(Se,{children:r.jsx(mt,{children:r.jsx(xt,{placeholder:"Slectionne une entit"})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"france",children:" France"}),r.jsx(Y,{value:"luxembourg",children:" Luxembourg"}),r.jsx(Y,{value:"belgique",children:" Belgique"})]})]}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"agencyLocation",render:({field:d})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Code Agence *"}),r.jsx(Se,{children:r.jsx(ge,{...d,placeholder:"ex: paris-75001","data-testid":"input-agency-location"})}),r.jsx(rr,{children:"Identifiant unique de l'agence"}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"agencyName",render:({field:d})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Nom Agence *"}),r.jsx(Se,{children:r.jsx(ge,{...d,placeholder:"ex: ADS GROUP Paris Opra","data-testid":"input-agency-name"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"displayName",render:({field:d})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Nom Affichage *"}),r.jsx(Se,{children:r.jsx(ge,{...d,placeholder:"ex: Config Principal Paris","data-testid":"input-display-name"})}),r.jsx(ke,{})]})}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Credentials Twilio"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(we,{control:o.control,name:"twilioAccountSid",render:({field:d})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Account SID *"}),r.jsx(Se,{children:r.jsx(ge,{...d,placeholder:"ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","data-testid":"input-account-sid"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"twilioAuthToken",render:({field:d})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Auth Token *"}),r.jsx(Se,{children:r.jsx(ge,{...d,type:"password",placeholder:"","data-testid":"input-auth-token"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"twilioPhoneNumber",render:({field:d})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Numro de tlphone *"}),r.jsx(Se,{children:r.jsx(ge,{...d,placeholder:"+33612345678","data-testid":"input-phone-number"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:o.control,name:"twilioTwimlAppSid",render:({field:d})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"TwiML App SID (optionnel)"}),r.jsx(Se,{children:r.jsx(ge,{...d,placeholder:"APxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","data-testid":"input-twiml-app-sid"})}),r.jsx(ke,{})]})})]}),r.jsx(re,{type:"button",variant:"outline",onClick:l,disabled:s,className:"mt-4","data-testid":"button-test-connection",children:s?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),"Test en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(yte,{className:"mr-2 h-4 w-4"}),"Tester connexion"]})})]}),r.jsx(we,{control:o.control,name:"coverageArea",render:({field:d})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Zone de couverture (dpartements) *"}),r.jsx(Se,{children:r.jsx(ge,{...d,placeholder:"ex: 75, 92, 93","data-testid":"input-coverage-area"})}),r.jsx(rr,{children:"Spars par des virgules"}),r.jsx(ke,{})]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(we,{control:o.control,name:"isBackup",render:({field:d})=>r.jsxs(_e,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(Se,{children:r.jsx(Zr,{checked:d.value,onCheckedChange:d.onChange,"data-testid":"checkbox-is-backup"})}),r.jsx("div",{className:"space-y-1 leading-none",children:r.jsx(Ne,{children:"Numro de backup (inactif par dfaut)"})})]})}),r.jsx(we,{control:o.control,name:"isActive",render:({field:d})=>r.jsxs(_e,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(Se,{children:r.jsx(Zr,{checked:d.value,onCheckedChange:d.onChange,"data-testid":"checkbox-is-active"})}),r.jsx("div",{className:"space-y-1 leading-none",children:r.jsx(Ne,{children:"Activer immdiatement"})})]})})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(re,{type:"button",variant:"outline",onClick:t,"data-testid":"button-cancel",children:"Annuler"}),r.jsx(re,{type:"submit",disabled:o.formState.isSubmitting,"data-testid":"button-submit",children:o.formState.isSubmitting?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),"Enregistrement..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pte,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})})]})]})})]})})}const e5e=({config:e,onClose:t})=>{const{data:n,isLoading:s}=Ke({queryKey:["/api/admin/phone/configurations",e.id,"stats"],queryFn:async()=>(await(await fetch(`/api/admin/phone/configurations/${e.id}/stats`)).json()).data});return s?r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsx(U,{className:"p-8",children:r.jsx("div",{className:"text-center",children:"Chargement des statistiques..."})})}):r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4","data-testid":"stats-modal",children:r.jsxs("div",{className:"bg-background rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto border",children:[r.jsxs("div",{className:"sticky top-0 bg-background border-b p-4 flex justify-between items-center",children:[r.jsxs("h2",{className:"text-xl font-semibold",children:[" Statistiques - ",e.twilioPhoneNumber]}),r.jsx(re,{onClick:t,variant:"ghost",size:"icon","data-testid":"button-close-stats",children:r.jsx(dc,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-3",children:" Mois en cours"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs(U,{className:"p-4",children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-calls",children:(n==null?void 0:n.stats.totalCalls)||0}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Appels totaux"})]}),r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600","data-testid":"stat-answer-rate",children:[(n==null?void 0:n.stats.answerRate)||0,"%"]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Taux de rponse"})]}),r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"text-2xl font-bold","data-testid":"stat-total-duration",children:[Math.floor(((n==null?void 0:n.stats.totalDuration)||0)/60),"min"]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Dure totale"})]}),r.jsxs(U,{className:"p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600","data-testid":"stat-rdv-taken",children:(n==null?void 0:n.stats.rdvTaken)||0}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"RDV pris"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-3",children:" Qualit"}),r.jsxs(U,{className:"p-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Score rputation"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:`font-bold ${(e.reputationScore||0)>=70?"text-green-600":(e.reputationScore||0)>=50?"text-yellow-600":"text-red-600"}`,"data-testid":"reputation-score",children:[e.reputationScore||"-","/100"]}),e.reputationScore&&(e.reputationScore>=70?r.jsx(wn,{className:"text-green-600 h-5 w-5"}):e.reputationScore>=50?r.jsx(fte,{className:"text-yellow-600 h-5 w-5"}):r.jsx(uj,{className:"text-red-600 h-5 w-5"}))]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Signalements spam"}),r.jsx("span",{className:"font-semibold","data-testid":"spam-reports",children:e.spamReports||0})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Dure moyenne"}),r.jsxs("span",{className:"font-semibold","data-testid":"avg-duration",children:[Math.floor((n==null?void 0:n.stats.avgDuration)||0),"s"]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-3",children:" Commerciaux utilisateurs"}),r.jsx(U,{className:"divide-y",children:n!=null&&n.users&&n.users.length>0?n.users.map(i=>r.jsxs("div",{className:"p-3 flex justify-between items-center",children:[r.jsx("span",{children:i.name}),r.jsxs("span",{className:"text-muted-foreground",children:[i.callCount," appels"]})]},i.id)):r.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Aucun appel ce mois"})})]}),e.reputationScore&&e.reputationScore<50&&r.jsxs("div",{className:"bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-200 mb-2",children:" Recommandation"}),r.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:" Score rputation critique. Actions recommandes :"}),r.jsxs("ul",{className:"text-sm text-red-700 dark:text-red-300 mt-2 space-y-1",children:[r.jsx("li",{children:" Activer numro backup immdiatement"}),r.jsx("li",{children:" Former commerciaux : dure minimum 30s"}),r.jsx("li",{children:" Contacter oprateurs pour whitelisting"})]})]})]}),r.jsx("div",{className:"border-t p-4 flex justify-end",children:r.jsx(re,{onClick:t,variant:"secondary","data-testid":"button-close",children:"Fermer"})})]})})},t5e=()=>{const[e,t]=_.useState("france"),[n,s]=_.useState(!1),[i,a]=_.useState(!1),[o,l]=_.useState(null),c=ih(),{data:d,isLoading:f}=Ke({queryKey:["/api/admin/phone/configurations"],queryFn:async()=>(await(await fetch("/api/admin/phone/configurations")).json()).data}),h=dt({mutationFn:async({id:y,deactivateOthers:A})=>await rt("PATCH",`/api/admin/phone/configurations/${y}/activate`,{deactivateOthers:A}),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/admin/phone/configurations"]}),toast({title:"Succs",description:"Configuration active avec succs"})},onError:y=>{toast({title:"Erreur",description:y.message||"Erreur lors de l'activation",variant:"destructive"})}}),p=dt({mutationFn:async({id:y,reason:A,activateBackup:P})=>await rt("PATCH",`/api/admin/phone/configurations/${y}/deactivate`,{reason:A,activateBackup:P}),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/admin/phone/configurations"]}),toast({title:"Succs",description:"Configuration dsactive avec succs"})},onError:y=>{toast({title:"Erreur",description:y.message||"Erreur lors de la dsactivation",variant:"destructive"})}}),v=dt({mutationFn:async y=>await rt("DELETE",`/api/admin/phone/configurations/${y}`),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/admin/phone/configurations"]}),toast({title:"Succs",description:"Configuration supprime avec succs"})},onError:y=>{toast({title:"Erreur",description:y.message||"Erreur lors de la suppression",variant:"destructive"})}}),j=_.useMemo(()=>d?["france","luxembourg","belgique"].map(A=>{const P=d.filter(C=>C.entity===A),E=Array.from(new Set(P.map(C=>C.agencyLocation))).map(C=>{var k;const S=P.filter(I=>I.agencyLocation===C);return{location:C,name:((k=S[0])==null?void 0:k.agencyName)||C,configs:S.sort((I,R)=>I.rotationPriority-R.rotationPriority)}});return{entity:A,agencies:E}}):[],[d]),g=y=>{confirm(`Activer ${y.twilioPhoneNumber} ?

Cela dsactivera automatiquement les autres numros de l'agence ${y.agencyName}.`)&&h.mutate({id:y.id,deactivateOthers:!0})},x=y=>{const A=prompt("Raison de la dsactivation (minimum 3 caractres):");if(!A||A.length<3)return;const P=confirm("Activer automatiquement le numro backup de cette agence ?");p.mutate({id:y.id,reason:A,activateBackup:P})},w=y=>{confirm(` SUPPRIMER ${y.twilioPhoneNumber} ?

L'historique des appels sera conserv mais le numro ne sera plus utilisable.

Cette action est IRRVERSIBLE.`)&&v.mutate(y.id)},N=y=>{l(y),a(!0)};return f?r.jsx("div",{className:"p-8 flex items-center justify-center",children:r.jsx("div",{className:"text-lg text-muted-foreground",children:"Chargement des configurations..."})}):r.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:" Gestion Numros Twilio"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Grer les numros Twilio par agence avec rotation intelligente"})]}),r.jsxs(re,{onClick:()=>s(!0),"data-testid":"button-add-config",children:[r.jsx(dr,{className:"mr-2 h-4 w-4"}),"Ajouter numro"]})]}),r.jsx("div",{className:"flex gap-2 mb-6",children:["france","luxembourg","belgique"].map(y=>r.jsxs(re,{onClick:()=>t(y),variant:e===y?"default":"outline","data-testid":`button-entity-${y}`,children:[y==="france"&&" France",y==="luxembourg"&&" Luxembourg",y==="belgique"&&" Belgique"]},y))}),j.filter(y=>y.entity===e).map(y=>r.jsxs("div",{className:"space-y-6",children:[y.agencies.length===0&&r.jsx(U,{className:"p-12",children:r.jsxs("div",{className:"text-center text-muted-foreground",children:[r.jsx(Vn,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),r.jsxs("p",{className:"text-lg font-medium mb-2",children:["Aucun numro configur pour ",y.entity]}),r.jsx("p",{className:"text-sm mb-4",children:"Ajoutez votre premier numro Twilio pour cette entit"}),r.jsxs(re,{onClick:()=>s(!0),variant:"outline",children:[r.jsx(dr,{className:"mr-2 h-4 w-4"}),"Ajouter le premier numro"]})]})}),y.agencies.map(A=>r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Jr,{className:"text-primary",size:24}),r.jsx("h2",{className:"text-xl font-semibold",children:A.name}),r.jsxs(ve,{variant:"secondary",children:[A.configs.length," numro",A.configs.length>1?"s":""]})]}),r.jsx("div",{className:"space-y-3",children:A.configs.map(P=>r.jsx(n5e,{config:P,onActivate:()=>g(P),onDeactivate:()=>x(P),onDelete:()=>w(P),onViewStats:()=>N(P)},P.id))}),r.jsxs(re,{onClick:()=>s(!0),variant:"ghost",size:"sm",className:"mt-4","data-testid":`button-add-backup-${A.location}`,children:[r.jsx(dr,{className:"mr-1 h-4 w-4"}),"Ajouter numro backup pour ",A.name]})]},A.location))]},y.entity)),r.jsx(J3e,{open:n,onClose:()=>s(!1),onSuccess:()=>{s(!1),c.invalidateQueries({queryKey:["/api/admin/phone/configurations"]})}}),i&&o&&r.jsx(e5e,{config:o,onClose:()=>{a(!1),l(null)}})]})},n5e=({config:e,onActivate:t,onDeactivate:n,onDelete:s,onViewStats:i})=>{const a=()=>{if(e.reputationScore===null)return r.jsx("span",{className:"text-sm text-muted-foreground",children:"Score non vrifi"});const o=e.reputationScore;let l="default",c=r.jsx(ti,{className:"h-4 w-4"});return o<50?(l="destructive",c=r.jsx(Br,{className:"h-4 w-4"})):o<70&&(l="secondary",c=r.jsx(Br,{className:"h-4 w-4"})),r.jsxs(ve,{variant:l,className:"gap-1",children:[c,r.jsxs("span",{children:[o,"/100"]})]})};return r.jsxs("div",{className:`border rounded-lg p-4 ${e.isActive?"border-green-500 bg-green-50 dark:bg-green-950":"border-border bg-muted/50"}`,"data-testid":`config-card-${e.id}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[e.isActive?r.jsx(Ek,{className:"text-green-600",size:20,"data-testid":`status-active-${e.id}`}):r.jsx(Ak,{className:"text-muted-foreground",size:20,"data-testid":`status-inactive-${e.id}`}),r.jsx(Vn,{className:"text-muted-foreground",size:20})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"font-mono text-lg font-semibold","data-testid":`phone-number-${e.id}`,children:e.twilioPhoneNumber}),r.jsx(ve,{variant:e.isActive?"default":"secondary",children:e.isActive?"ACTIF":e.isBackup?"BACKUP":"INACTIF"}),e.isPrimary&&r.jsx(ve,{variant:"outline",children:"PRINCIPAL"})]}),e.displayName&&r.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:e.displayName})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[a(),r.jsxs("div",{className:"flex gap-2",children:[e.isActive?r.jsx(re,{onClick:n,variant:"ghost",size:"icon",className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Dsactiver","data-testid":`button-deactivate-${e.id}`,children:r.jsx(Ak,{className:"h-4 w-4"})}):r.jsx(re,{onClick:t,variant:"ghost",size:"icon",className:"text-green-600 hover:text-green-700 hover:bg-green-50",title:"Activer","data-testid":`button-activate-${e.id}`,children:r.jsx(Ek,{className:"h-4 w-4"})}),r.jsx(re,{onClick:i,variant:"ghost",size:"icon",title:"Statistiques","data-testid":`button-stats-${e.id}`,children:r.jsx(Zl,{className:"h-4 w-4"})}),r.jsx(re,{onClick:s,variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",title:"Supprimer","data-testid":`button-delete-${e.id}`,children:r.jsx(Ns,{className:"h-4 w-4"})})]})]})]}),!e.isActive&&e.lastDeactivatedAt&&r.jsxs("div",{className:"mt-3 text-sm text-muted-foreground bg-background p-2 rounded",children:["Dsactiv le ",new Date(e.lastDeactivatedAt).toLocaleDateString("fr-FR"),e.deactivationReason&&`  Raison: ${e.deactivationReason}`]}),e.spamReports>0&&r.jsxs("div",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Br,{size:16}),e.spamReports," signalement",e.spamReports>1?"s":""," spam"]})]})},r5e=()=>{const[e,t]=_.useState("france"),{toast:n}=At(),s=ih(),{data:i,isLoading:a}=Ke({queryKey:["/api/admin/gps/config",e],queryFn:async()=>(await(await fetch(`/api/admin/gps/config/${e}`)).json()).data}),o=dt({mutationFn:async d=>await rt("PUT",`/api/admin/gps/config/${e}`,d),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/gps/config",e]}),n({title:"Succs",description:"Configuration GPS mise  jour"})},onError:d=>{n({title:"Erreur",description:d.message||"Erreur lors de la mise  jour",variant:"destructive"})}}),l=(d,f)=>{o.mutate({[d]:f})},c=(d,f)=>{o.mutate({[d]:f})};return a?r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx(Da,{className:"h-6 w-6 animate-spin"})}):i?r.jsxs("div",{className:"space-y-6","data-testid":"admin-gps-config",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Ce,{children:"Entit :"}),r.jsx("div",{className:"flex gap-2",children:["global","france","luxembourg","belgique"].map(d=>r.jsx(ve,{variant:e===d?"default":"outline",className:"cursor-pointer",onClick:()=>t(d),"data-testid":`badge-entity-${d}`,children:d.charAt(0).toUpperCase()+d.slice(1)},d))})]}),r.jsxs(U,{"data-testid":"card-tracking-config",children:[r.jsxs(ne,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(jg,{className:"h-5 w-5"}),"Configuration Tracking GPS"]}),r.jsxs(jt,{children:["Paramtres de suivi de position pour ",e]})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ce,{children:"Tracking GPS activ"}),r.jsx(ra,{checked:i.trackingEnabled,onCheckedChange:d=>l("trackingEnabled",d),"data-testid":"switch-tracking-enabled"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{children:"Frquence tracking (minutes)"}),r.jsx(ge,{type:"number",value:i.trackingFrequencyMinutes,onChange:d=>c("trackingFrequencyMinutes",parseInt(d.target.value)),min:1,max:60,"data-testid":"input-tracking-frequency"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Capturer position toutes les ",i.trackingFrequencyMinutes," minutes"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{children:"Heure dbut"}),r.jsx(ge,{type:"time",value:i.trackingHoursStart,onChange:d=>c("trackingHoursStart",d.target.value),"data-testid":"input-hours-start"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{children:"Heure fin"}),r.jsx(ge,{type:"time",value:i.trackingHoursEnd,onChange:d=>c("trackingHoursEnd",d.target.value),"data-testid":"input-hours-end"})]})]})]})]}),r.jsxs(U,{"data-testid":"card-opportunities-config",children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Dtection Opportunits"}),r.jsx(jt,{children:"Alertes automatiques quand un commercial est proche d'un prospect"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ce,{children:"Opportunits actives"}),r.jsx(ra,{checked:i.opportunitiesEnabled,onCheckedChange:d=>l("opportunitiesEnabled",d),"data-testid":"switch-opportunities-enabled"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{children:"Rayon dtection (km)"}),r.jsx(ge,{type:"number",value:parseFloat(i.opportunitiesRadiusKm),onChange:d=>c("opportunitiesRadiusKm",d.target.value),min:1,max:50,step:.5,"data-testid":"input-opportunities-radius"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Alerter si prospect  moins de ",i.opportunitiesRadiusKm," km"]})]})]})]}),r.jsxs(U,{"data-testid":"card-other-settings",children:[r.jsx(ne,{children:r.jsx(se,{children:"Paramtres Avancs"})}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ce,{children:"Rapports hebdomadaires automatiques"}),r.jsx(ra,{checked:i.weeklyReportsEnabled,onCheckedChange:d=>l("weeklyReportsEnabled",d),"data-testid":"switch-weekly-reports"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ce,{children:"Gocodage automatique (adresse)"}),r.jsx(ra,{checked:i.geocodingEnabled,onCheckedChange:d=>l("geocodingEnabled",d),"data-testid":"switch-geocoding"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{children:"Rtention donnes (jours)"}),r.jsx(ge,{type:"number",value:i.dataRetentionDays,onChange:d=>c("dataRetentionDays",parseInt(d.target.value)),min:7,max:365,"data-testid":"input-data-retention"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Supprimer positions GPS aprs ",i.dataRetentionDays," jours"]})]})]})]})]}):r.jsx("div",{className:"p-8 text-center",children:"Configuration GPS non trouve"})},s5e=()=>{var i,a,o,l;const[e,t]=_.useState(""),{data:n,isLoading:s}=Ke({queryKey:["/api/admin/gps/dashboard",e],queryFn:async()=>{const c=new URLSearchParams;return e&&c.append("entity",e),(await(await fetch(`/api/admin/gps/dashboard?${c}`)).json()).data}});return s?r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):n?r.jsxs("div",{className:"space-y-6","data-testid":"admin-gps-dashboard",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Ce,{children:"Filtrer par entit :"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ve,{variant:e===""?"default":"outline",className:"cursor-pointer",onClick:()=>t(""),"data-testid":"badge-entity-all",children:"Toutes"}),["france","luxembourg","belgique"].map(c=>r.jsx(ve,{variant:e===c?"default":"outline",className:"cursor-pointer",onClick:()=>t(c),"data-testid":`badge-entity-${c}`,children:c.charAt(0).toUpperCase()+c.slice(1)},c))]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(U,{"data-testid":"card-positions",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Positions GPS"}),r.jsx(Jr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.positions.count.toLocaleString()}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Prcision moyenne: ",(i=n.positions.avgAccuracy)==null?void 0:i.toFixed(1),"m"]})]})]}),r.jsxs(U,{"data-testid":"card-users",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Commerciaux Actifs"}),r.jsx(Nn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.positions.distinctUsers}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Avec tracking GPS activ"})]})]}),r.jsxs(U,{"data-testid":"card-opportunities",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Opportunits Dtectes"}),r.jsx(fn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.opportunities.total}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.opportunities.pending," en attente, ",n.opportunities.accepted," converties"]})]})]}),r.jsxs(U,{"data-testid":"card-distance",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Distance Totale"}),r.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[(a=n.daily.totalDistance)==null?void 0:a.toFixed(0)," km"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Sur les 30 derniers jours"})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs(U,{"data-testid":"card-activity",children:[r.jsxs(ne,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(xn,{className:"h-5 w-5"}),"Activit Terrain"]}),r.jsx(jt,{children:"Statistiques journalires moyennes"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Visites"}),r.jsx("span",{className:"font-medium",children:n.daily.totalVisits||0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Heures travailles (moy.)"}),r.jsxs("span",{className:"font-medium",children:[((o=n.daily.avgWorkingHours)==null?void 0:o.toFixed(1))||0,"h"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Distance moyenne"}),r.jsxs("span",{className:"font-medium",children:[n.daily.totalDistance?(n.daily.totalDistance/n.positions.distinctUsers).toFixed(1):0," km/personne"]})]})]})]}),r.jsxs(U,{"data-testid":"card-opp-stats",children:[r.jsxs(ne,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(fn,{className:"h-5 w-5"}),"Performance Opportunits"]}),r.jsx(jt,{children:"Taux de conversion et qualit"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Taux conversion"}),r.jsxs("span",{className:"font-medium",children:[n.opportunities.total>0?(n.opportunities.accepted/n.opportunities.total*100).toFixed(1):0,"%"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Score priorit moyen"}),r.jsxs("span",{className:"font-medium",children:[((l=n.opportunities.avgPriority)==null?void 0:l.toFixed(0))||0,"/100"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"En attente"}),r.jsx(ve,{variant:n.opportunities.pending>0?"default":"secondary",children:n.opportunities.pending})]})]})]})]})]}):r.jsx("div",{className:"p-8 text-center",children:"Pas de donnes disponibles"})},i5e=()=>{const[e,t]=_.useState(!1),[n,s]=_.useState({provider:"google_maps",entityId:"global",apiKey:"",apiSecret:"",monthlyQuota:1e4}),{toast:i}=At(),a=ih(),{data:o,isLoading:l}=Ke({queryKey:["/api/admin/gps/credentials"],queryFn:async()=>(await(await fetch("/api/admin/gps/credentials")).json()).data}),c=dt({mutationFn:async h=>await rt("POST","/api/admin/gps/credentials",h),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/gps/credentials"]}),t(!1),s({provider:"google_maps",entityId:"global",apiKey:"",apiSecret:"",monthlyQuota:1e4}),i({title:"Succs",description:"Credential API cr avec succs"})},onError:h=>{i({title:"Erreur",description:h.message||"Erreur lors de la cration",variant:"destructive"})}}),d=()=>{if(!n.apiKey){i({title:"Erreur",description:"Cl API requise",variant:"destructive"});return}c.mutate(n)};if(l)return r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const f=h=>{switch(h){case"google_maps":return"Google Maps Geocoding";case"openweather":return"OpenWeather";case"twilio":return"Twilio SMS";default:return h}};return r.jsxs("div",{className:"space-y-6","data-testid":"admin-gps-credentials",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium",children:"Cls API Externes"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Grer les credentials pour gocodage, mto, notifications"})]}),r.jsxs(Wn,{open:e,onOpenChange:t,children:[r.jsx(Mo,{asChild:!0,children:r.jsxs(re,{"data-testid":"button-add-credential",children:[r.jsx(dr,{className:"h-4 w-4 mr-2"}),"Ajouter Credential"]})}),r.jsxs(Fn,{children:[r.jsxs(zn,{children:[r.jsx(Bn,{children:"Nouvelle Cl API"}),r.jsx(Za,{children:"Ajouter une cl API pour un service externe"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{children:"Service"}),r.jsxs(gt,{value:n.provider,onValueChange:h=>s({...n,provider:h}),children:[r.jsx(mt,{"data-testid":"select-provider",children:r.jsx(xt,{})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"google_maps",children:"Google Maps Geocoding"}),r.jsx(Y,{value:"openweather",children:"OpenWeather"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{children:"Entit"}),r.jsxs(gt,{value:n.entityId,onValueChange:h=>s({...n,entityId:h}),children:[r.jsx(mt,{"data-testid":"select-entity",children:r.jsx(xt,{})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"global",children:"Global"}),r.jsx(Y,{value:"france",children:"France"}),r.jsx(Y,{value:"luxembourg",children:"Luxembourg"}),r.jsx(Y,{value:"belgique",children:"Belgique"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{children:"Cl API"}),r.jsx(ge,{type:"password",value:n.apiKey,onChange:h=>s({...n,apiKey:h.target.value}),placeholder:"Entrer la cl API...","data-testid":"input-api-key"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ce,{children:"Quota mensuel (optionnel)"}),r.jsx(ge,{type:"number",value:n.monthlyQuota,onChange:h=>s({...n,monthlyQuota:parseInt(h.target.value)}),"data-testid":"input-monthly-quota"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(re,{variant:"outline",onClick:()=>t(!1),"data-testid":"button-cancel-credential",children:"Annuler"}),r.jsx(re,{onClick:d,disabled:c.isPending,"data-testid":"button-create-credential",children:c.isPending?"Cration...":"Crer"})]})]})]})]}),r.jsx("div",{className:"grid gap-4",children:o&&o.length>0?o.map(h=>r.jsxs(U,{"data-testid":`card-credential-${h.id}`,children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(dz,{className:"h-5 w-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx(se,{className:"text-base",children:f(h.provider)}),r.jsxs(jt,{children:["Entit: ",h.entityId]})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:h.isActive?r.jsxs(ve,{variant:"default",className:"gap-1",children:[r.jsx(ti,{className:"h-3 w-3"}),"Actif"]}):r.jsxs(ve,{variant:"secondary",className:"gap-1",children:[r.jsx(os,{className:"h-3 w-3"}),"Inactif"]})})]})}),r.jsxs(Z,{className:"space-y-2",children:[h.validationStatus&&r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Validation:"}),r.jsx(ve,{variant:h.validationStatus==="valid"?"default":"destructive",children:h.validationStatus})]}),h.monthlyQuota&&r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Utilisation:"}),r.jsxs("span",{children:[h.currentUsage.toLocaleString()," / ",h.monthlyQuota.toLocaleString(),r.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",(h.currentUsage/h.monthlyQuota*100).toFixed(1),"%)"]})]})]}),h.lastValidatedAt&&r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Dernire vrification:"}),r.jsx("span",{children:new Date(h.lastValidatedAt).toLocaleString("fr-FR")})]})]})]},h.id)):r.jsx(U,{children:r.jsx(Z,{className:"p-8 text-center text-muted-foreground",children:"Aucune cl API configure"})})})]})};function a5e(){const{toast:e}=At(),[t,n]=_.useState(!1),{data:s,isLoading:i,error:a}=Ke({queryKey:["/api/admin/gps/geocoding/stats"]}),o=dt({mutationFn:async f=>(n(!0),await rt("POST","/api/admin/gps/geocoding/batch",f)),onSuccess:f=>{n(!1),e({title:"Gocodage termin",description:f.message||"Les prospects ont t gocods avec succs"}),et.invalidateQueries({queryKey:["/api/admin/gps/geocoding/stats"]})},onError:f=>{n(!1),e({title:"Erreur gocodage",description:f.message||"Erreur lors du gocodage batch",variant:"destructive"})}}),l=()=>{o.mutate({entity:void 0,limit:100,throttleMs:1e3})};if(i)return r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx(On,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(a||!(s!=null&&s.data))return r.jsxs(Eo,{variant:"destructive",children:[r.jsx(os,{className:"h-4 w-4"}),r.jsx(To,{children:"Impossible de charger les statistiques de gocodage"})]});const c=s.data,d=c.geocodedPercentage;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(Eo,{children:[r.jsx(oy,{className:"h-4 w-4"}),r.jsx(To,{children:"Le gocodage convertit les adresses prospects en coordonnes GPS (latitude/longitude) pour activer la dtection de proximit. Stratgie CASCADE : Google Maps API (si disponible)  OpenStreetMap Nominatim (gratuit)."})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Total Prospects"}),r.jsx(Jr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-prospects",children:c.totalProspects})})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Gocods"}),r.jsx(Yt,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"stat-geocoded",children:c.geocodedProspects}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[d.toFixed(1),"% du total"]})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"En Attente"}),r.jsx(os,{className:"h-4 w-4 text-amber-600"})]}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold text-amber-600","data-testid":"stat-pending",children:c.pendingProspects})})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Progression Gocodage"}),r.jsx(jt,{children:"tat actuel du gocodage des prospects"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Gocods"}),r.jsxs("span",{className:"font-medium",children:[c.geocodedProspects," / ",c.totalProspects]})]}),r.jsx($o,{value:d,className:"h-2"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-4 border-t",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Google Maps"}),r.jsx("p",{className:"text-lg font-semibold","data-testid":"stat-google-maps",children:c.bySource.google_maps})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Nominatim"}),r.jsx("p",{className:"text-lg font-semibold","data-testid":"stat-nominatim",children:c.bySource.nominatim})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Sans coordonnes"}),r.jsx("p",{className:"text-lg font-semibold text-amber-600","data-testid":"stat-none",children:c.bySource.none})]})]})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Gocodage Batch"}),r.jsx(jt,{children:"Lancer le gocodage manuel des prospects sans coordonnes (max 100/batch)"})]}),r.jsxs(Z,{className:"space-y-4",children:[r.jsxs(Eo,{children:[r.jsx(oy,{className:"h-4 w-4"}),r.jsx(To,{children:"Le gocodage automatique s'excute chaque nuit  4h00. Utilisez cette fonction uniquement pour traiter manuellement les prospects urgents."})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{onClick:l,disabled:t||o.isPending||c.pendingProspects===0,className:"gap-2","data-testid":"button-start-batch",children:t||o.isPending?r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"h-4 w-4 animate-spin"}),"Gocodage en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(az,{className:"h-4 w-4"}),"Lancer Gocodage Batch"]})}),c.pendingProspects===0&&r.jsxs(ve,{variant:"secondary",className:"gap-1",children:[r.jsx(Yt,{className:"h-3 w-3"}),"Tous les prospects sont gocods"]})]}),o.data&&r.jsxs(Eo,{children:[r.jsx(Yt,{className:"h-4 w-4"}),r.jsx(To,{children:o.data.message})]})]})]}),r.jsxs(U,{children:[r.jsxs(ne,{children:[r.jsx(se,{children:"Gocodage Automatique"}),r.jsx(jt,{children:"Configuration du CRON job nocturne"})]}),r.jsxs(Z,{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Frquence"}),r.jsx(ve,{variant:"secondary",children:"Quotidien  4h00"})]}),r.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Limite par batch"}),r.jsx(ve,{variant:"secondary",children:"100 prospects/nuit"})]}),r.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Throttle"}),r.jsx(ve,{variant:"secondary",children:"1000ms/requte"})]}),r.jsxs("div",{className:"flex items-center justify-between py-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Stratgie"}),r.jsx(ve,{variant:"secondary",children:"CASCADE GoogleNominatim"})]})]})]})]})}const o5e=()=>{const[e,t]=_.useState("dashboard");return r.jsxs("div",{className:"p-6 space-y-6","data-testid":"page-gps-admin",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[r.jsx(Jr,{className:"h-8 w-8"}),"Module GPS Tracking V2"]}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Tracking GPS commercial, opportunits  proximit, rapports automatiques"})]})}),r.jsxs(fi,{value:e,onValueChange:t,className:"space-y-6",children:[r.jsxs(qs,{className:"grid w-full grid-cols-4",children:[r.jsxs(Ht,{value:"dashboard",className:"gap-2","data-testid":"tab-dashboard",children:[r.jsx(Zl,{className:"h-4 w-4"}),"Dashboard"]}),r.jsxs(Ht,{value:"geocoding",className:"gap-2","data-testid":"tab-geocoding",children:[r.jsx(gz,{className:"h-4 w-4"}),"Gocodage"]}),r.jsxs(Ht,{value:"config",className:"gap-2","data-testid":"tab-config",children:[r.jsx(jg,{className:"h-4 w-4"}),"Configuration"]}),r.jsxs(Ht,{value:"credentials",className:"gap-2","data-testid":"tab-credentials",children:[r.jsx(dz,{className:"h-4 w-4"}),"Cls API"]})]}),r.jsx(Zt,{value:"dashboard",className:"space-y-4",children:r.jsx(s5e,{})}),r.jsx(Zt,{value:"geocoding",className:"space-y-4",children:r.jsx(a5e,{})}),r.jsx(Zt,{value:"config",className:"space-y-4",children:r.jsx(r5e,{})}),r.jsx(Zt,{value:"credentials",className:"space-y-4",children:r.jsx(i5e,{})})]})]})};function GG(e,t){const n=_.useRef(t);_.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}const l5e=1;function c5e(e){return Object.freeze({__version:l5e,map:e})}function u5e(e,t){return Object.freeze({...e,...t})}const ZG=_.createContext(null),QG=ZG.Provider;function GA(){const e=_.useContext(ZG);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function d5e(e){function t(n,s){const{instance:i,context:a}=e(n).current;return _.useImperativeHandle(s,()=>i),n.children==null?null:q.createElement(QG,{value:a},n.children)}return _.forwardRef(t)}function f5e(e){function t(n,s){const[i,a]=_.useState(!1),{instance:o}=e(n,a).current;_.useImperativeHandle(s,()=>o),_.useEffect(function(){i&&o.update()},[o,i,n.children]);const l=o._contentNode;return l?uc.createPortal(n.children,l):null}return _.forwardRef(t)}function h5e(e){function t(n,s){const{instance:i}=e(n).current;return _.useImperativeHandle(s,()=>i),null}return _.forwardRef(t)}function YG(e,t){const n=_.useRef();_.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function ZA(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function m5e(e,t){return function(s,i){const a=GA(),o=e(ZA(s,a),a);return GG(a.map,s.attribution),YG(o.current,s.eventHandlers),t(o.current,a,s,i),o}}var HS={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,s){s(t)})(fd,function(n){var s="1.9.4";function i(u){var m,b,T,O;for(b=1,T=arguments.length;b<T;b++){O=arguments[b];for(m in O)u[m]=O[m]}return u}var a=Object.create||function(){function u(){}return function(m){return u.prototype=m,new u}}();function o(u,m){var b=Array.prototype.slice;if(u.bind)return u.bind.apply(u,b.call(arguments,1));var T=b.call(arguments,2);return function(){return u.apply(m,T.length?T.concat(b.call(arguments)):arguments)}}var l=0;function c(u){return"_leaflet_id"in u||(u._leaflet_id=++l),u._leaflet_id}function d(u,m,b){var T,O,F,X;return X=function(){T=!1,O&&(F.apply(b,O),O=!1)},F=function(){T?O=arguments:(u.apply(b,arguments),setTimeout(X,m),T=!0)},F}function f(u,m,b){var T=m[1],O=m[0],F=T-O;return u===T&&b?u:((u-O)%F+F)%F+O}function h(){return!1}function p(u,m){if(m===!1)return u;var b=Math.pow(10,m===void 0?6:m);return Math.round(u*b)/b}function v(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function j(u){return v(u).split(/\s+/)}function g(u,m){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?a(u.options):{});for(var b in m)u.options[b]=m[b];return u.options}function x(u,m,b){var T=[];for(var O in u)T.push(encodeURIComponent(b?O.toUpperCase():O)+"="+encodeURIComponent(u[O]));return(!m||m.indexOf("?")===-1?"?":"&")+T.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function N(u,m){return u.replace(w,function(b,T){var O=m[T];if(O===void 0)throw new Error("No value provided for variable "+b);return typeof O=="function"&&(O=O(m)),O})}var y=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function A(u,m){for(var b=0;b<u.length;b++)if(u[b]===m)return b;return-1}var P="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function E(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var C=0;function S(u){var m=+new Date,b=Math.max(0,16-(m-C));return C=m+b,window.setTimeout(u,b)}var k=window.requestAnimationFrame||E("RequestAnimationFrame")||S,I=window.cancelAnimationFrame||E("CancelAnimationFrame")||E("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function R(u,m,b){if(b&&k===S)u.call(m);else return k.call(window,o(u,m))}function D(u){u&&I.call(window,u)}var z={__proto__:null,extend:i,create:a,bind:o,get lastId(){return l},stamp:c,throttle:d,wrapNum:f,falseFn:h,formatNum:p,trim:v,splitWords:j,setOptions:g,getParamString:x,template:N,isArray:y,indexOf:A,emptyImageUrl:P,requestFn:k,cancelFn:I,requestAnimFrame:R,cancelAnimFrame:D};function V(){}V.extend=function(u){var m=function(){g(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},b=m.__super__=this.prototype,T=a(b);T.constructor=m,m.prototype=T;for(var O in this)Object.prototype.hasOwnProperty.call(this,O)&&O!=="prototype"&&O!=="__super__"&&(m[O]=this[O]);return u.statics&&i(m,u.statics),u.includes&&(K(u.includes),i.apply(null,[T].concat(u.includes))),i(T,u),delete T.statics,delete T.includes,T.options&&(T.options=b.options?a(b.options):{},i(T.options,u.options)),T._initHooks=[],T.callInitHooks=function(){if(!this._initHooksCalled){b.callInitHooks&&b.callInitHooks.call(this),this._initHooksCalled=!0;for(var F=0,X=T._initHooks.length;F<X;F++)T._initHooks[F].call(this)}},m},V.include=function(u){var m=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=m,this.mergeOptions(u.options)),this},V.mergeOptions=function(u){return i(this.prototype.options,u),this},V.addInitHook=function(u){var m=Array.prototype.slice.call(arguments,1),b=typeof u=="function"?u:function(){this[u].apply(this,m)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(b),this};function K(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=y(u)?u:[u];for(var m=0;m<u.length;m++)u[m]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var H={on:function(u,m,b){if(typeof u=="object")for(var T in u)this._on(T,u[T],m);else{u=j(u);for(var O=0,F=u.length;O<F;O++)this._on(u[O],m,b)}return this},off:function(u,m,b){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var T in u)this._off(T,u[T],m);else{u=j(u);for(var O=arguments.length===1,F=0,X=u.length;F<X;F++)O?this._off(u[F]):this._off(u[F],m,b)}return this},_on:function(u,m,b,T){if(typeof m!="function"){console.warn("wrong listener type: "+typeof m);return}if(this._listens(u,m,b)===!1){b===this&&(b=void 0);var O={fn:m,ctx:b};T&&(O.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(O)}},_off:function(u,m,b){var T,O,F;if(this._events&&(T=this._events[u],!!T)){if(arguments.length===1){if(this._firingCount)for(O=0,F=T.length;O<F;O++)T[O].fn=h;delete this._events[u];return}if(typeof m!="function"){console.warn("wrong listener type: "+typeof m);return}var X=this._listens(u,m,b);if(X!==!1){var ce=T[X];this._firingCount&&(ce.fn=h,this._events[u]=T=T.slice()),T.splice(X,1)}}},fire:function(u,m,b){if(!this.listens(u,b))return this;var T=i({},m,{type:u,target:this,sourceTarget:m&&m.sourceTarget||this});if(this._events){var O=this._events[u];if(O){this._firingCount=this._firingCount+1||1;for(var F=0,X=O.length;F<X;F++){var ce=O[F],he=ce.fn;ce.once&&this.off(u,he,ce.ctx),he.call(ce.ctx||this,T)}this._firingCount--}}return b&&this._propagateEvent(T),this},listens:function(u,m,b,T){typeof u!="string"&&console.warn('"string" type argument expected');var O=m;typeof m!="function"&&(T=!!m,O=void 0,b=void 0);var F=this._events&&this._events[u];if(F&&F.length&&this._listens(u,O,b)!==!1)return!0;if(T){for(var X in this._eventParents)if(this._eventParents[X].listens(u,m,b,T))return!0}return!1},_listens:function(u,m,b){if(!this._events)return!1;var T=this._events[u]||[];if(!m)return!!T.length;b===this&&(b=void 0);for(var O=0,F=T.length;O<F;O++)if(T[O].fn===m&&T[O].ctx===b)return O;return!1},once:function(u,m,b){if(typeof u=="object")for(var T in u)this._on(T,u[T],m,!0);else{u=j(u);for(var O=0,F=u.length;O<F;O++)this._on(u[O],m,b,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[c(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[c(u)],this},_propagateEvent:function(u){for(var m in this._eventParents)this._eventParents[m].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};H.addEventListener=H.on,H.removeEventListener=H.clearAllEventListeners=H.off,H.addOneTimeEventListener=H.once,H.fireEvent=H.fire,H.hasEventListeners=H.listens;var W=V.extend(H);function B(u,m,b){this.x=b?Math.round(u):u,this.y=b?Math.round(m):m}var $=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};B.prototype={clone:function(){return new B(this.x,this.y)},add:function(u){return this.clone()._add(G(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(G(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new B(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new B(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=$(this.x),this.y=$(this.y),this},distanceTo:function(u){u=G(u);var m=u.x-this.x,b=u.y-this.y;return Math.sqrt(m*m+b*b)},equals:function(u){return u=G(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=G(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function G(u,m,b){return u instanceof B?u:y(u)?new B(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new B(u.x,u.y):new B(u,m,b)}function ee(u,m){if(u)for(var b=m?[u,m]:u,T=0,O=b.length;T<O;T++)this.extend(b[T])}ee.prototype={extend:function(u){var m,b;if(!u)return this;if(u instanceof B||typeof u[0]=="number"||"x"in u)m=b=G(u);else if(u=oe(u),m=u.min,b=u.max,!m||!b)return this;return!this.min&&!this.max?(this.min=m.clone(),this.max=b.clone()):(this.min.x=Math.min(m.x,this.min.x),this.max.x=Math.max(b.x,this.max.x),this.min.y=Math.min(m.y,this.min.y),this.max.y=Math.max(b.y,this.max.y)),this},getCenter:function(u){return G((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return G(this.min.x,this.max.y)},getTopRight:function(){return G(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var m,b;return typeof u[0]=="number"||u instanceof B?u=G(u):u=oe(u),u instanceof ee?(m=u.min,b=u.max):m=b=u,m.x>=this.min.x&&b.x<=this.max.x&&m.y>=this.min.y&&b.y<=this.max.y},intersects:function(u){u=oe(u);var m=this.min,b=this.max,T=u.min,O=u.max,F=O.x>=m.x&&T.x<=b.x,X=O.y>=m.y&&T.y<=b.y;return F&&X},overlaps:function(u){u=oe(u);var m=this.min,b=this.max,T=u.min,O=u.max,F=O.x>m.x&&T.x<b.x,X=O.y>m.y&&T.y<b.y;return F&&X},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var m=this.min,b=this.max,T=Math.abs(m.x-b.x)*u,O=Math.abs(m.y-b.y)*u;return oe(G(m.x-T,m.y-O),G(b.x+T,b.y+O))},equals:function(u){return u?(u=oe(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function oe(u,m){return!u||u instanceof ee?u:new ee(u,m)}function fe(u,m){if(u)for(var b=m?[u,m]:u,T=0,O=b.length;T<O;T++)this.extend(b[T])}fe.prototype={extend:function(u){var m=this._southWest,b=this._northEast,T,O;if(u instanceof J)T=u,O=u;else if(u instanceof fe){if(T=u._southWest,O=u._northEast,!T||!O)return this}else return u?this.extend(Pe(u)||Ee(u)):this;return!m&&!b?(this._southWest=new J(T.lat,T.lng),this._northEast=new J(O.lat,O.lng)):(m.lat=Math.min(T.lat,m.lat),m.lng=Math.min(T.lng,m.lng),b.lat=Math.max(O.lat,b.lat),b.lng=Math.max(O.lng,b.lng)),this},pad:function(u){var m=this._southWest,b=this._northEast,T=Math.abs(m.lat-b.lat)*u,O=Math.abs(m.lng-b.lng)*u;return new fe(new J(m.lat-T,m.lng-O),new J(b.lat+T,b.lng+O))},getCenter:function(){return new J((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new J(this.getNorth(),this.getWest())},getSouthEast:function(){return new J(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof J||"lat"in u?u=Pe(u):u=Ee(u);var m=this._southWest,b=this._northEast,T,O;return u instanceof fe?(T=u.getSouthWest(),O=u.getNorthEast()):T=O=u,T.lat>=m.lat&&O.lat<=b.lat&&T.lng>=m.lng&&O.lng<=b.lng},intersects:function(u){u=Ee(u);var m=this._southWest,b=this._northEast,T=u.getSouthWest(),O=u.getNorthEast(),F=O.lat>=m.lat&&T.lat<=b.lat,X=O.lng>=m.lng&&T.lng<=b.lng;return F&&X},overlaps:function(u){u=Ee(u);var m=this._southWest,b=this._northEast,T=u.getSouthWest(),O=u.getNorthEast(),F=O.lat>m.lat&&T.lat<b.lat,X=O.lng>m.lng&&T.lng<b.lng;return F&&X},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,m){return u?(u=Ee(u),this._southWest.equals(u.getSouthWest(),m)&&this._northEast.equals(u.getNorthEast(),m)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ee(u,m){return u instanceof fe?u:new fe(u,m)}function J(u,m,b){if(isNaN(u)||isNaN(m))throw new Error("Invalid LatLng object: ("+u+", "+m+")");this.lat=+u,this.lng=+m,b!==void 0&&(this.alt=+b)}J.prototype={equals:function(u,m){if(!u)return!1;u=Pe(u);var b=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return b<=(m===void 0?1e-9:m)},toString:function(u){return"LatLng("+p(this.lat,u)+", "+p(this.lng,u)+")"},distanceTo:function(u){return $e.distance(this,Pe(u))},wrap:function(){return $e.wrapLatLng(this)},toBounds:function(u){var m=180*u/40075017,b=m/Math.cos(Math.PI/180*this.lat);return Ee([this.lat-m,this.lng-b],[this.lat+m,this.lng+b])},clone:function(){return new J(this.lat,this.lng,this.alt)}};function Pe(u,m,b){return u instanceof J?u:y(u)&&typeof u[0]!="object"?u.length===3?new J(u[0],u[1],u[2]):u.length===2?new J(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new J(u.lat,"lng"in u?u.lng:u.lon,u.alt):m===void 0?null:new J(u,m,b)}var ze={latLngToPoint:function(u,m){var b=this.projection.project(u),T=this.scale(m);return this.transformation._transform(b,T)},pointToLatLng:function(u,m){var b=this.scale(m),T=this.transformation.untransform(u,b);return this.projection.unproject(T)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var m=this.projection.bounds,b=this.scale(u),T=this.transformation.transform(m.min,b),O=this.transformation.transform(m.max,b);return new ee(T,O)},infinite:!1,wrapLatLng:function(u){var m=this.wrapLng?f(u.lng,this.wrapLng,!0):u.lng,b=this.wrapLat?f(u.lat,this.wrapLat,!0):u.lat,T=u.alt;return new J(b,m,T)},wrapLatLngBounds:function(u){var m=u.getCenter(),b=this.wrapLatLng(m),T=m.lat-b.lat,O=m.lng-b.lng;if(T===0&&O===0)return u;var F=u.getSouthWest(),X=u.getNorthEast(),ce=new J(F.lat-T,F.lng-O),he=new J(X.lat-T,X.lng-O);return new fe(ce,he)}},$e=i({},ze,{wrapLng:[-180,180],R:6371e3,distance:function(u,m){var b=Math.PI/180,T=u.lat*b,O=m.lat*b,F=Math.sin((m.lat-u.lat)*b/2),X=Math.sin((m.lng-u.lng)*b/2),ce=F*F+Math.cos(T)*Math.cos(O)*X*X,he=2*Math.atan2(Math.sqrt(ce),Math.sqrt(1-ce));return this.R*he}}),me=6378137,Te={R:me,MAX_LATITUDE:85.0511287798,project:function(u){var m=Math.PI/180,b=this.MAX_LATITUDE,T=Math.max(Math.min(b,u.lat),-b),O=Math.sin(T*m);return new B(this.R*u.lng*m,this.R*Math.log((1+O)/(1-O))/2)},unproject:function(u){var m=180/Math.PI;return new J((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*m,u.x*m/this.R)},bounds:function(){var u=me*Math.PI;return new ee([-u,-u],[u,u])}()};function je(u,m,b,T){if(y(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=m,this._c=b,this._d=T}je.prototype={transform:function(u,m){return this._transform(u.clone(),m)},_transform:function(u,m){return m=m||1,u.x=m*(this._a*u.x+this._b),u.y=m*(this._c*u.y+this._d),u},untransform:function(u,m){return m=m||1,new B((u.x/m-this._b)/this._a,(u.y/m-this._d)/this._c)}};function ue(u,m,b,T){return new je(u,m,b,T)}var ct=i({},$e,{code:"EPSG:3857",projection:Te,transformation:function(){var u=.5/(Math.PI*Te.R);return ue(u,.5,-u,.5)}()}),Ge=i({},ct,{code:"EPSG:900913"});function ut(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function Xe(u,m){var b="",T,O,F,X,ce,he;for(T=0,F=u.length;T<F;T++){for(ce=u[T],O=0,X=ce.length;O<X;O++)he=ce[O],b+=(O?"L":"M")+he.x+" "+he.y;b+=m?bt.svg?"z":"x":""}return b||"M0 0"}var qe=document.documentElement.style,lt="ActiveXObject"in window,It=lt&&!document.addEventListener,hn="msLaunchUri"in navigator&&!("documentMode"in document),Kn=_a("webkit"),Q=_a("android"),de=_a("android 2")||_a("android 3"),pe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),He=Q&&_a("Google")&&pe<537&&!("AudioNode"in window),De=!!window.opera,Ie=!hn&&_a("chrome"),Qe=_a("gecko")&&!Kn&&!De&&!lt,Kt=!Ie&&_a("safari"),Sn=_a("phantom"),Cn="OTransition"in qe,Ts=navigator.platform.indexOf("Win")===0,hi=lt&&"transition"in qe,ja="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!de,Hg="MozPerspective"in qe,Wg=!window.L_DISABLE_3D&&(hi||ja||Hg)&&!Cn&&!Sn,yc=typeof orientation<"u"||_a("mobile"),Kg=yc&&Kn,JG=yc&&ja,XA=!window.PointerEvent&&window.MSPointerEvent,JA=!!(window.PointerEvent||XA),eE="ontouchstart"in window||!!window.TouchEvent,eZ=!window.L_NO_TOUCH&&(eE||JA),tZ=yc&&De,nZ=yc&&Qe,rZ=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,sZ=function(){var u=!1;try{var m=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",h,m),window.removeEventListener("testPassiveEventSupport",h,m)}catch{}return u}(),iZ=function(){return!!document.createElement("canvas").getContext}(),k0=!!(document.createElementNS&&ut("svg").createSVGRect),aZ=!!k0&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),oZ=!k0&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var m=u.firstChild;return m.style.behavior="url(#default#VML)",m&&typeof m.adj=="object"}catch{return!1}}(),lZ=navigator.platform.indexOf("Mac")===0,cZ=navigator.platform.indexOf("Linux")===0;function _a(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var bt={ie:lt,ielt9:It,edge:hn,webkit:Kn,android:Q,android23:de,androidStock:He,opera:De,chrome:Ie,gecko:Qe,safari:Kt,phantom:Sn,opera12:Cn,win:Ts,ie3d:hi,webkit3d:ja,gecko3d:Hg,any3d:Wg,mobile:yc,mobileWebkit:Kg,mobileWebkit3d:JG,msPointer:XA,pointer:JA,touch:eZ,touchNative:eE,mobileOpera:tZ,mobileGecko:nZ,retina:rZ,passiveEvents:sZ,canvas:iZ,svg:k0,vml:oZ,inlineSvg:aZ,mac:lZ,linux:cZ},tE=bt.msPointer?"MSPointerDown":"pointerdown",nE=bt.msPointer?"MSPointerMove":"pointermove",rE=bt.msPointer?"MSPointerUp":"pointerup",sE=bt.msPointer?"MSPointerCancel":"pointercancel",O0={touchstart:tE,touchmove:nE,touchend:rE,touchcancel:sE},iE={touchstart:pZ,touchmove:Gg,touchend:Gg,touchcancel:Gg},zu={},aE=!1;function uZ(u,m,b){return m==="touchstart"&&mZ(),iE[m]?(b=iE[m].bind(this,b),u.addEventListener(O0[m],b,!1),b):(console.warn("wrong event specified:",m),h)}function dZ(u,m,b){if(!O0[m]){console.warn("wrong event specified:",m);return}u.removeEventListener(O0[m],b,!1)}function fZ(u){zu[u.pointerId]=u}function hZ(u){zu[u.pointerId]&&(zu[u.pointerId]=u)}function oE(u){delete zu[u.pointerId]}function mZ(){aE||(document.addEventListener(tE,fZ,!0),document.addEventListener(nE,hZ,!0),document.addEventListener(rE,oE,!0),document.addEventListener(sE,oE,!0),aE=!0)}function Gg(u,m){if(m.pointerType!==(m.MSPOINTER_TYPE_MOUSE||"mouse")){m.touches=[];for(var b in zu)m.touches.push(zu[b]);m.changedTouches=[m],u(m)}}function pZ(u,m){m.MSPOINTER_TYPE_TOUCH&&m.pointerType===m.MSPOINTER_TYPE_TOUCH&&Hr(m),Gg(u,m)}function gZ(u){var m={},b,T;for(T in u)b=u[T],m[T]=b&&b.bind?b.bind(u):b;return u=m,m.type="dblclick",m.detail=2,m.isTrusted=!1,m._simulated=!0,m}var xZ=200;function vZ(u,m){u.addEventListener("dblclick",m);var b=0,T;function O(F){if(F.detail!==1){T=F.detail;return}if(!(F.pointerType==="mouse"||F.sourceCapabilities&&!F.sourceCapabilities.firesTouchEvents)){var X=fE(F);if(!(X.some(function(he){return he instanceof HTMLLabelElement&&he.attributes.for})&&!X.some(function(he){return he instanceof HTMLInputElement||he instanceof HTMLSelectElement}))){var ce=Date.now();ce-b<=xZ?(T++,T===2&&m(gZ(F))):T=1,b=ce}}}return u.addEventListener("click",O),{dblclick:m,simDblclick:O}}function yZ(u,m){u.removeEventListener("dblclick",m.dblclick),u.removeEventListener("click",m.simDblclick)}var M0=Yg(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Eh=Yg(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),lE=Eh==="webkitTransition"||Eh==="OTransition"?Eh+"End":"transitionend";function cE(u){return typeof u=="string"?document.getElementById(u):u}function Th(u,m){var b=u.style[m]||u.currentStyle&&u.currentStyle[m];if((!b||b==="auto")&&document.defaultView){var T=document.defaultView.getComputedStyle(u,null);b=T?T[m]:null}return b==="auto"?null:b}function rn(u,m,b){var T=document.createElement(u);return T.className=m||"",b&&b.appendChild(T),T}function Gn(u){var m=u.parentNode;m&&m.removeChild(u)}function Zg(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function Bu(u){var m=u.parentNode;m&&m.lastChild!==u&&m.appendChild(u)}function Vu(u){var m=u.parentNode;m&&m.firstChild!==u&&m.insertBefore(u,m.firstChild)}function I0(u,m){if(u.classList!==void 0)return u.classList.contains(m);var b=Qg(u);return b.length>0&&new RegExp("(^|\\s)"+m+"(\\s|$)").test(b)}function qt(u,m){if(u.classList!==void 0)for(var b=j(m),T=0,O=b.length;T<O;T++)u.classList.add(b[T]);else if(!I0(u,m)){var F=Qg(u);R0(u,(F?F+" ":"")+m)}}function or(u,m){u.classList!==void 0?u.classList.remove(m):R0(u,v((" "+Qg(u)+" ").replace(" "+m+" "," ")))}function R0(u,m){u.className.baseVal===void 0?u.className=m:u.className.baseVal=m}function Qg(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function mi(u,m){"opacity"in u.style?u.style.opacity=m:"filter"in u.style&&bZ(u,m)}function bZ(u,m){var b=!1,T="DXImageTransform.Microsoft.Alpha";try{b=u.filters.item(T)}catch{if(m===1)return}m=Math.round(m*100),b?(b.Enabled=m!==100,b.Opacity=m):u.style.filter+=" progid:"+T+"(opacity="+m+")"}function Yg(u){for(var m=document.documentElement.style,b=0;b<u.length;b++)if(u[b]in m)return u[b];return!1}function bc(u,m,b){var T=m||new B(0,0);u.style[M0]=(bt.ie3d?"translate("+T.x+"px,"+T.y+"px)":"translate3d("+T.x+"px,"+T.y+"px,0)")+(b?" scale("+b+")":"")}function pr(u,m){u._leaflet_pos=m,bt.any3d?bc(u,m):(u.style.left=m.x+"px",u.style.top=m.y+"px")}function jc(u){return u._leaflet_pos||new B(0,0)}var kh,Oh,L0;if("onselectstart"in document)kh=function(){$t(window,"selectstart",Hr)},Oh=function(){Pn(window,"selectstart",Hr)};else{var Mh=Yg(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);kh=function(){if(Mh){var u=document.documentElement.style;L0=u[Mh],u[Mh]="none"}},Oh=function(){Mh&&(document.documentElement.style[Mh]=L0,L0=void 0)}}function D0(){$t(window,"dragstart",Hr)}function $0(){Pn(window,"dragstart",Hr)}var Xg,F0;function z0(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(Jg(),Xg=u,F0=u.style.outlineStyle,u.style.outlineStyle="none",$t(window,"keydown",Jg))}function Jg(){Xg&&(Xg.style.outlineStyle=F0,Xg=void 0,F0=void 0,Pn(window,"keydown",Jg))}function uE(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function B0(u){var m=u.getBoundingClientRect();return{x:m.width/u.offsetWidth||1,y:m.height/u.offsetHeight||1,boundingClientRect:m}}var jZ={__proto__:null,TRANSFORM:M0,TRANSITION:Eh,TRANSITION_END:lE,get:cE,getStyle:Th,create:rn,remove:Gn,empty:Zg,toFront:Bu,toBack:Vu,hasClass:I0,addClass:qt,removeClass:or,setClass:R0,getClass:Qg,setOpacity:mi,testProp:Yg,setTransform:bc,setPosition:pr,getPosition:jc,get disableTextSelection(){return kh},get enableTextSelection(){return Oh},disableImageDrag:D0,enableImageDrag:$0,preventOutline:z0,restoreOutline:Jg,getSizedParentNode:uE,getScale:B0};function $t(u,m,b,T){if(m&&typeof m=="object")for(var O in m)q0(u,O,m[O],b);else{m=j(m);for(var F=0,X=m.length;F<X;F++)q0(u,m[F],b,T)}return this}var wa="_leaflet_events";function Pn(u,m,b,T){if(arguments.length===1)dE(u),delete u[wa];else if(m&&typeof m=="object")for(var O in m)U0(u,O,m[O],b);else if(m=j(m),arguments.length===2)dE(u,function(ce){return A(m,ce)!==-1});else for(var F=0,X=m.length;F<X;F++)U0(u,m[F],b,T);return this}function dE(u,m){for(var b in u[wa]){var T=b.split(/\d/)[0];(!m||m(T))&&U0(u,T,null,null,b)}}var V0={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function q0(u,m,b,T){var O=m+c(b)+(T?"_"+c(T):"");if(u[wa]&&u[wa][O])return this;var F=function(ce){return b.call(T||u,ce||window.event)},X=F;!bt.touchNative&&bt.pointer&&m.indexOf("touch")===0?F=uZ(u,m,F):bt.touch&&m==="dblclick"?F=vZ(u,F):"addEventListener"in u?m==="touchstart"||m==="touchmove"||m==="wheel"||m==="mousewheel"?u.addEventListener(V0[m]||m,F,bt.passiveEvents?{passive:!1}:!1):m==="mouseenter"||m==="mouseleave"?(F=function(ce){ce=ce||window.event,W0(u,ce)&&X(ce)},u.addEventListener(V0[m],F,!1)):u.addEventListener(m,X,!1):u.attachEvent("on"+m,F),u[wa]=u[wa]||{},u[wa][O]=F}function U0(u,m,b,T,O){O=O||m+c(b)+(T?"_"+c(T):"");var F=u[wa]&&u[wa][O];if(!F)return this;!bt.touchNative&&bt.pointer&&m.indexOf("touch")===0?dZ(u,m,F):bt.touch&&m==="dblclick"?yZ(u,F):"removeEventListener"in u?u.removeEventListener(V0[m]||m,F,!1):u.detachEvent("on"+m,F),u[wa][O]=null}function _c(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function H0(u){return q0(u,"wheel",_c),this}function Ih(u){return $t(u,"mousedown touchstart dblclick contextmenu",_c),u._leaflet_disable_click=!0,this}function Hr(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function wc(u){return Hr(u),_c(u),this}function fE(u){if(u.composedPath)return u.composedPath();for(var m=[],b=u.target;b;)m.push(b),b=b.parentNode;return m}function hE(u,m){if(!m)return new B(u.clientX,u.clientY);var b=B0(m),T=b.boundingClientRect;return new B((u.clientX-T.left)/b.x-m.clientLeft,(u.clientY-T.top)/b.y-m.clientTop)}var _Z=bt.linux&&bt.chrome?window.devicePixelRatio:bt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function mE(u){return bt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/_Z:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function W0(u,m){var b=m.relatedTarget;if(!b)return!0;try{for(;b&&b!==u;)b=b.parentNode}catch{return!1}return b!==u}var wZ={__proto__:null,on:$t,off:Pn,stopPropagation:_c,disableScrollPropagation:H0,disableClickPropagation:Ih,preventDefault:Hr,stop:wc,getPropagationPath:fE,getMousePosition:hE,getWheelDelta:mE,isExternalTarget:W0,addListener:$t,removeListener:Pn},pE=W.extend({run:function(u,m,b,T){this.stop(),this._el=u,this._inProgress=!0,this._duration=b||.25,this._easeOutPower=1/Math.max(T||.5,.2),this._startPos=jc(u),this._offset=m.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(u){var m=+new Date-this._startTime,b=this._duration*1e3;m<b?this._runFrame(this._easeOut(m/b),u):(this._runFrame(1),this._complete())},_runFrame:function(u,m){var b=this._startPos.add(this._offset.multiplyBy(u));m&&b._round(),pr(this._el,b),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),Jt=W.extend({options:{crs:ct,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,m){m=g(this,m),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),m.maxBounds&&this.setMaxBounds(m.maxBounds),m.zoom!==void 0&&(this._zoom=this._limitZoom(m.zoom)),m.center&&m.zoom!==void 0&&this.setView(Pe(m.center),m.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Eh&&bt.any3d&&!bt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),$t(this._proxy,lE,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,m,b){if(m=m===void 0?this._zoom:this._limitZoom(m),u=this._limitCenter(Pe(u),m,this.options.maxBounds),b=b||{},this._stop(),this._loaded&&!b.reset&&b!==!0){b.animate!==void 0&&(b.zoom=i({animate:b.animate},b.zoom),b.pan=i({animate:b.animate,duration:b.duration},b.pan));var T=this._zoom!==m?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,m,b.zoom):this._tryAnimatedPan(u,b.pan);if(T)return clearTimeout(this._sizeTimer),this}return this._resetView(u,m,b.pan&&b.pan.noMoveStart),this},setZoom:function(u,m){return this._loaded?this.setView(this.getCenter(),u,{zoom:m}):(this._zoom=u,this)},zoomIn:function(u,m){return u=u||(bt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,m)},zoomOut:function(u,m){return u=u||(bt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,m)},setZoomAround:function(u,m,b){var T=this.getZoomScale(m),O=this.getSize().divideBy(2),F=u instanceof B?u:this.latLngToContainerPoint(u),X=F.subtract(O).multiplyBy(1-1/T),ce=this.containerPointToLatLng(O.add(X));return this.setView(ce,m,{zoom:b})},_getBoundsCenterZoom:function(u,m){m=m||{},u=u.getBounds?u.getBounds():Ee(u);var b=G(m.paddingTopLeft||m.padding||[0,0]),T=G(m.paddingBottomRight||m.padding||[0,0]),O=this.getBoundsZoom(u,!1,b.add(T));if(O=typeof m.maxZoom=="number"?Math.min(m.maxZoom,O):O,O===1/0)return{center:u.getCenter(),zoom:O};var F=T.subtract(b).divideBy(2),X=this.project(u.getSouthWest(),O),ce=this.project(u.getNorthEast(),O),he=this.unproject(X.add(ce).divideBy(2).add(F),O);return{center:he,zoom:O}},fitBounds:function(u,m){if(u=Ee(u),!u.isValid())throw new Error("Bounds are not valid.");var b=this._getBoundsCenterZoom(u,m);return this.setView(b.center,b.zoom,m)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,m){return this.setView(u,this._zoom,{pan:m})},panBy:function(u,m){if(u=G(u).round(),m=m||{},!u.x&&!u.y)return this.fire("moveend");if(m.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new pE,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),m.noMoveStart||this.fire("movestart"),m.animate!==!1){qt(this._mapPane,"leaflet-pan-anim");var b=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,b,m.duration||.25,m.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,m,b){if(b=b||{},b.animate===!1||!bt.any3d)return this.setView(u,m,b);this._stop();var T=this.project(this.getCenter()),O=this.project(u),F=this.getSize(),X=this._zoom;u=Pe(u),m=m===void 0?X:m;var ce=Math.max(F.x,F.y),he=ce*this.getZoomScale(X,m),Re=O.distanceTo(T)||1,Je=1.42,Et=Je*Je;function Gt(gr){var dx=gr?-1:1,dQ=gr?he:ce,fQ=he*he-ce*ce+dx*Et*Et*Re*Re,hQ=2*dQ*Et*Re,r_=fQ/hQ,ZE=Math.sqrt(r_*r_+1)-r_,mQ=ZE<1e-9?-18:Math.log(ZE);return mQ}function fs(gr){return(Math.exp(gr)-Math.exp(-gr))/2}function Lr(gr){return(Math.exp(gr)+Math.exp(-gr))/2}function gi(gr){return fs(gr)/Lr(gr)}var ks=Gt(0);function Gu(gr){return ce*(Lr(ks)/Lr(ks+Je*gr))}function oQ(gr){return ce*(Lr(ks)*gi(ks+Je*gr)-fs(ks))/Et}function lQ(gr){return 1-Math.pow(1-gr,1.5)}var cQ=Date.now(),KE=(Gt(1)-ks)/Je,uQ=b.duration?1e3*b.duration:1e3*KE*.8;function GE(){var gr=(Date.now()-cQ)/uQ,dx=lQ(gr)*KE;gr<=1?(this._flyToFrame=R(GE,this),this._move(this.unproject(T.add(O.subtract(T).multiplyBy(oQ(dx)/Re)),X),this.getScaleZoom(ce/Gu(dx),X),{flyTo:!0})):this._move(u,m)._moveEnd(!0)}return this._moveStart(!0,b.noMoveStart),GE.call(this),this},flyToBounds:function(u,m){var b=this._getBoundsCenterZoom(u,m);return this.flyTo(b.center,b.zoom,m)},setMaxBounds:function(u){return u=Ee(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var m=this.options.minZoom;return this.options.minZoom=u,this._loaded&&m!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var m=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&m!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,m){this._enforcingBounds=!0;var b=this.getCenter(),T=this._limitCenter(b,this._zoom,Ee(u));return b.equals(T)||this.panTo(T,m),this._enforcingBounds=!1,this},panInside:function(u,m){m=m||{};var b=G(m.paddingTopLeft||m.padding||[0,0]),T=G(m.paddingBottomRight||m.padding||[0,0]),O=this.project(this.getCenter()),F=this.project(u),X=this.getPixelBounds(),ce=oe([X.min.add(b),X.max.subtract(T)]),he=ce.getSize();if(!ce.contains(F)){this._enforcingBounds=!0;var Re=F.subtract(ce.getCenter()),Je=ce.extend(F).getSize().subtract(he);O.x+=Re.x<0?-Je.x:Je.x,O.y+=Re.y<0?-Je.y:Je.y,this.panTo(this.unproject(O),m),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var m=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var b=this.getSize(),T=m.divideBy(2).round(),O=b.divideBy(2).round(),F=T.subtract(O);return!F.x&&!F.y?this:(u.animate&&u.pan?this.panBy(F):(u.pan&&this._rawPanBy(F),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:m,newSize:b}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var m=o(this._handleGeolocationResponse,this),b=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(m,b,u):navigator.geolocation.getCurrentPosition(m,b,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var m=u.code,b=u.message||(m===1?"permission denied":m===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:m,message:"Geolocation error: "+b+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var m=u.coords.latitude,b=u.coords.longitude,T=new J(m,b),O=T.toBounds(u.coords.accuracy*2),F=this._locateOptions;if(F.setView){var X=this.getBoundsZoom(O);this.setView(T,F.maxZoom?Math.min(X,F.maxZoom):X)}var ce={latlng:T,bounds:O,timestamp:u.timestamp};for(var he in u.coords)typeof u.coords[he]=="number"&&(ce[he]=u.coords[he]);this.fire("locationfound",ce)}},addHandler:function(u,m){if(!m)return this;var b=this[u]=new m(this);return this._handlers.push(b),this.options[u]&&b.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Gn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)Gn(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,m){var b="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),T=rn("div",b,m||this._mapPane);return u&&(this._panes[u]=T),T},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),m=this.unproject(u.getBottomLeft()),b=this.unproject(u.getTopRight());return new fe(m,b)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,m,b){u=Ee(u),b=G(b||[0,0]);var T=this.getZoom()||0,O=this.getMinZoom(),F=this.getMaxZoom(),X=u.getNorthWest(),ce=u.getSouthEast(),he=this.getSize().subtract(b),Re=oe(this.project(ce,T),this.project(X,T)).getSize(),Je=bt.any3d?this.options.zoomSnap:1,Et=he.x/Re.x,Gt=he.y/Re.y,fs=m?Math.max(Et,Gt):Math.min(Et,Gt);return T=this.getScaleZoom(fs,T),Je&&(T=Math.round(T/(Je/100))*(Je/100),T=m?Math.ceil(T/Je)*Je:Math.floor(T/Je)*Je),Math.max(O,Math.min(F,T))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,m){var b=this._getTopLeftPoint(u,m);return new ee(b,b.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,m){var b=this.options.crs;return m=m===void 0?this._zoom:m,b.scale(u)/b.scale(m)},getScaleZoom:function(u,m){var b=this.options.crs;m=m===void 0?this._zoom:m;var T=b.zoom(u*b.scale(m));return isNaN(T)?1/0:T},project:function(u,m){return m=m===void 0?this._zoom:m,this.options.crs.latLngToPoint(Pe(u),m)},unproject:function(u,m){return m=m===void 0?this._zoom:m,this.options.crs.pointToLatLng(G(u),m)},layerPointToLatLng:function(u){var m=G(u).add(this.getPixelOrigin());return this.unproject(m)},latLngToLayerPoint:function(u){var m=this.project(Pe(u))._round();return m._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(Pe(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(Ee(u))},distance:function(u,m){return this.options.crs.distance(Pe(u),Pe(m))},containerPointToLayerPoint:function(u){return G(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return G(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var m=this.containerPointToLayerPoint(G(u));return this.layerPointToLatLng(m)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Pe(u)))},mouseEventToContainerPoint:function(u){return hE(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var m=this._container=cE(u);if(m){if(m._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");$t(m,"scroll",this._onScroll,this),this._containerId=c(m)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&bt.any3d,qt(u,"leaflet-container"+(bt.touch?" leaflet-touch":"")+(bt.retina?" leaflet-retina":"")+(bt.ielt9?" leaflet-oldie":"")+(bt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var m=Th(u,"position");m!=="absolute"&&m!=="relative"&&m!=="fixed"&&m!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),pr(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(qt(u.markerPane,"leaflet-zoom-hide"),qt(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,m,b){pr(this._mapPane,new B(0,0));var T=!this._loaded;this._loaded=!0,m=this._limitZoom(m),this.fire("viewprereset");var O=this._zoom!==m;this._moveStart(O,b)._move(u,m)._moveEnd(O),this.fire("viewreset"),T&&this.fire("load")},_moveStart:function(u,m){return u&&this.fire("zoomstart"),m||this.fire("movestart"),this},_move:function(u,m,b,T){m===void 0&&(m=this._zoom);var O=this._zoom!==m;return this._zoom=m,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),T?b&&b.pinch&&this.fire("zoom",b):((O||b&&b.pinch)&&this.fire("zoom",b),this.fire("move",b)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){pr(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[c(this._container)]=this;var m=u?Pn:$t;m(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&m(window,"resize",this._onResize,this),bt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,m){for(var b=[],T,O=m==="mouseout"||m==="mouseover",F=u.target||u.srcElement,X=!1;F;){if(T=this._targets[c(F)],T&&(m==="click"||m==="preclick")&&this._draggableMoved(T)){X=!0;break}if(T&&T.listens(m,!0)&&(O&&!W0(F,u)||(b.push(T),O))||F===this._container)break;F=F.parentNode}return!b.length&&!X&&!O&&this.listens(m,!0)&&(b=[this]),b},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var m=u.target||u.srcElement;if(!(!this._loaded||m._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(m))){var b=u.type;b==="mousedown"&&z0(m),this._fireDOMEvent(u,b)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,m,b){if(u.type==="click"){var T=i({},u);T.type="preclick",this._fireDOMEvent(T,T.type,b)}var O=this._findEventTargets(u,m);if(b){for(var F=[],X=0;X<b.length;X++)b[X].listens(m,!0)&&F.push(b[X]);O=F.concat(O)}if(O.length){m==="contextmenu"&&Hr(u);var ce=O[0],he={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var Re=ce.getLatLng&&(!ce._radius||ce._radius<=10);he.containerPoint=Re?this.latLngToContainerPoint(ce.getLatLng()):this.mouseEventToContainerPoint(u),he.layerPoint=this.containerPointToLayerPoint(he.containerPoint),he.latlng=Re?ce.getLatLng():this.layerPointToLatLng(he.layerPoint)}for(X=0;X<O.length;X++)if(O[X].fire(m,he,!0),he.originalEvent._stopped||O[X].options.bubblingMouseEvents===!1&&A(this._mouseEvents,m)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,m=this._handlers.length;u<m;u++)this._handlers[u].disable()},whenReady:function(u,m){return this._loaded?u.call(m||this,{target:this}):this.on("load",u,m),this},_getMapPanePos:function(){return jc(this._mapPane)||new B(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,m){var b=u&&m!==void 0?this._getNewPixelOrigin(u,m):this.getPixelOrigin();return b.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,m){var b=this.getSize()._divideBy(2);return this.project(u,m)._subtract(b)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,m,b){var T=this._getNewPixelOrigin(b,m);return this.project(u,m)._subtract(T)},_latLngBoundsToNewLayerBounds:function(u,m,b){var T=this._getNewPixelOrigin(b,m);return oe([this.project(u.getSouthWest(),m)._subtract(T),this.project(u.getNorthWest(),m)._subtract(T),this.project(u.getSouthEast(),m)._subtract(T),this.project(u.getNorthEast(),m)._subtract(T)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,m,b){if(!b)return u;var T=this.project(u,m),O=this.getSize().divideBy(2),F=new ee(T.subtract(O),T.add(O)),X=this._getBoundsOffset(F,b,m);return Math.abs(X.x)<=1&&Math.abs(X.y)<=1?u:this.unproject(T.add(X),m)},_limitOffset:function(u,m){if(!m)return u;var b=this.getPixelBounds(),T=new ee(b.min.add(u),b.max.add(u));return u.add(this._getBoundsOffset(T,m))},_getBoundsOffset:function(u,m,b){var T=oe(this.project(m.getNorthEast(),b),this.project(m.getSouthWest(),b)),O=T.min.subtract(u.min),F=T.max.subtract(u.max),X=this._rebound(O.x,-F.x),ce=this._rebound(O.y,-F.y);return new B(X,ce)},_rebound:function(u,m){return u+m>0?Math.round(u-m)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(m))},_limitZoom:function(u){var m=this.getMinZoom(),b=this.getMaxZoom(),T=bt.any3d?this.options.zoomSnap:1;return T&&(u=Math.round(u/T)*T),Math.max(m,Math.min(b,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){or(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,m){var b=this._getCenterOffset(u)._trunc();return(m&&m.animate)!==!0&&!this.getSize().contains(b)?!1:(this.panBy(b,m),!0)},_createAnimProxy:function(){var u=this._proxy=rn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(m){var b=M0,T=this._proxy.style[b];bc(this._proxy,this.project(m.center,m.zoom),this.getZoomScale(m.zoom,1)),T===this._proxy.style[b]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Gn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),m=this.getZoom();bc(this._proxy,this.project(u,m),this.getZoomScale(m,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,m,b){if(this._animatingZoom)return!0;if(b=b||{},!this._zoomAnimated||b.animate===!1||this._nothingToAnimate()||Math.abs(m-this._zoom)>this.options.zoomAnimationThreshold)return!1;var T=this.getZoomScale(m),O=this._getCenterOffset(u)._divideBy(1-1/T);return b.animate!==!0&&!this.getSize().contains(O)?!1:(R(function(){this._moveStart(!0,b.noMoveStart||!1)._animateZoom(u,m,!0)},this),!0)},_animateZoom:function(u,m,b,T){this._mapPane&&(b&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=m,qt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:m,noUpdate:T}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&or(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function NZ(u,m){return new Jt(u,m)}var Bi=V.extend({options:{position:"topright"},initialize:function(u){g(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var m=this._map;return m&&m.removeControl(this),this.options.position=u,m&&m.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var m=this._container=this.onAdd(u),b=this.getPosition(),T=u._controlCorners[b];return qt(m,"leaflet-control"),b.indexOf("bottom")!==-1?T.insertBefore(m,T.firstChild):T.appendChild(m),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Gn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),Rh=function(u){return new Bi(u)};Jt.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},m="leaflet-",b=this._controlContainer=rn("div",m+"control-container",this._container);function T(O,F){var X=m+O+" "+m+F;u[O+F]=rn("div",X,b)}T("top","left"),T("top","right"),T("bottom","left"),T("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)Gn(this._controlCorners[u]);Gn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var gE=Bi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,m,b,T){return b<T?-1:T<b?1:0}},initialize:function(u,m,b){g(this,b),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var T in u)this._addLayer(u[T],T);for(T in m)this._addLayer(m[T],T,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var m=0;m<this._layers.length;m++)this._layers[m].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return Bi.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,m){return this._addLayer(u,m),this._map?this._update():this},addOverlay:function(u,m){return this._addLayer(u,m,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var m=this._getLayer(c(u));return m&&this._layers.splice(this._layers.indexOf(m),1),this._map?this._update():this},expand:function(){qt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(qt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):or(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return or(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",m=this._container=rn("div",u),b=this.options.collapsed;m.setAttribute("aria-haspopup",!0),Ih(m),H0(m);var T=this._section=rn("section",u+"-list");b&&(this._map.on("click",this.collapse,this),$t(m,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var O=this._layersLink=rn("a",u+"-toggle",m);O.href="#",O.title="Layers",O.setAttribute("role","button"),$t(O,{keydown:function(F){F.keyCode===13&&this._expandSafely()},click:function(F){Hr(F),this._expandSafely()}},this),b||this.expand(),this._baseLayersList=rn("div",u+"-base",T),this._separator=rn("div",u+"-separator",T),this._overlaysList=rn("div",u+"-overlays",T),m.appendChild(T)},_getLayer:function(u){for(var m=0;m<this._layers.length;m++)if(this._layers[m]&&c(this._layers[m].layer)===u)return this._layers[m]},_addLayer:function(u,m,b){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:m,overlay:b}),this.options.sortLayers&&this._layers.sort(o(function(T,O){return this.options.sortFunction(T.layer,O.layer,T.name,O.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Zg(this._baseLayersList),Zg(this._overlaysList),this._layerControlInputs=[];var u,m,b,T,O=0;for(b=0;b<this._layers.length;b++)T=this._layers[b],this._addItem(T),m=m||T.overlay,u=u||!T.overlay,O+=T.overlay?0:1;return this.options.hideSingleBase&&(u=u&&O>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=m&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var m=this._getLayer(c(u.target)),b=m.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;b&&this._map.fire(b,m)},_createRadioElement:function(u,m){var b='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(m?' checked="checked"':"")+"/>",T=document.createElement("div");return T.innerHTML=b,T.firstChild},_addItem:function(u){var m=document.createElement("label"),b=this._map.hasLayer(u.layer),T;u.overlay?(T=document.createElement("input"),T.type="checkbox",T.className="leaflet-control-layers-selector",T.defaultChecked=b):T=this._createRadioElement("leaflet-base-layers_"+c(this),b),this._layerControlInputs.push(T),T.layerId=c(u.layer),$t(T,"click",this._onInputClick,this);var O=document.createElement("span");O.innerHTML=" "+u.name;var F=document.createElement("span");m.appendChild(F),F.appendChild(T),F.appendChild(O);var X=u.overlay?this._overlaysList:this._baseLayersList;return X.appendChild(m),this._checkDisabledLayers(),m},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,m,b,T=[],O=[];this._handlingClick=!0;for(var F=u.length-1;F>=0;F--)m=u[F],b=this._getLayer(m.layerId).layer,m.checked?T.push(b):m.checked||O.push(b);for(F=0;F<O.length;F++)this._map.hasLayer(O[F])&&this._map.removeLayer(O[F]);for(F=0;F<T.length;F++)this._map.hasLayer(T[F])||this._map.addLayer(T[F]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,m,b,T=this._map.getZoom(),O=u.length-1;O>=0;O--)m=u[O],b=this._getLayer(m.layerId).layer,m.disabled=b.options.minZoom!==void 0&&T<b.options.minZoom||b.options.maxZoom!==void 0&&T>b.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,$t(u,"click",Hr),this.expand();var m=this;setTimeout(function(){Pn(u,"click",Hr),m._preventClick=!1})}}),SZ=function(u,m,b){return new gE(u,m,b)},K0=Bi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var m="leaflet-control-zoom",b=rn("div",m+" leaflet-bar"),T=this.options;return this._zoomInButton=this._createButton(T.zoomInText,T.zoomInTitle,m+"-in",b,this._zoomIn),this._zoomOutButton=this._createButton(T.zoomOutText,T.zoomOutTitle,m+"-out",b,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),b},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,m,b,T,O){var F=rn("a",b,T);return F.innerHTML=u,F.href="#",F.title=m,F.setAttribute("role","button"),F.setAttribute("aria-label",m),Ih(F),$t(F,"click",wc),$t(F,"click",O,this),$t(F,"click",this._refocusOnMap,this),F},_updateDisabled:function(){var u=this._map,m="leaflet-disabled";or(this._zoomInButton,m),or(this._zoomOutButton,m),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(qt(this._zoomOutButton,m),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(qt(this._zoomInButton,m),this._zoomInButton.setAttribute("aria-disabled","true"))}});Jt.mergeOptions({zoomControl:!0}),Jt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new K0,this.addControl(this.zoomControl))});var CZ=function(u){return new K0(u)},xE=Bi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var m="leaflet-control-scale",b=rn("div",m),T=this.options;return this._addScales(T,m+"-line",b),u.on(T.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),b},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,m,b){u.metric&&(this._mScale=rn("div",m,b)),u.imperial&&(this._iScale=rn("div",m,b))},_update:function(){var u=this._map,m=u.getSize().y/2,b=u.distance(u.containerPointToLatLng([0,m]),u.containerPointToLatLng([this.options.maxWidth,m]));this._updateScales(b)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var m=this._getRoundNum(u),b=m<1e3?m+" m":m/1e3+" km";this._updateScale(this._mScale,b,m/u)},_updateImperial:function(u){var m=u*3.2808399,b,T,O;m>5280?(b=m/5280,T=this._getRoundNum(b),this._updateScale(this._iScale,T+" mi",T/b)):(O=this._getRoundNum(m),this._updateScale(this._iScale,O+" ft",O/m))},_updateScale:function(u,m,b){u.style.width=Math.round(this.options.maxWidth*b)+"px",u.innerHTML=m},_getRoundNum:function(u){var m=Math.pow(10,(Math.floor(u)+"").length-1),b=u/m;return b=b>=10?10:b>=5?5:b>=3?3:b>=2?2:1,m*b}}),PZ=function(u){return new xE(u)},AZ='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',G0=Bi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(bt.inlineSvg?AZ+" ":"")+"Leaflet</a>"},initialize:function(u){g(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=rn("div","leaflet-control-attribution"),Ih(this._container);for(var m in u._layers)u._layers[m].getAttribution&&this.addAttribution(u._layers[m].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var m in this._attributions)this._attributions[m]&&u.push(m);var b=[];this.options.prefix&&b.push(this.options.prefix),u.length&&b.push(u.join(", ")),this._container.innerHTML=b.join(' <span aria-hidden="true">|</span> ')}}});Jt.mergeOptions({attributionControl:!0}),Jt.addInitHook(function(){this.options.attributionControl&&new G0().addTo(this)});var EZ=function(u){return new G0(u)};Bi.Layers=gE,Bi.Zoom=K0,Bi.Scale=xE,Bi.Attribution=G0,Rh.layers=SZ,Rh.zoom=CZ,Rh.scale=PZ,Rh.attribution=EZ;var Na=V.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Na.addTo=function(u,m){return u.addHandler(m,this),this};var TZ={Events:H},vE=bt.touch?"touchstart mousedown":"mousedown",al=W.extend({options:{clickTolerance:3},initialize:function(u,m,b,T){g(this,T),this._element=u,this._dragStartTarget=m||u,this._preventOutline=b},enable:function(){this._enabled||($t(this._dragStartTarget,vE,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(al._dragging===this&&this.finishDrag(!0),Pn(this._dragStartTarget,vE,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!I0(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){al._dragging===this&&this.finishDrag();return}if(!(al._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(al._dragging=this,this._preventOutline&&z0(this._element),D0(),kh(),!this._moving)){this.fire("down");var m=u.touches?u.touches[0]:u,b=uE(this._element);this._startPoint=new B(m.clientX,m.clientY),this._startPos=jc(this._element),this._parentScale=B0(b);var T=u.type==="mousedown";$t(document,T?"mousemove":"touchmove",this._onMove,this),$t(document,T?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var m=u.touches&&u.touches.length===1?u.touches[0]:u,b=new B(m.clientX,m.clientY)._subtract(this._startPoint);!b.x&&!b.y||Math.abs(b.x)+Math.abs(b.y)<this.options.clickTolerance||(b.x/=this._parentScale.x,b.y/=this._parentScale.y,Hr(u),this._moved||(this.fire("dragstart"),this._moved=!0,qt(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),qt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(b),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),pr(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){or(document.body,"leaflet-dragging"),this._lastTarget&&(or(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Pn(document,"mousemove touchmove",this._onMove,this),Pn(document,"mouseup touchend touchcancel",this._onUp,this),$0(),Oh();var m=this._moved&&this._moving;this._moving=!1,al._dragging=!1,m&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function yE(u,m,b){var T,O=[1,4,2,8],F,X,ce,he,Re,Je,Et,Gt;for(F=0,Je=u.length;F<Je;F++)u[F]._code=Nc(u[F],m);for(ce=0;ce<4;ce++){for(Et=O[ce],T=[],F=0,Je=u.length,X=Je-1;F<Je;X=F++)he=u[F],Re=u[X],he._code&Et?Re._code&Et||(Gt=ex(Re,he,Et,m,b),Gt._code=Nc(Gt,m),T.push(Gt)):(Re._code&Et&&(Gt=ex(Re,he,Et,m,b),Gt._code=Nc(Gt,m),T.push(Gt)),T.push(he));u=T}return u}function bE(u,m){var b,T,O,F,X,ce,he,Re,Je;if(!u||u.length===0)throw new Error("latlngs not passed");pi(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Et=Pe([0,0]),Gt=Ee(u),fs=Gt.getNorthWest().distanceTo(Gt.getSouthWest())*Gt.getNorthEast().distanceTo(Gt.getNorthWest());fs<1700&&(Et=Z0(u));var Lr=u.length,gi=[];for(b=0;b<Lr;b++){var ks=Pe(u[b]);gi.push(m.project(Pe([ks.lat-Et.lat,ks.lng-Et.lng])))}for(ce=he=Re=0,b=0,T=Lr-1;b<Lr;T=b++)O=gi[b],F=gi[T],X=O.y*F.x-F.y*O.x,he+=(O.x+F.x)*X,Re+=(O.y+F.y)*X,ce+=X*3;ce===0?Je=gi[0]:Je=[he/ce,Re/ce];var Gu=m.unproject(G(Je));return Pe([Gu.lat+Et.lat,Gu.lng+Et.lng])}function Z0(u){for(var m=0,b=0,T=0,O=0;O<u.length;O++){var F=Pe(u[O]);m+=F.lat,b+=F.lng,T++}return Pe([m/T,b/T])}var kZ={__proto__:null,clipPolygon:yE,polygonCenter:bE,centroid:Z0};function jE(u,m){if(!m||!u.length)return u.slice();var b=m*m;return u=IZ(u,b),u=MZ(u,b),u}function _E(u,m,b){return Math.sqrt(Lh(u,m,b,!0))}function OZ(u,m,b){return Lh(u,m,b)}function MZ(u,m){var b=u.length,T=typeof Uint8Array<"u"?Uint8Array:Array,O=new T(b);O[0]=O[b-1]=1,Q0(u,O,m,0,b-1);var F,X=[];for(F=0;F<b;F++)O[F]&&X.push(u[F]);return X}function Q0(u,m,b,T,O){var F=0,X,ce,he;for(ce=T+1;ce<=O-1;ce++)he=Lh(u[ce],u[T],u[O],!0),he>F&&(X=ce,F=he);F>b&&(m[X]=1,Q0(u,m,b,T,X),Q0(u,m,b,X,O))}function IZ(u,m){for(var b=[u[0]],T=1,O=0,F=u.length;T<F;T++)RZ(u[T],u[O])>m&&(b.push(u[T]),O=T);return O<F-1&&b.push(u[F-1]),b}var wE;function NE(u,m,b,T,O){var F=T?wE:Nc(u,b),X=Nc(m,b),ce,he,Re;for(wE=X;;){if(!(F|X))return[u,m];if(F&X)return!1;ce=F||X,he=ex(u,m,ce,b,O),Re=Nc(he,b),ce===F?(u=he,F=Re):(m=he,X=Re)}}function ex(u,m,b,T,O){var F=m.x-u.x,X=m.y-u.y,ce=T.min,he=T.max,Re,Je;return b&8?(Re=u.x+F*(he.y-u.y)/X,Je=he.y):b&4?(Re=u.x+F*(ce.y-u.y)/X,Je=ce.y):b&2?(Re=he.x,Je=u.y+X*(he.x-u.x)/F):b&1&&(Re=ce.x,Je=u.y+X*(ce.x-u.x)/F),new B(Re,Je,O)}function Nc(u,m){var b=0;return u.x<m.min.x?b|=1:u.x>m.max.x&&(b|=2),u.y<m.min.y?b|=4:u.y>m.max.y&&(b|=8),b}function RZ(u,m){var b=m.x-u.x,T=m.y-u.y;return b*b+T*T}function Lh(u,m,b,T){var O=m.x,F=m.y,X=b.x-O,ce=b.y-F,he=X*X+ce*ce,Re;return he>0&&(Re=((u.x-O)*X+(u.y-F)*ce)/he,Re>1?(O=b.x,F=b.y):Re>0&&(O+=X*Re,F+=ce*Re)),X=u.x-O,ce=u.y-F,T?X*X+ce*ce:new B(O,F)}function pi(u){return!y(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function SE(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),pi(u)}function CE(u,m){var b,T,O,F,X,ce,he,Re;if(!u||u.length===0)throw new Error("latlngs not passed");pi(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Je=Pe([0,0]),Et=Ee(u),Gt=Et.getNorthWest().distanceTo(Et.getSouthWest())*Et.getNorthEast().distanceTo(Et.getNorthWest());Gt<1700&&(Je=Z0(u));var fs=u.length,Lr=[];for(b=0;b<fs;b++){var gi=Pe(u[b]);Lr.push(m.project(Pe([gi.lat-Je.lat,gi.lng-Je.lng])))}for(b=0,T=0;b<fs-1;b++)T+=Lr[b].distanceTo(Lr[b+1])/2;if(T===0)Re=Lr[0];else for(b=0,F=0;b<fs-1;b++)if(X=Lr[b],ce=Lr[b+1],O=X.distanceTo(ce),F+=O,F>T){he=(F-T)/O,Re=[ce.x-he*(ce.x-X.x),ce.y-he*(ce.y-X.y)];break}var ks=m.unproject(G(Re));return Pe([ks.lat+Je.lat,ks.lng+Je.lng])}var LZ={__proto__:null,simplify:jE,pointToSegmentDistance:_E,closestPointOnSegment:OZ,clipSegment:NE,_getEdgeIntersection:ex,_getBitCode:Nc,_sqClosestPointOnSegment:Lh,isFlat:pi,_flat:SE,polylineCenter:CE},Y0={project:function(u){return new B(u.lng,u.lat)},unproject:function(u){return new J(u.y,u.x)},bounds:new ee([-180,-90],[180,90])},X0={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ee([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var m=Math.PI/180,b=this.R,T=u.lat*m,O=this.R_MINOR/b,F=Math.sqrt(1-O*O),X=F*Math.sin(T),ce=Math.tan(Math.PI/4-T/2)/Math.pow((1-X)/(1+X),F/2);return T=-b*Math.log(Math.max(ce,1e-10)),new B(u.lng*m*b,T)},unproject:function(u){for(var m=180/Math.PI,b=this.R,T=this.R_MINOR/b,O=Math.sqrt(1-T*T),F=Math.exp(-u.y/b),X=Math.PI/2-2*Math.atan(F),ce=0,he=.1,Re;ce<15&&Math.abs(he)>1e-7;ce++)Re=O*Math.sin(X),Re=Math.pow((1-Re)/(1+Re),O/2),he=Math.PI/2-2*Math.atan(F*Re)-X,X+=he;return new J(X*m,u.x*m/b)}},DZ={__proto__:null,LonLat:Y0,Mercator:X0,SphericalMercator:Te},$Z=i({},$e,{code:"EPSG:3395",projection:X0,transformation:function(){var u=.5/(Math.PI*X0.R);return ue(u,.5,-u,.5)}()}),PE=i({},$e,{code:"EPSG:4326",projection:Y0,transformation:ue(1/180,1,-1/180,.5)}),FZ=i({},ze,{projection:Y0,transformation:ue(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,m){var b=m.lng-u.lng,T=m.lat-u.lat;return Math.sqrt(b*b+T*T)},infinite:!0});ze.Earth=$e,ze.EPSG3395=$Z,ze.EPSG3857=ct,ze.EPSG900913=Ge,ze.EPSG4326=PE,ze.Simple=FZ;var Vi=W.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[c(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[c(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var m=u.target;if(m.hasLayer(this)){if(this._map=m,this._zoomAnimated=m._zoomAnimated,this.getEvents){var b=this.getEvents();m.on(b,this),this.once("remove",function(){m.off(b,this)},this)}this.onAdd(m),this.fire("add"),m.fire("layeradd",{layer:this})}}});Jt.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var m=c(u);return this._layers[m]?this:(this._layers[m]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var m=c(u);return this._layers[m]?(this._loaded&&u.onRemove(this),delete this._layers[m],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return c(u)in this._layers},eachLayer:function(u,m){for(var b in this._layers)u.call(m,this._layers[b]);return this},_addLayers:function(u){u=u?y(u)?u:[u]:[];for(var m=0,b=u.length;m<b;m++)this.addLayer(u[m])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[c(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var m=c(u);this._zoomBoundLayers[m]&&(delete this._zoomBoundLayers[m],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,m=-1/0,b=this._getZoomSpan();for(var T in this._zoomBoundLayers){var O=this._zoomBoundLayers[T].options;u=O.minZoom===void 0?u:Math.min(u,O.minZoom),m=O.maxZoom===void 0?m:Math.max(m,O.maxZoom)}this._layersMaxZoom=m===-1/0?void 0:m,this._layersMinZoom=u===1/0?void 0:u,b!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qu=Vi.extend({initialize:function(u,m){g(this,m),this._layers={};var b,T;if(u)for(b=0,T=u.length;b<T;b++)this.addLayer(u[b])},addLayer:function(u){var m=this.getLayerId(u);return this._layers[m]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var m=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[m]&&this._map.removeLayer(this._layers[m]),delete this._layers[m],this},hasLayer:function(u){var m=typeof u=="number"?u:this.getLayerId(u);return m in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var m=Array.prototype.slice.call(arguments,1),b,T;for(b in this._layers)T=this._layers[b],T[u]&&T[u].apply(T,m);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,m){for(var b in this._layers)u.call(m,this._layers[b]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return c(u)}}),zZ=function(u,m){return new qu(u,m)},lo=qu.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),qu.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),qu.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new fe;for(var m in this._layers){var b=this._layers[m];u.extend(b.getBounds?b.getBounds():b.getLatLng())}return u}}),BZ=function(u,m){return new lo(u,m)},Uu=V.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){g(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,m){var b=this._getIconUrl(u);if(!b){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var T=this._createImg(b,m&&m.tagName==="IMG"?m:null);return this._setIconStyles(T,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),T},_setIconStyles:function(u,m){var b=this.options,T=b[m+"Size"];typeof T=="number"&&(T=[T,T]);var O=G(T),F=G(m==="shadow"&&b.shadowAnchor||b.iconAnchor||O&&O.divideBy(2,!0));u.className="leaflet-marker-"+m+" "+(b.className||""),F&&(u.style.marginLeft=-F.x+"px",u.style.marginTop=-F.y+"px"),O&&(u.style.width=O.x+"px",u.style.height=O.y+"px")},_createImg:function(u,m){return m=m||document.createElement("img"),m.src=u,m},_getIconUrl:function(u){return bt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function VZ(u){return new Uu(u)}var Dh=Uu.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof Dh.imagePath!="string"&&(Dh.imagePath=this._detectIconPath()),(this.options.imagePath||Dh.imagePath)+Uu.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var m=function(b,T,O){var F=T.exec(b);return F&&F[O]};return u=m(u,/^url\((['"])?(.+)\1\)$/,2),u&&m(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=rn("div","leaflet-default-icon-path",document.body),m=Th(u,"background-image")||Th(u,"backgroundImage");if(document.body.removeChild(u),m=this._stripUrl(m),m)return m;var b=document.querySelector('link[href$="leaflet.css"]');return b?b.href.substring(0,b.href.length-11-1):""}}),AE=Na.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new al(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),qt(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&or(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var m=this._marker,b=m._map,T=this._marker.options.autoPanSpeed,O=this._marker.options.autoPanPadding,F=jc(m._icon),X=b.getPixelBounds(),ce=b.getPixelOrigin(),he=oe(X.min._subtract(ce).add(O),X.max._subtract(ce).subtract(O));if(!he.contains(F)){var Re=G((Math.max(he.max.x,F.x)-he.max.x)/(X.max.x-he.max.x)-(Math.min(he.min.x,F.x)-he.min.x)/(X.min.x-he.min.x),(Math.max(he.max.y,F.y)-he.max.y)/(X.max.y-he.max.y)-(Math.min(he.min.y,F.y)-he.min.y)/(X.min.y-he.min.y)).multiplyBy(T);b.panBy(Re,{animate:!1}),this._draggable._newPos._add(Re),this._draggable._startPos._add(Re),pr(m._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=R(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,u)))},_onDrag:function(u){var m=this._marker,b=m._shadow,T=jc(m._icon),O=m._map.layerPointToLatLng(T);b&&pr(b,T),m._latlng=O,u.latlng=O,u.oldLatLng=this._oldLatLng,m.fire("move",u).fire("drag",u)},_onDragEnd:function(u){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),tx=Vi.extend({options:{icon:new Dh,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,m){g(this,m),this._latlng=Pe(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var m=this._latlng;return this._latlng=Pe(u),this.update(),this.fire("move",{oldLatLng:m,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,m="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),b=u.icon.createIcon(this._icon),T=!1;b!==this._icon&&(this._icon&&this._removeIcon(),T=!0,u.title&&(b.title=u.title),b.tagName==="IMG"&&(b.alt=u.alt||"")),qt(b,m),u.keyboard&&(b.tabIndex="0",b.setAttribute("role","button")),this._icon=b,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$t(b,"focus",this._panOnFocus,this);var O=u.icon.createShadow(this._shadow),F=!1;O!==this._shadow&&(this._removeShadow(),F=!0),O&&(qt(O,m),O.alt=""),this._shadow=O,u.opacity<1&&this._updateOpacity(),T&&this.getPane().appendChild(this._icon),this._initInteraction(),O&&F&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pn(this._icon,"focus",this._panOnFocus,this),Gn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Gn(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&pr(this._icon,u),this._shadow&&pr(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var m=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(m)},_initInteraction:function(){if(this.options.interactive&&(qt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),AE)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new AE(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&mi(this._icon,u),this._shadow&&mi(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var m=this.options.icon.options,b=m.iconSize?G(m.iconSize):G(0,0),T=m.iconAnchor?G(m.iconAnchor):G(0,0);u.panInside(this._latlng,{paddingTopLeft:T,paddingBottomRight:b.subtract(T)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function qZ(u,m){return new tx(u,m)}var ol=Vi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return g(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),nx=ol.extend({options:{fill:!0,radius:10},initialize:function(u,m){g(this,m),this._latlng=Pe(u),this._radius=this.options.radius},setLatLng:function(u){var m=this._latlng;return this._latlng=Pe(u),this.redraw(),this.fire("move",{oldLatLng:m,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var m=u&&u.radius||this._radius;return ol.prototype.setStyle.call(this,u),this.setRadius(m),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,m=this._radiusY||u,b=this._clickTolerance(),T=[u+b,m+b];this._pxBounds=new ee(this._point.subtract(T),this._point.add(T))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function UZ(u,m){return new nx(u,m)}var J0=nx.extend({initialize:function(u,m,b){if(typeof m=="number"&&(m=i({},b,{radius:m})),g(this,m),this._latlng=Pe(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new fe(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:ol.prototype.setStyle,_project:function(){var u=this._latlng.lng,m=this._latlng.lat,b=this._map,T=b.options.crs;if(T.distance===$e.distance){var O=Math.PI/180,F=this._mRadius/$e.R/O,X=b.project([m+F,u]),ce=b.project([m-F,u]),he=X.add(ce).divideBy(2),Re=b.unproject(he).lat,Je=Math.acos((Math.cos(F*O)-Math.sin(m*O)*Math.sin(Re*O))/(Math.cos(m*O)*Math.cos(Re*O)))/O;(isNaN(Je)||Je===0)&&(Je=F/Math.cos(Math.PI/180*m)),this._point=he.subtract(b.getPixelOrigin()),this._radius=isNaN(Je)?0:he.x-b.project([Re,u-Je]).x,this._radiusY=he.y-X.y}else{var Et=T.unproject(T.project(this._latlng).subtract([this._mRadius,0]));this._point=b.latLngToLayerPoint(this._latlng),this._radius=this._point.x-b.latLngToLayerPoint(Et).x}this._updateBounds()}});function HZ(u,m,b){return new J0(u,m,b)}var co=ol.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,m){g(this,m),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var m=1/0,b=null,T=Lh,O,F,X=0,ce=this._parts.length;X<ce;X++)for(var he=this._parts[X],Re=1,Je=he.length;Re<Je;Re++){O=he[Re-1],F=he[Re];var Et=T(u,O,F,!0);Et<m&&(m=Et,b=T(u,O,F))}return b&&(b.distance=Math.sqrt(m)),b},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return CE(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,m){return m=m||this._defaultShape(),u=Pe(u),m.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new fe,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return pi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var m=[],b=pi(u),T=0,O=u.length;T<O;T++)b?(m[T]=Pe(u[T]),this._bounds.extend(m[T])):m[T]=this._convertLatLngs(u[T]);return m},_project:function(){var u=new ee;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),m=new B(u,u);this._rawPxBounds&&(this._pxBounds=new ee([this._rawPxBounds.min.subtract(m),this._rawPxBounds.max.add(m)]))},_projectLatlngs:function(u,m,b){var T=u[0]instanceof J,O=u.length,F,X;if(T){for(X=[],F=0;F<O;F++)X[F]=this._map.latLngToLayerPoint(u[F]),b.extend(X[F]);m.push(X)}else for(F=0;F<O;F++)this._projectLatlngs(u[F],m,b)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var m=this._parts,b,T,O,F,X,ce,he;for(b=0,O=0,F=this._rings.length;b<F;b++)for(he=this._rings[b],T=0,X=he.length;T<X-1;T++)ce=NE(he[T],he[T+1],u,T,!0),ce&&(m[O]=m[O]||[],m[O].push(ce[0]),(ce[1]!==he[T+1]||T===X-2)&&(m[O].push(ce[1]),O++))}},_simplifyPoints:function(){for(var u=this._parts,m=this.options.smoothFactor,b=0,T=u.length;b<T;b++)u[b]=jE(u[b],m)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,m){var b,T,O,F,X,ce,he=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(b=0,F=this._parts.length;b<F;b++)for(ce=this._parts[b],T=0,X=ce.length,O=X-1;T<X;O=T++)if(!(!m&&T===0)&&_E(u,ce[O],ce[T])<=he)return!0;return!1}});function WZ(u,m){return new co(u,m)}co._flat=SE;var Hu=co.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bE(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var m=co.prototype._convertLatLngs.call(this,u),b=m.length;return b>=2&&m[0]instanceof J&&m[0].equals(m[b-1])&&m.pop(),m},_setLatLngs:function(u){co.prototype._setLatLngs.call(this,u),pi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return pi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,m=this.options.weight,b=new B(m,m);if(u=new ee(u.min.subtract(b),u.max.add(b)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var T=0,O=this._rings.length,F;T<O;T++)F=yE(this._rings[T],u,!0),F.length&&this._parts.push(F)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var m=!1,b,T,O,F,X,ce,he,Re;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(F=0,he=this._parts.length;F<he;F++)for(b=this._parts[F],X=0,Re=b.length,ce=Re-1;X<Re;ce=X++)T=b[X],O=b[ce],T.y>u.y!=O.y>u.y&&u.x<(O.x-T.x)*(u.y-T.y)/(O.y-T.y)+T.x&&(m=!m);return m||co.prototype._containsPoint.call(this,u,!0)}});function KZ(u,m){return new Hu(u,m)}var uo=lo.extend({initialize:function(u,m){g(this,m),this._layers={},u&&this.addData(u)},addData:function(u){var m=y(u)?u:u.features,b,T,O;if(m){for(b=0,T=m.length;b<T;b++)O=m[b],(O.geometries||O.geometry||O.features||O.coordinates)&&this.addData(O);return this}var F=this.options;if(F.filter&&!F.filter(u))return this;var X=rx(u,F);return X?(X.feature=ax(u),X.defaultOptions=X.options,this.resetStyle(X),F.onEachFeature&&F.onEachFeature(u,X),this.addLayer(X)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(m){this._setLayerStyle(m,u)},this)},_setLayerStyle:function(u,m){u.setStyle&&(typeof m=="function"&&(m=m(u.feature)),u.setStyle(m))}});function rx(u,m){var b=u.type==="Feature"?u.geometry:u,T=b?b.coordinates:null,O=[],F=m&&m.pointToLayer,X=m&&m.coordsToLatLng||e_,ce,he,Re,Je;if(!T&&!b)return null;switch(b.type){case"Point":return ce=X(T),EE(F,u,ce,m);case"MultiPoint":for(Re=0,Je=T.length;Re<Je;Re++)ce=X(T[Re]),O.push(EE(F,u,ce,m));return new lo(O);case"LineString":case"MultiLineString":return he=sx(T,b.type==="LineString"?0:1,X),new co(he,m);case"Polygon":case"MultiPolygon":return he=sx(T,b.type==="Polygon"?1:2,X),new Hu(he,m);case"GeometryCollection":for(Re=0,Je=b.geometries.length;Re<Je;Re++){var Et=rx({geometry:b.geometries[Re],type:"Feature",properties:u.properties},m);Et&&O.push(Et)}return new lo(O);case"FeatureCollection":for(Re=0,Je=b.features.length;Re<Je;Re++){var Gt=rx(b.features[Re],m);Gt&&O.push(Gt)}return new lo(O);default:throw new Error("Invalid GeoJSON object.")}}function EE(u,m,b,T){return u?u(m,b):new tx(b,T&&T.markersInheritOptions&&T)}function e_(u){return new J(u[1],u[0],u[2])}function sx(u,m,b){for(var T=[],O=0,F=u.length,X;O<F;O++)X=m?sx(u[O],m-1,b):(b||e_)(u[O]),T.push(X);return T}function t_(u,m){return u=Pe(u),u.alt!==void 0?[p(u.lng,m),p(u.lat,m),p(u.alt,m)]:[p(u.lng,m),p(u.lat,m)]}function ix(u,m,b,T){for(var O=[],F=0,X=u.length;F<X;F++)O.push(m?ix(u[F],pi(u[F])?0:m-1,b,T):t_(u[F],T));return!m&&b&&O.length>0&&O.push(O[0].slice()),O}function Wu(u,m){return u.feature?i({},u.feature,{geometry:m}):ax(m)}function ax(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var n_={toGeoJSON:function(u){return Wu(this,{type:"Point",coordinates:t_(this.getLatLng(),u)})}};tx.include(n_),J0.include(n_),nx.include(n_),co.include({toGeoJSON:function(u){var m=!pi(this._latlngs),b=ix(this._latlngs,m?1:0,!1,u);return Wu(this,{type:(m?"Multi":"")+"LineString",coordinates:b})}}),Hu.include({toGeoJSON:function(u){var m=!pi(this._latlngs),b=m&&!pi(this._latlngs[0]),T=ix(this._latlngs,b?2:m?1:0,!0,u);return m||(T=[T]),Wu(this,{type:(b?"Multi":"")+"Polygon",coordinates:T})}}),qu.include({toMultiPoint:function(u){var m=[];return this.eachLayer(function(b){m.push(b.toGeoJSON(u).geometry.coordinates)}),Wu(this,{type:"MultiPoint",coordinates:m})},toGeoJSON:function(u){var m=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(m==="MultiPoint")return this.toMultiPoint(u);var b=m==="GeometryCollection",T=[];return this.eachLayer(function(O){if(O.toGeoJSON){var F=O.toGeoJSON(u);if(b)T.push(F.geometry);else{var X=ax(F);X.type==="FeatureCollection"?T.push.apply(T,X.features):T.push(X)}}}),b?Wu(this,{geometries:T,type:"GeometryCollection"}):{type:"FeatureCollection",features:T}}});function TE(u,m){return new uo(u,m)}var GZ=TE,ox=Vi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,m,b){this._url=u,this._bounds=Ee(m),g(this,b)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(qt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Gn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&Bu(this._image),this},bringToBack:function(){return this._map&&Vu(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=Ee(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",m=this._image=u?this._url:rn("img");if(qt(m,"leaflet-image-layer"),this._zoomAnimated&&qt(m,"leaflet-zoom-animated"),this.options.className&&qt(m,this.options.className),m.onselectstart=h,m.onmousemove=h,m.onload=o(this.fire,this,"load"),m.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=m.src;return}m.src=this._url,m.alt=this.options.alt},_animateZoom:function(u){var m=this._map.getZoomScale(u.zoom),b=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;bc(this._image,b,m)},_reset:function(){var u=this._image,m=new ee(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),b=m.getSize();pr(u,m.min),u.style.width=b.x+"px",u.style.height=b.y+"px"},_updateOpacity:function(){mi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),ZZ=function(u,m,b){return new ox(u,m,b)},kE=ox.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",m=this._image=u?this._url:rn("video");if(qt(m,"leaflet-image-layer"),this._zoomAnimated&&qt(m,"leaflet-zoom-animated"),this.options.className&&qt(m,this.options.className),m.onselectstart=h,m.onmousemove=h,m.onloadeddata=o(this.fire,this,"load"),u){for(var b=m.getElementsByTagName("source"),T=[],O=0;O<b.length;O++)T.push(b[O].src);this._url=b.length>0?T:[m.src];return}y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(m.style,"objectFit")&&(m.style.objectFit="fill"),m.autoplay=!!this.options.autoplay,m.loop=!!this.options.loop,m.muted=!!this.options.muted,m.playsInline=!!this.options.playsInline;for(var F=0;F<this._url.length;F++){var X=rn("source");X.src=this._url[F],m.appendChild(X)}}});function QZ(u,m,b){return new kE(u,m,b)}var OE=ox.extend({_initImage:function(){var u=this._image=this._url;qt(u,"leaflet-image-layer"),this._zoomAnimated&&qt(u,"leaflet-zoom-animated"),this.options.className&&qt(u,this.options.className),u.onselectstart=h,u.onmousemove=h}});function YZ(u,m,b){return new OE(u,m,b)}var Sa=Vi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,m){u&&(u instanceof J||y(u))?(this._latlng=Pe(u),g(this,m)):(g(this,u),this._source=m),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&mi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&mi(this._container,1),this.bringToFront(),this.options.interactive&&(qt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(mi(this._container,0),this._removeTimeout=setTimeout(o(Gn,void 0,this._container),200)):Gn(this._container),this.options.interactive&&(or(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=Pe(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Bu(this._container),this},bringToBack:function(){return this._map&&Vu(this._container),this},_prepareOpen:function(u){var m=this._source;if(!m._map)return!1;if(m instanceof lo){m=null;var b=this._source._layers;for(var T in b)if(b[T]._map){m=b[T];break}if(!m)return!1;this._source=m}if(!u)if(m.getCenter)u=m.getCenter();else if(m.getLatLng)u=m.getLatLng();else if(m.getBounds)u=m.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,m=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof m=="string")u.innerHTML=m;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(m)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),m=G(this.options.offset),b=this._getAnchor();this._zoomAnimated?pr(this._container,u.add(b)):m=m.add(u).add(b);var T=this._containerBottom=-m.y,O=this._containerLeft=-Math.round(this._containerWidth/2)+m.x;this._container.style.bottom=T+"px",this._container.style.left=O+"px"}},_getAnchor:function(){return[0,0]}});Jt.include({_initOverlay:function(u,m,b,T){var O=m;return O instanceof u||(O=new u(T).setContent(m)),b&&O.setLatLng(b),O}}),Vi.include({_initOverlay:function(u,m,b,T){var O=b;return O instanceof u?(g(O,T),O._source=this):(O=m&&!T?m:new u(T,this),O.setContent(b)),O}});var lx=Sa.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,Sa.prototype.openOn.call(this,u)},onAdd:function(u){Sa.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ol||this._source.on("preclick",_c))},onRemove:function(u){Sa.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ol||this._source.off("preclick",_c))},getEvents:function(){var u=Sa.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",m=this._container=rn("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),b=this._wrapper=rn("div",u+"-content-wrapper",m);if(this._contentNode=rn("div",u+"-content",b),Ih(m),H0(this._contentNode),$t(m,"contextmenu",_c),this._tipContainer=rn("div",u+"-tip-container",m),this._tip=rn("div",u+"-tip",this._tipContainer),this.options.closeButton){var T=this._closeButton=rn("a",u+"-close-button",m);T.setAttribute("role","button"),T.setAttribute("aria-label","Close popup"),T.href="#close",T.innerHTML='<span aria-hidden="true">&#215;</span>',$t(T,"click",function(O){Hr(O),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,m=u.style;m.width="",m.whiteSpace="nowrap";var b=u.offsetWidth;b=Math.min(b,this.options.maxWidth),b=Math.max(b,this.options.minWidth),m.width=b+1+"px",m.whiteSpace="",m.height="";var T=u.offsetHeight,O=this.options.maxHeight,F="leaflet-popup-scrolled";O&&T>O?(m.height=O+"px",qt(u,F)):or(u,F),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var m=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),b=this._getAnchor();pr(this._container,m.add(b))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,m=parseInt(Th(this._container,"marginBottom"),10)||0,b=this._container.offsetHeight+m,T=this._containerWidth,O=new B(this._containerLeft,-b-this._containerBottom);O._add(jc(this._container));var F=u.layerPointToContainerPoint(O),X=G(this.options.autoPanPadding),ce=G(this.options.autoPanPaddingTopLeft||X),he=G(this.options.autoPanPaddingBottomRight||X),Re=u.getSize(),Je=0,Et=0;F.x+T+he.x>Re.x&&(Je=F.x+T-Re.x+he.x),F.x-Je-ce.x<0&&(Je=F.x-ce.x),F.y+b+he.y>Re.y&&(Et=F.y+b-Re.y+he.y),F.y-Et-ce.y<0&&(Et=F.y-ce.y),(Je||Et)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([Je,Et]))}},_getAnchor:function(){return G(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),XZ=function(u,m){return new lx(u,m)};Jt.mergeOptions({closePopupOnClick:!0}),Jt.include({openPopup:function(u,m,b){return this._initOverlay(lx,u,m,b).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Vi.include({bindPopup:function(u,m){return this._popup=this._initOverlay(lx,this._popup,u,m),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof lo||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){wc(u);var m=u.layer||u.target;if(this._popup._source===m&&!(m instanceof ol)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=m,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var cx=Sa.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){Sa.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){Sa.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=Sa.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",m=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=rn("div",m),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var m,b,T=this._map,O=this._container,F=T.latLngToContainerPoint(T.getCenter()),X=T.layerPointToContainerPoint(u),ce=this.options.direction,he=O.offsetWidth,Re=O.offsetHeight,Je=G(this.options.offset),Et=this._getAnchor();ce==="top"?(m=he/2,b=Re):ce==="bottom"?(m=he/2,b=0):ce==="center"?(m=he/2,b=Re/2):ce==="right"?(m=0,b=Re/2):ce==="left"?(m=he,b=Re/2):X.x<F.x?(ce="right",m=0,b=Re/2):(ce="left",m=he+(Je.x+Et.x)*2,b=Re/2),u=u.subtract(G(m,b,!0)).add(Je).add(Et),or(O,"leaflet-tooltip-right"),or(O,"leaflet-tooltip-left"),or(O,"leaflet-tooltip-top"),or(O,"leaflet-tooltip-bottom"),qt(O,"leaflet-tooltip-"+ce),pr(O,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&mi(this._container,u)},_animateZoom:function(u){var m=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(m)},_getAnchor:function(){return G(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),JZ=function(u,m){return new cx(u,m)};Jt.include({openTooltip:function(u,m,b){return this._initOverlay(cx,u,m,b).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Vi.include({bindTooltip:function(u,m){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(cx,this._tooltip,u,m),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var m=u?"off":"on",b={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?b.add=this._openTooltip:(b.mouseover=this._openTooltip,b.mouseout=this.closeTooltip,b.click=this._openTooltip,this._map?this._addFocusListeners():b.add=this._addFocusListeners),this._tooltip.options.sticky&&(b.mousemove=this._moveTooltip),this[m](b),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof lo||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var m=typeof u.getElement=="function"&&u.getElement();m&&($t(m,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),$t(m,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var m=typeof u.getElement=="function"&&u.getElement();m&&m.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var m=this;this._map.once("moveend",function(){m._openOnceFlag=!1,m._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var m=u.latlng,b,T;this._tooltip.options.sticky&&u.originalEvent&&(b=this._map.mouseEventToContainerPoint(u.originalEvent),T=this._map.containerPointToLayerPoint(b),m=this._map.layerPointToLatLng(T)),this._tooltip.setLatLng(m)}});var ME=Uu.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var m=u&&u.tagName==="DIV"?u:document.createElement("div"),b=this.options;if(b.html instanceof Element?(Zg(m),m.appendChild(b.html)):m.innerHTML=b.html!==!1?b.html:"",b.bgPos){var T=G(b.bgPos);m.style.backgroundPosition=-T.x+"px "+-T.y+"px"}return this._setIconStyles(m,"icon"),m},createShadow:function(){return null}});function eQ(u){return new ME(u)}Uu.Default=Dh;var $h=Vi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:bt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){g(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),Gn(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Bu(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Vu(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof B?u:new B(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var m=this.getPane().children,b=-u(-1/0,1/0),T=0,O=m.length,F;T<O;T++)F=m[T].style.zIndex,m[T]!==this._container&&F&&(b=u(b,+F));isFinite(b)&&(this.options.zIndex=b+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!bt.ielt9){mi(this._container,this.options.opacity);var u=+new Date,m=!1,b=!1;for(var T in this._tiles){var O=this._tiles[T];if(!(!O.current||!O.loaded)){var F=Math.min(1,(u-O.loaded)/200);mi(O.el,F),F<1?m=!0:(O.active?b=!0:this._onOpaqueTile(O),O.active=!0)}}b&&!this._noPrune&&this._pruneTiles(),m&&(D(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=rn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,m=this.options.maxZoom;if(u!==void 0){for(var b in this._levels)b=Number(b),this._levels[b].el.children.length||b===u?(this._levels[b].el.style.zIndex=m-Math.abs(u-b),this._onUpdateLevel(b)):(Gn(this._levels[b].el),this._removeTilesAtZoom(b),this._onRemoveLevel(b),delete this._levels[b]);var T=this._levels[u],O=this._map;return T||(T=this._levels[u]={},T.el=rn("div","leaflet-tile-container leaflet-zoom-animated",this._container),T.el.style.zIndex=m,T.origin=O.project(O.unproject(O.getPixelOrigin()),u).round(),T.zoom=u,this._setZoomTransform(T,O.getCenter(),O.getZoom()),h(T.el.offsetWidth),this._onCreateLevel(T)),this._level=T,T}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var u,m,b=this._map.getZoom();if(b>this.options.maxZoom||b<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)m=this._tiles[u],m.retain=m.current;for(u in this._tiles)if(m=this._tiles[u],m.current&&!m.active){var T=m.coords;this._retainParent(T.x,T.y,T.z,T.z-5)||this._retainChildren(T.x,T.y,T.z,T.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var m in this._tiles)this._tiles[m].coords.z===u&&this._removeTile(m)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)Gn(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,m,b,T){var O=Math.floor(u/2),F=Math.floor(m/2),X=b-1,ce=new B(+O,+F);ce.z=+X;var he=this._tileCoordsToKey(ce),Re=this._tiles[he];return Re&&Re.active?(Re.retain=!0,!0):(Re&&Re.loaded&&(Re.retain=!0),X>T?this._retainParent(O,F,X,T):!1)},_retainChildren:function(u,m,b,T){for(var O=2*u;O<2*u+2;O++)for(var F=2*m;F<2*m+2;F++){var X=new B(O,F);X.z=b+1;var ce=this._tileCoordsToKey(X),he=this._tiles[ce];if(he&&he.active){he.retain=!0;continue}else he&&he.loaded&&(he.retain=!0);b+1<T&&this._retainChildren(O,F,b+1,T)}},_resetView:function(u){var m=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),m,m)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var m=this.options;return m.minNativeZoom!==void 0&&u<m.minNativeZoom?m.minNativeZoom:m.maxNativeZoom!==void 0&&m.maxNativeZoom<u?m.maxNativeZoom:u},_setView:function(u,m,b,T){var O=Math.round(m);this.options.maxZoom!==void 0&&O>this.options.maxZoom||this.options.minZoom!==void 0&&O<this.options.minZoom?O=void 0:O=this._clampZoom(O);var F=this.options.updateWhenZooming&&O!==this._tileZoom;(!T||F)&&(this._tileZoom=O,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),O!==void 0&&this._update(u),b||this._pruneTiles(),this._noPrune=!!b),this._setZoomTransforms(u,m)},_setZoomTransforms:function(u,m){for(var b in this._levels)this._setZoomTransform(this._levels[b],u,m)},_setZoomTransform:function(u,m,b){var T=this._map.getZoomScale(b,u.zoom),O=u.origin.multiplyBy(T).subtract(this._map._getNewPixelOrigin(m,b)).round();bt.any3d?bc(u.el,O,T):pr(u.el,O)},_resetGrid:function(){var u=this._map,m=u.options.crs,b=this._tileSize=this.getTileSize(),T=this._tileZoom,O=this._map.getPixelWorldBounds(this._tileZoom);O&&(this._globalTileRange=this._pxBoundsToTileRange(O)),this._wrapX=m.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,m.wrapLng[0]],T).x/b.x),Math.ceil(u.project([0,m.wrapLng[1]],T).x/b.y)],this._wrapY=m.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([m.wrapLat[0],0],T).y/b.x),Math.ceil(u.project([m.wrapLat[1],0],T).y/b.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var m=this._map,b=m._animatingZoom?Math.max(m._animateToZoom,m.getZoom()):m.getZoom(),T=m.getZoomScale(b,this._tileZoom),O=m.project(u,this._tileZoom).floor(),F=m.getSize().divideBy(T*2);return new ee(O.subtract(F),O.add(F))},_update:function(u){var m=this._map;if(m){var b=this._clampZoom(m.getZoom());if(u===void 0&&(u=m.getCenter()),this._tileZoom!==void 0){var T=this._getTiledPixelBounds(u),O=this._pxBoundsToTileRange(T),F=O.getCenter(),X=[],ce=this.options.keepBuffer,he=new ee(O.getBottomLeft().subtract([ce,-ce]),O.getTopRight().add([ce,-ce]));if(!(isFinite(O.min.x)&&isFinite(O.min.y)&&isFinite(O.max.x)&&isFinite(O.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Re in this._tiles){var Je=this._tiles[Re].coords;(Je.z!==this._tileZoom||!he.contains(new B(Je.x,Je.y)))&&(this._tiles[Re].current=!1)}if(Math.abs(b-this._tileZoom)>1){this._setView(u,b);return}for(var Et=O.min.y;Et<=O.max.y;Et++)for(var Gt=O.min.x;Gt<=O.max.x;Gt++){var fs=new B(Gt,Et);if(fs.z=this._tileZoom,!!this._isValidTile(fs)){var Lr=this._tiles[this._tileCoordsToKey(fs)];Lr?Lr.current=!0:X.push(fs)}}if(X.sort(function(ks,Gu){return ks.distanceTo(F)-Gu.distanceTo(F)}),X.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gi=document.createDocumentFragment();for(Gt=0;Gt<X.length;Gt++)this._addTile(X[Gt],gi);this._level.el.appendChild(gi)}}}},_isValidTile:function(u){var m=this._map.options.crs;if(!m.infinite){var b=this._globalTileRange;if(!m.wrapLng&&(u.x<b.min.x||u.x>b.max.x)||!m.wrapLat&&(u.y<b.min.y||u.y>b.max.y))return!1}if(!this.options.bounds)return!0;var T=this._tileCoordsToBounds(u);return Ee(this.options.bounds).overlaps(T)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var m=this._map,b=this.getTileSize(),T=u.scaleBy(b),O=T.add(b),F=m.unproject(T,u.z),X=m.unproject(O,u.z);return[F,X]},_tileCoordsToBounds:function(u){var m=this._tileCoordsToNwSe(u),b=new fe(m[0],m[1]);return this.options.noWrap||(b=this._map.wrapLatLngBounds(b)),b},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var m=u.split(":"),b=new B(+m[0],+m[1]);return b.z=+m[2],b},_removeTile:function(u){var m=this._tiles[u];m&&(Gn(m.el),delete this._tiles[u],this.fire("tileunload",{tile:m.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){qt(u,"leaflet-tile");var m=this.getTileSize();u.style.width=m.x+"px",u.style.height=m.y+"px",u.onselectstart=h,u.onmousemove=h,bt.ielt9&&this.options.opacity<1&&mi(u,this.options.opacity)},_addTile:function(u,m){var b=this._getTilePos(u),T=this._tileCoordsToKey(u),O=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(O),this.createTile.length<2&&R(o(this._tileReady,this,u,null,O)),pr(O,b),this._tiles[T]={el:O,coords:u,current:!0},m.appendChild(O),this.fire("tileloadstart",{tile:O,coords:u})},_tileReady:function(u,m,b){m&&this.fire("tileerror",{error:m,tile:b,coords:u});var T=this._tileCoordsToKey(u);b=this._tiles[T],b&&(b.loaded=+new Date,this._map._fadeAnimated?(mi(b.el,0),D(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(b.active=!0,this._pruneTiles()),m||(qt(b.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:b.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),bt.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var m=new B(this._wrapX?f(u.x,this._wrapX):u.x,this._wrapY?f(u.y,this._wrapY):u.y);return m.z=u.z,m},_pxBoundsToTileRange:function(u){var m=this.getTileSize();return new ee(u.min.unscaleBy(m).floor(),u.max.unscaleBy(m).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function tQ(u){return new $h(u)}var Ku=$h.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,m){this._url=u,m=g(this,m),m.detectRetina&&bt.retina&&m.maxZoom>0?(m.tileSize=Math.floor(m.tileSize/2),m.zoomReverse?(m.zoomOffset--,m.minZoom=Math.min(m.maxZoom,m.minZoom+1)):(m.zoomOffset++,m.maxZoom=Math.max(m.minZoom,m.maxZoom-1)),m.minZoom=Math.max(0,m.minZoom)):m.zoomReverse?m.minZoom=Math.min(m.maxZoom,m.minZoom):m.maxZoom=Math.max(m.minZoom,m.maxZoom),typeof m.subdomains=="string"&&(m.subdomains=m.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,m){return this._url===u&&m===void 0&&(m=!0),this._url=u,m||this.redraw(),this},createTile:function(u,m){var b=document.createElement("img");return $t(b,"load",o(this._tileOnLoad,this,m,b)),$t(b,"error",o(this._tileOnError,this,m,b)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(b.referrerPolicy=this.options.referrerPolicy),b.alt="",b.src=this.getTileUrl(u),b},getTileUrl:function(u){var m={r:bt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var b=this._globalTileRange.max.y-u.y;this.options.tms&&(m.y=b),m["-y"]=b}return N(this._url,i(m,this.options))},_tileOnLoad:function(u,m){bt.ielt9?setTimeout(o(u,this,null,m),0):u(null,m)},_tileOnError:function(u,m,b){var T=this.options.errorTileUrl;T&&m.getAttribute("src")!==T&&(m.src=T),u(b,m)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,m=this.options.maxZoom,b=this.options.zoomReverse,T=this.options.zoomOffset;return b&&(u=m-u),u+T},_getSubdomain:function(u){var m=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[m]},_abortLoading:function(){var u,m;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(m=this._tiles[u].el,m.onload=h,m.onerror=h,!m.complete)){m.src=P;var b=this._tiles[u].coords;Gn(m),delete this._tiles[u],this.fire("tileabort",{tile:m,coords:b})}},_removeTile:function(u){var m=this._tiles[u];if(m)return m.el.setAttribute("src",P),$h.prototype._removeTile.call(this,u)},_tileReady:function(u,m,b){if(!(!this._map||b&&b.getAttribute("src")===P))return $h.prototype._tileReady.call(this,u,m,b)}});function IE(u,m){return new Ku(u,m)}var RE=Ku.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,m){this._url=u;var b=i({},this.defaultWmsParams);for(var T in m)T in this.options||(b[T]=m[T]);m=g(this,m);var O=m.detectRetina&&bt.retina?2:1,F=this.getTileSize();b.width=F.x*O,b.height=F.y*O,this.wmsParams=b},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var m=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[m]=this._crs.code,Ku.prototype.onAdd.call(this,u)},getTileUrl:function(u){var m=this._tileCoordsToNwSe(u),b=this._crs,T=oe(b.project(m[0]),b.project(m[1])),O=T.min,F=T.max,X=(this._wmsVersion>=1.3&&this._crs===PE?[O.y,O.x,F.y,F.x]:[O.x,O.y,F.x,F.y]).join(","),ce=Ku.prototype.getTileUrl.call(this,u);return ce+x(this.wmsParams,ce,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+X},setParams:function(u,m){return i(this.wmsParams,u),m||this.redraw(),this}});function nQ(u,m){return new RE(u,m)}Ku.WMS=RE,IE.wms=nQ;var fo=Vi.extend({options:{padding:.1},initialize:function(u){g(this,u),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),qt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,m){var b=this._map.getZoomScale(m,this._zoom),T=this._map.getSize().multiplyBy(.5+this.options.padding),O=this._map.project(this._center,m),F=T.multiplyBy(-b).add(O).subtract(this._map._getNewPixelOrigin(u,m));bt.any3d?bc(this._container,F,b):pr(this._container,F)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,m=this._map.getSize(),b=this._map.containerPointToLayerPoint(m.multiplyBy(-u)).round();this._bounds=new ee(b,b.add(m.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),LE=fo.extend({options:{tolerance:0},getEvents:function(){var u=fo.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){fo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");$t(u,"mousemove",this._onMouseMove,this),$t(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),$t(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,Gn(this._container),Pn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var m in this._layers)u=this._layers[m],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fo.prototype._update.call(this);var u=this._bounds,m=this._container,b=u.getSize(),T=bt.retina?2:1;pr(m,u.min),m.width=T*b.x,m.height=T*b.y,m.style.width=b.x+"px",m.style.height=b.y+"px",bt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){fo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[c(u)]=u;var m=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=m),this._drawLast=m,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var m=u._order,b=m.next,T=m.prev;b?b.prev=T:this._drawLast=T,T?T.next=b:this._drawFirst=b,delete u._order,delete this._layers[c(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var m=u.options.dashArray.split(/[, ]+/),b=[],T,O;for(O=0;O<m.length;O++){if(T=Number(m[O]),isNaN(T))return;b.push(T)}u.options._dashArray=b}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var m=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ee,this._redrawBounds.extend(u._pxBounds.min.subtract([m,m])),this._redrawBounds.extend(u._pxBounds.max.add([m,m]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var m=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,m.x,m.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,m=this._redrawBounds;if(this._ctx.save(),m){var b=m.getSize();this._ctx.beginPath(),this._ctx.rect(m.min.x,m.min.y,b.x,b.y),this._ctx.clip()}this._drawing=!0;for(var T=this._drawFirst;T;T=T.next)u=T.layer,(!m||u._pxBounds&&u._pxBounds.intersects(m))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,m){if(this._drawing){var b,T,O,F,X=u._parts,ce=X.length,he=this._ctx;if(ce){for(he.beginPath(),b=0;b<ce;b++){for(T=0,O=X[b].length;T<O;T++)F=X[b][T],he[T?"lineTo":"moveTo"](F.x,F.y);m&&he.closePath()}this._fillStroke(he,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var m=u._point,b=this._ctx,T=Math.max(Math.round(u._radius),1),O=(Math.max(Math.round(u._radiusY),1)||T)/T;O!==1&&(b.save(),b.scale(1,O)),b.beginPath(),b.arc(m.x,m.y/O,T,0,Math.PI*2,!1),O!==1&&b.restore(),this._fillStroke(b,u)}},_fillStroke:function(u,m){var b=m.options;b.fill&&(u.globalAlpha=b.fillOpacity,u.fillStyle=b.fillColor||b.color,u.fill(b.fillRule||"evenodd")),b.stroke&&b.weight!==0&&(u.setLineDash&&u.setLineDash(m.options&&m.options._dashArray||[]),u.globalAlpha=b.opacity,u.lineWidth=b.weight,u.strokeStyle=b.color,u.lineCap=b.lineCap,u.lineJoin=b.lineJoin,u.stroke())},_onClick:function(u){for(var m=this._map.mouseEventToLayerPoint(u),b,T,O=this._drawFirst;O;O=O.next)b=O.layer,b.options.interactive&&b._containsPoint(m)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(b))&&(T=b);this._fireEvent(T?[T]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var m=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,m)}},_handleMouseOut:function(u){var m=this._hoveredLayer;m&&(or(this._container,"leaflet-interactive"),this._fireEvent([m],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,m){if(!this._mouseHoverThrottled){for(var b,T,O=this._drawFirst;O;O=O.next)b=O.layer,b.options.interactive&&b._containsPoint(m)&&(T=b);T!==this._hoveredLayer&&(this._handleMouseOut(u),T&&(qt(this._container,"leaflet-interactive"),this._fireEvent([T],u,"mouseover"),this._hoveredLayer=T)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,m,b){this._map._fireDOMEvent(m,b||m.type,u)},_bringToFront:function(u){var m=u._order;if(m){var b=m.next,T=m.prev;if(b)b.prev=T;else return;T?T.next=b:b&&(this._drawFirst=b),m.prev=this._drawLast,this._drawLast.next=m,m.next=null,this._drawLast=m,this._requestRedraw(u)}},_bringToBack:function(u){var m=u._order;if(m){var b=m.next,T=m.prev;if(T)T.next=b;else return;b?b.prev=T:T&&(this._drawLast=T),m.prev=null,m.next=this._drawFirst,this._drawFirst.prev=m,this._drawFirst=m,this._requestRedraw(u)}}});function DE(u){return bt.canvas?new LE(u):null}var Fh=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),rQ={_initContainer:function(){this._container=rn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(fo.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var m=u._container=Fh("shape");qt(m,"leaflet-vml-shape "+(this.options.className||"")),m.coordsize="1 1",u._path=Fh("path"),m.appendChild(u._path),this._updateStyle(u),this._layers[c(u)]=u},_addPath:function(u){var m=u._container;this._container.appendChild(m),u.options.interactive&&u.addInteractiveTarget(m)},_removePath:function(u){var m=u._container;Gn(m),u.removeInteractiveTarget(m),delete this._layers[c(u)]},_updateStyle:function(u){var m=u._stroke,b=u._fill,T=u.options,O=u._container;O.stroked=!!T.stroke,O.filled=!!T.fill,T.stroke?(m||(m=u._stroke=Fh("stroke")),O.appendChild(m),m.weight=T.weight+"px",m.color=T.color,m.opacity=T.opacity,T.dashArray?m.dashStyle=y(T.dashArray)?T.dashArray.join(" "):T.dashArray.replace(/( *, *)/g," "):m.dashStyle="",m.endcap=T.lineCap.replace("butt","flat"),m.joinstyle=T.lineJoin):m&&(O.removeChild(m),u._stroke=null),T.fill?(b||(b=u._fill=Fh("fill")),O.appendChild(b),b.color=T.fillColor||T.color,b.opacity=T.fillOpacity):b&&(O.removeChild(b),u._fill=null)},_updateCircle:function(u){var m=u._point.round(),b=Math.round(u._radius),T=Math.round(u._radiusY||b);this._setPath(u,u._empty()?"M0 0":"AL "+m.x+","+m.y+" "+b+","+T+" 0,"+65535*360)},_setPath:function(u,m){u._path.v=m},_bringToFront:function(u){Bu(u._container)},_bringToBack:function(u){Vu(u._container)}},ux=bt.vml?Fh:ut,zh=fo.extend({_initContainer:function(){this._container=ux("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ux("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Gn(this._container),Pn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fo.prototype._update.call(this);var u=this._bounds,m=u.getSize(),b=this._container;(!this._svgSize||!this._svgSize.equals(m))&&(this._svgSize=m,b.setAttribute("width",m.x),b.setAttribute("height",m.y)),pr(b,u.min),b.setAttribute("viewBox",[u.min.x,u.min.y,m.x,m.y].join(" ")),this.fire("update")}},_initPath:function(u){var m=u._path=ux("path");u.options.className&&qt(m,u.options.className),u.options.interactive&&qt(m,"leaflet-interactive"),this._updateStyle(u),this._layers[c(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){Gn(u._path),u.removeInteractiveTarget(u._path),delete this._layers[c(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var m=u._path,b=u.options;m&&(b.stroke?(m.setAttribute("stroke",b.color),m.setAttribute("stroke-opacity",b.opacity),m.setAttribute("stroke-width",b.weight),m.setAttribute("stroke-linecap",b.lineCap),m.setAttribute("stroke-linejoin",b.lineJoin),b.dashArray?m.setAttribute("stroke-dasharray",b.dashArray):m.removeAttribute("stroke-dasharray"),b.dashOffset?m.setAttribute("stroke-dashoffset",b.dashOffset):m.removeAttribute("stroke-dashoffset")):m.setAttribute("stroke","none"),b.fill?(m.setAttribute("fill",b.fillColor||b.color),m.setAttribute("fill-opacity",b.fillOpacity),m.setAttribute("fill-rule",b.fillRule||"evenodd")):m.setAttribute("fill","none"))},_updatePoly:function(u,m){this._setPath(u,Xe(u._parts,m))},_updateCircle:function(u){var m=u._point,b=Math.max(Math.round(u._radius),1),T=Math.max(Math.round(u._radiusY),1)||b,O="a"+b+","+T+" 0 1,0 ",F=u._empty()?"M0 0":"M"+(m.x-b)+","+m.y+O+b*2+",0 "+O+-b*2+",0 ";this._setPath(u,F)},_setPath:function(u,m){u._path.setAttribute("d",m)},_bringToFront:function(u){Bu(u._path)},_bringToBack:function(u){Vu(u._path)}});bt.vml&&zh.include(rQ);function $E(u){return bt.svg||bt.vml?new zh(u):null}Jt.include({getRenderer:function(u){var m=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return m||(m=this._renderer=this._createRenderer()),this.hasLayer(m)||this.addLayer(m),m},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var m=this._paneRenderers[u];return m===void 0&&(m=this._createRenderer({pane:u}),this._paneRenderers[u]=m),m},_createRenderer:function(u){return this.options.preferCanvas&&DE(u)||$E(u)}});var FE=Hu.extend({initialize:function(u,m){Hu.prototype.initialize.call(this,this._boundsToLatLngs(u),m)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=Ee(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function sQ(u,m){return new FE(u,m)}zh.create=ux,zh.pointsToPath=Xe,uo.geometryToLayer=rx,uo.coordsToLatLng=e_,uo.coordsToLatLngs=sx,uo.latLngToCoords=t_,uo.latLngsToCoords=ix,uo.getFeature=Wu,uo.asFeature=ax,Jt.mergeOptions({boxZoom:!0});var zE=Na.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){$t(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Pn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Gn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),kh(),D0(),this._startPoint=this._map.mouseEventToContainerPoint(u),$t(document,{contextmenu:wc,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=rn("div","leaflet-zoom-box",this._container),qt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var m=new ee(this._point,this._startPoint),b=m.getSize();pr(this._box,m.min),this._box.style.width=b.x+"px",this._box.style.height=b.y+"px"},_finish:function(){this._moved&&(Gn(this._box),or(this._container,"leaflet-crosshair")),Oh(),$0(),Pn(document,{contextmenu:wc,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var m=new fe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(m).fire("boxzoomend",{boxZoomBounds:m})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Jt.addInitHook("addHandler","boxZoom",zE),Jt.mergeOptions({doubleClickZoom:!0});var BE=Na.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var m=this._map,b=m.getZoom(),T=m.options.zoomDelta,O=u.originalEvent.shiftKey?b-T:b+T;m.options.doubleClickZoom==="center"?m.setZoom(O):m.setZoomAround(u.containerPoint,O)}});Jt.addInitHook("addHandler","doubleClickZoom",BE),Jt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var VE=Na.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new al(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}qt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){or(this._map._container,"leaflet-grab"),or(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var m=Ee(this._map.options.maxBounds);this._offsetLimit=oe(this._map.latLngToContainerPoint(m.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(m.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var m=this._lastTime=+new Date,b=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(b),this._times.push(m),this._prunePositions(m)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),m=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=m.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,m){return u-(u-m)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),m=this._offsetLimit;u.x<m.min.x&&(u.x=this._viscousLimit(u.x,m.min.x)),u.y<m.min.y&&(u.y=this._viscousLimit(u.y,m.min.y)),u.x>m.max.x&&(u.x=this._viscousLimit(u.x,m.max.x)),u.y>m.max.y&&(u.y=this._viscousLimit(u.y,m.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,m=Math.round(u/2),b=this._initialWorldOffset,T=this._draggable._newPos.x,O=(T-m+b)%u+m-b,F=(T+m+b)%u-m-b,X=Math.abs(O+b)<Math.abs(F+b)?O:F;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=X},_onDragEnd:function(u){var m=this._map,b=m.options,T=!b.inertia||u.noInertia||this._times.length<2;if(m.fire("dragend",u),T)m.fire("moveend");else{this._prunePositions(+new Date);var O=this._lastPos.subtract(this._positions[0]),F=(this._lastTime-this._times[0])/1e3,X=b.easeLinearity,ce=O.multiplyBy(X/F),he=ce.distanceTo([0,0]),Re=Math.min(b.inertiaMaxSpeed,he),Je=ce.multiplyBy(Re/he),Et=Re/(b.inertiaDeceleration*X),Gt=Je.multiplyBy(-Et/2).round();!Gt.x&&!Gt.y?m.fire("moveend"):(Gt=m._limitOffset(Gt,m.options.maxBounds),R(function(){m.panBy(Gt,{duration:Et,easeLinearity:X,noMoveStart:!0,animate:!0})}))}}});Jt.addInitHook("addHandler","dragging",VE),Jt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var qE=Na.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),$t(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Pn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,m=document.documentElement,b=u.scrollTop||m.scrollTop,T=u.scrollLeft||m.scrollLeft;this._map._container.focus(),window.scrollTo(T,b)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var m=this._panKeys={},b=this.keyCodes,T,O;for(T=0,O=b.left.length;T<O;T++)m[b.left[T]]=[-1*u,0];for(T=0,O=b.right.length;T<O;T++)m[b.right[T]]=[u,0];for(T=0,O=b.down.length;T<O;T++)m[b.down[T]]=[0,u];for(T=0,O=b.up.length;T<O;T++)m[b.up[T]]=[0,-1*u]},_setZoomDelta:function(u){var m=this._zoomKeys={},b=this.keyCodes,T,O;for(T=0,O=b.zoomIn.length;T<O;T++)m[b.zoomIn[T]]=u;for(T=0,O=b.zoomOut.length;T<O;T++)m[b.zoomOut[T]]=-u},_addHooks:function(){$t(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Pn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var m=u.keyCode,b=this._map,T;if(m in this._panKeys){if(!b._panAnim||!b._panAnim._inProgress)if(T=this._panKeys[m],u.shiftKey&&(T=G(T).multiplyBy(3)),b.options.maxBounds&&(T=b._limitOffset(G(T),b.options.maxBounds)),b.options.worldCopyJump){var O=b.wrapLatLng(b.unproject(b.project(b.getCenter()).add(T)));b.panTo(O)}else b.panBy(T)}else if(m in this._zoomKeys)b.setZoom(b.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[m]);else if(m===27&&b._popup&&b._popup.options.closeOnEscapeKey)b.closePopup();else return;wc(u)}}});Jt.addInitHook("addHandler","keyboard",qE),Jt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var UE=Na.extend({addHooks:function(){$t(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Pn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var m=mE(u),b=this._map.options.wheelDebounceTime;this._delta+=m,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var T=Math.max(b-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),T),wc(u)},_performZoom:function(){var u=this._map,m=u.getZoom(),b=this._map.options.zoomSnap||0;u._stop();var T=this._delta/(this._map.options.wheelPxPerZoomLevel*4),O=4*Math.log(2/(1+Math.exp(-Math.abs(T))))/Math.LN2,F=b?Math.ceil(O/b)*b:O,X=u._limitZoom(m+(this._delta>0?F:-F))-m;this._delta=0,this._startTime=null,X&&(u.options.scrollWheelZoom==="center"?u.setZoom(m+X):u.setZoomAround(this._lastMousePos,m+X))}});Jt.addInitHook("addHandler","scrollWheelZoom",UE);var iQ=600;Jt.mergeOptions({tapHold:bt.touchNative&&bt.safari&&bt.mobile,tapTolerance:15});var HE=Na.extend({addHooks:function(){$t(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Pn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var m=u.touches[0];this._startPos=this._newPos=new B(m.clientX,m.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&($t(document,"touchend",Hr),$t(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",m))},this),iQ),$t(document,"touchend touchcancel contextmenu",this._cancel,this),$t(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){Pn(document,"touchend",Hr),Pn(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),Pn(document,"touchend touchcancel contextmenu",this._cancel,this),Pn(document,"touchmove",this._onMove,this)},_onMove:function(u){var m=u.touches[0];this._newPos=new B(m.clientX,m.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,m){var b=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:m.screenX,screenY:m.screenY,clientX:m.clientX,clientY:m.clientY});b._simulated=!0,m.target.dispatchEvent(b)}});Jt.addInitHook("addHandler","tapHold",HE),Jt.mergeOptions({touchZoom:bt.touch,bounceAtZoomLimits:!0});var WE=Na.extend({addHooks:function(){qt(this._map._container,"leaflet-touch-zoom"),$t(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){or(this._map._container,"leaflet-touch-zoom"),Pn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var m=this._map;if(!(!u.touches||u.touches.length!==2||m._animatingZoom||this._zooming)){var b=m.mouseEventToContainerPoint(u.touches[0]),T=m.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=m.getSize()._divideBy(2),this._startLatLng=m.containerPointToLatLng(this._centerPoint),m.options.touchZoom!=="center"&&(this._pinchStartLatLng=m.containerPointToLatLng(b.add(T)._divideBy(2))),this._startDist=b.distanceTo(T),this._startZoom=m.getZoom(),this._moved=!1,this._zooming=!0,m._stop(),$t(document,"touchmove",this._onTouchMove,this),$t(document,"touchend touchcancel",this._onTouchEnd,this),Hr(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var m=this._map,b=m.mouseEventToContainerPoint(u.touches[0]),T=m.mouseEventToContainerPoint(u.touches[1]),O=b.distanceTo(T)/this._startDist;if(this._zoom=m.getScaleZoom(O,this._startZoom),!m.options.bounceAtZoomLimits&&(this._zoom<m.getMinZoom()&&O<1||this._zoom>m.getMaxZoom()&&O>1)&&(this._zoom=m._limitZoom(this._zoom)),m.options.touchZoom==="center"){if(this._center=this._startLatLng,O===1)return}else{var F=b._add(T)._divideBy(2)._subtract(this._centerPoint);if(O===1&&F.x===0&&F.y===0)return;this._center=m.unproject(m.project(this._pinchStartLatLng,this._zoom).subtract(F),this._zoom)}this._moved||(m._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var X=o(m._move,m,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(X,this,!0),Hr(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),Pn(document,"touchmove",this._onTouchMove,this),Pn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Jt.addInitHook("addHandler","touchZoom",WE),Jt.BoxZoom=zE,Jt.DoubleClickZoom=BE,Jt.Drag=VE,Jt.Keyboard=qE,Jt.ScrollWheelZoom=UE,Jt.TapHold=HE,Jt.TouchZoom=WE,n.Bounds=ee,n.Browser=bt,n.CRS=ze,n.Canvas=LE,n.Circle=J0,n.CircleMarker=nx,n.Class=V,n.Control=Bi,n.DivIcon=ME,n.DivOverlay=Sa,n.DomEvent=wZ,n.DomUtil=jZ,n.Draggable=al,n.Evented=W,n.FeatureGroup=lo,n.GeoJSON=uo,n.GridLayer=$h,n.Handler=Na,n.Icon=Uu,n.ImageOverlay=ox,n.LatLng=J,n.LatLngBounds=fe,n.Layer=Vi,n.LayerGroup=qu,n.LineUtil=LZ,n.Map=Jt,n.Marker=tx,n.Mixin=TZ,n.Path=ol,n.Point=B,n.PolyUtil=kZ,n.Polygon=Hu,n.Polyline=co,n.Popup=lx,n.PosAnimation=pE,n.Projection=DZ,n.Rectangle=FE,n.Renderer=fo,n.SVG=zh,n.SVGOverlay=OE,n.TileLayer=Ku,n.Tooltip=cx,n.Transformation=je,n.Util=z,n.VideoOverlay=kE,n.bind=o,n.bounds=oe,n.canvas=DE,n.circle=HZ,n.circleMarker=UZ,n.control=Rh,n.divIcon=eQ,n.extend=i,n.featureGroup=BZ,n.geoJSON=TE,n.geoJson=GZ,n.gridLayer=tQ,n.icon=VZ,n.imageOverlay=ZZ,n.latLng=Pe,n.latLngBounds=Ee,n.layerGroup=zZ,n.map=NZ,n.marker=qZ,n.point=G,n.polygon=KZ,n.polyline=WZ,n.popup=XZ,n.rectangle=sQ,n.setOptions=g,n.stamp=c,n.svg=$E,n.svgOverlay=YZ,n.tileLayer=IE,n.tooltip=JZ,n.transformation=ue,n.version=s,n.videoOverlay=QZ;var aQ=window.L;n.noConflict=function(){return window.L=aQ,this},window.L=n})})(HS,HS.exports);var Ug=HS.exports;const Bb=on(Ug);function QA(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function YA(e,t){return t==null?function(s,i){const a=_.useRef();return a.current||(a.current=e(s,i)),a}:function(s,i){const a=_.useRef();a.current||(a.current=e(s,i));const o=_.useRef(s),{instance:l}=a.current;return _.useEffect(function(){o.current!==s&&(t(l,s,o.current),o.current=s)},[l,s,i]),a}}function p5e(e,t){_.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var a;(a=t.layerContainer)==null||a.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function XG(e){return function(n){const s=GA(),i=e(ZA(n,s),s);return GG(s.map,n.attribution),YG(i.current,n.eventHandlers),p5e(i.current,s),i}}function g5e(e,t){const n=YA(e,t),s=XG(n);return d5e(s)}function x5e(e,t){const n=YA(e),s=m5e(n,t);return f5e(s)}function v5e(e,t){const n=YA(e,t),s=XG(n);return h5e(s)}function y5e(e,t,n){const{opacity:s,zIndex:i}=t;s!=null&&s!==n.opacity&&e.setOpacity(s),i!=null&&i!==n.zIndex&&e.setZIndex(i)}function b5e(){return GA().map}function WS(){return WS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},WS.apply(this,arguments)}function j5e({bounds:e,boundsOptions:t,center:n,children:s,className:i,id:a,placeholder:o,style:l,whenReady:c,zoom:d,...f},h){const[p]=_.useState({className:i,id:a,style:l}),[v,j]=_.useState(null);_.useImperativeHandle(h,()=>(v==null?void 0:v.map)??null,[v]);const g=_.useCallback(w=>{if(w!==null&&v===null){const N=new Ug.Map(w,f);n!=null&&d!=null?N.setView(n,d):e!=null&&N.fitBounds(e,t),c!=null&&N.whenReady(c),j(c5e(N))}},[]);_.useEffect(()=>()=>{v==null||v.map.remove()},[v]);const x=v?q.createElement(QG,{value:v},s):o??null;return q.createElement("div",WS({},p,{ref:g}),x)}const _5e=_.forwardRef(j5e),w5e=g5e(function({position:t,...n},s){const i=new Ug.Marker(t,n);return QA(i,u5e(s,{overlayContainer:i}))},function(t,n,s){n.position!==s.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==s.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==s.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==s.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==s.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),N5e=x5e(function(t,n){const s=new Ug.Popup(t,n.overlayContainer);return QA(s,n)},function(t,n,{position:s},i){_.useEffect(function(){const{instance:o}=t;function l(d){d.popup===o&&(o.update(),i(!0))}function c(d){d.popup===o&&i(!1)}return n.map.on({popupopen:l,popupclose:c}),n.overlayContainer==null?(s!=null&&o.setLatLng(s),o.openOn(n.map)):n.overlayContainer.bindPopup(o),function(){var f;n.map.off({popupopen:l,popupclose:c}),(f=n.overlayContainer)==null||f.unbindPopup(),n.map.removeLayer(o)}},[t,n,i,s])}),S5e=v5e(function({url:t,...n},s){const i=new Ug.TileLayer(t,ZA(n,s));return QA(i,s)},function(t,n,s){y5e(t,n,s);const{url:i}=n;i!=null&&i!==s.url&&t.setUrl(i)});function C5e({positions:e}){const t=b5e();return _.useEffect(()=>{if(e.length===0)return;const n=Bb.latLngBounds(e.map(s=>[parseFloat(s.latitude),parseFloat(s.longitude)]));t.fitBounds(n,{padding:[50,50],maxZoom:13})},[e,t]),null}const P5e=(e,t)=>{let n="#6b7280";if(e)switch(t){case"france":n="#3b82f6";break;case"luxembourg":n="#10b981";break;case"belgique":n="#f59e0b";break;default:n="#8b5cf6"}const s=`
    <svg width="32" height="42" viewBox="0 0 32 42" xmlns="http://www.w3.org/2000/svg">
      <path d="M16 0C7.2 0 0 7.2 0 16c0 12 16 26 16 26s16-14 16-26C32 7.2 24.8 0 16 0z" 
            fill="${n}" stroke="white" stroke-width="2"/>
      <circle cx="16" cy="16" r="6" fill="white"/>
    </svg>
  `;return Bb.divIcon({html:s,className:"custom-marker",iconSize:[32,42],iconAnchor:[16,42],popupAnchor:[0,-42]})},A5e=e=>{switch(e){case"france":return"default";case"luxembourg":return"secondary";case"belgique":return"outline";default:return"outline"}};function E5e({positions:e}){const[t,n]=_.useState(!1),s=_.useRef(null),i=e.length>0?[parseFloat(e[0].latitude),parseFloat(e[0].longitude)]:[48.8566,2.3522];return _.useEffect(()=>{delete Bb.Icon.Default.prototype._getIconUrl,Bb.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"})},[]),r.jsx("div",{className:"h-[600px] w-full rounded-lg overflow-hidden border",children:r.jsxs(_5e,{center:i,zoom:6,style:{height:"100%",width:"100%"},whenReady:()=>n(!0),ref:s,children:[r.jsx(S5e,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t&&r.jsx(C5e,{positions:e}),e.map(a=>{var d;const o=parseFloat(a.latitude),l=parseFloat(a.longitude);if(isNaN(o)||isNaN(l))return null;const c=a.user.firstName&&a.user.lastName?`${a.user.firstName} ${a.user.lastName}`:a.user.email.split("@")[0];return r.jsx(w5e,{position:[o,l],icon:P5e(a.isRecent,a.user.entity),children:r.jsx(N5e,{maxWidth:300,children:r.jsxs("div",{className:"space-y-3 p-2",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-base",children:c}),r.jsx("p",{className:"text-xs text-muted-foreground",children:a.user.role})]}),r.jsx(ve,{variant:A5e(a.user.entity),children:((d=a.user.entity)==null?void 0:d.toUpperCase())||"N/A"})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Jr,{className:"h-4 w-4 text-muted-foreground mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-xs",children:a.address||`${o.toFixed(6)}, ${l.toFixed(6)}`})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jn,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),r.jsxs("span",{className:"text-xs",children:[a.timeAgo,a.isRecent&&r.jsx(ve,{variant:"outline",className:"ml-2 text-xs",children:"ACTIF"})]})]}),a.accuracy&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(fn,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),r.jsxs("span",{className:"text-xs",children:["Prcision: ",a.accuracy,"m"]})]}),a.batteryLevel!==null&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(iz,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),r.jsxs("span",{className:"text-xs",children:["Batterie: ",a.batteryLevel,"%"]})]}),a.user.phone&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vn,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),r.jsx("a",{href:`tel:${a.user.phone}`,className:"text-xs text-primary hover:underline",children:a.user.phone})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(da,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),r.jsx("a",{href:`mailto:${a.user.email}`,className:"text-xs text-primary hover:underline",children:a.user.email})]})]})]})})},a.id)})]})})}function T5e(){const[e,t]=_.useState("all"),[n,s]=_.useState(!1),{toast:i}=At(),{data:a=[],isLoading:o,error:l,refetch:c,isFetching:d}=Ke({queryKey:["/api/supervision/gps/all-positions",e,n],queryFn:async()=>{const v=new URLSearchParams;e!=="all"&&v.set("entityId",e),n&&v.set("activeOnly","true");const j=await fetch(`/api/supervision/gps/all-positions?${v}`);if(!j.ok){const x=await j.json();throw new Error(x.message||"Erreur lors de la rcupration des positions")}return(await j.json()).data||[]},refetchInterval:6e4}),f=async()=>{await c(),i({title:"Positions actualises",description:`${a.length} positions rcupres`})},h=a.filter(v=>v.isRecent).length,p=Array.from(new Set(a.map(v=>v.user.entity).filter(Boolean)));return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx(mr,{}),r.jsxs("div",{className:"container mx-auto p-4 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Supervision quipe GPS"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Positions terrain en temps rel (dernires 4h)"})]}),r.jsxs(re,{onClick:f,disabled:d,size:"sm",variant:"outline","data-testid":"button-refresh",children:[r.jsx(Da,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),"Actualiser"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(U,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary/10 rounded-md",children:r.jsx(Nn,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Commerciaux"}),r.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-total",children:a.length})]})]})}),r.jsx(U,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-500/10 rounded-md",children:r.jsx(Jr,{className:"h-5 w-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Actifs (< 15min)"}),r.jsx("p",{className:"text-2xl font-bold text-green-600","data-testid":"stat-recent",children:h})]})]})}),r.jsx(U,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-500/10 rounded-md",children:r.jsx(jn,{className:"h-5 w-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Entits"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600","data-testid":"stat-entities",children:p.length})]})]})}),r.jsx(U,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-orange-500/10 rounded-md",children:r.jsx(Br,{className:"h-5 w-5 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Inactifs (> 15min)"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600","data-testid":"stat-inactive",children:a.length-h})]})]})})]}),r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Entit:"}),r.jsxs(gt,{value:e,onValueChange:t,children:[r.jsx(mt,{className:"w-[180px]","data-testid":"select-entity",children:r.jsx(xt,{})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"all",children:"Toutes"}),r.jsx(Y,{value:"france",children:"France"}),r.jsx(Y,{value:"luxembourg",children:"Luxembourg"}),r.jsx(Y,{value:"belgique",children:"Belgique"})]})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(re,{variant:n?"default":"outline",size:"sm",onClick:()=>s(!n),"data-testid":"button-active-only",children:[r.jsx(jn,{className:"h-4 w-4 mr-2"}),"Actifs uniquement"]})}),r.jsx("div",{className:"ml-auto",children:r.jsxs(ve,{variant:"outline","data-testid":"badge-update-time",children:["Dernire mj: ",new Date().toLocaleTimeString("fr-FR")]})})]}),l?r.jsx("div",{className:"flex items-center justify-center h-[600px] bg-muted/20 rounded-lg",children:r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx(Br,{className:"h-12 w-12 text-destructive mx-auto"}),r.jsx("p",{className:"text-lg font-medium",children:"Erreur de chargement"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:l instanceof Error?l.message:"Impossible de charger les positions"}),r.jsx(re,{onClick:()=>c(),size:"sm","data-testid":"button-retry",children:"Ressayer"})]})}):o?r.jsx("div",{className:"flex items-center justify-center h-[600px] bg-muted/20 rounded-lg",children:r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx(Da,{className:"h-12 w-12 text-muted-foreground animate-spin mx-auto"}),r.jsx("p",{className:"text-lg font-medium",children:"Chargement des positions..."})]})}):a.length===0?r.jsx("div",{className:"flex items-center justify-center h-[600px] bg-muted/20 rounded-lg",children:r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx(Jr,{className:"h-12 w-12 text-muted-foreground mx-auto"}),r.jsx("p",{className:"text-lg font-medium",children:"Aucune position disponible"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucun commercial n'a partag sa position dans les 4 dernires heures"})]})}):r.jsx(E5e,{positions:a})]})]})]})}const k5e="gps-queue",iv="pending-positions";function O5e(){const{toast:e}=At(),[t,n]=_.useState(!1),[s,i]=_.useState(null),[a,o]=_.useState("prompt"),[l,c]=_.useState(null),[d,f]=_.useState(null),{data:h=[]}=Ke({queryKey:["/api/gps/opportunities"],refetchInterval:t?6e4:!1}),p=dt({mutationFn:async C=>rt("POST","/api/gps/track",{latitude:C.latitude,longitude:C.longitude,accuracy:C.accuracy,batteryLevel:C.batteryLevel||d}),onSuccess:()=>{et.invalidateQueries({queryKey:["/api/gps/opportunities"]})},onError:async(C,S)=>{console.error("[GPS Track] Error:",C),await A({latitude:S.latitude,longitude:S.longitude,accuracy:S.accuracy,batteryLevel:S.batteryLevel||d||null}),await P(),e({title:"Hors ligne",description:"Position sauvegarde localement, sera synchronise automatiquement",variant:"default"})}});_.useEffect(()=>{v(),j()},[]);const v=async()=>{if(!("geolocation"in navigator)){e({title:"Golocalisation indisponible",description:"Votre navigateur ne supporte pas la golocalisation",variant:"destructive"});return}if("permissions"in navigator)try{const C=await navigator.permissions.query({name:"geolocation"});o(C.state),C.addEventListener("change",()=>o(C.state))}catch(C){console.error("[GPS] Permission query error:",C)}},j=async()=>{if("getBattery"in navigator)try{const C=await navigator.getBattery();f(Math.round(C.level*100)),C.addEventListener("levelchange",()=>{f(Math.round(C.level*100))})}catch(C){console.error("[GPS] Battery API error:",C)}},g=()=>{if(!("geolocation"in navigator)){e({title:"Erreur",description:"Golocalisation non disponible",variant:"destructive"});return}const C=navigator.geolocation.watchPosition(S=>{const k={latitude:S.coords.latitude,longitude:S.coords.longitude,accuracy:S.coords.accuracy,timestamp:new Date(S.timestamp),batteryLevel:d||void 0};i(k),p.mutate(k)},S=>{console.error("[GPS] Geolocation error:",S),e({title:"Erreur golocalisation",description:S.message,variant:"destructive"}),n(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0});c(C),n(!0),e({title:"Tracking activ",description:"Votre position est maintenant suivie"})},x=()=>{l!==null&&(navigator.geolocation.clearWatch(l),c(null)),n(!1),e({title:"Tracking dsactiv",description:"Votre position n'est plus suivie"})},w=C=>{C?g():x()},N=C=>C?C<10?"text-green-500":C<50?"text-yellow-500":"text-red-500":"text-muted-foreground",y=C=>{switch(C.toLowerCase()){case"haute":return"bg-red-500";case"moyenne":return"bg-yellow-500";case"basse":return"bg-blue-500";default:return"bg-gray-500"}},A=async C=>{try{await(await E()).transaction(iv,"readwrite").objectStore(iv).add({data:C,timestamp:Date.now()}),console.log("[GPS Page] Position saved to IndexedDB queue")}catch(S){console.error("[GPS Page] Failed to save to queue:",S)}},P=async()=>{if("serviceWorker"in navigator&&"sync"in ServiceWorkerRegistration.prototype)try{await(await navigator.serviceWorker.ready).sync.register("sync-gps-positions"),console.log("[GPS Page] Background sync triggered")}catch(C){console.error("[GPS Page] Background sync failed:",C),navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"SYNC_NOW"})}},E=()=>new Promise((C,S)=>{const k=indexedDB.open(k5e,1);k.onerror=()=>S(k.error),k.onsuccess=()=>C(k.result),k.onupgradeneeded=I=>{const R=I.target.result;R.objectStoreNames.contains(iv)||R.createObjectStore(iv,{keyPath:"id",autoIncrement:!0})}});return r.jsxs("div",{className:"min-h-screen bg-background p-4 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h1",{className:"text-2xl font-bold","data-testid":"text-page-title",children:"GPS Tracking"}),t&&r.jsxs(ve,{variant:"default",className:"flex items-center gap-1","data-testid":"badge-tracking-status",children:[r.jsx(du,{className:"h-3 w-3 animate-pulse"}),"Actif"]})]}),r.jsx(mr,{showHomeButton:!0})]}),r.jsxs(U,{"data-testid":"card-tracking-control",children:[r.jsx(ne,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(gz,{className:"h-5 w-5"}),"Contrle Tracking"]}),r.jsx(jt,{children:"Activez le suivi de votre position"})]}),r.jsx(ra,{checked:t,onCheckedChange:w,disabled:a==="denied","data-testid":"switch-tracking-toggle"})]})}),r.jsxs(Z,{className:"space-y-4",children:[a==="denied"&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 rounded-md","data-testid":"alert-permission-denied",children:[r.jsx(Br,{className:"h-4 w-4 text-destructive"}),r.jsx("span",{className:"text-sm text-destructive",children:"Permission golocalisation refuse. Veuillez l'activer dans les paramtres."})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Latitude"}),r.jsx("div",{className:"font-mono text-sm","data-testid":"text-latitude",children:s?s.latitude.toFixed(6):"---"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Longitude"}),r.jsx("div",{className:"font-mono text-sm","data-testid":"text-longitude",children:s?s.longitude.toFixed(6):"---"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(gte,{className:"h-3 w-3"}),"Prcision"]}),r.jsx("div",{className:`font-mono text-sm ${N(s==null?void 0:s.accuracy)}`,"data-testid":"text-accuracy",children:s?`${s.accuracy.toFixed(0)}m`:"---"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(iz,{className:"h-3 w-3"}),"Batterie"]}),r.jsx("div",{className:"font-mono text-sm","data-testid":"text-battery",children:d!==null?`${d}%`:"---"})]})]}),s&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground","data-testid":"text-last-update",children:[r.jsx(jn,{className:"h-3 w-3"}),"Dernire mise  jour : ",br(s.timestamp,"HH:mm:ss",{locale:jr})]})]})]}),h.length>0&&r.jsxs(U,{"data-testid":"card-opportunities",children:[r.jsxs(ne,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(fn,{className:"h-5 w-5"}),"Opportunits  proximit"]}),r.jsxs(jt,{children:[h.length," prospect",h.length>1?"s":""," dtect",h.length>1?"s":""]})]}),r.jsx(Z,{children:r.jsx("div",{className:"space-y-3",children:h.map(C=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover-elevate active-elevate-2","data-testid":`opportunity-item-${C.id}`,children:[r.jsxs("div",{className:"flex-1 space-y-1",children:[r.jsx("div",{className:"font-medium","data-testid":`text-prospect-name-${C.id}`,children:C.prospectName}),r.jsxs("div",{className:"text-sm text-muted-foreground","data-testid":`text-address-${C.id}`,children:[r.jsx(Jr,{className:"h-3 w-3 inline mr-1"}),C.address]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ve,{className:y(C.priority),"data-testid":`badge-priority-${C.id}`,children:C.priority}),r.jsxs("div",{className:"text-sm font-medium","data-testid":`text-distance-${C.id}`,children:[C.distance.toFixed(1)," km"]})]})]},C.id))})})]}),!t&&h.length===0&&r.jsx(U,{"data-testid":"card-no-opportunities",children:r.jsxs(Z,{className:"flex flex-col items-center justify-center py-12 text-center",children:[r.jsx(Jr,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Activez le tracking pour dtecter les opportunits  proximit"})]})})]})}function M5e(){const[e,t]=_.useState(null),[n,s]=_.useState("week"),[i,a]=_.useState(!0),[o,l]=_.useState(null);_.useEffect(()=>{c()},[n]);const c=async()=>{a(!0),l(null);try{const h=await fetch(`/api/admin/ocr/analytics?period=${n}`);if(!h.ok){h.status===401||h.status===403?l("Accs non autoris. Vous devez tre administrateur pour consulter cette page."):h.status===404?l("Endpoint analytics introuvable. Vrifiez la configuration serveur."):l(`Erreur serveur (${h.status}). Ressayez plus tard.`),t(null);return}const p=await h.json();if(!p.metrics||typeof p.metrics!="object"){l("Rponse API invalide : structure metrics manquante"),t(null);return}t(p)}catch(h){console.error("[AdminOCRAnalytics] Erreur fetch:",h),l("Erreur rseau. Vrifiez votre connexion."),t(null)}finally{a(!1)}};if(i)return r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"text-muted-foreground",children:"Chargement des analytics OCR..."})});if(o)return r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs(Eo,{variant:"destructive","data-testid":"error-alert",children:[r.jsx(Br,{className:"h-4 w-4"}),r.jsx(HA,{children:"Erreur"}),r.jsx(To,{children:o})]}),r.jsx(re,{onClick:c,"data-testid":"button-retry",children:"Ressayer"})]});if(!e)return r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"text-muted-foreground",children:"Aucune donne disponible"})});const{metrics:d,errorTypes:f}=e;return r.jsxs("div",{className:"p-6 space-y-6","data-testid":"admin-ocr-analytics",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsx("h1",{className:"text-2xl font-bold",children:" Analytics OCR Business Cards"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(re,{onClick:()=>s("day"),variant:n==="day"?"default":"outline","data-testid":"period-day",children:"24h"}),r.jsx(re,{onClick:()=>s("week"),variant:n==="week"?"default":"outline","data-testid":"period-week",children:"7j"}),r.jsx(re,{onClick:()=>s("month"),variant:n==="month"?"default":"outline","data-testid":"period-month",children:"30j"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(U,{"data-testid":"card-total",children:[r.jsx(ne,{children:r.jsx(se,{className:"text-sm text-muted-foreground",children:"Total Extractions"})}),r.jsx(Z,{children:r.jsx("p",{className:"text-3xl font-bold","data-testid":"total-extractions",children:d.totalExtractions})})]}),r.jsxs(U,{"data-testid":"card-success-rate",children:[r.jsx(ne,{children:r.jsx(se,{className:"text-sm text-muted-foreground",children:"Taux de Succs"})}),r.jsx(Z,{children:r.jsxs("p",{className:"text-3xl font-bold text-green-600","data-testid":"success-rate",children:[d.successRate,"%"]})})]}),r.jsxs(U,{"data-testid":"card-failures",children:[r.jsx(ne,{children:r.jsx(se,{className:"text-sm text-muted-foreground",children:"checs"})}),r.jsx(Z,{children:r.jsx("p",{className:"text-3xl font-bold text-red-600","data-testid":"failed-extractions",children:d.failedExtractions})})]}),r.jsxs(U,{"data-testid":"card-avg-time",children:[r.jsx(ne,{children:r.jsx(se,{className:"text-sm text-muted-foreground",children:"Temps Moyen"})}),r.jsx(Z,{children:r.jsxs("p",{className:"text-3xl font-bold","data-testid":"avg-response-time",children:[d.avgResponseTime,"ms"]})})]})]}),f&&Object.keys(f).length>0&&r.jsxs(U,{"data-testid":"card-error-types",children:[r.jsx(ne,{children:r.jsx(se,{children:"Types d'Erreurs"})}),r.jsx(Z,{children:r.jsx("ul",{className:"space-y-2",children:Object.entries(f).map(([h,p])=>r.jsxs("li",{className:"flex justify-between items-center","data-testid":`error-type-${h}`,children:[r.jsx("span",{className:"text-sm",children:h}),r.jsx("span",{className:"font-bold text-lg",children:p})]},h))})})]}),(!f||Object.keys(f).length===0)&&r.jsx(U,{children:r.jsx(Z,{className:"py-6",children:r.jsx("p",{className:"text-center text-muted-foreground",children:" Aucune erreur sur la priode slectionne"})})})]})}const av=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"];function I5e(){const[e,t]=_.useState(null),[n,s]=_.useState(null),[i,a]=_.useState(null),[o,l]=_.useState(30),[c,d]=_.useState(!0),[f,h]=_.useState(null);_.useEffect(()=>{p()},[o]);const p=async()=>{d(!0),h(null);try{const[v,j,g]=await Promise.all([fetch(`/api/analytics/overview?period=${o}`),fetch("/api/analytics/pipeline"),fetch(`/api/analytics/team?period=${o}`)]);if(!v.ok||!j.ok||!g.ok)throw new Error("Erreur lors du chargement des analytics");const[x,w,N]=await Promise.all([v.json(),j.json(),g.json()]);t(x),s(w),a(N)}catch(v){console.error("[AdminAnalyticsPage] Erreur fetch:",v),h("Erreur rseau. Vrifiez votre connexion.")}finally{d(!1)}};return c?r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"text-muted-foreground",children:"Chargement des analytics..."})}):f?r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs(Eo,{variant:"destructive","data-testid":"error-alert",children:[r.jsx(Br,{className:"h-4 w-4"}),r.jsx(HA,{children:"Erreur"}),r.jsx(To,{children:f})]}),r.jsx(re,{onClick:p,"data-testid":"button-retry",children:"Ressayer"})]}):!e||!n||!i?r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"text-muted-foreground",children:"Aucune donne disponible"})}):r.jsxs("div",{className:"p-6 space-y-6","data-testid":"admin-analytics-page",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(wn,{className:"h-6 w-6 text-primary"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Analytics Commercial"})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(re,{onClick:()=>l(7),variant:o===7?"default":"outline","data-testid":"period-7",children:"7 jours"}),r.jsx(re,{onClick:()=>l(30),variant:o===30?"default":"outline","data-testid":"period-30",children:"30 jours"}),r.jsx(re,{onClick:()=>l(90),variant:o===90?"default":"outline","data-testid":"period-90",children:"90 jours"}),r.jsx(re,{onClick:()=>l(365),variant:o===365?"default":"outline","data-testid":"period-365",children:"1 an"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(U,{"data-testid":"card-prospects",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Prospects"}),r.jsx(Nn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"total-prospects",children:e.kpis.totalProspects}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",e.kpis.newProspects," sur ",o,"j"]})]})]}),r.jsxs(U,{"data-testid":"card-opportunities",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Opportunits"}),r.jsx(fn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"total-opportunities",children:e.kpis.totalOpportunities}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",e.kpis.newOpportunities," sur ",o,"j"]})]})]}),r.jsxs(U,{"data-testid":"card-conversion",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Taux Conversion"}),r.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsxs("div",{className:"text-2xl font-bold text-blue-600","data-testid":"conversion-rate",children:[e.kpis.conversionRate.toFixed(2),"%"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Prospects  Opportunits"})]})]}),r.jsxs(U,{"data-testid":"card-win-rate",children:[r.jsxs(ne,{className:"flex flex-row items-center justify-between gap-1 space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:"Taux Victoire"}),r.jsx(uj,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Z,{children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600","data-testid":"win-rate",children:[e.kpis.winRate.toFixed(2),"%"]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.kpis.wonDeals," affaires gagnes"]})]})]})]}),r.jsxs(U,{"data-testid":"card-trends",children:[r.jsx(ne,{children:r.jsx(se,{children:"Tendances Prospects (7 derniers jours)"})}),r.jsx(Z,{children:r.jsx(Ua,{width:"100%",height:300,children:r.jsxs(PH,{data:e.trends,children:[r.jsx(Qo,{strokeDasharray:"3 3"}),r.jsx(Di,{dataKey:"date"}),r.jsx(oi,{}),r.jsx(Ar,{}),r.jsx(Bs,{}),r.jsx(_u,{type:"monotone",dataKey:"prospects",stroke:"#3b82f6",strokeWidth:2,name:"Nouveaux Prospects"})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(U,{"data-testid":"card-pipeline-chart",children:[r.jsx(ne,{children:r.jsx(se,{children:"Distribution Pipeline"})}),r.jsx(Z,{children:r.jsx(Ua,{width:"100%",height:300,children:r.jsxs(AH,{children:[r.jsx(oo,{data:n.distribution,dataKey:"count",nameKey:"status",cx:"50%",cy:"50%",outerRadius:100,label:!0,children:n.distribution.map((v,j)=>r.jsx(_h,{fill:av[j%av.length]},`cell-${j}`))}),r.jsx(Ar,{}),r.jsx(Bs,{})]})})})]}),r.jsxs(U,{"data-testid":"card-pipeline-details",children:[r.jsx(ne,{children:r.jsx(se,{children:"Dtails Pipeline"})}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center pb-2 border-b",children:[r.jsx("span",{className:"font-medium",children:"Total Opportunits"}),r.jsx("span",{className:"text-2xl font-bold",children:n.summary.totalOpportunities})]}),r.jsxs("div",{className:"flex justify-between items-center pb-2 border-b",children:[r.jsx("span",{className:"font-medium",children:"Valeur Totale"}),r.jsxs("span",{className:"text-2xl font-bold",children:[n.summary.totalValue.toLocaleString("fr-FR"),""]})]}),r.jsx("div",{className:"space-y-2 mt-4",children:n.distribution.map((v,j)=>r.jsxs("div",{className:"flex justify-between items-center","data-testid":`pipeline-item-${j}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:av[j%av.length]}}),r.jsx("span",{className:"text-sm",children:v.status})]}),r.jsx("span",{className:"font-bold",children:v.count})]},v.status))})]})})]})]}),r.jsxs(U,{"data-testid":"card-top-performers",children:[r.jsx(ne,{children:r.jsxs(se,{children:["Top Performers (",o,"j)"]})}),r.jsx(Z,{children:r.jsx(Ua,{width:"100%",height:300,children:r.jsxs(Ph,{data:i.topPerformers.slice(0,5),children:[r.jsx(Qo,{strokeDasharray:"3 3"}),r.jsx(Di,{dataKey:"nom",tickFormatter:(v,j)=>{const g=i.topPerformers[j];return`${g.prenom} ${g.nom}`}}),r.jsx(oi,{}),r.jsx(Ar,{content:({active:v,payload:j})=>{if(v&&j&&j.length){const g=j[0].payload;return r.jsxs("div",{className:"bg-background border rounded-md p-3 shadow-lg",children:[r.jsxs("p",{className:"font-bold",children:[g.prenom," ",g.nom]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:g.email}),r.jsxs("p",{className:"text-sm",children:["Opportunits: ",g.opportunitiesCount]}),r.jsxs("p",{className:"text-sm",children:["Gagnes: ",g.wonCount]}),r.jsxs("p",{className:"text-sm",children:["Taux victoire: ",g.winRate,"%"]})]})}return null}}),r.jsx(Bs,{}),r.jsx(us,{dataKey:"opportunitiesCount",fill:"#3b82f6",name:"Opportunits cres"}),r.jsx(us,{dataKey:"wonCount",fill:"#10b981",name:"Affaires gagnes"})]})})})]})]})}const R5e=sl({name:Ue().min(1,"Nom requis"),type:ir(["national","regional","local"]),isActive:Rs().default(!0),coverageType:ir(["france","regional","departement"]).optional(),coverageRegions:Do(Ue()).optional(),coverageDepartments:Do(Ue()).optional(),solutionsOffered:Do(Ue()).optional(),estimatedMarketSharePercent:Ue().optional(),avgContractDurationMonths:la.number().optional(),typicalPricingTier:ir(["low","medium","high","premium"]).optional(),strengths:Ue().optional(),weaknesses:Ue().optional(),notes:Ue().optional()});function L5e(){const{toast:e}=At(),[t,n]=_.useState(""),[s,i]=_.useState(!1),[a,o]=_.useState(null),[l,c]=_.useState(null),d=Du({resolver:$u(R5e),defaultValues:{name:"",type:"national",isActive:!0,solutionsOffered:[],avgContractDurationMonths:60}}),{data:f,isLoading:h}=Ke({queryKey:["/api/competitor/concurrents"]}),p=(f==null?void 0:f.concurrents)||[],v=dt({mutationFn:async E=>await rt("POST","/api/competitor/concurrents",E),onSuccess:()=>{e({title:" Concurrent cr",description:"Le concurrent a t ajout avec succs"}),et.invalidateQueries({queryKey:["/api/competitor/concurrents"]}),i(!1),d.reset()},onError:E=>{e({title:" Erreur",description:E.message||"Impossible de crer le concurrent",variant:"destructive"})}}),j=dt({mutationFn:async({id:E,data:C})=>await rt("PATCH",`/api/competitor/concurrents/${E}`,C),onSuccess:()=>{e({title:" Concurrent modifi",description:"Les modifications ont t enregistres"}),et.invalidateQueries({queryKey:["/api/competitor/concurrents"]}),o(null),d.reset()},onError:E=>{e({title:" Erreur",description:E.message||"Impossible de modifier le concurrent",variant:"destructive"})}}),g=dt({mutationFn:async E=>await rt("DELETE",`/api/competitor/concurrents/${E}`,{}),onSuccess:()=>{e({title:" Concurrent supprim",description:"Le concurrent a t supprim avec succs"}),et.invalidateQueries({queryKey:["/api/competitor/concurrents"]}),c(null)},onError:E=>{e({title:" Erreur",description:E.message||"Impossible de supprimer le concurrent",variant:"destructive"})}}),x=p.filter(E=>E.name.toLowerCase().includes(t.toLowerCase())),w=()=>{d.reset({name:"",type:"national",isActive:!0,solutionsOffered:[],avgContractDurationMonths:60}),i(!0)},N=E=>{o(E),d.reset({name:E.name,type:E.type,isActive:E.isActive,coverageType:E.coverageType||void 0,coverageRegions:E.coverageRegions||[],coverageDepartments:E.coverageDepartments||[],solutionsOffered:E.solutionsOffered||[],estimatedMarketSharePercent:E.estimatedMarketSharePercent||"",avgContractDurationMonths:E.avgContractDurationMonths||60,typicalPricingTier:E.typicalPricingTier||void 0,strengths:E.strengths||"",weaknesses:E.weaknesses||"",notes:E.notes||""})},y=E=>{a?j.mutate({id:a.id,data:E}):v.mutate(E)},A=()=>{l&&g.mutate(l.id)},P=E=>({national:"National",regional:"Rgional",local:"Local"})[E]||E;return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Uo,{className:"w-8 h-8 text-primary"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900","data-testid":"page-title",children:"Gestion des Concurrents"})]}),r.jsx("p",{className:"text-gray-600",children:"Rfrentiel des concurrents (nationaux, rgionaux, locaux) pour le suivi des chances"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[r.jsxs("div",{className:"flex-1 min-w-[300px] relative",children:[r.jsx(ls,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx(ge,{placeholder:"Rechercher un concurrent...",value:t,onChange:E=>n(E.target.value),className:"pl-10","data-testid":"input-search-concurrent"})]}),r.jsxs(re,{onClick:w,"data-testid":"button-create-concurrent",children:[r.jsx(dr,{className:"w-4 h-4 mr-2"}),"Nouveau concurrent"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs(U,{children:[r.jsx(ne,{className:"pb-2",children:r.jsx(se,{className:"text-sm text-gray-600",children:"Total"})}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total",children:p.length})})]}),r.jsxs(U,{children:[r.jsx(ne,{className:"pb-2",children:r.jsx(se,{className:"text-sm text-gray-600",children:"Actifs"})}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"stat-active",children:p.filter(E=>E.isActive).length})})]}),r.jsxs(U,{children:[r.jsx(ne,{className:"pb-2",children:r.jsx(se,{className:"text-sm text-gray-600",children:"Nationaux"})}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold text-blue-600","data-testid":"stat-national",children:p.filter(E=>E.type==="national").length})})]}),r.jsxs(U,{children:[r.jsx(ne,{className:"pb-2",children:r.jsx(se,{className:"text-sm text-gray-600",children:"Rgionaux"})}),r.jsx(Z,{children:r.jsx("div",{className:"text-2xl font-bold text-orange-600","data-testid":"stat-regional",children:p.filter(E=>E.type==="regional").length})})]})]}),h?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),r.jsx("p",{className:"text-gray-600 mt-4",children:"Chargement des concurrents..."})]}):r.jsx(U,{children:r.jsxs(Qa,{children:[r.jsx(Ya,{children:r.jsxs(_r,{children:[r.jsx(kt,{children:"Nom"}),r.jsx(kt,{children:"Type"}),r.jsx(kt,{children:"Statut"}),r.jsx(kt,{children:"Part de march"}),r.jsx(kt,{children:"Tarification"}),r.jsx(kt,{className:"text-right",children:"Actions"})]})}),r.jsxs(Xa,{children:[x.map(E=>r.jsxs(_r,{"data-testid":`row-concurrent-${E.id}`,children:[r.jsx(Ct,{className:"font-medium",children:E.name}),r.jsx(Ct,{children:r.jsx(ve,{variant:"outline",children:P(E.type)})}),r.jsx(Ct,{children:E.isActive?r.jsx(ve,{className:"bg-green-100 text-green-800",children:"Actif"}):r.jsx(ve,{variant:"secondary",children:"Inactif"})}),r.jsx(Ct,{children:E.estimatedMarketSharePercent?`${E.estimatedMarketSharePercent}%`:"-"}),r.jsx(Ct,{children:E.typicalPricingTier?r.jsx(ve,{variant:"outline",children:E.typicalPricingTier.toUpperCase()}):"-"}),r.jsx(Ct,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>N(E),"data-testid":`button-edit-${E.id}`,children:r.jsx(Ii,{className:"w-4 h-4"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>c(E),"data-testid":`button-delete-${E.id}`,children:r.jsx(Ns,{className:"w-4 h-4 text-red-600"})})]})})]},E.id)),x.length===0&&r.jsx(_r,{children:r.jsx(Ct,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Aucun concurrent trouv"})})]})]})}),r.jsx(Wn,{open:s||!!a,onOpenChange:E=>{E||(i(!1),o(null),d.reset())},children:r.jsxs(Fn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(zn,{children:[r.jsx(Bn,{children:a?"Modifier le concurrent":"Nouveau concurrent"}),r.jsx(Za,{children:a?"Modifiez les informations du concurrent":"Ajoutez un nouveau concurrent au rfrentiel"})]}),r.jsx(Fu,{...d,children:r.jsxs("form",{onSubmit:d.handleSubmit(y),className:"space-y-4",children:[r.jsx(we,{control:d.control,name:"name",render:({field:E})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Nom du concurrent *"}),r.jsx(Se,{children:r.jsx(ge,{...E,"data-testid":"input-concurrent-name"})}),r.jsx(ke,{})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(we,{control:d.control,name:"type",render:({field:E})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Type *"}),r.jsxs(gt,{value:E.value,onValueChange:E.onChange,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-concurrent-type",children:r.jsx(xt,{})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"national",children:"National"}),r.jsx(Y,{value:"regional",children:"Rgional"}),r.jsx(Y,{value:"local",children:"Local"})]})]}),r.jsx(ke,{})]})}),r.jsx(we,{control:d.control,name:"isActive",render:({field:E})=>r.jsxs(_e,{className:"flex items-center gap-2 space-y-0 pt-8",children:[r.jsx(Se,{children:r.jsx(Zr,{checked:E.value,onCheckedChange:E.onChange,"data-testid":"checkbox-is-active"})}),r.jsx(Ne,{className:"!mt-0",children:"Concurrent actif"}),r.jsx(ke,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(we,{control:d.control,name:"estimatedMarketSharePercent",render:({field:E})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Part de march estime (%)"}),r.jsx(Se,{children:r.jsx(ge,{type:"number",step:"0.01",...E,"data-testid":"input-market-share"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:d.control,name:"typicalPricingTier",render:({field:E})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Niveau de tarification"}),r.jsxs(gt,{value:E.value,onValueChange:E.onChange,children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-pricing-tier",children:r.jsx(xt,{placeholder:"Slectionner..."})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"low",children:"Bas"}),r.jsx(Y,{value:"medium",children:"Moyen"}),r.jsx(Y,{value:"high",children:"lev"}),r.jsx(Y,{value:"premium",children:"Premium"})]})]}),r.jsx(ke,{})]})})]}),r.jsx(we,{control:d.control,name:"avgContractDurationMonths",render:({field:E})=>{var C;return r.jsxs(_e,{children:[r.jsx(Ne,{children:"Dure contrat moyenne (mois)"}),r.jsxs(gt,{value:(C=E.value)==null?void 0:C.toString(),onValueChange:S=>E.onChange(parseInt(S)),children:[r.jsx(Se,{children:r.jsx(mt,{"data-testid":"select-avg-contract-duration",children:r.jsx(xt,{})})}),r.jsxs(pt,{children:[r.jsx(Y,{value:"12",children:"12 mois"}),r.jsx(Y,{value:"24",children:"24 mois"}),r.jsx(Y,{value:"36",children:"36 mois"}),r.jsx(Y,{value:"48",children:"48 mois"}),r.jsx(Y,{value:"60",children:"60 mois"}),r.jsx(Y,{value:"72",children:"72 mois"})]})]}),r.jsx(ke,{})]})}}),r.jsx(we,{control:d.control,name:"solutionsOffered",render:()=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Solutions proposes"}),r.jsx(rr,{children:"Slectionnez les solutions proposes par ce concurrent"}),r.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[{value:"alarme_intrusion",label:"Alarme intrusion"},{value:"telesurveillance_classique",label:"Tlsurveillance"},{value:"intervention_gardien",label:"Intervention gardien"},{value:"videosurveillance",label:"Vidosurveillance"},{value:"controle_acces",label:"Contrle d'accs"},{value:"detection_incendie",label:"Dtection incendie"}].map(E=>r.jsx(we,{control:d.control,name:"solutionsOffered",render:({field:C})=>{const S=C.value||[];return r.jsxs(_e,{className:"flex items-center gap-2 space-y-0",children:[r.jsx(Se,{children:r.jsx(Zr,{checked:S.includes(E.value),onCheckedChange:k=>{const I=k?[...S,E.value]:S.filter(R=>R!==E.value);C.onChange(I)},"data-testid":`checkbox-solution-${E.value}`})}),r.jsx(Ne,{className:"!mt-0 font-normal",children:E.label})]})}},E.value))}),r.jsx(ke,{})]})}),r.jsx(we,{control:d.control,name:"strengths",render:({field:E})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Points forts"}),r.jsx(Se,{children:r.jsx(Dn,{...E,placeholder:"Liste des points forts identifis...","data-testid":"textarea-strengths"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:d.control,name:"weaknesses",render:({field:E})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Points faibles"}),r.jsx(Se,{children:r.jsx(Dn,{...E,placeholder:"Liste des points faibles identifis...","data-testid":"textarea-weaknesses"})}),r.jsx(ke,{})]})}),r.jsx(we,{control:d.control,name:"notes",render:({field:E})=>r.jsxs(_e,{children:[r.jsx(Ne,{children:"Notes internes"}),r.jsx(Se,{children:r.jsx(Dn,{...E,placeholder:"Notes et remarques internes...","data-testid":"textarea-notes"})}),r.jsx(ke,{})]})}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(re,{type:"button",variant:"outline",onClick:()=>{i(!1),o(null),d.reset()},"data-testid":"button-cancel",children:"Annuler"}),r.jsx(re,{type:"submit",disabled:v.isPending||j.isPending,"data-testid":"button-submit",children:a?"Enregistrer":"Crer"})]})]})})]})}),r.jsx(x7,{open:!!l,onOpenChange:E=>!E&&c(null),children:r.jsxs(PA,{children:[r.jsxs(AA,{children:[r.jsx(TA,{children:"Supprimer ce concurrent ?"}),r.jsxs(kA,{children:["tes-vous sr de vouloir supprimer ",r.jsx("strong",{children:l==null?void 0:l.name})," ?",r.jsx("br",{}),r.jsx("br",{}),r.jsx("span",{className:"text-red-600",children:"Cette action est irrversible et impossible s'il existe des situations lies."})]})]}),r.jsxs(EA,{children:[r.jsx(MA,{"data-testid":"button-cancel-delete",children:"Annuler"}),r.jsx(OA,{onClick:A,className:"bg-red-600 hover:bg-red-700","data-testid":"button-confirm-delete",children:"Supprimer"})]})]})})]})}function D5e(){return r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:r.jsx(U,{className:"w-full max-w-md mx-4",children:r.jsxs(Z,{className:"pt-6",children:[r.jsxs("div",{className:"flex mb-4 gap-2",children:[r.jsx(Br,{className:"h-8 w-8 text-red-500"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),r.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function $5e(){const[e,t]=_.useState(null),[n,s]=_.useState(!1);_.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const o=localStorage.getItem("pwa-install-dismissed");if(o){const d=(Date.now()-parseInt(o))/864e5;if(d<7){console.log("[PWA] Install prompt en cooldown:",Math.round(7-d),"jours restants");return}}if(localStorage.getItem("pwa-installed")==="true")return;let l;const c=d=>{d.preventDefault(),t(d),l||(l=window.setTimeout(()=>{s(!0)},3e4))};return window.addEventListener("beforeinstallprompt",c),()=>{window.removeEventListener("beforeinstallprompt",c),l&&clearTimeout(l)}},[]);const i=async()=>{if(!e)return;e.prompt();const{outcome:o}=await e.userChoice;console.log("[PWA] Installation:",o),o==="accepted"?localStorage.setItem("pwa-installed","true"):localStorage.setItem("pwa-install-dismissed",Date.now().toString()),t(null),s(!1)},a=()=>{s(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return!n||!e?null:r.jsxs("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:w-96 bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-4 z-50 border border-gray-200 dark:border-gray-700",children:[r.jsx("button",{onClick:a,className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","data-testid":"button-dismiss-pwa-prompt",children:r.jsx(dc,{size:20})}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx(nP,{className:"text-white",size:24})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Installer Hector CRM"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Accdez  Hector CRM comme une app native, avec notifications et mode offline."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:i,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:shadow-lg transition","data-testid":"button-install-pwa",children:"Installer"}),r.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200","data-testid":"button-dismiss-pwa",children:"Plus tard"})]})]})]})]})}function bi({children:e}){const t=_.useMemo(()=>({"--sidebar-width":"16rem","--sidebar-width-icon":"3rem"}),[]);return r.jsx(Fle,{style:t,children:r.jsxs("div",{className:"flex h-screen w-full",children:[r.jsx(Qle,{}),r.jsxs("div",{className:"flex flex-col flex-1",children:[r.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-2 p-4 border-b bg-background",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ble,{"data-testid":"button-sidebar-toggle"}),r.jsx("h1",{className:"text-lg font-semibold",children:"Administration Hector"})]}),r.jsx(mr,{showHomeButton:!0})]}),r.jsx("main",{className:"flex-1 overflow-auto",children:e})]})]})})}function F5e(){const{isAuthenticated:e,isLoading:t}=ya(),[n,s]=es();return _.useEffect(()=>{const a=["/login","/forgot-password","/reset-password","/admin-reset","/accept-invite","/debug"].some(o=>n.startsWith(o))||n==="/";!t&&!e&&!a&&(console.log(`[Router] Redirecting unauthenticated user from ${n} to /login`),s("/login"))},[e,t,n,s]),t?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsx("div",{className:"text-muted-foreground",children:"Chargement..."})}):r.jsxs(yJ,{children:[r.jsx(Tt,{path:"/debug",component:Doe}),e?r.jsxs(r.Fragment,{children:[r.jsx(Tt,{path:"/",component:aO}),r.jsx(Tt,{path:"/home",component:aO}),r.jsx(Tt,{path:"/admin",children:r.jsx(bJ,{to:"/admin/users"})}),r.jsx(Tt,{path:"/admin/api-security",component:ple}),r.jsx(Tt,{path:"/admin/learning",component:Ole}),r.jsx(Tt,{path:"/admin/dashboard",children:r.jsx(bi,{children:r.jsx(IIe,{})})}),r.jsx(Tt,{path:"/admin/organizations",children:r.jsx(bi,{children:r.jsx(B4e,{})})}),r.jsx(Tt,{path:"/admin/teams",children:r.jsx(bi,{children:r.jsx(S$e,{})})}),r.jsx(Tt,{path:"/admin/audit-logs",children:r.jsx(bi,{children:r.jsx(A$e,{})})}),r.jsx(Tt,{path:"/admin/users",children:r.jsx(bi,{children:r.jsx(O$e,{})})}),r.jsx(Tt,{path:"/admin/phone-config",children:r.jsx(bi,{children:r.jsx(X3e,{})})}),r.jsx(Tt,{path:"/admin/phone-config-dynamic",children:r.jsx(bi,{children:r.jsx(t5e,{})})}),r.jsx(Tt,{path:"/admin/gps",children:r.jsx(bi,{children:r.jsx(o5e,{})})}),r.jsx(Tt,{path:"/admin/supervision-equipe",children:r.jsx(bi,{children:r.jsx(T5e,{})})}),r.jsx(Tt,{path:"/admin/ocr-analytics",children:r.jsx(bi,{children:r.jsx(M5e,{})})}),r.jsx(Tt,{path:"/admin/analytics",children:r.jsx(bi,{children:r.jsx(I5e,{})})}),r.jsx(Tt,{path:"/admin/concurrents",children:r.jsx(bi,{children:r.jsx(L5e,{})})}),r.jsx(Tt,{path:"/appointments",component:Roe}),r.jsx(Tt,{path:"/crm",component:DL}),r.jsx(Tt,{path:"/crm/dashboard",component:DL}),r.jsx(Tt,{path:"/crm/prospects",component:F$e}),r.jsx(Tt,{path:"/crm/prospects-a-qualifier",component:z$e}),r.jsx(Tt,{path:"/crm/opportunities",component:B$e}),r.jsx(Tt,{path:"/crm/opportunities-module/:id",component:J$e}),r.jsx(Tt,{path:"/crm/opportunities-module",component:Z$e}),r.jsx(Tt,{path:"/crm/competitor-module",component:i3e}),r.jsx(Tt,{path:"/crm/actions",component:a3e}),r.jsx(Tt,{path:"/crm/rdvs",component:o3e}),r.jsx(Tt,{path:"/crm/affaires-chaudes",component:l3e}),r.jsx(Tt,{path:"/crm/transferts",component:c3e}),r.jsx(Tt,{path:"/crm/workflow",component:g3e}),r.jsx(Tt,{path:"/crm/batch-import",component:b3e}),r.jsx(Tt,{path:"/crm/stats",component:j3e}),r.jsx(Tt,{path:"/phoning",component:G3e}),r.jsx(Tt,{path:"/phoning/analytics",component:Q3e}),r.jsx(Tt,{path:"/prospection/campagnes",component:S3e}),r.jsx(Tt,{path:"/prospection/campagnes/nouvelle",component:D3e}),r.jsx(Tt,{path:"/prospection/analytics",component:C3e}),r.jsx(Tt,{path:"/test/phone-enrichment",component:F3e}),r.jsx(Tt,{path:"/test/enrichment",component:V3e}),r.jsx(Tt,{path:"/gps/track",component:O5e}),r.jsx(Tt,{component:D5e})]}):r.jsxs(r.Fragment,{children:[r.jsx(Tt,{path:"/",component:oO}),r.jsx(Tt,{path:"/login",component:oO}),r.jsx(Tt,{path:"/forgot-password",component:Moe}),r.jsx(Tt,{path:"/reset-password",component:Ioe}),r.jsx(Tt,{path:"/admin-reset",component:Loe}),r.jsx(Tt,{path:"/accept-invite",component:$oe})]})]})}function z5e(){return r.jsx(zJ,{client:et,children:r.jsxs(sB,{children:[r.jsx(F5e,{}),r.jsx(tne,{}),r.jsx($5e,{})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("[PWA] Service Worker enregistr:",e.scope),setInterval(()=>{e.update()},60*60*1e3)}).catch(e=>{console.error("[PWA] Erreur enregistrement SW:",e)})});o6(document.getElementById("root")).render(r.jsx(z5e,{}));
